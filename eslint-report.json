[{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\admin\\content\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\admin\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'usePathname' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":21},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\admin\\layout.tsx:23:26\n  21 |\n  22 |     useEffect(() => {\n> 23 |         if (currentView) setActiveModule(currentView);\n     |                          ^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  24 |     }, [currentView]);\n  25 |\n  26 |     const handleTabChange = (moduleId: AdminModule) => {","line":23,"column":26,"nodeType":null,"endLine":23,"endColumn":41}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState, useEffect, ReactNode, Suspense } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname, useRouter, useSearchParams } from 'next/navigation';\r\n\r\ntype AdminRole = 'super_admin' | 'incorporation_team' | 'launchpad_team' | 'content_team';\r\ntype AdminModule = 'business_setup' | 'launch_pad' | 'learn' | 'workspace';\r\n\r\ninterface AdminLayoutProps {\r\n    children: ReactNode;\r\n}\r\n\r\nfunction AdminLayoutContent({ children }: AdminLayoutProps) {\r\n    const [activeRole, setActiveRole] = useState<AdminRole>('super_admin');\r\n    const searchParams = useSearchParams();\r\n    const router = useRouter();\r\n    const currentView = searchParams.get('view') as AdminModule || 'workspace';\r\n    \r\n    // Sync state with URL\r\n    const [activeModule, setActiveModule] = useState<AdminModule>(currentView);\r\n\r\n    useEffect(() => {\r\n        if (currentView) setActiveModule(currentView);\r\n    }, [currentView]);\r\n\r\n    const handleTabChange = (moduleId: AdminModule) => {\r\n        setActiveModule(moduleId);\r\n        router.push(`/admin?view=${moduleId}`);\r\n    };\r\n\r\n    // Module definitions with their accessible roles\r\n    const modules: { id: AdminModule; label: string; icon: string; roles: AdminRole[] }[] = [\r\n        { id: 'business_setup', label: 'Business Setup', icon: 'business', roles: ['super_admin', 'incorporation_team'] },\r\n        { id: 'launch_pad', label: 'Launch Pad', icon: 'rocket_launch', roles: ['super_admin', 'launchpad_team'] },\r\n        { id: 'learn', label: 'Learn', icon: 'school', roles: ['super_admin', 'content_team'] },\r\n        { id: 'workspace', label: 'Workspace', icon: 'workspaces', roles: ['super_admin', 'incorporation_team', 'launchpad_team', 'content_team'] },\r\n    ];\r\n\r\n    // Sidebar items based on active module\r\n    const getSidebarItems = () => {\r\n        switch (activeModule) {\r\n            case 'business_setup':\r\n                return [\r\n                    { href: '/admin?view=business_setup', label: 'Incorporation Leads', icon: 'list_alt' },\r\n                    { href: '/admin/applications', label: 'Applications', icon: 'assignment' },\r\n                    { href: '/admin/compliance', label: 'Compliance', icon: 'gavel' },\r\n                    { href: '/admin/documents', label: 'Document Vault', icon: 'folder_shared' },\r\n                ];\r\n            case 'launch_pad':\r\n                return [\r\n                    { href: '/admin?view=launch_pad', label: 'Service Catalog', icon: 'grid_view' },\r\n                    { href: '/admin/partners', label: 'Partner Network', icon: 'handshake' },\r\n                    { href: '/admin/integrations', label: 'Integrations', icon: 'extension' },\r\n                ];\r\n            case 'learn':\r\n                return [\r\n                    { href: '/admin?view=learn', label: 'Course Manager', icon: 'class' },\r\n                    { href: '/admin/articles', label: 'Knowledge Base', icon: 'article' },\r\n                    { href: '/admin/quizzes', label: 'Quizzes & Certs', icon: 'quiz' },\r\n                ];\r\n            case 'workspace':\r\n                return [\r\n                    { href: '/admin?view=workspace', label: 'CRM Dashboard', icon: 'dashboard' }, // Mapping current page here\r\n                    { href: '/admin/tasks', label: 'My Tasks', icon: 'check_circle' },\r\n                    { href: '/admin/calendar', label: 'Calendar', icon: 'calendar_today' },\r\n                    { href: '/admin/team', label: 'Team Chat', icon: 'forum' },\r\n                    { href: '/admin/analytics', label: 'Analytics', icon: 'analytics' },\r\n                    { href: '/admin/settings', label: 'Global Settings', icon: 'settings_applications' },\r\n                ];\r\n            default:\r\n                return [];\r\n        }\r\n    };\r\n\r\n    const sidebarItems = getSidebarItems();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 flex flex-col font-sans text-slate-900\">\r\n            {/* ── Top Navigation Header ── */}\r\n            <header className=\"h-16 bg-slate-900 text-white flex items-center justify-between px-4 shadow-md z-20 flex-shrink-0\">\r\n                <div className=\"flex items-center gap-8\">\r\n                    {/* Logo Area */}\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center font-bold text-white\">S</div>\r\n                        <div>\r\n                            <span className=\"font-bold text-lg tracking-tight\">SetMyBizz</span>\r\n                            <span className=\"text-[10px] text-slate-400 block -mt-1 uppercase tracking-widest\">Master Admin</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Main Module Tabs */}\r\n                    <nav className=\"hidden md:flex items-center gap-1\">\r\n                        {modules.map((mod) => {\r\n                            if (!mod.roles.includes(activeRole)) return null;\r\n                            const isActive = activeModule === mod.id;\r\n                            return (\r\n                                <button\r\n                                    key={mod.id}\r\n                                    onClick={() => handleTabChange(mod.id)}\r\n                                    className={`flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wider transition-all ${\r\n                                        isActive \r\n                                            ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' \r\n                                            : 'text-slate-400 hover:text-white hover:bg-slate-800'\r\n                                    }`}\r\n                                >\r\n                                    <span className=\"material-icons text-sm\">{mod.icon}</span>\r\n                                    {mod.label}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </nav>\r\n                </div>\r\n\r\n                {/* Right Side: Role Switcher & Profile */}\r\n                <div className=\"flex items-center gap-4\">\r\n                    {/* Role Switcher (For Demo/Design purposes) */}\r\n                    <div className=\"hidden lg:flex items-center gap-2 bg-slate-800 rounded-lg p-1 pr-3 border border-slate-700\">\r\n                        <span className=\"bg-slate-900 text-[10px] font-bold text-slate-400 px-2 py-1 rounded uppercase tracking-wider\">View As</span>\r\n                        <select \r\n                            value={activeRole} \r\n                            onChange={(e) => {\r\n                                const newRole = e.target.value as AdminRole;\r\n                                setActiveRole(newRole);\r\n                                // Reset module if current one is not allowed\r\n                                const mod = modules.find(m => m.id === activeModule);\r\n                                if (!mod?.roles.includes(newRole)) {\r\n                                    handleTabChange('workspace'); // Fallback\r\n                                }\r\n                            }}\r\n                            className=\"bg-transparent text-xs font-bold text-indigo-400 focus:outline-none cursor-pointer\"\r\n                        >\r\n                            <option value=\"super_admin\">Super Admin</option>\r\n                            <option value=\"incorporation_team\">Incorp Team</option>\r\n                            <option value=\"launchpad_team\">Launchpad Team</option>\r\n                            <option value=\"content_team\">Content Team</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"w-px h-8 bg-slate-800 mx-2\" />\r\n\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"text-right hidden sm:block\">\r\n                            <p className=\"text-xs font-bold text-white\">Mahendra</p>\r\n                            <p className=\"text-[10px] text-slate-400\">Super Admin</p>\r\n                        </div>\r\n                        <div className=\"w-9 h-9 rounded-full bg-gradient-to-r from-pink-500 to-rose-500 flex items-center justify-center text-xs font-bold shadow-lg ring-2 ring-slate-800\">\r\n                            MK\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n\r\n            {/* ── Main Layout Body ── */}\r\n            <div className=\"flex flex-1 overflow-hidden\">\r\n                {/* ── Dynamic Sidebar ── */}\r\n                <aside className=\"w-64 bg-white border-r border-slate-200 flex-shrink-0 flex flex-col z-10\">\r\n                    <div className=\"p-4 border-b border-slate-100 bg-slate-50\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1\">Current Context</p>\r\n                        <h2 className=\"text-sm font-black text-slate-800 flex items-center gap-2\">\r\n                            <span className=\"material-icons text-indigo-600 text-base\">\r\n                                {modules.find(m => m.id === activeModule)?.icon}\r\n                            </span>\r\n                            {modules.find(m => m.id === activeModule)?.label} Panel\r\n                        </h2>\r\n                    </div>\r\n\r\n                    <nav className=\"flex-1 p-3 space-y-1 overflow-y-auto\">\r\n                        {sidebarItems.map((item) => (\r\n                            <Link \r\n                                key={item.label} \r\n                                href={item.href}\r\n                                className=\"flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-indigo-600 transition-all group\"\r\n                            >\r\n                                <span className=\"material-icons text-xl text-slate-400 group-hover:text-indigo-500 transition-colors\">{item.icon}</span>\r\n                                <span className=\"text-xs font-bold\">{item.label}</span>\r\n                            </Link>\r\n                        ))}\r\n                    </nav>\r\n\r\n                    {/* Stats / Widget Area in Sidebar */}\r\n                    <div className=\"p-4 bg-slate-50 border-t border-slate-100\">\r\n                        <div className=\"bg-white rounded-xl p-3 shadow-sm border border-slate-100\">\r\n                            <p className=\"text-[10px] font-bold text-slate-400 mb-1\">System Status</p>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"w-2 h-2 rounded-full bg-emerald-500 animate-pulse\" />\r\n                                <span className=\"text-xs font-bold text-slate-700\">All Systems Operational</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </aside>\r\n\r\n                {/* ── Page Content ── */}\r\n                <main className=\"flex-1 overflow-y-auto bg-slate-50/50 p-6 relative\">\r\n                    {/* Background decoration */}\r\n                    <div className=\"absolute top-0 left-0 w-full h-40 bg-gradient-to-b from-white to-transparent pointer-events-none\" />\r\n                    \r\n                    {/* Render Children (Current Page) */}\r\n                    <div className=\"relative z-10 max-w-7xl mx-auto\">\r\n                        {/* We can inject a breadcrumb here dynamically if needed */}\r\n                        <div className=\"mb-6 flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider\">\r\n                            <span>Admin</span>\r\n                            <span className=\"material-icons text-[10px]\">chevron_right</span>\r\n                            <span className=\"text-indigo-600\">{modules.find(m => m.id === activeModule)?.label}</span>\r\n                        </div>\r\n                        \r\n                        {children}\r\n                    </div>\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function AdminLayout({ children }: AdminLayoutProps) {\r\n    return (\r\n        <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center bg-slate-100 text-slate-400\">Loading Admin...</div>}>\r\n            <AdminLayoutContent>{children}</AdminLayoutContent>\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\admin\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used.","line":5,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":62},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\admin\\page.tsx:76:82\n  74 |                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n  75 |                      {['GST Registration', 'Trademark', 'FSSAI License', 'Web Development'].map((svc, i) => (\n> 76 |                          <DashboardCard key={i} title={svc} value={`${Math.floor(Math.random() * 50)} Orders`} icon=\"shopping_bag\" color=\"indigo\" />\n     |                                                                                  ^^^^^^^^^^^^^ Cannot call impure function\n  77 |                      ))}\n  78 |                  </div>\n  79 |             </div>","line":76,"column":82,"nodeType":null,"endLine":76,"endColumn":95},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":232,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13275,13278],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13275,13278],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'color' is defined but never used.","line":248,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":248,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":248,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14355,14358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14355,14358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'colorMap' is assigned a value but never used.","line":249,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":249,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":249,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":249,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14383,14386],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14383,14386],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState, useEffect, Suspense } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, query, orderBy, onSnapshot, limit, where } from 'firebase/firestore';\r\nimport { Lead } from '@/types';\r\n\r\n// ─── Sub-Dashboard Components ───\r\n\r\nfunction BusinessSetupDashboard() {\r\n    return (\r\n        <div className=\"space-y-6 animate-in slide-in-from-bottom-4 duration-500\">\r\n            {/* Stats Row */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                <DashboardStat title=\"Pending Applications\" value=\"12\" icon=\"pending_actions\" color=\"amber\" />\r\n                <DashboardStat title=\"DSC Processing\" value=\"4\" icon=\"fingerprint\" color=\"indigo\" />\r\n                <DashboardStat title=\"Name Approval\" value=\"7\" icon=\"check_circle\" color=\"green\" />\r\n                <DashboardStat title=\"Queries Raised\" value=\"2\" icon=\"help\" color=\"rose\" />\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                <div className=\"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-100 p-6\">\r\n                    <div className=\"flex justify-between items-center mb-6\">\r\n                         <h3 className=\"font-bold text-slate-800\">Recent Applications</h3>\r\n                         <button className=\"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-lg hover:bg-indigo-100\">View All</button>\r\n                    </div>\r\n                    {/* Placeholder Table */}\r\n                    <div className=\"space-y-3\">\r\n                        {[1, 2, 3].map(i => (\r\n                            <div key={i} className=\"flex items-center justify-between p-3 bg-slate-50 rounded-xl hover:bg-slate-100 cursor-pointer transition-colors\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-500\">AB</div>\r\n                                    <div>\r\n                                        <p className=\"text-xs font-bold text-slate-900\">Alpha Business LLP</p>\r\n                                        <p className=\"text-[10px] text-slate-400\">Pvt Ltd • Maharashtra</p>\r\n                                    </div>\r\n                                </div>\r\n                                <span className=\"text-[10px] font-bold bg-amber-100 text-amber-600 px-2 py-1 rounded-full uppercase tracking-wider\">In Progress</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"bg-white rounded-2xl shadow-sm border border-slate-100 p-6\">\r\n                    <h3 className=\"font-bold text-slate-800 mb-4\">Team Activity</h3>\r\n                    <div className=\"space-y-4\">\r\n                         {/* Activity Items */}\r\n                         <div className=\"flex gap-3\">\r\n                             <div className=\"w-2 h-2 mt-1.5 rounded-full bg-indigo-500\" />\r\n                             <div>\r\n                                 <p className=\"text-xs text-slate-600\"><span className=\"font-bold text-slate-900\">Sarah</span> updated DSC status for <span className=\"font-bold text-slate-900\">TechFlow Inc</span></p>\r\n                                 <p className=\"text-[10px] text-slate-400 mt-1\">2 mins ago</p>\r\n                             </div>\r\n                         </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LaunchPadDashboard() {\r\n    return (\r\n        <div className=\"space-y-6 animate-in slide-in-from-bottom-4 duration-500\">\r\n             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <DashboardStat title=\"Total Service Revenue\" value=\"₹4.2L\" icon=\"payments\" color=\"emerald\" />\r\n                <DashboardStat title=\"Active Partners\" value=\"18\" icon=\"handshake\" color=\"blue\" />\r\n                <DashboardStat title=\"New Requests\" value=\"34\" icon=\"new_releases\" color=\"purple\" />\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-slate-100 p-6\">\r\n                 <h3 className=\"font-bold text-slate-800 mb-6\">Service Catalog Performance</h3>\r\n                 <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                     {['GST Registration', 'Trademark', 'FSSAI License', 'Web Development'].map((svc, i) => (\r\n                         <DashboardCard key={i} title={svc} value={`${Math.floor(Math.random() * 50)} Orders`} icon=\"shopping_bag\" color=\"indigo\" />\r\n                     ))}\r\n                 </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LearnDashboard() {\r\n    return (\r\n        <div className=\"space-y-6 animate-in slide-in-from-bottom-4 duration-500\">\r\n             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <DashboardStat title=\"Total Students\" value=\"154\" icon=\"school\" color=\"orange\" />\r\n                <DashboardStat title=\"Course Completions\" value=\"85%\" icon=\"emoji_events\" color=\"yellow\" />\r\n                <DashboardStat title=\"Content Views\" value=\"1.2K\" icon=\"visibility\" color=\"cyan\" />\r\n            </div>\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                 <div className=\"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm\">\r\n                     <h3 className=\"font-bold text-slate-800 mb-4\">Top Performing Courses</h3>\r\n                 </div>\r\n                 <div className=\"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm\">\r\n                     <h3 className=\"font-bold text-slate-800 mb-4\">Content Calendar</h3>\r\n                 </div>\r\n             </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// 1. Workspace Dashboard (The Main CRM)\r\nfunction WorkspaceDashboard() {\r\n    const [leads, setLeads] = useState<Lead[]>([]);\r\n    \r\n    useEffect(() => {\r\n        const q = query(\r\n            collection(db, \"leads\"),\r\n            orderBy(\"createdAt\", \"desc\"),\r\n            limit(20)\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const leadsData = snapshot.docs.map(doc => ({\r\n                leadId: doc.id, // Assuming doc.id should be mapped to leadId\r\n                ...doc.data()\r\n            })) as Lead[];\r\n            setLeads(leadsData);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-in slide-in-from-bottom-4 duration-500\">\r\n             {/* CRM Stats */}\r\n             <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                <DashboardStat title=\"Total Leads\" value={leads.length.toString()} icon=\"groups\" color=\"indigo\" />\r\n                <DashboardStat title=\"Hot Leads\" value={leads.filter(l => l.status === 'new').length.toString()} icon=\"local_fire_department\" color=\"rose\" />\r\n                <DashboardStat title=\"Conversion Rate\" value=\"12%\" icon=\"trending_up\" color=\"emerald\" />\r\n                <DashboardStat title=\"Avg. Deal Size\" value=\"₹18k\" icon=\"attach_money\" color=\"blue\" />\r\n            </div>\r\n\r\n            {/* Live Feed Table */}\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden\">\r\n                <div className=\"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50\">\r\n                    <div>\r\n                        <h3 className=\"font-bold text-slate-800\">Live Lead Feed</h3>\r\n                        <p className=\"text-xs text-slate-400\">Real-time updates from user onboarding</p>\r\n                    </div>\r\n                    <button className=\"text-xs font-bold bg-slate-900 text-white px-3 py-2 rounded-lg hover:bg-slate-700 transition-colors\">Export CSV</button>\r\n                </div>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                        <thead className=\"bg-slate-50\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-3 text-left text-[10px] font-black text-slate-400 uppercase tracking-widest\">User</th>\r\n                                <th className=\"px-6 py-3 text-left text-[10px] font-black text-slate-400 uppercase tracking-widest\">Business</th>\r\n                                <th className=\"px-6 py-3 text-left text-[10px] font-black text-slate-400 uppercase tracking-widest\">Status</th>\r\n                                <th className=\"px-6 py-3 text-left text-[10px] font-black text-slate-400 uppercase tracking-widest\">Date</th>\r\n                                <th className=\"px-6 py-3 text-right text-[10px] font-black text-slate-400 uppercase tracking-widest\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-slate-100\">\r\n                            {leads.map((lead) => (\r\n                                <tr key={lead.leadId} className=\"hover:bg-slate-50/80 transition-colors group\">\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-100 to-indigo-200 text-indigo-700 flex items-center justify-center font-bold text-xs ring-2 ring-white shadow-sm\">\r\n                                                {lead.businessData?.name?.charAt(0) || 'U'}\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"text-sm font-bold text-slate-900\">{lead.businessData?.name || 'Unknown User'}</p>\r\n                                                <p className=\"text-[10px] text-slate-500\">{lead.contact?.email || 'No Email'}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"material-icons text-slate-300 text-sm\">business</span>\r\n                                            <span className=\"text-xs font-semibold text-slate-700\">{lead.businessData?.businessName || 'N/A'}</span>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <span className={`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider ${\r\n                                            lead.status === 'new' ? 'bg-indigo-50 text-indigo-600' : 'bg-slate-100 text-slate-500'\r\n                                        }`}>\r\n                                            <span className={`w-1.5 h-1.5 rounded-full ${lead.status === 'new' ? 'bg-indigo-500' : 'bg-slate-400'}`} />\r\n                                            {lead.status || 'New'}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-xs font-semibold text-slate-500 lowercase\">\r\n                                        {lead.createdAt ? new Date(lead.createdAt.seconds * 1000).toLocaleDateString() : 'Just now'}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-right\">\r\n                                        <button className=\"text-slate-400 hover:text-indigo-600 transition-colors\">\r\n                                            <span className=\"material-icons text-lg\">more_vert</span>\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Component Switcher ───\r\n\r\nfunction AdminPageContent() {\r\n    const searchParams = useSearchParams();\r\n    const view = searchParams.get('view') || 'workspace';\r\n\r\n    switch (view) {\r\n        case 'business_setup':\r\n            return <BusinessSetupDashboard />;\r\n        case 'launch_pad':\r\n            return <LaunchPadDashboard />;\r\n        case 'learn':\r\n            return <LearnDashboard />;\r\n        case 'workspace':\r\n        default:\r\n            return <WorkspaceDashboard />;\r\n    }\r\n}\r\n\r\nexport default function AdminPage() {\r\n    return (\r\n        <Suspense fallback={<div className=\"flex items-center justify-center p-12\"><span className=\"material-icons animate-spin text-slate-400\">sync</span></div>}>\r\n             <AdminPageContent />\r\n        </Suspense>\r\n    );\r\n}\r\n\r\n// ─── Helpers ───\r\n\r\nfunction DashboardStat({ title, value, icon, color }: { title: string, value: string, icon: string, color: string }) {\r\n     const colorMap: any = { indigo: 'text-indigo-600 bg-indigo-50', emerald: 'text-emerald-600 bg-emerald-50', amber: 'text-amber-600 bg-amber-50', rose: 'text-rose-600 bg-rose-50', blue: 'text-blue-600 bg-blue-50', purple: 'text-purple-600 bg-purple-50', orange: 'text-orange-600 bg-orange-50', yellow: 'text-yellow-600 bg-yellow-50', cyan: 'text-cyan-600 bg-cyan-50' };\r\n     const style = colorMap[color] || colorMap.indigo;\r\n\r\n    return (\r\n        <div className=\"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-4 hover:scale-[1.02] transition-transform\">\r\n            <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${style}`}>\r\n                <span className=\"material-icons text-2xl\">{icon}</span>\r\n            </div>\r\n            <div>\r\n                <p className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-0.5\">{title}</p>\r\n                <p className=\"text-2xl font-black text-slate-900\">{value}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction DashboardCard({ title, value, icon, color }: any) {\r\n    const colorMap: any = { indigo: 'text-indigo-600 bg-indigo-50' }; \r\n    return (\r\n        <div className=\"bg-slate-50 p-4 rounded-xl border border-slate-100 hover:bg-white hover:shadow-sm transition-all text-center\">\r\n             <div className=\"w-10 h-10 mx-auto bg-white rounded-full flex items-center justify-center shadow-sm text-indigo-600 mb-2\">\r\n                 <span className=\"material-icons\">{icon}</span>\r\n             </div>\r\n             <p className=\"text-xs font-bold text-slate-400\">{title}</p>\r\n             <p className=\"text-lg font-black text-slate-800\">{value}</p>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\admin\\security\\logs\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\ai-cofounder-claude\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'chatId' is assigned a value but never used.","line":10,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[757,760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[757,760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[918,921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[918,921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3526,3529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3526,3529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4304,4307],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4304,4307],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4614,4617],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4614,4617],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5631,5634],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5631,5634],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const {\r\n            message,\r\n            chatId,\r\n            projectId,\r\n            projectName,\r\n            mode,\r\n            conversationHistory,\r\n            connectedTools\r\n        } = await req.json();\r\n\r\n        const modelToUse = mode === 'deep' ? 'gemini-1.5-pro' : 'gemini-1.5-flash';\r\n        const model = genAI.getGenerativeModel({ model: modelToUse });\r\n\r\n        // Build enhanced prompt with tool context\r\n        const toolsContext = connectedTools\r\n            ?.map((t: any) => `- ${t.name}`)\r\n            ?.join('\\n') || 'None';\r\n\r\n        const historyText = conversationHistory\r\n            ?.slice(-6)\r\n            ?.map((msg: any) => `${msg.role === 'user' ? 'User' : 'AI'}: ${msg.content}`)\r\n            ?.join('\\n') || 'None';\r\n\r\n        const prompt = `You are an AI Co-Founder in a Claude.ai-style interface helping with business tasks.\r\n\r\nPROJECT CONTEXT:\r\n- Project: ${projectName || 'General'}\r\n- Project ID: ${projectId}\r\n\r\nCONNECTED TOOLS:\r\n${toolsContext}\r\n\r\nYOUR CAPABILITIES:\r\n1. Generate artifacts (images, documents, charts, tables, code)\r\n2. Create content for export to Google Workspace (Docs, Slides, Sheets, CSV)\r\n3. Recommend tools from the dashboard for specific tasks\r\n4. Provide strategic business advice\r\n\r\nARTIFACT GENERATION:\r\nWhen you create something visual or structured, respond with:\r\n[ARTIFACT:type:name:content]\r\n\r\nTypes: image, document, code, chart, table\r\nExample: [ARTIFACT:document:Business Plan:# Business Plan\\n\\nExecutive Summary...]\r\n\r\nTOOL RECOMMENDATIONS:\r\nWhen a task needs a specific tool, recommend it:\r\n[TOOL_RECOMMEND:toolId:toolName:reason]\r\n\r\nExample: [TOOL_RECOMMEND:crm:CRM:To manage customer relationships for this campaign]\r\n\r\nCONVERSATION HISTORY:\r\n${historyText}\r\n\r\nUSER MESSAGE: ${message}\r\n\r\nAI CO-FOUNDER RESPONSE:`;\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const rawResponse = result.response.text();\r\n\r\n        // Parse artifacts\r\n        const artifactRegex = /\\[ARTIFACT:(\\w+):([^:]+):([^\\]]+)\\]/g;\r\n        const artifacts = [];\r\n        let artifactMatch: RegExpExecArray | null;\r\n\r\n        while ((artifactMatch = artifactRegex.exec(rawResponse)) !== null) {\r\n            artifacts.push({\r\n                id: `artifact-${Date.now()}-${artifacts.length}`,\r\n                type: artifactMatch[1],\r\n                name: artifactMatch[2],\r\n                content: artifactMatch[3],\r\n                url: artifactMatch[1] === 'image' ? `/api/placeholder-image?text=${encodeURIComponent(artifactMatch[2])}` : undefined,\r\n                exportFormats: getExportFormats(artifactMatch[1])\r\n            });\r\n        }\r\n\r\n        // Parse tool recommendations\r\n        const toolRegex = /\\[TOOL_RECOMMEND:([^:]+):([^:]+):([^\\]]+)\\]/g;\r\n        const toolRecommendations = [];\r\n        let toolMatch: RegExpExecArray | null;\r\n\r\n        while ((toolMatch = toolRegex.exec(rawResponse)) !== null) {\r\n            const toolId = toolMatch[1];\r\n            const toolName = toolMatch[2];\r\n            const reason = toolMatch[3];\r\n\r\n            toolRecommendations.push({\r\n                toolId,\r\n                toolName,\r\n                toolIcon: getToolIcon(toolId),\r\n                reason,\r\n                connected: connectedTools.some((t: any) => t.id === toolId && t.status === 'connected'),\r\n                canConnect: true\r\n            });\r\n        }\r\n\r\n        // Clean response\r\n        const cleanResponse = rawResponse\r\n            .replace(artifactRegex, '')\r\n            .replace(toolRegex, '')\r\n            .trim();\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            response: cleanResponse,\r\n            artifacts: artifacts.length > 0 ? artifacts : undefined,\r\n            toolRecommendations: toolRecommendations.length > 0 ? toolRecommendations : undefined,\r\n            metadata: {\r\n                model: modelToUse,\r\n                mode,\r\n                projectId,\r\n                timestamp: new Date().toISOString()\r\n            }\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('AI Co-Founder Claude API error:', error);\r\n        return NextResponse.json({\r\n            success: false,\r\n            error: error.message || 'Failed to generate response'\r\n        }, { status: 500 });\r\n    }\r\n}\r\n\r\nfunction getExportFormats(type: string) {\r\n    const formats: any = {\r\n        image: [\r\n            { type: 'png', icon: 'image', label: 'PNG' },\r\n            { type: 'jpg', icon: 'image', label: 'JPG' },\r\n            { type: 'pdf', icon: 'picture_as_pdf', label: 'PDF' }\r\n        ],\r\n        document: [\r\n            { type: 'docs', icon: 'description', label: 'Google Docs' },\r\n            { type: 'pdf', icon: 'picture_as_pdf', label: 'PDF' }\r\n        ],\r\n        table: [\r\n            { type: 'sheets', icon: 'table_chart', label: 'Google Sheets' },\r\n            { type: 'csv', icon: 'table_view', label: 'CSV' }\r\n        ],\r\n        chart: [\r\n            { type: 'slides', icon: 'slideshow', label: 'Google Slides' },\r\n            { type: 'sheets', icon: 'table_chart', label: 'Google Sheets' },\r\n            { type: 'png', icon: 'image', label: 'PNG' }\r\n        ],\r\n        code: [\r\n            { type: 'docs', icon: 'description', label: 'Google Docs' }\r\n        ]\r\n    };\r\n\r\n    return formats[type] || [];\r\n}\r\n\r\nfunction getToolIcon(toolId: string) {\r\n    const icons: any = {\r\n        crm: 'people',\r\n        analytics: 'analytics',\r\n        gmail: 'mail',\r\n        calendar: 'event',\r\n        sheets: 'table_chart',\r\n        drive: 'cloud',\r\n        tasks: 'task',\r\n        forms: 'assignment'\r\n    };\r\n\r\n    return icons[toolId] || 'extension';\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\ai-cofounder\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'model' is assigned a value but never used.","line":24,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3382,3385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3382,3385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4024,4027],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4024,4027],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4055,4058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4055,4058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4361,4364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4361,4364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":229,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":229,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8009,8012],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8009,8012],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { SecurityGuard } from '@/lib/security-guard';\r\nimport { db } from '@/lib/firebase';\r\nimport { doc, setDoc, updateDoc, arrayUnion, serverTimestamp, getDoc } from 'firebase/firestore';\r\n\r\n// Initialize Gemini AI\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');\r\n\r\nexport async function POST(req: NextRequest) {\r\n    const startTime = Date.now();\r\n    let tokensUsed = 0;\r\n\r\n    try {\r\n        const {\r\n            message,\r\n            businessProfile,\r\n            conversationHistory,\r\n            userId = 'anonymous',\r\n            userRole = 'user',\r\n            chatId,\r\n            chatName,\r\n            mode = 'quick',\r\n            model = 'gemini-1.5-flash',\r\n            replyingTo\r\n        } = await req.json();\r\n\r\n        // LAYER 1: Security Guard - Input Validation\r\n        const securityCheck = SecurityGuard.validateInput(message, userId, userRole);\r\n\r\n        if (!securityCheck.allowed) {\r\n            console.warn('Security check failed:', { userId, reason: securityCheck.reason });\r\n            return NextResponse.json({\r\n                response: securityCheck.reason || 'Invalid request',\r\n                success: false,\r\n                blocked: true,\r\n                riskLevel: securityCheck.riskLevel\r\n            }, { status: 400 });\r\n        }\r\n\r\n        // Use sanitized input\r\n        const sanitizedMessage = securityCheck.sanitizedInput || message;\r\n\r\n        // Select model based on mode\r\n        // Quick Mode: gemini-1.5-flash (faster, lighter)\r\n        // Deep Mode: gemini-1.5-pro (more capable, detailed analysis)\r\n        const modelToUse = mode === 'deep' ? 'gemini-1.5-pro' : 'gemini-1.5-flash';\r\n        const geminiModel = genAI.getGenerativeModel({ model: modelToUse });\r\n\r\n        // Build context-aware system prompt with chat context\r\n        const systemPrompt = buildSystemPrompt(\r\n            sanitizedMessage,\r\n            businessProfile,\r\n            conversationHistory,\r\n            mode,\r\n            chatName,\r\n            replyingTo\r\n        );\r\n\r\n        // Estimate tokens (rough)\r\n        tokensUsed = Math.ceil(systemPrompt.length / 4);\r\n\r\n        // Generate AI response\r\n        const result = await geminiModel.generateContent(systemPrompt);\r\n        const rawResponse = result.response.text();\r\n\r\n        // LAYER 2: Security Guard - Output Filtering\r\n        const filteredResponse = SecurityGuard.filterOutput(rawResponse, userRole);\r\n\r\n        // Save to memory system (for context persistence)\r\n        if (chatId) {\r\n            await saveToMemory(userId, chatId, sanitizedMessage, filteredResponse);\r\n        }\r\n\r\n        // Log interaction for monitoring\r\n        SecurityGuard.logInteraction(userId, sanitizedMessage, filteredResponse, tokensUsed);\r\n\r\n        const responseTime = Date.now() - startTime;\r\n\r\n        return NextResponse.json({\r\n            response: filteredResponse.trim(),\r\n            success: true,\r\n            timestamp: new Date().toISOString(),\r\n            metadata: {\r\n                responseTime: `${responseTime}ms`,\r\n                tokensUsed,\r\n                cached: false,\r\n                model: modelToUse,\r\n                mode: mode,\r\n                chatId: chatId\r\n            }\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('AI Co-Founder API error:', error);\r\n\r\n        // Handle specific errors\r\n        if (error.message?.includes('API_KEY')) {\r\n            return NextResponse.json({\r\n                error: 'API key not configured. Please add GEMINI_API_KEY to .env.local',\r\n                success: false\r\n            }, { status: 500 });\r\n        }\r\n\r\n        return NextResponse.json({\r\n            error: error.message || 'Failed to generate response',\r\n            success: false\r\n        }, { status: 500 });\r\n    }\r\n}\r\n\r\n// Build context-aware prompt\r\nfunction buildSystemPrompt(\r\n    message: string,\r\n    businessProfile: any,\r\n    conversationHistory: any[],\r\n    mode: string = 'quick',\r\n    chatName?: string,\r\n    replyingTo?: string\r\n): string {\r\n    const profile = businessProfile || {};\r\n\r\n    // Build conversation history string\r\n    const historyText = conversationHistory\r\n        ?.slice(-6) // Last 3 exchanges (6 messages)\r\n        ?.map((msg: any) => `${msg.role === 'user' ? 'User' : 'AI'}: ${msg.content}`)\r\n        ?.join('\\n') || 'None';\r\n\r\n    const modeInstruction = mode === 'deep'\r\n        ? `\\nMODE: DEEP ANALYSIS\r\n- Provide comprehensive, detailed responses\r\n- Include step-by-step breakdowns\r\n- Offer multiple perspectives and options\r\n- Use examples and case studies when relevant\r\n- Go deeper into strategic implications`\r\n        : `\\nMODE: QUICK CHAT\r\n- Keep responses concise and actionable (2-4 sentences)\r\n- Focus on immediate next steps\r\n- Be direct and to the point`;\r\n\r\n    const chatContext = chatName ? `\\nCURRENT CHAT: ${chatName}` : '';\r\n    const replyContext = replyingTo ? `\\n[User is replying to a previous message - provide contextual follow-up]` : '';\r\n\r\n    return `You are an AI Co-Founder helping a business owner in India.\r\n\r\nBUSINESS CONTEXT:\r\n- Business Name: ${profile.businessName || 'Not provided'}\r\n- Industry: ${profile.industry || 'General business'}\r\n- Team Size: ${profile.teamSize || 'Not specified'}\r\n- Main Challenges: ${profile.challenges?.join(', ') || 'Not specified'}\r\n- Business Goals: ${profile.goals?.join(', ') || 'Not specified'}\r\n- Sales Channels: ${profile.channels?.join(', ') || 'Not specified'}\r\n- Current Tools: ${profile.currentTools?.join(', ') || 'Not specified'}\r\n${chatContext}\r\n\r\nYOUR ROLE:\r\nYou are a helpful, friendly business advisor who gives practical, actionable advice.\r\n- Give specific, India-relevant advice (use ₹, mention GST, Indian platforms, etc.)\r\n${modeInstruction}\r\n- Be encouraging and supportive\r\n- If you suggest an action, explain HOW to do it\r\n- Use simple language, avoid jargon\r\n- For e-commerce: suggest platforms like Razorpay, Shiprocket, Instagram Shopping\r\n- For compliance: mention GST, TDS, accounting tools like Tally/Zoho\r\n- For marketing: suggest WhatsApp Business, Instagram, Facebook ads\r\n\r\nCONVERSATION STYLE:\r\n- Friendly but professional\r\n- Use emojis sparingly (1-2 per message)\r\n- Ask follow-up questions when needed\r\n- Offer to help with next steps\r\n\r\nRECENT CONVERSATION:\r\n${historyText}\r\n${replyContext}\r\n\r\nUSER MESSAGE: ${message}\r\n\r\nAI CO-FOUNDER RESPONSE:`;\r\n}\r\n\r\n// Memory system for context persistence\r\nasync function saveToMemory(\r\n    userId: string,\r\n    chatId: string,\r\n    userMessage: string,\r\n    aiResponse: string\r\n): Promise<void> {\r\n    try {\r\n        const chatRef = doc(db, 'chats', chatId);\r\n        \r\n        // Define messages\r\n        const userMsg = {\r\n           role: 'user',\r\n           content: userMessage,\r\n           timestamp: new Date().toISOString()\r\n        };\r\n        \r\n        const aiMsg = {\r\n           role: 'assistant',\r\n           content: aiResponse,\r\n           timestamp: new Date().toISOString()\r\n        };\r\n\r\n        // Check if document exists\r\n        const chatDoc = await getDoc(chatRef);\r\n\r\n        if (chatDoc.exists()) {\r\n            // Update existing chat\r\n            await updateDoc(chatRef, {\r\n                messages: arrayUnion(userMsg, aiMsg),\r\n                lastUpdated: serverTimestamp(),\r\n                messageCount: (chatDoc.data().messageCount || 0) + 2\r\n            });\r\n        } else {\r\n            // Create new chat\r\n            await setDoc(chatRef, {\r\n                chatId,\r\n                userId,\r\n                messages: [userMsg, aiMsg],\r\n                createdAt: serverTimestamp(),\r\n                lastUpdated: serverTimestamp(),\r\n                title: 'New Conversation', // Can use AI to generate title later\r\n                messageCount: 2\r\n            });\r\n        }\r\n\r\n        console.log(`[Memory] Saved interaction for user: ${userId}, chat: ${chatId}`);\r\n    } catch (error: any) {\r\n        console.error('[Memory] Failed to save:', error?.message || error);\r\n    }\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\crm-webhook\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1139,1142],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1139,1142],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { appendToSheet } from '@/lib/googleSheets';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { user, businessData, guestId } = await req.json();\r\n\r\n    if (!user && !guestId) {\r\n        return NextResponse.json({ error: \"Missing identity\" }, { status: 400 });\r\n    }\r\n\r\n    console.log('[CRM] Received lead update:', user?.uid || guestId);\r\n    \r\n    // 1. Google Sheets Sync\r\n    // Format: [Date, Lead ID, Name, Phone, Email, Business Name, Industry, Status]\r\n    const row = [\r\n        new Date().toISOString(),\r\n        user?.uid || guestId || 'Unknown',\r\n        user?.displayName || 'Guest',\r\n        businessData.contact?.phone || '',\r\n        user?.email || '',\r\n        businessData.name || '',\r\n        businessData.industry || '',\r\n        'New'\r\n    ];\r\n\r\n    const result = await appendToSheet(row);\r\n\r\n    if (result) {\r\n        return NextResponse.json({ success: true, message: 'CRM Sync Successful' });\r\n    } else {\r\n        return NextResponse.json({ success: false, error: 'Google Sheet Sync Failed' }, { status: 500 });\r\n    }\r\n\r\n  } catch (error: any) {\r\n    console.error('[CRM] Sync Error:', error.message || error);\r\n    return NextResponse.json({ success: false, error: 'Internal Server Error' }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\export-artifact\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectId' is assigned a value but never used.","line":5,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[571,574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[571,574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1303,1306],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1303,1306],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1610,1613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1610,1613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectName' is defined but never used.","line":51,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2234,2237],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2234,2237],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectName' is defined but never used.","line":70,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2603,2606],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2603,2606],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectName' is defined but never used.","line":81,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":92,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2953,2956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2953,2956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectName' is defined but never used.","line":92,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'csvContent' is assigned a value but never used.","line":96,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3419,3422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3419,3422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectName' is defined but never used.","line":106,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":106,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3740,3743],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3740,3743],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectName' is defined but never used.","line":117,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":127,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4010,4013],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4010,4013],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'projectName' is defined but never used.","line":127,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":127,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4286,4289],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4286,4289],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const { artifact, format, projectId, projectName } = await req.json();\r\n\r\n        console.log('Export artifact request:', {\r\n            artifactName: artifact.name,\r\n            artifactType: artifact.type,\r\n            exportFormat: format,\r\n            project: projectName\r\n        });\r\n\r\n        // Here you would integrate with Google Workspace APIs\r\n        // For now, we'll simulate the export process\r\n\r\n        const exportHandlers: any = {\r\n            docs: exportToGoogleDocs,\r\n            slides: exportToGoogleSlides,\r\n            sheets: exportToGoogleSheets,\r\n            csv: exportToCSV,\r\n            pdf: exportToPDF,\r\n            png: exportToPNG,\r\n            jpg: exportToJPG\r\n        };\r\n\r\n        const handler = exportHandlers[format];\r\n        if (!handler) {\r\n            throw new Error(`Unsupported export format: ${format}`);\r\n        }\r\n\r\n        const result = await handler(artifact, projectName);\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            url: result.url,\r\n            fileId: result.fileId,\r\n            message: `Successfully exported to ${getFormatLabel(format)}`\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('Export artifact error:', error);\r\n        return NextResponse.json({\r\n            success: false,\r\n            error: error.message || 'Failed to export artifact'\r\n        }, { status: 500 });\r\n    }\r\n}\r\n\r\n// Export to Google Docs\r\nasync function exportToGoogleDocs(artifact: any, projectName: string) {\r\n    // TODO: Integrate with Google Docs API\r\n    // const auth = await getGoogleAuth();\r\n    // const docs = google.docs({ version: 'v1', auth });\r\n    // const doc = await docs.documents.create({\r\n    //     requestBody: {\r\n    //         title: `${projectName} - ${artifact.name}`,\r\n    //     },\r\n    // });\r\n\r\n    console.log('Exporting to Google Docs:', artifact.name);\r\n\r\n    return {\r\n        url: `https://docs.google.com/document/d/simulated-doc-id`,\r\n        fileId: `simulated-doc-${Date.now()}`\r\n    };\r\n}\r\n\r\n// Export to Google Slides\r\nasync function exportToGoogleSlides(artifact: any, projectName: string) {\r\n    // TODO: Integrate with Google Slides API\r\n    console.log('Exporting to Google Slides:', artifact.name);\r\n\r\n    return {\r\n        url: `https://docs.google.com/presentation/d/simulated-slides-id`,\r\n        fileId: `simulated-slides-${Date.now()}`\r\n    };\r\n}\r\n\r\n// Export to Google Sheets\r\nasync function exportToGoogleSheets(artifact: any, projectName: string) {\r\n    // TODO: Integrate with Google Sheets API\r\n    console.log('Exporting to Google Sheets:', artifact.name);\r\n\r\n    return {\r\n        url: `https://docs.google.com/spreadsheets/d/simulated-sheets-id`,\r\n        fileId: `simulated-sheets-${Date.now()}`\r\n    };\r\n}\r\n\r\n// Export to CSV\r\nasync function exportToCSV(artifact: any, projectName: string) {\r\n    console.log('Exporting to CSV:', artifact.name);\r\n\r\n    // Convert artifact content to CSV format\r\n    const csvContent = artifact.content; // In real implementation, parse and format as CSV\r\n\r\n    // In real implementation, save to Google Drive or local storage\r\n    return {\r\n        url: `/api/download/csv/${artifact.id}`,\r\n        fileId: `csv-${Date.now()}`\r\n    };\r\n}\r\n\r\n// Export to PDF\r\nasync function exportToPDF(artifact: any, projectName: string) {\r\n    console.log('Exporting to PDF:', artifact.name);\r\n\r\n    // TODO: Use a PDF generation library like jsPDF or Puppeteer\r\n    return {\r\n        url: `/api/download/pdf/${artifact.id}`,\r\n        fileId: `pdf-${Date.now()}`\r\n    };\r\n}\r\n\r\n// Export to PNG\r\nasync function exportToPNG(artifact: any, projectName: string) {\r\n    console.log('Exporting to PNG:', artifact.name);\r\n\r\n    return {\r\n        url: artifact.url || `/api/download/png/${artifact.id}`,\r\n        fileId: `png-${Date.now()}`\r\n    };\r\n}\r\n\r\n// Export to JPG\r\nasync function exportToJPG(artifact: any, projectName: string) {\r\n    console.log('Exporting to JPG:', artifact.name);\r\n\r\n    return {\r\n        url: artifact.url || `/api/download/jpg/${artifact.id}`,\r\n        fileId: `jpg-${Date.now()}`\r\n    };\r\n}\r\n\r\nfunction getFormatLabel(format: string) {\r\n    const labels: any = {\r\n        docs: 'Google Docs',\r\n        slides: 'Google Slides',\r\n        sheets: 'Google Sheets',\r\n        csv: 'CSV',\r\n        pdf: 'PDF',\r\n        png: 'PNG',\r\n        jpg: 'JPG'\r\n    };\r\n\r\n    return labels[format] || format.toUpperCase();\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\export-to-drive\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'url' is assigned a value but never used.","line":5,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'type' is assigned a value but never used.","line":5,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1034,1037],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1034,1037],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const { url, name, type = 'file' } = await req.json();\r\n\r\n        // In production, this would integrate with Google Drive API\r\n        // For now, we'll return a success response\r\n\r\n        // Google Drive API integration would look like:\r\n        // 1. Authenticate with Google OAuth\r\n        // 2. Upload file using Google Drive API\r\n        // 3. Set appropriate permissions\r\n        // 4. Return Drive file ID and link\r\n\r\n        console.log(`[Export] Exporting ${name} to Google Drive`);\r\n\r\n        // Simulated success response\r\n        return NextResponse.json({\r\n            success: true,\r\n            message: `Successfully exported ${name} to Google Drive`,\r\n            driveFileId: `drive-${Date.now()}`, // Placeholder\r\n            driveLink: `https://drive.google.com/file/d/${Date.now()}`, // Placeholder\r\n            timestamp: new Date().toISOString()\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('[Export] Google Drive export error:', error);\r\n        return NextResponse.json({\r\n            success: false,\r\n            error: error.message || 'Failed to export to Google Drive'\r\n        }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\gemini\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\global-leads\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\leads\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2669,2672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2669,2672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3641,3644],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3641,3644],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, addDoc, serverTimestamp, getDocs, query, orderBy, limit } from 'firebase/firestore';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport { appendToSheet } from '@/lib/googleSheets';\r\n\r\n// Initialize Gemini\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { name, email, phone, businessName, nature, source = 'api' } = body;\r\n\r\n        // 1. Validation\r\n        if (!phone && !email) {\r\n            return NextResponse.json({ error: \"Email or Phone is required\" }, { status: 400 });\r\n        }\r\n\r\n        // 2. AI Analysis (Optional)\r\n        let aiSummary = \"\";\r\n        if (nature && process.env.GEMINI_API_KEY) {\r\n            try {\r\n                const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n                const prompt = `Analyze this business nature: '${nature}'. Provide a 1-sentence expert recommendation for incorporation structure (Pvt Ltd, LLP, or Proprietorship).`;\r\n                const result = await model.generateContent(prompt);\r\n                aiSummary = result.response.text();\r\n            } catch (e) {\r\n                console.error(\"AI Error:\", e);\r\n            }\r\n        }\r\n\r\n        // 3. Save to Firestore\r\n        const leadData = {\r\n            name: name || 'Guest',\r\n            email: email || '',\r\n            phone: phone || '',\r\n            businessData: {\r\n                name: businessName || '',\r\n                industry: nature || '',\r\n            },\r\n            aiSummary,\r\n            source,\r\n            createdAt: serverTimestamp(),\r\n            status: 'new',\r\n            interestScore: 10,\r\n            metadata: body.metadata || {},\r\n        };\r\n\r\n        const docRef = await addDoc(collection(db, \"leads\"), leadData);\r\n\r\n        // 4. Sync to Google Sheets\r\n        // Format: [Date, Lead ID, Name, Phone, Email, Business Name, Industry, Status, AI Summary]\r\n        const sheetRow = [\r\n            new Date().toISOString(),\r\n            docRef.id,\r\n            name || 'Guest',\r\n            phone || '',\r\n            email || '',\r\n            businessName || '',\r\n            nature || '',\r\n            'New',\r\n            aiSummary\r\n        ];\r\n        \r\n        await appendToSheet(sheetRow);\r\n\r\n        return NextResponse.json({ \r\n            success: true, \r\n            id: docRef.id, \r\n            aiSummary,\r\n            message: \"Lead created and synced.\" \r\n        }, { status: 201 });\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Lead API Error:\", error);\r\n        return NextResponse.json({ error: error.message || \"Internal Server Error\" }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function GET(request: Request) {\r\n    // Basic Admin Protection (Check for specific header or query param)\r\n    // TODO: Integrate with Auth Middleware later\r\n    const { searchParams } = new URL(request.url);\r\n    const secret = searchParams.get('secret');\r\n\r\n    if (secret !== process.env.ADMIN_SECRET_KEY && process.env.NODE_ENV === 'production') {\r\n        return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\r\n    }\r\n\r\n    try {\r\n        const q = query(collection(db, \"leads\"), orderBy(\"createdAt\", \"desc\"), limit(50));\r\n        const querySnapshot = await getDocs(q);\r\n        const leads = querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data()\r\n        }));\r\n\r\n        return NextResponse.json({ leads });\r\n    } catch (error: any) {\r\n        console.error(\"Fetch Leads Error:\", error);\r\n        return NextResponse.json({ error: \"Failed to fetch leads\" }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\master-leads\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\oracle\\chat\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1740,1743],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1740,1743],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const { message, chatId, conversationHistory, mode } = await request.json();\r\n\r\n        if (!message) {\r\n            return NextResponse.json({\r\n                success: false,\r\n                error: 'Message is required'\r\n            }, { status: 400 });\r\n        }\r\n\r\n        const model = genAI.getGenerativeModel({ model: 'gemini-1.5-flash' });\r\n\r\n        // Build context from conversation history\r\n        let contextPrompt = `You are Oracle, an AI Co-Founder for SetMyBizz platform. You are a strategic business advisor specializing in:\r\n\r\n- Sales & Marketing Strategy\r\n- Business Development\r\n- Financial Planning & Analysis\r\n- Operations Management\r\n- Product Development\r\n- Content Creation\r\n- Data Analysis\r\n\r\nYou can:\r\n• Generate images, documents, spreadsheets, presentations\r\n• Connect with Google Workspace (Sheets, Docs, Slides, Gmail)\r\n• Integrate with ERP systems (Tally, Zoho, SAP)\r\n• Create invoices, brochures, reports\r\n• Analyze data and provide insights\r\n• Design marketing campaigns\r\n• Draft business plans\r\n\r\nPersonality:\r\n- Professional yet friendly\r\n- Strategic thinker\r\n- Action-oriented\r\n- Provide specific, actionable advice\r\n- Keep responses concise ${mode === 'quick' ? '(2-3 sentences max for quick mode)' : ''}\r\n- Use emojis sparingly but effectively\r\n\r\n`;\r\n\r\n        if (conversationHistory && conversationHistory.length > 0) {\r\n            contextPrompt += \"\\n\\nPrevious conversation:\\n\";\r\n            conversationHistory.forEach((msg: any) => {\r\n                const role = (msg.role === 'oracle' || msg.role === 'rkle') ? 'Oracle' : 'User';\r\n                contextPrompt += `${role}: ${msg.content}\\n`;\r\n            });\r\n        }\r\n\r\n        contextPrompt += `\\n\\nUser: ${message}\\nOracle:`;\r\n\r\n        const result = await model.generateContent(contextPrompt);\r\n        const response = result.response;\r\n        const responseText = response.text();\r\n\r\n        // Clean up the response\r\n        const cleanedResponse = responseText\r\n            .replace(/^Oracle:\\s*/i, '')\r\n            .replace(/\\*\\*/g, '')\r\n            .trim();\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            response: cleanedResponse,\r\n            chatId,\r\n            timestamp: new Date().toISOString()\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error('Oracle API Error:', error);\r\n\r\n        return NextResponse.json({\r\n            success: false,\r\n            error: 'Failed to process request',\r\n            details: error instanceof Error ? error.message : 'Unknown error'\r\n        }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function GET() {\r\n    return NextResponse.json({\r\n        name: 'Oracle AI Co-Founder',\r\n        version: '1.0.0',\r\n        status: 'online',\r\n        capabilities: [\r\n            'Chat assistance',\r\n            'Business strategy',\r\n            'Content generation',\r\n            'Data analysis',\r\n            'App integrations'\r\n        ]\r\n    });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\register-lead\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\api\\security\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1654,1657],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1654,1657],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\r\nimport { SecurityGuard } from '@/lib/security-guard';\r\n\r\n// Security monitoring endpoint (admin only)\r\nexport async function GET(req: NextRequest) {\r\n    try {\r\n        // TODO: Add proper authentication\r\n        // For now, check for admin token\r\n        const authHeader = req.headers.get('authorization');\r\n        const adminToken = process.env.ADMIN_SECRET_TOKEN || 'dev-admin-token';\r\n\r\n        if (authHeader !== `Bearer ${adminToken}`) {\r\n            return NextResponse.json({\r\n                error: 'Unauthorized',\r\n                success: false\r\n            }, { status: 401 });\r\n        }\r\n\r\n        // Get query parameters\r\n        const url = new URL(req.url);\r\n        const action = url.searchParams.get('action') || 'stats';\r\n        const limit = parseInt(url.searchParams.get('limit') || '100');\r\n\r\n        switch (action) {\r\n            case 'stats':\r\n                const stats = SecurityGuard.getSecurityStats();\r\n                return NextResponse.json({\r\n                    success: true,\r\n                    data: stats\r\n                });\r\n\r\n            case 'logs':\r\n                const logs = SecurityGuard.getAuditLogs(limit);\r\n                return NextResponse.json({\r\n                    success: true,\r\n                    data: logs,\r\n                    count: logs.length\r\n                });\r\n\r\n            default:\r\n                return NextResponse.json({\r\n                    error: 'Invalid action. Use ?action=stats or ?action=logs',\r\n                    success: false\r\n                }, { status: 400 });\r\n        }\r\n\r\n    } catch (error: any) {\r\n        console.error('Security monitoring error:', error);\r\n        return NextResponse.json({\r\n            error: error.message || 'Failed to get security data',\r\n            success: false\r\n        }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\components\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\components\\ServiceCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":1,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'href' is defined but never used.","line":10,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\r\n\r\ninterface ServiceCardProps {\r\n    title: string;\r\n    description: string;\r\n    icon: React.ReactNode;\r\n    href: string;\r\n}\r\n\r\nexport const ServiceCard = ({ title, description, icon, href }: ServiceCardProps) => {\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group\">\r\n            <div className=\"h-12 w-12 rounded-xl bg-blue-50 flex items-center justify-center text-blue-600 mb-4 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-300\">\r\n                {icon}\r\n            </div>\r\n            <h3 className=\"text-xl font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors\">{title}</h3>\r\n            <p className=\"text-slate-500 mb-6 text-sm leading-relaxed\">{description}</p>\r\n\r\n            <div className=\"flex items-center text-blue-600 font-semibold text-sm group/link\">\r\n                <span className=\"mr-2\">Get Started</span>\r\n                <svg className=\"w-4 h-4 transform group-hover/link:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n                </svg>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\dashboard-a\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Target' is defined but never used.","line":4,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from 'react';\r\nimport { Navbar } from '@/app/components/Navbar';\r\nimport { ArrowLeft, Rocket, Zap, Shield, Target } from 'lucide-react';\r\nimport Link from 'next/link';\r\n\r\nexport default function LaunchPad() {\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-900 text-white selection:bg-purple-600/30\">\r\n            <Navbar />\r\n\r\n            <main className=\"pt-24 px-6 pb-20 max-w-6xl mx-auto\">\r\n                <Link href=\"/dashboard\" className=\"text-slate-400 font-bold text-sm mb-6 inline-flex items-center hover:text-white transition-colors\">\r\n                    <ArrowLeft className=\"w-4 h-4 mr-2\" /> Back to Dashboard\r\n                </Link>\r\n\r\n                <header className=\"mb-12 text-center\">\r\n                    <span className=\"bg-purple-600/20 text-purple-300 border border-purple-500/30 px-3 py-1 rounded-full text-xs font-black uppercase tracking-widest mb-4 inline-block\">Dashboard A</span>\r\n                    <h1 className=\"text-4xl md:text-6xl font-black italic mb-6 bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600\">\r\n                        Your Launch Pad\r\n                    </h1>\r\n                    <p className=\"text-slate-400 max-w-2xl mx-auto text-lg\">\r\n                        Your comprehensive roadmap to launching and scaling your business. Unlock tools as you grow.\r\n                    </p>\r\n                </header>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                    {/* Feature 1 */}\r\n                    <div className=\"bg-white/5 backdrop-blur-sm border border-white/10 p-8 rounded-[32px] hover:bg-white/10 transition-all hover:scale-[1.02] group cursor-pointer\">\r\n                        <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center mb-6 shadow-lg shadow-purple-500/20 group-hover:shadow-purple-500/40\">\r\n                            <Rocket className=\"w-7 h-7 text-white\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold mb-3\">Growth Blueprint</h3>\r\n                        <p className=\"text-slate-400 mb-6 leading-relaxed\">AI-generated roadmap tailored to your specific industry and stage.</p>\r\n                        <div className=\"w-full bg-white/10 h-1.5 rounded-full overflow-hidden\">\r\n                            <div className=\"bg-purple-500 h-full w-3/4\"></div>\r\n                        </div>\r\n                        <p className=\"text-xs text-purple-300 mt-2 font-bold\">75% Ready</p>\r\n                    </div>\r\n\r\n                    {/* Feature 2 */}\r\n                    <div className=\"bg-white/5 backdrop-blur-sm border border-white/10 p-8 rounded-[32px] hover:bg-white/10 transition-all hover:scale-[1.02] group cursor-pointer\">\r\n                        <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center mb-6 shadow-lg shadow-pink-500/20 group-hover:shadow-pink-500/40\">\r\n                            <Zap className=\"w-7 h-7 text-white\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold mb-3\">Expert Connect</h3>\r\n                        <p className=\"text-slate-400 mb-6 leading-relaxed\">Book 1:1 sessions with CA, CS, and legal experts instantly.</p>\r\n                        <button className=\"w-full py-3 rounded-xl bg-white/10 hover:bg-white/20 font-bold transition-all text-sm\">Find Experts</button>\r\n                    </div>\r\n\r\n                    {/* Feature 3 */}\r\n                    <div className=\"bg-white/5 backdrop-blur-sm border border-white/10 p-8 rounded-[32px] hover:bg-white/10 transition-all hover:scale-[1.02] group cursor-pointer\">\r\n                        <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center mb-6 shadow-lg shadow-cyan-500/20 group-hover:shadow-cyan-500/40\">\r\n                            <Shield className=\"w-7 h-7 text-white\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold mb-3\">Compliance Shield</h3>\r\n                        <p className=\"text-slate-400 mb-6 leading-relaxed\">Automated alerts for GST, TDS, and annual filing deadlines.</p>\r\n                        <div className=\"flex -space-x-2\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-slate-700 border-2 border-slate-800\"></div>\r\n                            <div className=\"w-8 h-8 rounded-full bg-slate-600 border-2 border-slate-800\"></div>\r\n                            <div className=\"w-8 h-8 rounded-full bg-slate-500 border-2 border-slate-800 flex items-center justify-center text-[10px] font-bold\">+2</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\incorporation\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\layout.tsx","messages":[{"ruleId":"@next/next/no-page-custom-font","severity":1,"message":"Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font","line":22,"column":9,"nodeType":"JSXOpeningElement","endLine":22,"endColumn":145}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from 'next';\nimport { Inter } from 'next/font/google';\nimport './globals.css';\nimport { AuthProvider } from '@/context/AuthContext';\n\nconst inter = Inter({ subsets: ['latin'] });\n\nexport const metadata: Metadata = {\n  title: 'SetMyBizz AI Dashboard',\n  description: 'AI-Powered Business Operation System',\n};\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Round|Material+Icons+Outlined\" rel=\"stylesheet\" />\n        <link href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap\" rel=\"stylesheet\" />\n      </head>\n      <body className={inter.className}>\n        <AuthProvider>\n          {children}\n        </AuthProvider>\n      </body>\n    </html>\n  );\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\onboarding\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\workspace\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2167,2170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2167,2170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4725,4728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4725,4728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":119,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7277,7294],"text":"Founder&apos;s Academy"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7277,7294],"text":"Founder&lsquo;s Academy"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7277,7294],"text":"Founder&#39;s Academy"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7277,7294],"text":"Founder&rsquo;s Academy"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9169,9172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9169,9172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9234,9237],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9234,9237],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":154,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":154,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'guestId' is assigned a value but never used.","line":154,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":154,"endColumn":26},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\app\\workspace\\page.tsx:162:17\n  160 |             try {\n  161 |                 const data = JSON.parse(raw);\n> 162 |                 setPurchase(data);\n      |                 ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  163 |                 \n  164 |                 // Init services state including addons\n  165 |                 const initServices = [","line":162,"column":17,"nodeType":null,"endLine":162,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9735,9738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9735,9738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9763,9766],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9763,9766],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":167,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9855,9858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9855,9858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":178,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10331,10334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10331,10334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Navbar } from \"@/app/components/Navbar\";\r\nimport Link from \"next/link\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport AIIncorporationAssistant from \"@/components/dashboard/AIIncorporationAssistant\";\r\n\r\n// ─── Constants & Mock Data ────────────────────────────────────────────────────\r\nconst TABS = [\r\n    { id: 'business', label: 'My Business', icon: 'business' },\r\n    { id: 'marketplace', label: 'Launch Pad', icon: 'rocket_launch' },\r\n    { id: 'academy', label: 'Learn', icon: 'school' },\r\n    { id: 'vault', label: 'Document Vault', icon: 'folder_shared' },\r\n];\r\n\r\nconst MARKETPLACE_SERVICES = [\r\n    { name: \"GST Registration\", emoji: \"📋\", price: 1499, description: \"Goods & Services Tax registration\", category: \"Compliance\" },\r\n    { name: \"Trademark Registration\", emoji: \"™️\", price: 6999, description: \"Protect your brand name & logo\", category: \"IPR\" },\r\n    { name: \"FSSAI License\", emoji: \"🍽️\", price: 2499, description: \"Mandatory for food businesses\", category: \"License\" },\r\n    { name: \"IEC Code\", emoji: \"🌐\", price: 1999, description: \"Import Export Code for trading\", category: \"License\" },\r\n    { name: \"Professional Tax\", emoji: \"📊\", price: 1999, description: \"State-level PT registration\", category: \"Tax\" },\r\n    { name: \"ROC Annual Filing\", emoji: \"🗂️\", price: 4999, description: \"MCA annual return filing\", category: \"Compliance\" },\r\n    { name: \"Virtual Office Address\", emoji: \"🏢\", price: 3999, description: \"Premium business address (1 year)\", category: \"Office\" },\r\n    { name: \"CA Support (Annual)\", emoji: \"👨‍💼\", price: 9999, description: \"ITR, GST, MCA compliance\", category: \"Tax\" },\r\n];\r\n\r\nconst ACADEMY_COURSES = [\r\n    { title: \"Startup India Benefits\", duration: \"10 min\", type: \"Video\", emoji: \"🇮🇳\" },\r\n    { title: \"Understanding GST Filing\", duration: \"15 min\", type: \"Article\", emoji: \"📋\" },\r\n    { title: \"Fundraising 101\", duration: \"45 min\", type: \"Webinar\", emoji: \"💰\" },\r\n];\r\n\r\n// ─── Components ───────────────────────────────────────────────────────────────\r\n\r\nfunction VaultTab({ services, onUpload }: { services: any[], onUpload: (svcName: string) => void }) {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-white rounded-2xl p-6 border border-slate-100 shadow-sm\">\r\n                <h2 className=\"text-lg font-black text-slate-800 mb-1\">Document Vault</h2>\r\n                <p className=\"text-sm text-slate-500 mb-6\">Securely store and access your business documents.</p>\r\n\r\n                <div className=\"grid gap-4\">\r\n                    {services.map((svc, idx) => (\r\n                        <div key={idx} className=\"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${svc.uploadedFile ? 'bg-indigo-100 text-indigo-600' : 'bg-slate-200 text-slate-400'}`}>\r\n                                    <span className=\"material-icons\">{svc.uploadedFile ? 'description' : 'upload_file'}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm font-bold text-slate-700\">{svc.name} Docs</p>\r\n                                    <p className=\"text-[10px] text-slate-400\">\r\n                                        {svc.uploadedFile ? `Uploaded: ${svc.uploadedFile}` : 'Pending Upload'}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => onUpload(svc.name)}\r\n                                className={`px-4 py-2 rounded-lg text-xs font-bold transition-colors ${\r\n                                    svc.uploadedFile \r\n                                        ? 'bg-white text-indigo-600 border border-indigo-100 hover:bg-indigo-50' \r\n                                        : 'bg-indigo-600 text-white hover:bg-indigo-700'\r\n                                }`}\r\n                            >\r\n                                {svc.uploadedFile ? 'View / Update' : 'Upload'}\r\n                            </button>\r\n                        </div>\r\n                    ))}\r\n                    {services.length === 0 && (\r\n                        <p className=\"text-center text-slate-400 text-sm py-8\">No active services to manage documents for.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction MarketplaceTab({ onAdd }: { onAdd: (s: any) => void }) {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-3xl p-8 text-white relative overflow-hidden\">\r\n                <div className=\"relative z-10\">\r\n                    <h2 className=\"text-2xl font-black mb-2\">Launch Pad 🚀</h2>\r\n                    <p className=\"text-indigo-100 max-w-md\">Scale your business with our curated marketplace of essential services.</p>\r\n                </div>\r\n                {/* Decor elements */}\r\n                <div className=\"absolute right-0 top-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3\" />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {MARKETPLACE_SERVICES.map((svc) => (\r\n                    <div key={svc.name} className=\"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all group\">\r\n                        <div className=\"flex justify-between items-start mb-3\">\r\n                            <span className=\"text-2xl\">{svc.emoji}</span>\r\n                            <span className=\"text-[10px] font-bold bg-slate-100 text-slate-500 px-2 py-1 rounded-full uppercase tracking-wide\">{svc.category}</span>\r\n                        </div>\r\n                        <h3 className=\"font-bold text-slate-800 mb-1 group-hover:text-indigo-600 transition-colors\">{svc.name}</h3>\r\n                        <p className=\"text-xs text-slate-500 mb-4 h-8\">{svc.description}</p>\r\n                        <div className=\"flex items-center justify-between mt-auto\">\r\n                            <span className=\"text-sm font-black text-slate-900\">₹{svc.price.toLocaleString()}</span>\r\n                            <button \r\n                                onClick={() => onAdd([svc])}\r\n                                className=\"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-600 hover:text-white transition-colors\"\r\n                            >\r\n                                <span className=\"material-icons text-sm\">add</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction AcademyTab() {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"bg-white rounded-2xl p-6 border border-slate-100 shadow-sm\">\r\n                <h2 className=\"text-lg font-black text-slate-800 mb-4\">Founder's Academy</h2>\r\n                <div className=\"grid gap-4\">\r\n                    {ACADEMY_COURSES.map((course, idx) => (\r\n                        <div key={idx} className=\"flex items-center gap-4 p-4 hover:bg-slate-50 rounded-xl transition-colors cursor-pointer group\">\r\n                            <div className=\"w-12 h-12 rounded-xl bg-orange-100 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform\">\r\n                                {course.emoji}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"text-sm font-bold text-slate-800 group-hover:text-orange-600 transition-colors\">{course.title}</h3>\r\n                                <p className=\"text-xs text-slate-400 mt-1\">{course.type} • {course.duration}</p>\r\n                            </div>\r\n                            <span className=\"material-icons text-slate-300 group-hover:text-orange-400\">play_circle</span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            \r\n            <div className=\"bg-slate-900 rounded-2xl p-6 text-center\">\r\n                <p className=\"text-white text-sm font-bold mb-2\">Want to learn more?</p>\r\n                <p className=\"text-slate-400 text-xs mb-4\">Get access to our full library of 50+ startup modules.</p>\r\n                <button className=\"px-6 py-2 bg-white text-slate-900 rounded-full text-xs font-black hover:bg-slate-100 transition-colors\">\r\n                    View All Courses\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Main Component ───────────────────────────────────────────────────────────\r\n\r\nexport default function WorkspacePage() {\r\n    const [activeTab, setActiveTab] = useState('business');\r\n    const [purchase, setPurchase] = useState<any | null>(null);\r\n    const [services, setServices] = useState<any[]>([]);\r\n    const [loaded, setLoaded] = useState(false);\r\n    const { user, guestId } = useAuth();\r\n\r\n    // Load data\r\n    useEffect(() => {\r\n        const raw = localStorage.getItem(\"smb_purchased_package\");\r\n        if (raw) {\r\n            try {\r\n                const data = JSON.parse(raw);\r\n                setPurchase(data);\r\n                \r\n                // Init services state including addons\r\n                const initServices = [\r\n                    ...data.services.filter((s: any) => s.included).map((s: any) => ({ name: s.name, status: \"pending\" })),\r\n                    ...data.addons.map((a: any) => ({ name: a.name, status: \"pending\", isAddon: true, addonEmoji: a.emoji }))\r\n                ];\r\n                setServices(initServices);\r\n            } catch (e) { console.error(e); }\r\n        }\r\n        setLoaded(true);\r\n    }, []);\r\n\r\n    const completedCount = services.filter(s => s.status === \"completed\").length;\r\n    const progressPct = services.length > 0 ? Math.round((completedCount / services.length) * 100) : 0;\r\n\r\n    const handleAddService = (newSvcs: any[]) => {\r\n        setServices(prev => [\r\n            ...prev,\r\n            ...newSvcs.map(s => ({ name: s.name, status: \"pending\", isAddon: true, addonEmoji: s.emoji }))\r\n        ]);\r\n        alert(\"Service added to your dashboard!\"); // Simple feedback for now\r\n    };\r\n\r\n    // Note: Re-using the logic from previous implementation for GuestView would be ideal here if no purchase\r\n    // For brevity in this refactor, simplest check:\r\n    if (loaded && !purchase) {\r\n        // ... (Guest View Logic Placeholder - can ideally import the component) ...\r\n        return (\r\n             <div className=\"min-h-screen bg-slate-50 flex items-center justify-center p-6\">\r\n                 <div className=\"text-center\">\r\n                     <h1 className=\"text-2xl font-black text-slate-900 mb-4\">No Active Workspace</h1>\r\n                     <p className=\"text-slate-500 mb-8\">Please purchase a package to activate your dashboard.</p>\r\n                     <Link href=\"/incorporation\" className=\"bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold\">Get Started</Link>\r\n                 </div>\r\n             </div>\r\n        );\r\n    }\r\n    \r\n    if (!loaded) return <div className=\"min-h-screen flex items-center justify-center\"><span className=\"material-icons animate-spin\">sync</span></div>;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 flex flex-col md:flex-row font-sans text-slate-900\">\r\n            <Navbar /> {/* Assuming Navbar handles its own positioning */}\r\n            \r\n            {/* ── Sidebar (Desktop) / Bottom Nav (Mobile) ── */}\r\n            <aside className=\"fixed bottom-0 w-full md:relative md:w-64 md:h-screen bg-white border-t md:border-t-0 md:border-r border-slate-200 z-50 flex md:flex-col shrink-0 pt-20\">\r\n                <div className=\"p-6 hidden md:block\">\r\n                     <div className=\"flex items-center gap-3 mb-6\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold\">\r\n                            {purchase.userName.charAt(0)}\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-sm font-bold text-slate-900\">{purchase.userName}</p>\r\n                            <p className=\"text-[10px] text-slate-500\">Founder</p>\r\n                        </div>\r\n                     </div>\r\n                     <div className=\"bg-slate-50 rounded-xl p-3 border border-slate-100\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1\">Company</p>\r\n                        <p className=\"text-xs font-bold text-slate-800 truncate\">{purchase.packageName}</p>\r\n                     </div>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 flex md:flex-col justify-around md:justify-start md:px-4 gap-1\">\r\n                    {TABS.map(tab => (\r\n                        <button\r\n                            key={tab.id}\r\n                            onClick={() => setActiveTab(tab.id)}\r\n                            className={`flex flex-col md:flex-row items-center md:gap-3 p-3 md:px-4 md:py-3 rounded-xl transition-all ${\r\n                                activeTab === tab.id \r\n                                    ? 'text-indigo-600 md:bg-indigo-50' \r\n                                    : 'text-slate-400 hover:text-slate-600 hover:bg-slate-50'\r\n                            }`}\r\n                        >\r\n                            <span className={`material-icons text-2xl md:text-xl mb-1 md:mb-0 ${activeTab === tab.id ? 'text-indigo-600' : ''}`}>{tab.icon}</span>\r\n                            <span className={`text-[10px] md:text-sm font-bold ${activeTab === tab.id ? 'font-black' : ''}`}>{tab.label}</span>\r\n                        </button>\r\n                    ))}\r\n                </nav>\r\n            </aside>\r\n\r\n            {/* ── Main Content ── */}\r\n            <main className=\"flex-1 pt-24 pb-24 md:pb-10 px-4 md:px-10 overflow-y-auto h-screen\">\r\n                <div className=\"max-w-4xl mx-auto\">\r\n                    {/* Header Context */}\r\n                    <div className=\"mb-6 flex items-end justify-between\">\r\n                        <div>\r\n                            <h1 className=\"text-2xl md:text-3xl font-black text-slate-900\">{TABS.find(t => t.id === activeTab)?.label}</h1>\r\n                            <p className=\"text-slate-500 text-sm\">Welcome back to your workspace.</p>\r\n                        </div>\r\n                        {activeTab === 'business' && (\r\n                             <div className=\"hidden md:block text-right\">\r\n                                 <p className=\"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1\">Progress</p>\r\n                                 <div className=\"flex items-center gap-2\">\r\n                                     <div className=\"w-32 h-2 bg-slate-100 rounded-full overflow-hidden\">\r\n                                         <div className=\"h-full bg-green-500 rounded-full transition-all duration-1000\" style={{ width: `${progressPct}%` }} />\r\n                                     </div>\r\n                                     <span className=\"text-sm font-black text-slate-800\">{progressPct}%</span>\r\n                                 </div>\r\n                             </div>\r\n                        )}\r\n                    </div>\r\n                \r\n                    {/* Content Switcher */}\r\n                    <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-300\">\r\n\r\n                        {activeTab === 'business' && (\r\n                             <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                 {/* Overview Stats */}\r\n                                 <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                                     <div className=\"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm\">\r\n                                         <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1\">Total Services</p>\r\n                                         <p className=\"text-3xl font-black text-slate-900\">{services.length}</p>\r\n                                     </div>\r\n                                     <div className=\"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm\">\r\n                                         <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1\">Completed</p>\r\n                                         <p className=\"text-3xl font-black text-emerald-500\">{completedCount}</p>\r\n                                     </div>\r\n                                      <div className=\"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm\">\r\n                                         <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1\">Pending Action</p>\r\n                                         <p className=\"text-3xl font-black text-amber-500\">{services.length - completedCount}</p>\r\n                                     </div>\r\n                                     <div className=\"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm bg-gradient-to-br from-indigo-50 to-white\">\r\n                                         <p className=\"text-[10px] font-black uppercase tracking-widest text-indigo-400 mb-1\">Next Step</p>\r\n                                         <p className=\"text-xs font-bold text-indigo-900 leading-tight\">Upload pending documents to proceed.</p>\r\n                                     </div>\r\n                                 </div>\r\n                                \r\n                                 {/* Services List Card */}\r\n                                 <div className=\"bg-white rounded-3xl border border-slate-100 shadow-sm overflow-hidden\">\r\n                                     <div className=\"px-6 py-4 border-b border-slate-50 bg-slate-50/50 flex justify-between items-center\">\r\n                                         <h3 className=\"text-sm font-black text-slate-800 uppercase tracking-wide\">Active Services</h3>\r\n                                         <span className=\"text-[10px] font-bold bg-white border border-slate-200 px-2 py-1 rounded-lg text-slate-500\">{purchase.packageName}</span>\r\n                                     </div>\r\n                                     <div className=\"divide-y divide-slate-50\">\r\n                                         {services.map((svc, idx) => (\r\n                                             <div key={idx} className=\"p-5 flex items-center gap-4 hover:bg-slate-50 transition-colors group\">\r\n                                                  <div className={`w-12 h-12 rounded-xl flex items-center justify-center text-xl shadow-sm ${\r\n                                                      svc.status === 'completed' ? 'bg-emerald-100 text-emerald-600' : \r\n                                                      svc.status === 'uploaded' ? 'bg-amber-100 text-amber-600' :\r\n                                                      'bg-slate-100 text-slate-400'\r\n                                                  }`}>\r\n                                                      {svc.isAddon ? svc.addonEmoji : <span className=\"material-icons\">{svc.status === 'completed' ? 'check' : 'hourglass_empty'}</span>}\r\n                                                  </div>\r\n                                                  <div className=\"flex-1\">\r\n                                                      <h4 className=\"text-sm font-bold text-slate-900 group-hover:text-indigo-600 transition-colors\">{svc.name}</h4>\r\n                                                      <div className=\"flex items-center gap-2 mt-1\">\r\n                                                          <span className={`text-[10px] font-black uppercase tracking-wider px-1.5 py-0.5 rounded ${\r\n                                                              svc.status === 'completed' ? 'bg-emerald-50 text-emerald-600' : \r\n                                                              'bg-slate-100 text-slate-500'\r\n                                                          }`}>\r\n                                                              {svc.status.replace('_', ' ')}\r\n                                                          </span>\r\n                                                          {svc.isAddon && <span className=\"text-[9px] font-bold text-indigo-400 bg-indigo-50 px-1.5 py-0.5 rounded uppercase\">Add-on</span>}\r\n                                                      </div>\r\n                                                  </div>\r\n                                                  <button className=\"text-xs font-bold text-slate-400 bg-slate-50 px-3 py-2 rounded-lg group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-all\">Details</button>\r\n                                             </div>\r\n                                         ))}\r\n                                     </div>\r\n                                 </div>\r\n                             </div>\r\n                        )}\r\n\r\n                        {activeTab === 'marketplace' && (\r\n                             <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                 <MarketplaceTab onAdd={handleAddService} />\r\n                             </div>\r\n                        )}\r\n                        {activeTab === 'academy' && (\r\n                             <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                 <AcademyTab />\r\n                             </div>\r\n                        )}\r\n                        {activeTab === 'vault' && (\r\n                             <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                                 <VaultTab services={services} onUpload={(name) => alert(`Upload for ${name}`)} />\r\n                             </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </main>\r\n            \r\n            {/* AI Assistant FAB */}\r\n            <div className=\"fixed bottom-20 right-4 md:bottom-8 md:right-8 z-50\">\r\n                 <AIIncorporationAssistant />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Admin\\DocumentVault.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Admin\\LeadTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Lead' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[168,171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[168,171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Lead } from '@/types/lead'; // We will define this type locally if needed or in a types file\r\n\r\nexport interface LeadTableProps {\r\n    leads: any[]; // using any for now, ideally strictly typed\r\n    role: 'SUPER_ADMIN' | 'GST_EXPERT';\r\n    loading: boolean;\r\n}\r\n\r\nexport default function LeadTable({ leads, role, loading }: LeadTableProps) {\r\n\r\n    // Filter leads based on role\r\n    // SUPER_ADMIN sees ALL.\r\n    // GST_EXPERT sees ONLY \"GST\" or related nature/business leads.\r\n    // For demo: if businessName or nature contains \"GST\", it's a GST lead.\r\n\r\n    const filteredLeads = leads.filter(lead => {\r\n        if (role === 'SUPER_ADMIN') return true;\r\n        if (role === 'GST_EXPERT') {\r\n            const nature = lead.nature?.toLowerCase() || '';\r\n            const businessName = lead.businessName?.toLowerCase() || '';\r\n            // Simple logic: matches if \"Consulting\" (from our test) or \"GST\" is mentioned.\r\n            return nature.includes('consulting') || nature.includes('gst') || businessName.includes('gst');\r\n        }\r\n        return false;\r\n    });\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-xl shadow-md overflow-hidden border border-gray-200\">\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Business Name</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Nature</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Expert Rec.</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {loading ? (\r\n                            <tr>\r\n                                <td colSpan={5} className=\"px-6 py-8 text-center text-gray-500\">\r\n                                    <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\r\n                                    <p className=\"mt-2\">Loading leads...</p>\r\n                                </td>\r\n                            </tr>\r\n                        ) : filteredLeads.length === 0 ? (\r\n                            <tr>\r\n                                <td colSpan={5} className=\"px-6 py-8 text-center text-gray-500\">\r\n                                    No leads found for this view.\r\n                                </td>\r\n                            </tr>\r\n                        ) : (\r\n                            filteredLeads.map((lead) => (\r\n                                <tr key={lead.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                        {lead.createdAt?.seconds ? new Date(lead.createdAt.seconds * 1000).toLocaleDateString() : 'Just now'}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                        <div className=\"text-sm font-medium text-gray-900\">{lead.businessName}</div>\r\n                                        <div className=\"text-sm text-gray-500\">{lead.email}</div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-700\">\r\n                                        <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800\">\r\n                                            {lead.nature || 'General'}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-700\">\r\n                                        {/* Logic: Registered if phone exists, else Guest (simplified) */}\r\n                                        {lead.phone ? (\r\n                                            <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\r\n                                                Registered\r\n                                            </span>\r\n                                        ) : (\r\n                                            <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800\">\r\n                                                Guest Type\r\n                                            </span>\r\n                                        )}\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-sm text-gray-500 max-w-xs truncate\">\r\n                                        {lead.aiSummary || 'Analysis pending...'}\r\n                                    </td>\r\n                                </tr>\r\n                            ))\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Admin\\OperationsTab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[397,400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[397,400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[593,596],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[593,596],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1510,1513],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1510,1513],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase'; // Ensure this path is correct\r\nimport { collection, query, orderBy, onSnapshot, doc, updateDoc, addDoc, serverTimestamp } from 'firebase/firestore';\r\n\r\ninterface UserProfile {\r\n    id: string; // Added id property\r\n    uid?: string;\r\n    displayName: string;\r\n    email: string;\r\n    createdAt?: any;\r\n    businessProfile?: {\r\n        incorporationStatus?: 'Pending' | 'In Progress' | 'Completed' | 'Rejected';\r\n        gstStatus?: 'Pending' | 'Applied' | 'Approved';\r\n        [key: string]: any;\r\n    };\r\n}\r\n\r\nexport default function OperationsTab() {\r\n    const [users, setUsers] = useState<UserProfile[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [statusUpdateMsg, setStatusUpdateMsg] = useState(\"\");\r\n    const [selectedUser, setSelectedUser] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        // Query \"users\" collection (assuming you have one with profiles)\r\n        // If not, we might need to rely on \"leads\" that have converted to users, or ensure\r\n        // your auth flow saves to a 'users' collection.\r\n        // For now, let's assume we are querying the 'users' collection.\r\n        const q = query(collection(db, \"users\"), orderBy(\"createdAt\", \"desc\"));\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const usersData = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            })) as any[];\r\n            setUsers(usersData);\r\n            setLoading(false);\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const handleUpdateStatus = async (uid: string, type: 'incorporation' | 'gst', status: string) => {\r\n        try {\r\n            const userRef = doc(db, \"users\", uid);\r\n            await updateDoc(userRef, {\r\n                [`businessProfile.${type}Status`]: status\r\n            });\r\n            alert(`Updated ${type} status to ${status}`);\r\n        } catch (error) {\r\n            console.error(\"Error updating status:\", error);\r\n            alert(\"Failed to update status\");\r\n        }\r\n    };\r\n\r\n    const sendAdminUpdate = async (uid: string) => {\r\n        if (!statusUpdateMsg) return;\r\n        try {\r\n            await addDoc(collection(db, `users/${uid}/notifications`), {\r\n                message: statusUpdateMsg,\r\n                type: 'admin_update',\r\n                createdAt: serverTimestamp(),\r\n                read: false\r\n            });\r\n            setStatusUpdateMsg(\"\");\r\n            setSelectedUser(null);\r\n            alert(\"Update sent to user!\");\r\n        } catch (error) {\r\n            console.error(\"Error sending update:\", error);\r\n            alert(\"Failed to send update\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n                <h3 className=\"text-lg font-bold text-gray-900\">Operations Command Center</h3>\r\n                <p className=\"text-sm text-gray-500\">Manage client statuses and send updates.</p>\r\n            </div>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Client</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Incorporation</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">GST Status</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {loading ? (\r\n                            <tr><td colSpan={4} className=\"p-4 text-center\">Loading clients...</td></tr>\r\n                        ) : users.length === 0 ? (\r\n                            <tr><td colSpan={4} className=\"p-4 text-center\">No registered clients found.</td></tr>\r\n                        ) : (\r\n                            users.map(user => (\r\n                                <tr key={user.uid || user.id} className=\"hover:bg-gray-50\">\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"text-sm font-medium text-gray-900\">{user.displayName || 'No Name'}</div>\r\n                                        <div className=\"text-sm text-gray-500\">{user.email}</div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <select\r\n                                            className=\"text-xs border rounded p-1 bg-white\"\r\n                                            value={user.businessProfile?.incorporationStatus || 'Pending'}\r\n                                            onChange={(e) => handleUpdateStatus(user.id, 'incorporation', e.target.value)}\r\n                                        >\r\n                                            <option value=\"Pending\">Pending</option>\r\n                                            <option value=\"In Progress\">In Progress</option>\r\n                                            <option value=\"Completed\">Completed</option>\r\n                                        </select>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <select\r\n                                            className=\"text-xs border rounded p-1 bg-white\"\r\n                                            value={user.businessProfile?.gstStatus || 'Pending'}\r\n                                            onChange={(e) => handleUpdateStatus(user.id, 'gst', e.target.value)}\r\n                                        >\r\n                                            <option value=\"Pending\">Pending</option>\r\n                                            <option value=\"Applied\">Applied</option>\r\n                                            <option value=\"Approved\">Approved</option>\r\n                                        </select>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <button\r\n                                            onClick={() => setSelectedUser(user.id)}\r\n                                            className=\"text-blue-600 hover:text-blue-900 text-xs font-bold uppercase\"\r\n                                        >\r\n                                            Send Update\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {/* Simple Modal for Sending Update */}\r\n            {selectedUser && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white rounded-lg p-6 max-w-md w-full shadow-xl\">\r\n                        <h3 className=\"font-bold text-lg mb-4\">Send Update to Client</h3>\r\n                        <textarea\r\n                            className=\"w-full border p-2 rounded mb-4 text-sm\"\r\n                            rows={4}\r\n                            placeholder=\"Type update message (e.g., 'Your GST application has been submitted, allow 2-3 days.')\"\r\n                            value={statusUpdateMsg}\r\n                            onChange={(e) => setStatusUpdateMsg(e.target.value)}\r\n                        />\r\n                        <div className=\"flex justifying-end gap-2\">\r\n                            <button onClick={() => setSelectedUser(null)} className=\"px-4 py-2 text-gray-600 text-sm\">Cancel</button>\r\n                            <button onClick={() => sendAdminUpdate(selectedUser)} className=\"px-4 py-2 bg-blue-600 text-white rounded text-sm font-bold\">Send</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Admin\\RoleSwitcher.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from 'react';\r\n\r\nexport type UserRole = 'SUPER_ADMIN' | 'GST_EXPERT';\r\n\r\ninterface RoleSwitcherProps {\r\n    currentRole: UserRole;\r\n    onRoleChange: (role: UserRole) => void;\r\n}\r\n\r\nexport default function RoleSwitcher({ currentRole, onRoleChange }: RoleSwitcherProps) {\r\n    return (\r\n        <div className=\"bg-white p-4 rounded-lg shadow-sm mb-6 flex items-center justify-between border border-gray-200\">\r\n            <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900\">Role Simulator</h3>\r\n                <p className=\"text-sm text-gray-500\">Switch roles to test access control visibility.</p>\r\n            </div>\r\n            <div className=\"flex space-x-2\">\r\n                <button\r\n                    onClick={() => onRoleChange('SUPER_ADMIN')}\r\n                    className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${currentRole === 'SUPER_ADMIN'\r\n                            ? 'bg-blue-600 text-white'\r\n                            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                        }`}\r\n                >\r\n                    Super Admin\r\n                </button>\r\n                <button\r\n                    onClick={() => onRoleChange('GST_EXPERT')}\r\n                    className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${currentRole === 'GST_EXPERT'\r\n                            ? 'bg-purple-600 text-white'\r\n                            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                        }`}\r\n                >\r\n                    GST Expert\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Admin\\WhatsAppTool.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\AdvancedOnboarding.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3202,3205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3202,3205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4591,4594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4591,4594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5475,5478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5475,5478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5809,5812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5809,5812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":161,"column":49,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6207,6280],"text":"Let&apos;s set up your AI-powered workspace. First, what's your business name?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6207,6280],"text":"Let&lsquo;s set up your AI-powered workspace. First, what's your business name?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6207,6280],"text":"Let&#39;s set up your AI-powered workspace. First, what's your business name?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6207,6280],"text":"Let&rsquo;s set up your AI-powered workspace. First, what's your business name?"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":161,"column":97,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6207,6280],"text":"Let's set up your AI-powered workspace. First, what&apos;s your business name?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6207,6280],"text":"Let's set up your AI-powered workspace. First, what&lsquo;s your business name?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6207,6280],"text":"Let's set up your AI-powered workspace. First, what&#39;s your business name?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6207,6280],"text":"Let's set up your AI-powered workspace. First, what&rsquo;s your business name?"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":186,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":186,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7272,7275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7272,7275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":214,"column":75,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8882,8906],"text":"What&apos;s your industry? 🏢"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8882,8906],"text":"What&lsquo;s your industry? 🏢"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8882,8906],"text":"What&#39;s your industry? 🏢"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8882,8906],"text":"What&rsquo;s your industry? 🏢"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":255,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":255,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10869,10872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10869,10872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":278,"column":48,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11798,11852],"text":"We&apos;ll suggest tools that fit your team size and budget"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11798,11852],"text":"We&lsquo;ll suggest tools that fit your team size and budget"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11798,11852],"text":"We&#39;ll suggest tools that fit your team size and budget"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11798,11852],"text":"We&rsquo;ll suggest tools that fit your team size and budget"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":332,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":332,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14219,14222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14219,14222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'gaps' is defined but never used.","line":378,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":378,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":378,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":378,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16044,16047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16044,16047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":473,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":473,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19930,19933],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19930,19933],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":565,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":565,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24150,24153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24150,24153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":649,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":649,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27418,27421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27418,27421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":719,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":719,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30343,30346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30343,30346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { IndustryType, BusinessSize, BusinessProfile } from '@/types/workspace';\r\n\r\ninterface AdvancedOnboardingProps {\r\n    onComplete: (profile: BusinessProfile) => void;\r\n}\r\n\r\nexport default function AdvancedOnboarding({ onComplete }: AdvancedOnboardingProps) {\r\n    const [step, setStep] = useState(1);\r\n    const [profile, setProfile] = useState<Partial<BusinessProfile>>({\r\n        challenges: [],\r\n        gaps: [],\r\n        goals: [],\r\n        salesChannels: [],\r\n        currentTools: [],\r\n        leadSources: []\r\n    });\r\n\r\n    const totalSteps = 8;\r\n\r\n    const updateProfile = (data: Partial<BusinessProfile>) => {\r\n        setProfile(prev => ({ ...prev, ...data }));\r\n    };\r\n\r\n    const nextStep = () => {\r\n        if (step < totalSteps) {\r\n            setStep(step + 1);\r\n        } else {\r\n            // Complete onboarding\r\n            onComplete(profile as BusinessProfile);\r\n        }\r\n    };\r\n\r\n    const prevStep = () => {\r\n        if (step > 1) setStep(step - 1);\r\n    };\r\n\r\n    const progressPercent = (step / totalSteps) * 100;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-6\">\r\n            <div className=\"max-w-3xl w-full\">\r\n\r\n                {/* Progress Bar */}\r\n                <div className=\"mb-8\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                        <span className=\"text-sm font-medium text-gray-600\">Step {step} of {totalSteps}</span>\r\n                        <span className=\"text-sm font-medium text-indigo-600\">{Math.round(progressPercent)}% Complete</span>\r\n                    </div>\r\n                    <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n                        <div\r\n                            className=\"h-full bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-300\"\r\n                            style={{ width: `${progressPercent}%` }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Step Content */}\r\n                <div className=\"bg-white rounded-2xl shadow-xl p-8\">\r\n\r\n                    {step === 1 && (\r\n                        <Step1_BusinessName\r\n                            value={profile.businessName}\r\n                            onChange={(name: string) => updateProfile({ businessName: name })}\r\n                            onNext={nextStep}\r\n                        />\r\n                    )}\r\n\r\n                    {step === 2 && (\r\n                        <Step2_Industry\r\n                            value={profile.industry}\r\n                            onChange={(industry: IndustryType) => updateProfile({ industry })}\r\n                            onNext={nextStep}\r\n                            onBack={prevStep}\r\n                        />\r\n                    )}\r\n\r\n                    {step === 3 && (\r\n                        <Step3_BusinessSize\r\n                            value={profile.size}\r\n                            teamSize={profile.teamSize}\r\n                            onChange={(size: BusinessSize, teamSize: any) => updateProfile({ size, teamSize })}\r\n                            onNext={nextStep}\r\n                            onBack={prevStep}\r\n                        />\r\n                    )}\r\n\r\n                    {step === 4 && (\r\n                        <Step4_ProductService\r\n                            value={profile.productService}\r\n                            onChange={(productService: string) => updateProfile({ productService })}\r\n                            onNext={nextStep}\r\n                            onBack={prevStep}\r\n                        />\r\n                    )}\r\n\r\n                    {step === 5 && (\r\n                        <Step5_Challenges\r\n                            challenges={profile.challenges || []}\r\n                            gaps={profile.gaps || []}\r\n                            onChange={(challenges: string[], gaps: string[]) => updateProfile({ challenges, gaps })}\r\n                            onNext={nextStep}\r\n                            onBack={prevStep}\r\n                        />\r\n                    )}\r\n\r\n                    {step === 6 && (\r\n                        <Step6_SalesMarketing\r\n                            salesChannels={profile.salesChannels || []}\r\n                            leadSources={profile.leadSources || []}\r\n                            avgLeads={profile.averageLeads}\r\n                            onChange={(data: any) => updateProfile(data)}\r\n                            onNext={nextStep}\r\n                            onBack={prevStep}\r\n                        />\r\n                    )}\r\n\r\n                    {step === 7 && (\r\n                        <Step7_CurrentTools\r\n                            currentTools={profile.currentTools || []}\r\n                            onChange={(currentTools: string[]) => updateProfile({ currentTools })}\r\n                            onNext={nextStep}\r\n                            onBack={prevStep}\r\n                        />\r\n                    )}\r\n\r\n                    {step === 8 && (\r\n                        <Step8_Goals\r\n                            goals={profile.goals || []}\r\n                            businessAge={profile.businessAge}\r\n                            growthStage={profile.growthStage}\r\n                            onChange={(data: any) => updateProfile(data)}\r\n                            onNext={nextStep}\r\n                            onBack={prevStep}\r\n                        />\r\n                    )}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 1: Business Name\r\nfunction Step1_BusinessName({ value, onChange, onNext }: any) {\r\n    const [name, setName] = useState(value || '');\r\n\r\n    const handleNext = () => {\r\n        if (name.trim()) {\r\n            onChange(name);\r\n            onNext();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Welcome! 👋</h2>\r\n                <p className=\"text-gray-600\">Let's set up your AI-powered workspace. First, what's your business name?</p>\r\n            </div>\r\n\r\n            <input\r\n                type=\"text\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"Enter your business name\"\r\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none text-lg\"\r\n                autoFocus\r\n                onKeyPress={(e) => e.key === 'Enter' && handleNext()}\r\n            />\r\n\r\n            <button\r\n                onClick={handleNext}\r\n                disabled={!name.trim()}\r\n                className=\"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n            >\r\n                Continue →\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 2: Industry Selection\r\nfunction Step2_Industry({ value, onChange, onNext, onBack }: any) {\r\n    const [selected, setSelected] = useState<IndustryType | undefined>(value);\r\n\r\n    const industries: { value: IndustryType; label: string; icon: string; desc: string }[] = [\r\n        { value: 'ecommerce', label: 'E-Commerce', icon: '🛍️', desc: 'Online store & retail' },\r\n        { value: 'pharma', label: 'Pharmaceutical', icon: '💊', desc: 'Medicine & healthcare' },\r\n        { value: 'saas', label: 'SaaS & Software', icon: '💻', desc: 'Software products' },\r\n        { value: 'manufacturing', label: 'Manufacturing', icon: '🏭', desc: 'Production & factory' },\r\n        { value: 'retail', label: 'Retail Store', icon: '🏪', desc: 'Physical store' },\r\n        { value: 'services', label: 'Professional Services', icon: '💼', desc: 'Consulting, agency' },\r\n        { value: 'food', label: 'Food & Beverage', icon: '🍽️', desc: 'Restaurant, cafe' },\r\n        { value: 'education', label: 'Education', icon: '🎓', desc: 'School, training' },\r\n        { value: 'healthcare', label: 'Healthcare', icon: '🏥', desc: 'Clinic, medical' },\r\n        { value: 'finance', label: 'Financial Services', icon: '💰', desc: 'Banking, investment' },\r\n        { value: 'real-estate', label: 'Real Estate', icon: '🏢', desc: 'Property business' },\r\n        { value: 'other', label: 'Other', icon: '📋', desc: 'General business' }\r\n    ];\r\n\r\n    const handleNext = () => {\r\n        if (selected) {\r\n            onChange(selected);\r\n            onNext();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">What's your industry? 🏢</h2>\r\n                <p className=\"text-gray-600\">This helps us recommend the right tools for your business</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-96 overflow-y-auto\">\r\n                {industries.map((industry) => (\r\n                    <button\r\n                        key={industry.value}\r\n                        onClick={() => setSelected(industry.value)}\r\n                        className={`p-4 border-2 rounded-xl text-left transition-all ${selected === industry.value\r\n                            ? 'border-indigo-600 bg-indigo-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                            }`}\r\n                    >\r\n                        <div className=\"text-3xl mb-2\">{industry.icon}</div>\r\n                        <div className=\"font-semibold text-gray-900 text-sm\">{industry.label}</div>\r\n                        <div className=\"text-xs text-gray-500\">{industry.desc}</div>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all\"\r\n                >\r\n                    ← Back\r\n                </button>\r\n                <button\r\n                    onClick={handleNext}\r\n                    disabled={!selected}\r\n                    className=\"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                >\r\n                    Continue →\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 3: Business Size\r\nfunction Step3_BusinessSize({ value, teamSize, onChange, onNext, onBack }: any) {\r\n    const [selected, setSelected] = useState<BusinessSize | undefined>(value);\r\n    const [team, setTeam] = useState(teamSize || { total: 1 });\r\n\r\n    const sizes: { value: BusinessSize; label: string; range: string }[] = [\r\n        { value: 'solo', label: 'Solo', range: '1 person' },\r\n        { value: 'micro', label: 'Micro', range: '2-5 people' },\r\n        { value: 'small', label: 'Small', range: '6-20 people' },\r\n        { value: 'medium', label: 'Medium', range: '21-50 people' },\r\n        { value: 'large', label: 'Large', range: '50+ people' }\r\n    ];\r\n\r\n    const handleNext = () => {\r\n        if (selected) {\r\n            onChange(selected, team);\r\n            onNext();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">How big is your team? 👥</h2>\r\n                <p className=\"text-gray-600\">We'll suggest tools that fit your team size and budget</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n                {sizes.map((size) => (\r\n                    <button\r\n                        key={size.value}\r\n                        onClick={() => setSelected(size.value)}\r\n                        className={`p-4 border-2 rounded-xl text-center transition-all ${selected === size.value\r\n                            ? 'border-indigo-600 bg-indigo-50'\r\n                            : 'border-gray-200 hover:border-gray-300'\r\n                            }`}\r\n                    >\r\n                        <div className=\"font-semibold text-gray-900\">{size.label}</div>\r\n                        <div className=\"text-sm text-gray-500\">{size.range}</div>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {selected && (\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        Total Team Members\r\n                    </label>\r\n                    <input\r\n                        type=\"number\"\r\n                        value={team.total}\r\n                        onChange={(e) => setTeam({ ...team, total: parseInt(e.target.value) || 1 })}\r\n                        min=\"1\"\r\n                        className=\"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none\"\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-3\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all\"\r\n                >\r\n                    ← Back\r\n                </button>\r\n                <button\r\n                    onClick={handleNext}\r\n                    disabled={!selected}\r\n                    className=\"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                >\r\n                    Continue →\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 4: Product/Service\r\nfunction Step4_ProductService({ value, onChange, onNext, onBack }: any) {\r\n    const [text, setText] = useState(value || '');\r\n\r\n    const handleNext = () => {\r\n        if (text.trim()) {\r\n            onChange(text);\r\n            onNext();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">What do you sell? 🎯</h2>\r\n                <p className=\"text-gray-600\">Tell us about your products or services</p>\r\n            </div>\r\n\r\n            <textarea\r\n                value={text}\r\n                onChange={(e) => setText(e.target.value)}\r\n                placeholder=\"E.g., Organic shampoo and skincare products, Digital marketing services, Pharmaceutical wholesale...\"\r\n                className=\"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none resize-none\"\r\n                rows={4}\r\n                autoFocus\r\n            />\r\n\r\n            <div className=\"flex gap-3\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all\"\r\n                >\r\n                    ← Back\r\n                </button>\r\n                <button\r\n                    onClick={handleNext}\r\n                    disabled={!text.trim()}\r\n                    className=\"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                >\r\n                    Continue →\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 5: Challenges & Gaps\r\nfunction Step5_Challenges({ challenges, gaps, onChange, onNext, onBack }: any) {\r\n    const [selectedChallenges, setSelectedChallenges] = useState<string[]>(challenges);\r\n    const [customChallenge, setCustomChallenge] = useState('');\r\n\r\n    const commonChallenges = [\r\n        'Lead generation',\r\n        'Sales conversion',\r\n        'Customer support',\r\n        'Inventory management',\r\n        'Payment collection',\r\n        'Marketing automation',\r\n        'Team collaboration',\r\n        'Financial tracking',\r\n        'Compliance & regulations',\r\n        'Time management'\r\n    ];\r\n\r\n    const toggleChallenge = (challenge: string) => {\r\n        if (selectedChallenges.includes(challenge)) {\r\n            setSelectedChallenges(selectedChallenges.filter(c => c !== challenge));\r\n        } else {\r\n            setSelectedChallenges([...selectedChallenges, challenge]);\r\n        }\r\n    };\r\n\r\n    const addCustom = () => {\r\n        if (customChallenge.trim() && !selectedChallenges.includes(customChallenge)) {\r\n            setSelectedChallenges([...selectedChallenges, customChallenge]);\r\n            setCustomChallenge('');\r\n        }\r\n    };\r\n\r\n    const handleNext = () => {\r\n        onChange(selectedChallenges, selectedChallenges); // Using same for gaps\r\n        onNext();\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">What challenges are you facing? 🤔</h2>\r\n                <p className=\"text-gray-600\">Select all that apply - this helps us find the right solutions</p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-2\">\r\n                {commonChallenges.map((challenge) => (\r\n                    <button\r\n                        key={challenge}\r\n                        onClick={() => toggleChallenge(challenge)}\r\n                        className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${selectedChallenges.includes(challenge)\r\n                            ? 'bg-indigo-600 text-white'\r\n                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                            }`}\r\n                    >\r\n                        {selectedChallenges.includes(challenge) ? '✓ ' : ''}{challenge}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"flex gap-2\">\r\n                <input\r\n                    type=\"text\"\r\n                    value={customChallenge}\r\n                    onChange={(e) => setCustomChallenge(e.target.value)}\r\n                    placeholder=\"Add your own challenge...\"\r\n                    className=\"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none\"\r\n                    onKeyPress={(e) => e.key === 'Enter' && addCustom()}\r\n                />\r\n                <button\r\n                    onClick={addCustom}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-300 transition-all\"\r\n                >\r\n                    Add\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all\"\r\n                >\r\n                    ← Back\r\n                </button>\r\n                <button\r\n                    onClick={handleNext}\r\n                    className=\"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all\"\r\n                >\r\n                    Continue →\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 6: Sales & Marketing\r\nfunction Step6_SalesMarketing({ salesChannels, leadSources, avgLeads, onChange, onNext, onBack }: any) {\r\n    const [channels, setChannels] = useState<string[]>(salesChannels);\r\n    const [sources, setSources] = useState<string[]>(leadSources);\r\n    const [leads, setLeads] = useState(avgLeads || 0);\r\n\r\n    const channelOptions = ['Online Store', 'Physical Store', 'WhatsApp', 'Phone Calls', 'Email', 'Social Media', 'Marketplaces'];\r\n    const sourceOptions = ['Website', 'Social Media', 'Referrals', 'Ads', 'Walk-ins', 'Cold Calling', 'Events'];\r\n\r\n    const handleNext = () => {\r\n        onChange({ salesChannels: channels, leadSources: sources, averageLeads: leads });\r\n        onNext();\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Sales & Marketing 📈</h2>\r\n                <p className=\"text-gray-600\">How do you sell and get customers?</p>\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Sales Channels</label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                    {channelOptions.map((channel) => (\r\n                        <button\r\n                            key={channel}\r\n                            onClick={() => setChannels(prev =>\r\n                                prev.includes(channel) ? prev.filter(c => c !== channel) : [...prev, channel]\r\n                            )}\r\n                            className={`px-3 py-1 rounded-full text-sm ${channels.includes(channel)\r\n                                ? 'bg-indigo-600 text-white'\r\n                                : 'bg-gray-100 text-gray-700'\r\n                                }`}\r\n                        >\r\n                            {channels.includes(channel) ? '✓ ' : ''}{channel}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Lead Sources</label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                    {sourceOptions.map((source) => (\r\n                        <button\r\n                            key={source}\r\n                            onClick={() => setSources(prev =>\r\n                                prev.includes(source) ? prev.filter(s => s !== source) : [...prev, source]\r\n                            )}\r\n                            className={`px-3 py-1 rounded-full text-sm ${sources.includes(source)\r\n                                ? 'bg-purple-600 text-white'\r\n                                : 'bg-gray-100 text-gray-700'\r\n                                }`}\r\n                        >\r\n                            {sources.includes(source) ? '✓ ' : ''}{source}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Average monthly leads (approx.)\r\n                </label>\r\n                <input\r\n                    type=\"number\"\r\n                    value={leads}\r\n                    onChange={(e) => setLeads(parseInt(e.target.value) || 0)}\r\n                    className=\"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none\"\r\n                    placeholder=\"e.g., 50\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all\"\r\n                >\r\n                    ← Back\r\n                </button>\r\n                <button\r\n                    onClick={handleNext}\r\n                    className=\"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all\"\r\n                >\r\n                    Continue →\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 7: Current Tools\r\nfunction Step7_CurrentTools({ currentTools, onChange, onNext, onBack }: any) {\r\n    const [tools, setTools] = useState<string[]>(currentTools);\r\n    const [customTool, setCustomTool] = useState('');\r\n\r\n    const commonTools = ['Excel/Sheets', 'WhatsApp', 'Gmail', 'Tally', 'Zoho', 'QuickBooks', 'None'];\r\n\r\n    const toggleTool = (tool: string) => {\r\n        if (tools.includes(tool)) {\r\n            setTools(tools.filter(t => t !== tool));\r\n        } else {\r\n            setTools([...tools, tool]);\r\n        }\r\n    };\r\n\r\n    const addCustom = () => {\r\n        if (customTool.trim() && !tools.includes(customTool)) {\r\n            setTools([...tools, customTool]);\r\n            setCustomTool('');\r\n        }\r\n    };\r\n\r\n    const handleNext = () => {\r\n        onChange(tools);\r\n        onNext();\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">What tools do you use today? 🛠️</h2>\r\n                <p className=\"text-gray-600\">We can integrate with your existing tools</p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-2\">\r\n                {commonTools.map((tool) => (\r\n                    <button\r\n                        key={tool}\r\n                        onClick={() => toggleTool(tool)}\r\n                        className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${tools.includes(tool)\r\n                            ? 'bg-indigo-600 text-white'\r\n                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                            }`}\r\n                    >\r\n                        {tools.includes(tool) ? '✓ ' : ''}{tool}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"flex gap-2\">\r\n                <input\r\n                    type=\"text\"\r\n                    value={customTool}\r\n                    onChange={(e) => setCustomTool(e.target.value)}\r\n                    placeholder=\"Add other tool...\"\r\n                    className=\"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none\"\r\n                    onKeyPress={(e) => e.key === 'Enter' && addCustom()}\r\n                />\r\n                <button\r\n                    onClick={addCustom}\r\n                    className=\"px-6 py-2 bg-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-300 transition-all\"\r\n                >\r\n                    Add\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all\"\r\n                >\r\n                    ← Back\r\n                </button>\r\n                <button\r\n                    onClick={handleNext}\r\n                    className=\"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all\"\r\n                >\r\n                    Continue →\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Step 8: Goals\r\nfunction Step8_Goals({ goals, businessAge, growthStage, onChange, onNext, onBack }: any) {\r\n    const [selectedGoals, setSelectedGoals] = useState<string[]>(goals);\r\n    const [age, setAge] = useState(businessAge || 'startup');\r\n    const [stage, setStage] = useState(growthStage || 'launch');\r\n\r\n    const goalOptions = [\r\n        'Increase sales',\r\n        'Save time',\r\n        'Reduce costs',\r\n        'Better customer service',\r\n        'Scale operations',\r\n        'Automate workflows',\r\n        'Improve analytics',\r\n        'Team collaboration'\r\n    ];\r\n\r\n    const toggleGoal = (goal: string) => {\r\n        if (selectedGoals.includes(goal)) {\r\n            setSelectedGoals(selectedGoals.filter(g => g !== goal));\r\n        } else {\r\n            setSelectedGoals([...selectedGoals, goal]);\r\n        }\r\n    };\r\n\r\n    const handleNext = () => {\r\n        onChange({ goals: selectedGoals, businessAge: age, growthStage: stage });\r\n        onNext();\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">What are your goals? 🎯</h2>\r\n                <p className=\"text-gray-600\">Final step! Tell us what you want to achieve</p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-2\">\r\n                {goalOptions.map((goal) => (\r\n                    <button\r\n                        key={goal}\r\n                        onClick={() => toggleGoal(goal)}\r\n                        className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${selectedGoals.includes(goal)\r\n                            ? 'bg-indigo-600 text-white'\r\n                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                            }`}\r\n                    >\r\n                        {selectedGoals.includes(goal) ? '✓ ' : ''}{goal}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Age</label>\r\n                    <select\r\n                        value={age}\r\n                        onChange={(e) => setAge(e.target.value)}\r\n                        className=\"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none\"\r\n                    >\r\n                        <option value=\"startup\">Just starting</option>\r\n                        <option value=\"1-2 years\">1-2 years</option>\r\n                        <option value=\"3-5 years\">3-5 years</option>\r\n                        <option value=\"5+ years\">5+ years</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Growth Stage</label>\r\n                    <select\r\n                        value={stage}\r\n                        onChange={(e) => setStage(e.target.value as any)}\r\n                        className=\"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none\"\r\n                    >\r\n                        <option value=\"ideation\">Ideation</option>\r\n                        <option value=\"launch\">Launch</option>\r\n                        <option value=\"growth\">Growth</option>\r\n                        <option value=\"scale\">Scale</option>\r\n                        <option value=\"mature\">Mature</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all\"\r\n                >\r\n                    ← Back\r\n                </button>\r\n                <button\r\n                    onClick={handleNext}\r\n                    className=\"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-3 px-6 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all\"\r\n                >\r\n                    Complete Setup 🚀\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\AuthGuard.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\AuthGuard.tsx:30:32\n  28 |                 try {\n  29 |                     const saved = localStorage.getItem('setmybizz_data');\n> 30 |                     if (saved) setData(JSON.parse(saved));\n     |                                ^^^^^^^ Avoid calling setState() directly within an effect\n  31 |                 } catch (e) {\n  32 |                     console.error(\"Failed to parse data\", e);\n  33 |                 }","line":30,"column":32,"nodeType":null,"endLine":30,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { BusinessData } from '@/types';\r\n\r\ninterface AuthGuardProps {\r\n    children: (data: BusinessData | null) => React.ReactNode;\r\n}\r\n\r\nconst AuthGuard: React.FC<AuthGuardProps> = ({ children }) => {\r\n    const router = useRouter();\r\n    const { user, loading: authLoading } = useAuth();\r\n    const [isAuthorized, setIsAuthorized] = useState(false);\r\n    const [data, setData] = useState<BusinessData | null>(null);\r\n    const [checking, setChecking] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!authLoading) {\r\n            const hasLocalSession = typeof window !== 'undefined' && localStorage.getItem('setmybizz_session') === 'true';\r\n\r\n            if (!user && !hasLocalSession) {\r\n                router.push('/?view=login');\r\n            } else {\r\n                // User is authorized\r\n                setTimeout(() => setIsAuthorized(true), 0);\r\n                // Try to load data\r\n                try {\r\n                    const saved = localStorage.getItem('setmybizz_data');\r\n                    if (saved) setData(JSON.parse(saved));\r\n                } catch (e) {\r\n                    console.error(\"Failed to parse data\", e);\r\n                }\r\n            }\r\n            setChecking(false);\r\n        }\r\n    }, [user, authLoading, router]);\r\n\r\n    if (authLoading || checking) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen bg-slate-50\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isAuthorized) {\r\n        return null; // Redirecting...\r\n    }\r\n\r\n    return <>{children(data)}</>;\r\n};\r\n\r\nexport default AuthGuard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AdvancedAiCoFounder' is defined but never used.","line":8,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AIIncorporationAssistant' is defined but never used.","line":12,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'aiMessage' is assigned a value but never used.","line":31,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'socialPost' is assigned a value but never used.","line":38,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadingSocialPost' is assigned a value but never used.","line":39,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPromptInput' is assigned a value but never used.","line":40,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'generatedImage' is assigned a value but never used.","line":43,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loadingImage' is assigned a value but never used.","line":44,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAgentSidebarWide' is assigned a value but never used.","line":55,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsAgentSidebarWide' is assigned a value but never used.","line":55,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'agentMessages' is assigned a value but never used.","line":57,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAgentMessages' is assigned a value but never used.","line":57,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2980,2983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2980,2983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleGenerateSocialPost' is assigned a value but never used.","line":101,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleGenerateImage' is assigned a value but never used.","line":108,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":30},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Dashboard.tsx:124:17\n  122 |             const hasSeen = localStorage.getItem('hasSeenLaunchPadFlow');\n  123 |             if (!hasSeen) {\n> 124 |                 setShowLaunchPadFlow(true);\n      |                 ^^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  125 |             }\n  126 |         }\n  127 |     }, [activeTab]);","line":124,"column":17,"nodeType":null,"endLine":124,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5585,5588],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5585,5588],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleAiAsk' is assigned a value but never used.","line":154,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":154,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showLoginPrompt' is assigned a value but never used.","line":194,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":194,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleLoginRedirect' is assigned a value but never used.","line":204,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":204,"endColumn":30},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":286,"column":25,"nodeType":"JSXOpeningElement","endLine":286,"endColumn":110},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":308,"column":102,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":308,"endColumn":105,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17682,17685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17682,17685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":340,"column":115,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":340,"endColumn":118,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20208,20211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20208,20211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":341,"column":152,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":155,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20376,20379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20376,20379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":405,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It&apos;s not just selling services. It's an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It&lsquo;s not just selling services. It's an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It&#39;s not just selling services. It's an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It&rsquo;s not just selling services. It's an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":405,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It's not just selling services. It&apos;s an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It's not just selling services. It&lsquo;s an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It's not just selling services. It&#39;s an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[25437,25600],"text":"\r\n                                            It's not just selling services. It&rsquo;s an entire business journey assistance.\r\n                                        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":419,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[26593,26764],"text":"\r\n                                            &quot;Build, monitor & scale your startup with AI + experts. 365 days business support.\"\r\n                                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[26593,26764],"text":"\r\n                                            &ldquo;Build, monitor & scale your startup with AI + experts. 365 days business support.\"\r\n                                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[26593,26764],"text":"\r\n                                            &#34;Build, monitor & scale your startup with AI + experts. 365 days business support.\"\r\n                                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[26593,26764],"text":"\r\n                                            &rdquo;Build, monitor & scale your startup with AI + experts. 365 days business support.\"\r\n                                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":419,"column":127,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[26593,26764],"text":"\r\n                                            \"Build, monitor & scale your startup with AI + experts. 365 days business support.&quot;\r\n                                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[26593,26764],"text":"\r\n                                            \"Build, monitor & scale your startup with AI + experts. 365 days business support.&ldquo;\r\n                                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[26593,26764],"text":"\r\n                                            \"Build, monitor & scale your startup with AI + experts. 365 days business support.&#34;\r\n                                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[26593,26764],"text":"\r\n                                            \"Build, monitor & scale your startup with AI + experts. 365 days business support.&rdquo;\r\n                                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":481,"column":103,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[32034,32051],"text":"Founder&apos;s Academy"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[32034,32051],"text":"Founder&lsquo;s Academy"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[32034,32051],"text":"Founder&#39;s Academy"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[32034,32051],"text":"Founder&rsquo;s Academy"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":708,"column":120,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":708,"endColumn":123,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[52507,52510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[52507,52510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":708,"column":230,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":708,"endColumn":233,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[52617,52620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[52617,52620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":708,"column":258,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":708,"endColumn":261,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[52645,52648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[52645,52648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":848,"column":112,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":848,"endColumn":115,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[67266,67269],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[67266,67269],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":891,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":891,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[72751,72754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[72751,72754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":891,"column":201,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":891,"endColumn":204,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[72870,72873],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[72870,72873],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1124,"column":106,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1124,"endColumn":109,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[96724,96727],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[96724,96727],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { BusinessData } from '../types';\r\nimport { AIRoadmap, AISocialPost } from '../types/ai';\r\nimport { getBusinessRoadmap, getSocialPost } from '../lib/aiService';\r\nimport { generateImage } from '../lib/imageService';\r\nimport Workspace from './dashboard/Workspace';\r\nimport AdvancedAiCoFounder from './dashboard/AdvancedAiCoFounder';\r\nimport QuickChatBot from './dashboard/QuickChatBot';\r\nimport AIStudioLayout from './ai-studio/AIStudioLayout';\r\nimport GlobalIncorporationFullPage from './dashboard/GlobalIncorporationFullPage';\r\nimport AIIncorporationAssistant from './dashboard/AIIncorporationAssistant';\r\nimport LaunchPadAIOnboarding from './dashboard/LaunchPadAIOnboarding';\r\nimport AIProjectReportTool from './dashboard/AIProjectReportTool';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport Toast from './ToastNotification';\r\n\r\ninterface DashboardProps {\r\n    data: BusinessData;\r\n    initialTab?: 'A' | 'B' | 'Workspace' | 'LearnerStudio' | 'Oracle';\r\n    onNavigateToFlow?: () => void;\r\n}\r\n\r\nconst Dashboard: React.FC<DashboardProps> = ({ data, initialTab = 'A', onNavigateToFlow }) => {\r\n    const { user, dbUser, guestId } = useAuth();\r\n    const [activeTab, setActiveTab] = useState<'A' | 'B' | 'Workspace' | 'LearnerStudio' | 'Oracle'>(initialTab);\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(true);\r\n    const [chatCount, setChatCount] = useState(0);\r\n    const [aiMessage, setAiMessage] = useState(\"Greetings. I am your Setmybizz AI Architect. How can I assist with your incorporation path today?\");\r\n\r\n    // AI Roadmap State\r\n    const [roadmap, setRoadmap] = useState<AIRoadmap | null>(null);\r\n    const [loadingRoadmap, setLoadingRoadmap] = useState(false);\r\n\r\n    // AI Social Post State\r\n    const [socialPost, setSocialPost] = useState<AISocialPost | null>(null);\r\n    const [loadingSocialPost, setLoadingSocialPost] = useState(false);\r\n    const [promptInput, setPromptInput] = useState(\"\");\r\n\r\n    // AI Image State\r\n    const [generatedImage, setGeneratedImage] = useState<string | null>(null);\r\n    const [loadingImage, setLoadingImage] = useState(false);\r\n\r\n    // Global Incorporation Modal\r\n    const [showGlobalIncorporation, setShowGlobalIncorporation] = useState(false);\r\n\r\n    // Canvas View State for Tab B\r\n    const [currentCanvas, setCurrentCanvas] = useState<string | null>(null);\r\n\r\n    // Right Sidebar Agent State\r\n    const [agentMode, setAgentMode] = useState<'developer' | 'cofounder'>('cofounder');\r\n    const [isAgentSidebarExpanded, setIsAgentSidebarExpanded] = useState(true);\r\n    const [isAgentSidebarWide, setIsAgentSidebarWide] = useState(false);\r\n    const [currentServiceCategory, setCurrentServiceCategory] = useState<'all' | 'brand' | 'legal' | 'growth'>('all');\r\n    const [agentMessages, setAgentMessages] = useState<any[]>([]);\r\n\r\n    const [selectedModel, setSelectedModel] = useState<'gemini' | 'gpt4o' | 'claude'>('gemini');\r\n    const [showBuildPopup, setShowBuildPopup] = useState(false);\r\n    const [showDPRTool, setShowDPRTool] = useState(false);\r\n    const [businessDescription, setBusinessDescription] = useState(\"\");\r\n\r\n    // Resizable Sidebar States\r\n    const [agentSidebarWidth, setAgentSidebarWidth] = useState(400);\r\n    const [isResizing, setIsResizing] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const handleMouseMove = (e: MouseEvent) => {\r\n            if (!isResizing) return;\r\n            const newWidth = window.innerWidth - e.clientX - 32; // 32 is roughly the right padding\r\n            if (newWidth > 300 && newWidth < 800) {\r\n                setAgentSidebarWidth(newWidth);\r\n            }\r\n        };\r\n\r\n        const handleMouseUp = () => {\r\n            setIsResizing(false);\r\n            document.body.style.cursor = 'default';\r\n        };\r\n\r\n        if (isResizing) {\r\n            window.addEventListener('mousemove', handleMouseMove);\r\n            window.addEventListener('mouseup', handleMouseUp);\r\n            document.body.style.cursor = 'ew-resize';\r\n        }\r\n\r\n        return () => {\r\n            window.removeEventListener('mousemove', handleMouseMove);\r\n            window.removeEventListener('mouseup', handleMouseUp);\r\n        };\r\n    }, [isResizing]);\r\n\r\n    const handleGenerateRoadmap = async () => {\r\n        setLoadingRoadmap(true);\r\n        const result = await getBusinessRoadmap(data);\r\n        setRoadmap(result);\r\n        setLoadingRoadmap(false);\r\n    };\r\n\r\n    const handleGenerateSocialPost = async () => {\r\n        setLoadingSocialPost(true);\r\n        const result = await getSocialPost(data, promptInput);\r\n        setSocialPost(result);\r\n        setLoadingSocialPost(false);\r\n    };\r\n\r\n    const handleGenerateImage = async () => {\r\n        setLoadingImage(true);\r\n        const prompt = promptInput || `Professional marketing image for ${data.name}`;\r\n        const result = await generateImage(prompt, data);\r\n        if (result.success && result.imageUrl) {\r\n            setGeneratedImage(result.imageUrl);\r\n        }\r\n        setLoadingImage(false);\r\n    };\r\n\r\n    const [showLaunchPadFlow, setShowLaunchPadFlow] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (activeTab === 'B') {\r\n            const hasSeen = localStorage.getItem('hasSeenLaunchPadFlow');\r\n            if (!hasSeen) {\r\n                setShowLaunchPadFlow(true);\r\n            }\r\n        }\r\n    }, [activeTab]);\r\n\r\n    const handleLaunchPadComplete = async (onboardingData: any) => {\r\n        // Save to Firestore for permanent record\r\n        try {\r\n            await addDoc(collection(db, \"brand_requests\"), {\r\n                ...onboardingData,\r\n                status: 'new',\r\n                userId: user?.uid || null,\r\n                guestId: guestId,\r\n                createdAt: serverTimestamp()\r\n            });\r\n            console.log(\"Brand request saved to cloud.\");\r\n        } catch (error) {\r\n            console.error(\"Error saving brand request:\", error);\r\n        }\r\n\r\n        localStorage.setItem('hasSeenLaunchPadFlow', 'true');\r\n        setShowLaunchPadFlow(false);\r\n        // Optionally update data context or trigger other successes\r\n        setToast({\r\n            visible: true,\r\n            message: \"Brand Identity Secured\",\r\n            sub: \"Your brand assets are being generated on our servers.\"\r\n        });\r\n    };\r\n\r\n    const handleAiAsk = (input?: string) => {\r\n        const query = input?.toLowerCase() || \"\";\r\n        if (chatCount >= 2) {\r\n            setAiMessage(\"Your Customized Roadmap is ready in Business Setup. Hover to see.\");\r\n            return;\r\n        }\r\n\r\n        if (query.includes('food') || data.industry.toLowerCase().includes('food')) {\r\n            setAiMessage(\"For your food venture, I insist on prioritizing FSSAI Registration. It is the cornerstone of your legal presence in the Setmybizz ecosystem.\");\r\n        } else if (query.includes('tech') || data.offeringType === 'tech') {\r\n            setAiMessage(\"As a tech startup, I insist on immediate Startup India Recognition + GST Registration. Our platform streamlines this specific path perfectly.\");\r\n        } else {\r\n            setAiMessage(\"I have analyzed your business profile. We should focus on the core legal foundation available in our suite.\");\r\n        }\r\n        setChatCount(prev => prev + 1);\r\n    };\r\n\r\n    // Feature Gating & Interest Capture Logic\r\n    const [toast, setToast] = useState<{ visible: boolean; message: string; sub?: string }>({ visible: false, message: '', sub: '' });\r\n\r\n    const handleServiceClick = async (serviceName: string, badge?: string) => {\r\n        const coreIncorpServices = ['LLC / Registration', 'Legal Documents'];\r\n        if (!coreIncorpServices.includes(serviceName)) {\r\n            setActiveTab('B');\r\n        }\r\n\r\n        if (badge) {\r\n            const isComingSoon = badge === 'Coming Soon' || badge === 'Beta';\r\n            if (isComingSoon) {\r\n                // Show Toast\r\n                setToast({\r\n                    visible: true,\r\n                    message: `We are building ${serviceName}!`,\r\n                    sub: \"Thanks for your interest. You'll be the first to know when it launches.\"\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    // 20-Second Login Prompt Logic\r\n    const [showLoginPrompt, setShowLoginPrompt] = useState(false);\r\n    React.useEffect(() => {\r\n        if (!user && !dbUser) {\r\n            const timer = setTimeout(() => {\r\n                setShowLoginPrompt(true);\r\n            }, 20000); // 20 seconds\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [user, dbUser]);\r\n\r\n    const handleLoginRedirect = () => {\r\n        // Use onNavigateToFlow? Or just reload to force login step?\r\n        // Or show a modal. For now, simple redirect to flow start if onNavigateToFlow exists\r\n        if (onNavigateToFlow) onNavigateToFlow();\r\n    };\r\n\r\n    const sidebarItems = [\r\n        { label: 'Logos', icon: 'brush', bg: 'bg-orange-50', color: 'text-orange-600' },\r\n        { label: 'LLC / Registration', icon: 'gavel', bg: 'bg-blue-50', color: 'text-blue-600' },\r\n        { label: 'Domain', icon: 'language', bg: 'bg-indigo-50', color: 'text-indigo-600' },\r\n        { label: 'Website', icon: 'web', bg: 'bg-teal-50', color: 'text-teal-600' },\r\n        { label: 'Digital Card', icon: 'badge', bg: 'bg-slate-100', color: 'text-slate-600' },\r\n        { label: 'Business Email', icon: 'mail', bg: 'bg-sky-50', color: 'text-sky-600' },\r\n        { label: 'Legal Documents', icon: 'description', bg: 'bg-purple-50', color: 'text-purple-600' },\r\n        { label: 'CA Assistance', icon: 'support_agent', bg: 'bg-rose-50', color: 'text-rose-600' },\r\n        { label: 'Banking', icon: 'account_balance', bg: 'bg-emerald-50', color: 'text-emerald-600' }\r\n    ];\r\n\r\n    const incorporationServices = [\r\n        { label: 'Private Limited Company', time: '5-7 Days', icon: 'business', bg: 'bg-orange-50', color: 'text-orange-600', button: 'UPLOAD' },\r\n        { label: 'Udyam Registration', time: 'MSME Certificate', icon: 'verified', bg: 'bg-blue-50', color: 'text-blue-600', button: 'UPLOAD', variant: 'secondary' },\r\n        { label: 'Startup India Registration', time: 'Govt. Recognition', icon: 'rocket_launch', bg: 'bg-green-50', color: 'text-green-600', button: 'GET START', btnColor: 'bg-slate-900' },\r\n        { label: 'GST Registration', time: 'Tax Compliance', icon: 'receipt_long', bg: 'bg-purple-50', color: 'text-purple-600', button: 'UPLOAD' },\r\n        { label: 'Trademark (TM) & IP', time: 'Brand Security', icon: 'copyright', bg: 'bg-pink-50', color: 'text-pink-600', button: 'UPLOAD', variant: 'secondary' },\r\n        { label: 'Business Licenses', time: 'FSSAI, ISO, IEC', icon: 'gavel', bg: 'bg-yellow-50', color: 'text-yellow-600', button: 'UPLOAD' },\r\n        { label: 'Documentation', time: 'Custom Drafting', icon: 'description', bg: 'bg-teal-50', color: 'text-teal-600', button: 'UPLOAD', variant: 'secondary' },\r\n        { label: 'Expert CA/CS', time: 'Reports & Filings', icon: 'support_agent', bg: 'bg-indigo-50', color: 'text-indigo-600', button: 'GET HELP', btnColor: 'bg-slate-900' },\r\n        { label: 'Marketing Expert', time: 'Growth Strategy', icon: 'campaign', bg: 'bg-rose-50', color: 'text-rose-600', button: 'BOOK CALL' },\r\n        { label: 'Project Reports', time: 'Business Model', icon: 'bar_chart', bg: 'bg-cyan-50', color: 'text-cyan-600', button: 'UPLOAD', variant: 'secondary' },\r\n        { label: 'Banking & Loans', time: 'Funding Support', icon: 'account_balance', bg: 'bg-emerald-50', color: 'text-emerald-600', button: 'GET LOAN' },\r\n        { label: 'Global Market Access', time: 'Export & Expansion', icon: 'public', bg: 'bg-blue-50', color: 'text-blue-600', button: 'EXPLORE', btnColor: 'bg-blue-600' },\r\n        { label: 'Ready to Go Global', time: 'International Setup', icon: 'flight_takeoff', bg: 'bg-indigo-50', color: 'text-indigo-600', button: 'START NOW', btnColor: 'bg-indigo-900' }\r\n    ];\r\n\r\n    const buildServices = [\r\n        { label: 'Logo Designer', icon: 'brush', bg: 'bg-orange-50', color: 'text-orange-500', badge: 'Coming Soon' },\r\n        { label: 'Business Email', icon: 'mail', bg: 'bg-blue-50', color: 'text-blue-500', badge: 'Coming Soon' },\r\n        { label: 'Domain Search', icon: 'language', bg: 'bg-indigo-50', color: 'text-indigo-500', badge: 'Coming Soon' },\r\n        { label: 'Website Builder', icon: 'web', bg: 'bg-teal-50', color: 'text-teal-500', badge: 'Coming Soon' },\r\n        { label: 'E-Store Setup', icon: 'shopping_cart', bg: 'bg-green-50', color: 'text-green-500', badge: 'Coming Soon' },\r\n        { label: 'Product Copy', icon: 'edit_note', sub: 'Page Create', bg: 'bg-yellow-50', color: 'text-yellow-500', badge: 'Coming Soon' },\r\n        { label: 'Brand Brochure', icon: 'folder_open', bg: 'bg-pink-50', color: 'text-pink-500', badge: 'Coming Soon' },\r\n        { label: 'Product Catalogue', icon: 'menu_book', bg: 'bg-purple-50', color: 'text-purple-500', badge: 'Coming Soon' },\r\n        { label: 'Digital Card', icon: 'badge', bg: 'bg-slate-100', color: 'text-slate-600', badge: 'Coming Soon' },\r\n        { label: 'Pitch Deck AI', icon: 'slideshow', bg: 'bg-cyan-50', color: 'text-cyan-500', badge: 'Beta' },\r\n        { label: 'SM Manager', icon: 'share', bg: 'bg-rose-50', color: 'text-rose-500', badge: 'Coming Soon' },\r\n        { label: 'AI Post Gen', icon: 'post_add', bg: 'bg-lime-50', color: 'text-lime-600', badge: 'Beta' },\r\n        { label: 'Brand Kits', icon: 'category', bg: 'bg-emerald-50', color: 'text-emerald-500', badge: 'Coming Soon' },\r\n        { label: 'SEO Tools', icon: 'construction', bg: 'bg-sky-50', color: 'text-sky-500', badge: 'Coming Soon' }\r\n    ];\r\n\r\n    const learnerStudioServices = [\r\n        { label: 'Skill Upgradation', icon: 'school', desc: 'Master new industry standards.', bg: 'bg-blue-50', color: 'text-blue-600', badge: 'Coming Soon' },\r\n        { label: 'Tech Adoption', icon: 'biotech', desc: 'Implement latest AI and automation.', bg: 'bg-purple-50', color: 'text-purple-600', badge: 'Coming Soon' },\r\n        { label: 'Learn Business', icon: 'auto_stories', desc: 'Mini-MBA for startup founders.', bg: 'bg-green-50', color: 'text-green-600', badge: 'Coming Soon' },\r\n        { label: 'Growth Strategies', icon: 'trending_up', desc: 'Scale your operations effectively.', bg: 'bg-orange-50', color: 'text-orange-600', badge: 'Coming Soon' },\r\n        { label: 'Financial Literacy', icon: 'payments', desc: 'Understand tax, GST and funding.', bg: 'bg-teal-50', color: 'text-teal-600', badge: 'Coming Soon' },\r\n        { label: 'Leadership', icon: 'groups', desc: 'Build and manage your first team.', bg: 'bg-pink-50', color: 'text-pink-600', badge: 'Coming Soon' }\r\n    ];\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"flex w-full h-screen overflow-hidden bg-white font-display text-[#1e293b] antialiased\">\r\n            {/* Sidebar */}\r\n            {/* Mobile Sidebar Overlay */}\r\n            {isSidebarOpen && (\r\n                <div \r\n                    className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-30 md:hidden\"\r\n                    onClick={() => setIsSidebarOpen(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Sidebar */}\r\n            <aside className={`fixed inset-y-0 left-0 z-40 w-64 bg-white border-r border-slate-200 flex flex-col h-full transform transition-transform duration-300 ease-in-out md:relative md:translate-x-0 overflow-hidden ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full md:w-0 md:hidden'}`}>\r\n                <div className=\"h-16 flex items-center px-6 border-b border-slate-100\">\r\n                    <div\r\n                        className=\"flex items-center gap-2 px-2 cursor-pointer hover:opacity-80 transition-opacity\"\r\n                        onClick={() => setActiveTab('A')}\r\n                        onDoubleClick={onNavigateToFlow}\r\n                        title=\"Double Click to Restart Onboarding\"\r\n                    >\r\n                        <img src=\"/images/logo.png\" alt=\"SetMyBizz\" className=\"h-14 w-auto object-contain\" />\r\n                    </div>\r\n                </div>\r\n                <nav className=\"flex-1 overflow-y-auto custom-scroll p-3 space-y-1\">\r\n                    <button\r\n                        onClick={() => setActiveTab('A')}\r\n                        className={`flex items-center gap-3 px-3 py-2.5 transition-all w-full text-left group ${activeTab === 'A' ? 'text-blue-600' : 'text-slate-600'}`}\r\n                    >\r\n                        <span className={`material-symbols-outlined text-[20px] ${activeTab === 'A' ? 'text-blue-600' : 'text-slate-400 group-hover:text-blue-600'}`}>description</span>\r\n                        <span className=\"text-[14px] font-medium\">Business Setup</span>\r\n                    </button>\r\n\r\n                    {activeTab === 'B' ? (\r\n                        <>\r\n                            <div className=\"pt-6 pb-2 px-3 text-[10px] font-black text-indigo-600 uppercase tracking-[0.2em] flex items-center gap-2\">\r\n                                <span className=\"material-icons text-[12px]\">rocket_launch</span> EXECUTION ROADMAP\r\n                            </div>\r\n                            {/* Left Sidebar Roadmap View */}\r\n                            <div className=\"px-2 py-4 space-y-3 ml-1\">\r\n                                {buildServices.map((service, i) => (\r\n                                    <div\r\n                                        key={i}\r\n                                        onClick={() => handleServiceClick(service.label, (service as any).badge)}\r\n                                        className={`flex items-center gap-3 px-3 py-1 cursor-pointer transition-all ${i === 0 ? 'text-blue-600' : 'text-slate-600 hover:text-slate-900'}`}\r\n                                    >\r\n                                        <span className={`material-symbols-outlined text-[20px]`}>{service.icon}</span>\r\n                                        <span className=\"text-[14px] font-medium\">{service.label}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"pt-6 pb-2 px-3 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]\">Launchpad</div>\r\n                            <button\r\n                                onClick={() => setActiveTab('B')}\r\n                                className={`flex items-center gap-3 px-3 py-2.5 transition-all w-full text-left text-slate-600 hover:text-slate-900 group`}\r\n                            >\r\n                                <span className=\"material-symbols-outlined text-[20px] text-slate-400 group-hover:text-indigo-600\">rocket</span>\r\n                                <span className=\"text-[14px] font-medium\">Launch Pad</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setActiveTab('LearnerStudio')}\r\n                                className={`flex items-center gap-3 px-3 py-2.5 transition-all w-full text-left ${activeTab === 'LearnerStudio' ? 'text-blue-600' : 'text-slate-600 hover:text-slate-900 group'}`}\r\n                            >\r\n                                <span className={`material-symbols-outlined text-[20px] ${activeTab === 'LearnerStudio' ? 'text-blue-600' : 'text-slate-400 group-hover:text-teal-600'}`}>menu_book</span>\r\n                                <span className=\"text-[14px] font-medium\">Learner Studio</span>\r\n                            </button>\r\n\r\n                            <div className=\"pt-6 pb-2 px-3 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]\">Services</div>\r\n                            {sidebarItems.map((item, i) => (\r\n                                <a\r\n                                    key={i}\r\n                                    href=\"#\"\r\n                                    onClick={(e) => { e.preventDefault(); handleServiceClick(item.label, (item as any).badge); }}\r\n                                    className={`flex items-center gap-3 px-3 py-2.5 transition-all text-slate-600 hover:text-blue-600 group ${(item as any).badge ? 'cursor-alias opacity-50' : ''}`}\r\n                                >\r\n                                    <span className=\"material-symbols-outlined text-[20px] group-hover:scale-110 transition-transform text-slate-400 group-hover:text-blue-600\">{item.icon}</span>\r\n                                    <span className=\"text-[14px] font-medium\">{item.label}</span>\r\n                                </a>\r\n                            ))}\r\n                        </>\r\n                    )}\r\n                </nav>\r\n                <div className=\"p-4 border-t border-slate-100\">\r\n                    <div className=\"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 cursor-pointer\">\r\n                        <div className=\"w-8 h-8 rounded-lg bg-slate-200 flex items-center justify-center text-[10px] font-black text-slate-600 border border-slate-300\">\r\n                            {dbUser?.displayName ? dbUser.displayName.charAt(0) : (user?.displayName ? user.displayName.charAt(0) : 'G')}\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-xs font-black text-slate-700 truncate max-w-[120px]\">\r\n                                {dbUser?.displayName || user?.displayName || 'Guest User'}\r\n                            </p>\r\n                            <p className=\"text-[9px] text-slate-400\">ID: {dbUser?.registeredId || guestId || '---'}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </aside>\r\n\r\n            <div className=\"flex-1 flex flex-col h-full overflow-hidden relative\">\r\n                <header className=\"sticky top-0 h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 md:px-10 flex-shrink-0 z-50 shadow-sm\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <button \r\n                            onClick={() => setIsSidebarOpen(!isSidebarOpen)} \r\n                            className=\"p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-lg md:hidden\"\r\n                        >\r\n                            <span className=\"material-symbols-outlined text-2xl\">menu</span>\r\n                        </button>\r\n                        <button \r\n                            onClick={() => setIsSidebarOpen(!isSidebarOpen)} \r\n                            className=\"hidden md:block text-slate-400 hover:text-slate-600 mr-2\"\r\n                        >\r\n                            <span className=\"material-symbols-outlined text-xl\">menu_open</span>\r\n                        </button>\r\n                        <div className=\"flex bg-slate-100/50 p-1.5 rounded-2xl gap-2\">\r\n                            {/* Business Setup Nav Item */}\r\n                            <div className=\"relative group\">\r\n                                <button\r\n                                    onClick={() => setActiveTab('A')}\r\n                                    className={`px-5 py-2.5 rounded-xl transition-all text-xs font-bold uppercase tracking-widest flex items-center gap-2 ${activeTab === 'A' ? 'bg-white text-blue-600 shadow-md shadow-blue-500/10 scale-105' : 'text-slate-500 hover:text-slate-900 hover:bg-white/50'}`}\r\n                                >\r\n                                    <span className=\"material-symbols-outlined text-[16px]\">description</span>\r\n                                    Business Setup\r\n                                </button>\r\n                                \r\n                                {/* Hover Popup for Business Setup */}\r\n                                <div className=\"absolute top-full left-0 mt-4 w-96 bg-white/80 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl border border-white/40 opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-300 z-50 transform translate-y-4 group-hover:translate-y-0\">\r\n                                    <div className=\"absolute -top-2 left-8 w-4 h-4 bg-white/80 backdrop-blur-xl border-t border-l border-white/40 rotate-45\"></div>\r\n                                    <div className=\"relative z-10\">\r\n                                        <div className=\"flex items-center gap-3 mb-4\">\r\n                                            <div className=\"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center text-blue-600\">\r\n                                                <span className=\"material-symbols-outlined text-2xl\">rocket_launch</span>\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className=\"text-sm font-black text-slate-900 leading-tight\">Business Setup</h4>\r\n                                                <p className=\"text-[10px] text-slate-500 font-bold uppercase tracking-wider\">Operating System</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <p className=\"text-xs text-slate-600 leading-relaxed mb-4 font-medium\">\r\n                                            It's not just selling services. It's an entire business journey assistance.\r\n                                        </p>\r\n                                        \r\n                                        <div className=\"flex items-center justify-between text-[9px] font-black text-slate-400 uppercase tracking-widest mb-4 bg-slate-50 p-3 rounded-xl border border-slate-100\">\r\n                                            <span>Idea</span>\r\n                                            <span className=\"text-slate-300\">→</span>\r\n                                            <span>Setup</span>\r\n                                            <span className=\"text-slate-300\">→</span>\r\n                                            <span>Operate</span>\r\n                                            <span className=\"text-slate-300\">→</span>\r\n                                            <span className=\"text-blue-600\">Global</span>\r\n                                        </div>\r\n\r\n                                        <p className=\"text-[10px] text-slate-500 font-medium border-l-2 border-blue-500 pl-3 mb-5 italic\">\r\n                                            \"Build, monitor & scale your startup with AI + experts. 365 days business support.\"\r\n                                        </p>\r\n\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                             <span className=\"text-[9px] font-bold text-slate-400 uppercase tracking-wider\">Global Markets</span>\r\n                                             <button \r\n                                                onClick={() => setShowGlobalIncorporation(true)}\r\n                                                className=\"text-[10px] font-black text-blue-600 hover:underline flex items-center gap-1\"\r\n                                             >\r\n                                                Read More <span className=\"material-symbols-outlined text-[12px]\">arrow_forward</span>\r\n                                             </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Launch Pad Nav Item */}\r\n                            <div className=\"relative group\">\r\n                                <button\r\n                                    onClick={() => setActiveTab('B')}\r\n                                    className={`px-5 py-2.5 rounded-xl transition-all text-xs font-bold uppercase tracking-widest flex items-center gap-2 ${activeTab === 'B' ? 'bg-white text-indigo-600 shadow-md shadow-indigo-500/10 scale-105' : 'text-slate-500 hover:text-slate-900 hover:bg-white/50'}`}\r\n                                >\r\n                                    <span className=\"material-symbols-outlined text-[16px]\">rocket</span>\r\n                                    Launch Pad\r\n                                </button>\r\n\r\n                                {/* Hover Popup for Launch Pad */}\r\n                                <div className=\"absolute top-full left-1/2 -translate-x-1/2 mt-4 w-80 bg-white/80 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl border border-white/40 opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-300 z-50 transform translate-y-4 group-hover:translate-y-0\">\r\n                                    <div className=\"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white/80 backdrop-blur-xl border-t border-l border-white/40 rotate-45\"></div>\r\n                                    <div className=\"relative z-10\">\r\n                                        <div className=\"mb-4\">\r\n                                            <span className=\"text-[10px] font-black bg-indigo-50 text-indigo-600 px-2 py-1 rounded-lg uppercase tracking-wider\">AI Studio</span>\r\n                                        </div>\r\n                                        <h4 className=\"text-sm font-black text-slate-900 mb-2\">Build Your Identity</h4>\r\n                                        <p className=\"text-xs text-slate-500 leading-relaxed mb-4\">\r\n                                            Generate Logos, Websites, and Social Media content instantly with Neural AI.\r\n                                        </p>\r\n                                        <div className=\"grid grid-cols-2 gap-2\">\r\n                                            {['Logo', 'Website', 'Domian', 'Deck'].map(i => (\r\n                                                <div key={i} className=\"bg-slate-50 text-[10px] font-bold text-slate-600 px-2 py-1.5 rounded-lg text-center border border-slate-100\">\r\n                                                    {i}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Learner Studio Nav Item */}\r\n                            <div className=\"relative group\">\r\n                                <button\r\n                                    onClick={() => setActiveTab('LearnerStudio')}\r\n                                    className={`px-5 py-2.5 rounded-xl transition-all text-xs font-bold uppercase tracking-widest flex items-center gap-2 ${activeTab === 'LearnerStudio' ? 'bg-white text-teal-600 shadow-md shadow-teal-500/10 scale-105' : 'text-slate-500 hover:text-slate-900 hover:bg-white/50'}`}\r\n                                >\r\n                                    <span className=\"material-symbols-outlined text-[16px]\">menu_book</span>\r\n                                    Learner Studio\r\n                                </button>\r\n\r\n                                {/* Hover Popup for Learner Studio */}\r\n                                <div className=\"absolute top-full right-0 mt-4 w-80 bg-white/80 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl border border-white/40 opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-300 z-50 transform translate-y-4 group-hover:translate-y-0\">\r\n                                    <div className=\"absolute -top-2 right-12 w-4 h-4 bg-white/80 backdrop-blur-xl border-t border-l border-white/40 rotate-45\"></div>\r\n                                    <div className=\"relative z-10\">\r\n                                        <h4 className=\"text-sm font-black text-slate-900 mb-1\">Founder's Academy</h4>\r\n                                        <p className=\"text-[10px] text-teal-600 font-bold uppercase tracking-wider mb-3\">Skill Upgradation</p>\r\n                                        <p className=\"text-xs text-slate-500 leading-relaxed mb-4\">\r\n                                            Master business operations, financial literacy, and leadership.\r\n                                        </p>\r\n                                        <div className=\"space-y-2\">\r\n                                            <div className=\"flex items-center gap-2 text-[10px] font-bold text-slate-700\">\r\n                                                <span className=\"material-symbols-outlined text-[14px] text-green-500\">check_circle</span> GST & Tax Mastery\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2 text-[10px] font-bold text-slate-700\">\r\n                                                <span className=\"material-symbols-outlined text-[14px] text-green-500\">check_circle</span> Zero-to-One Scale\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"relative group\">\r\n                            <button\r\n                                onClick={() => setActiveTab('Workspace')}\r\n                                className=\"bg-indigo-600 text-white px-5 py-2.5 rounded-xl text-[10px] font-black shadow-xl shadow-indigo-500/20 hover:bg-indigo-700 transition-all flex items-center gap-2 uppercase tracking-widest active:scale-95 border border-indigo-400/30\"\r\n                            >\r\n                                <span className=\"material-icons-outlined text-sm\">rocket</span> WORKSPACE\r\n                            </button>\r\n\r\n                            {/* Hover Popup for Workspace */}\r\n                            <div className=\"absolute top-full right-0 mt-4 w-72 bg-white/80 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl border border-white/40 opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-300 z-50 transform translate-y-4 group-hover:translate-y-0\">\r\n                                <div className=\"absolute -top-2 right-8 w-4 h-4 bg-white/80 backdrop-blur-xl border-t border-l border-white/40 rotate-45\"></div>\r\n                                <div className=\"relative z-10\">\r\n                                    <h4 className=\"text-sm font-black text-slate-900 mb-1\">Operations Hub</h4>\r\n                                    <p className=\"text-[10px] text-indigo-600 font-bold uppercase tracking-wider mb-3\">Central Command</p>\r\n                                    <p className=\"text-xs text-slate-500 leading-relaxed mb-4\">\r\n                                        Track service status, upload documents, and manage your business profile.\r\n                                    </p>\r\n                                    <div className=\"flex items-center gap-2 text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-slate-50 p-2 rounded-lg border border-slate-100\">\r\n                                        <span className=\"material-symbols-outlined text-[14px] text-slate-400\">lock</span> Encrypted & Secure\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n\r\n                <main className=\"flex-1 overflow-y-auto custom-scroll bg-white\">\r\n                    {activeTab === 'Workspace' ? (\r\n                        <Workspace onNavigate={setActiveTab} />\r\n                    ) : (\r\n                        <div className=\"max-w-3xl mx-auto p-4 md:p-8\">\r\n                            {/* Guest Banner */}\r\n                            {!user && (\r\n                                <div className=\"mb-6 bg-gradient-to-r from-slate-900 to-slate-800 p-4 rounded-xl shadow-lg flex items-center justify-between border border-slate-700 animate-in slide-in-from-top-4 duration-700\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-10 h-10 bg-yellow-400 rounded-full flex items-center justify-center shrink-0\">\r\n                                            <span className=\"material-symbols-outlined text-slate-900 font-bold\">lock_open</span>\r\n                                        </div>\r\n                                        <div className=\"text-white\">\r\n                                            <h3 className=\"font-bold text-sm\">Login to Unlock your FREE Startup Credits & Business Tools!</h3>\r\n                                            <p className=\"text-[10px] text-slate-400\">Save your progress and access premium features.</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button className=\"bg-white text-slate-900 px-4 py-2 rounded-lg text-xs font-bold hover:bg-slate-100 transition-colors whitespace-nowrap\">\r\n                                        Login Now\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n\r\n                            {activeTab === 'A' && (\r\n                                <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n                                    {/* ── Incorporation Hero CTA ── */}\r\n                                    <div className=\"mb-8\">\r\n                                        {/* Main Hero Banner */}\r\n                                        <a href=\"/incorporation\" className=\"block group relative bg-gradient-to-r from-indigo-950 via-slate-900 to-purple-950 rounded-3xl p-7 text-white overflow-hidden shadow-2xl hover:shadow-indigo-900/40 transition-all hover:-translate-y-1 mb-5\">\r\n                                            <div className=\"absolute top-0 right-0 w-80 h-80 bg-indigo-500/10 rounded-full blur-3xl -translate-y-40 translate-x-40 group-hover:bg-indigo-500/20 transition-all duration-1000\" />\r\n                                            <div className=\"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-5\">\r\n                                                <div>\r\n                                                    <div className=\"flex items-center gap-2 mb-3\">\r\n                                                        <span className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\r\n                                                        <span className=\"text-[10px] font-black uppercase tracking-widest text-indigo-300\">AI-Powered Incorporation</span>\r\n                                                    </div>\r\n                                                    <h2 className=\"text-2xl font-black mb-2 leading-tight\">\r\n                                                        Register Your Business <span className=\"text-indigo-400\">in 10-15 Days</span>\r\n                                                    </h2>\r\n                                                    <p className=\"text-slate-400 text-sm mb-4 max-w-md\">\r\n                                                        Choose from 3 expert packages or let our AI build a custom plan for your business. 100% online, CA-supported.\r\n                                                    </p>\r\n                                                    {/* Mini Package Preview */}\r\n                                                    <div className=\"flex items-center gap-3 flex-wrap\">\r\n                                                        {[\r\n                                                            { emoji: '🏪', name: 'Proprietor', price: '₹2,999' },\r\n                                                            { emoji: '🚀', name: 'Startup', price: '₹7,999', popular: true },\r\n                                                            { emoji: '📈', name: 'Scale-Up', price: '₹14,999' },\r\n                                                        ].map((p, i) => (\r\n                                                            <div key={i} className={`flex items-center gap-2 px-3 py-1.5 rounded-xl text-xs font-bold border transition-all ${p.popular ? 'bg-indigo-500/30 border-indigo-400/50 text-white' : 'bg-white/10 border-white/10 text-slate-300'}`}>\r\n                                                                <span>{p.emoji}</span>\r\n                                                                <span>{p.name}</span>\r\n                                                                <span className=\"text-indigo-300 font-black\">{p.price}</span>\r\n                                                            </div>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"bg-indigo-600 text-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform flex-shrink-0\">\r\n                                                    <span className=\"material-icons-outlined\">arrow_forward</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </a>\r\n\r\n                                        {/* Quick Stats Row */}\r\n                                        <div className=\"grid grid-cols-3 gap-4\">\r\n                                            {[\r\n                                                { icon: 'verified', label: '5,000+ Registered', sub: 'Businesses incorporated', color: 'text-green-600 bg-green-50' },\r\n                                                { icon: 'schedule', label: '10-15 Days', sub: 'Average timeline', color: 'text-indigo-600 bg-indigo-50' },\r\n                                                { icon: 'support_agent', label: 'Expert CA Support', sub: 'Dedicated professionals', color: 'text-purple-600 bg-purple-50' },\r\n                                            ].map((stat, i) => (\r\n                                                <div key={i} className=\"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm flex items-center gap-3\">\r\n                                                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${stat.color}`}>\r\n                                                        <span className=\"material-icons text-xl\">{stat.icon}</span>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className=\"text-xs font-black text-slate-900\">{stat.label}</p>\r\n                                                        <p className=\"text-[10px] text-slate-400\">{stat.sub}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                {/* Hero Grid: Roadmap + Progress */}\r\n                                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8 items-start\">\r\n                                    {/* Left Column: Progress */}\r\n                                    <div className=\"lg:col-span-2 space-y-6\">\r\n                                        <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 group relative overflow-hidden\">\r\n                                            <h2 className=\"text-xl font-bold flex items-center justify-center gap-2 text-slate-800 relative z-10\">\r\n                                                Incorporation & Compliance\r\n                                                <span className=\"text-[10px] bg-green-50 text-green-600 px-2 py-0.5 rounded-full border border-green-100 uppercase font-extrabold tracking-wide\">Live Progress</span>\r\n                                            </h2>\r\n                                            <div className=\"mt-4 max-w-[240px] mx-auto relative z-10\">\r\n                                                <div className=\"flex justify-between text-[10px] mb-1.5 font-bold tracking-wider text-slate-400\">\r\n                                                    <span>SYSTEM STATUS</span>\r\n                                                    <span className=\"text-indigo-600\">35%</span>\r\n                                                </div>\r\n                                                <div className=\"w-full bg-slate-100 rounded-full h-2 overflow-hidden\">\r\n                                                    <div className=\"bg-indigo-600 h-2 rounded-full transition-all duration-1000 relative overflow-hidden\" style={{ width: '35%' }}>\r\n                                                        <div className=\"absolute inset-0 bg-white/20 w-full h-full animate-[shimmer_2s_infinite]\"></div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"opacity-0 group-hover:opacity-100 transition-opacity absolute mt-2 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] px-3 py-1 rounded shadow-xl font-bold z-50\">\r\n                                                Your Customized Roadmap is ready!\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {!roadmap && (\r\n                                            <div className=\"flex justify-center\">\r\n                                                <button\r\n                                                    onClick={handleGenerateRoadmap}\r\n                                                    disabled={loadingRoadmap}\r\n                                                    className=\"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-8 py-4 rounded-xl font-bold text-sm shadow-lg hover:shadow-purple-500/30 transition-all hover:-translate-y-1 flex items-center justify-center gap-2\"\r\n                                                >\r\n                                                    {loadingRoadmap ? (\r\n                                                        <><span className=\"animate-spin material-symbols-outlined text-lg\">sync</span> Generating Plan...</>\r\n                                                    ) : (\r\n                                                        <><span className=\"material-symbols-outlined text-lg\">auto_awesome</span> Generate My 30-Day Launch Plan</>\r\n                                                    )}\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Right Column: Advanced AI Co-Founder */}\r\n                                    <div className=\"lg:col-span-1 shadow-2xl shadow-indigo-200 rounded-2xl\">\r\n                                        {/* Removed - Now using global floating widget */}\r\n                                        {/* <AdvancedAiCoFounder /> */}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* AI Roadmap Display */}\r\n                                {roadmap && (\r\n                                    <div className=\"mb-8 bg-white rounded-2xl border border-purple-100 shadow-xl overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n                                        <div className=\"bg-gradient-to-r from-purple-600 to-indigo-600 p-6 text-white\">\r\n                                            <h3 className=\"text-xl font-serif font-bold flex items-center gap-2\">\r\n                                                <span className=\"material-symbols-outlined\">map</span> Your 30-Day Launch Plan\r\n                                            </h3>\r\n                                            <p className=\"opacity-90 text-sm mt-1\">{roadmap.overview}</p>\r\n                                        </div>\r\n                                        <div className=\"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                                            {roadmap.weeks.map((week, idx) => (\r\n                                                <div key={idx} className=\"bg-slate-50 rounded-xl p-4 border border-slate-100\">\r\n                                                    <div className=\"text-xs font-bold text-purple-600 uppercase tracking-widest mb-2\">Week {week.week}</div>\r\n                                                    <h4 className=\"font-bold text-slate-900 mb-3\">{week.title}</h4>\r\n                                                    <ul className=\"space-y-2\">\r\n                                                        {week.tasks.map((task, tIdx) => (\r\n                                                            <li key={tIdx} className=\"flex items-start gap-2 text-xs text-slate-600\">\r\n                                                                <span className=\"material-symbols-outlined text-sm text-green-500 mt-0.5\">check_circle</span>\r\n                                                                {task}\r\n                                                            </li>\r\n                                                        ))}\r\n                                                    </ul>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n<div className=\"grid grid-cols-1 gap-3\">\r\n                                    {incorporationServices.map((item, i) => (\r\n                                        <div \r\n                                            key={i} \r\n                                            onClick={() => {\r\n                                                if (item.label.includes('Global') || item.label.includes('Ready to Go')) {\r\n                                                    setShowGlobalIncorporation(true);\r\n                                                } else if (item.label === 'Project Reports') {\r\n                                                    setShowDPRTool(true);\r\n                                                }\r\n                                            }}\r\n                                            className={`bg-white rounded-xl p-3 md:p-4 border border-slate-100 flex items-center gap-4 shadow-sm hover:shadow-md transition-all group cursor-pointer`}\r\n                                        >\r\n                                            <div className={`w-10 h-10 rounded-lg ${item.bg} ${item.color} flex items-center justify-center transition-all flex-shrink-0`}>\r\n                                                <span className=\"material-symbols-outlined text-xl\">{item.icon}</span>\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <h3 className=\"font-bold text-sm text-slate-800 leading-tight tracking-tight truncate\" title={item.label}>{item.label}</h3>\r\n                                                <p className=\"text-[10px] text-slate-400 font-medium mt-0.5 truncate\">{item.time}</p>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-4 flex-shrink-0\">\r\n                                                <button className=\"text-[9px] font-bold text-slate-400 hover:text-indigo-600 tracking-wide hidden sm:block transition-colors\">DETAILS</button>\r\n                                                <button className={`px-4 py-1.5 ${item.button === 'UPLOAD' && (item as any).variant === 'secondary' ? 'bg-white border border-slate-200 text-slate-700 hover:bg-slate-50' : (item as any).btnColor ? `${(item as any).btnColor} text-white` : 'bg-slate-900 text-white hover:bg-slate-800'} text-[10px] font-bold rounded-lg shadow-md transition-all active:scale-95 min-w-[80px]`}>\r\n                                                    {item.button || 'UPLOAD'}\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                                \r\n                                {/* Ready to Go Global Banner */}\r\n                                <div className=\"mt-8 relative overflow-hidden bg-gradient-to-r from-blue-600 to-indigo-600 rounded-[2.5rem] p-10 text-white shadow-2xl group cursor-pointer border-4 border-white/20 transition-all hover:scale-[1.01]\" onClick={() => setShowGlobalIncorporation(true)}>\r\n                                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32 blur-3xl group-hover:bg-white/20 transition-all duration-1000\"></div>\r\n                                    <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-cyan-500/20 rounded-full translate-y-32 -translate-x-32 blur-3xl group-hover:bg-cyan-500/30 transition-all duration-1000\"></div>\r\n                                    \r\n                                    <div className=\"relative z-10 flex flex-col items-center justify-center text-center\">\r\n                                        <div className=\"w-20 h-20 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center mb-6 shadow-xl group-hover:scale-110 transition-transform duration-500 border border-white/20\">\r\n                                            <span className=\"material-icons text-4xl text-white\">public</span>\r\n                                        </div>\r\n                                        \r\n                                        <h2 className=\"text-3xl md:text-4xl font-black mb-3 tracking-tight\">\r\n                                            Ready to Go Global?\r\n                                        </h2>\r\n                                        <p className=\"text-blue-100 text-sm md:text-base mb-8 max-w-lg mx-auto font-medium leading-relaxed\">\r\n                                            Expand your business to international markets. Incorporation, Export, and Market Access in 50+ countries.\r\n                                        </p>\r\n                                        \r\n                                        <button className=\"bg-white text-blue-600 px-8 py-3.5 rounded-xl font-bold text-sm shadow-xl hover:shadow-white/20 hover:bg-blue-50 transition-all hover:-translate-y-1 flex items-center gap-2 group-hover:gap-3\">\r\n                                            <span className=\"material-icons text-lg\">public</span>\r\n                                            Explore Global Opportunities \r\n                                            <span className=\"material-icons text-sm\">arrow_forward</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === 'B' && (\r\n                            <div className=\"flex gap-4 relative min-h-[85vh]\">\r\n                                {/* Main Content Area */}\r\n                                <div className={`flex-1 transition-all duration-300 ${isAgentSidebarExpanded ? 'mr-0' : 'mr-12'}`} style={{ marginRight: isAgentSidebarExpanded ? `${agentSidebarWidth + 32}px` : '48px' }}>\r\n                                    <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-700 relative p-8 rounded-[3rem] bg-[#f8faff] min-h-full\">\r\n                                        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_70%_20%,rgba(79,70,229,0.03),transparent_40%),radial-gradient(circle_at_10%_80%,rgba(236,72,153,0.03),transparent_40%)] rounded-[3rem] pointer-events-none\"></div>\r\n\r\n                                        {showLaunchPadFlow && (\r\n                                            <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-md animate-in fade-in duration-500\">\r\n                                                <div className=\"relative w-full max-w-xl\">\r\n                                                    <button\r\n                                                        onClick={() => setShowLaunchPadFlow(false)}\r\n                                                        className=\"absolute -top-4 -right-4 w-10 h-10 bg-white rounded-full shadow-2xl flex items-center justify-center text-slate-400 hover:text-slate-900 transition-all z-[110] border border-slate-100\"\r\n                                                    >\r\n                                                        <span className=\"material-symbols-outlined font-black\">close</span>\r\n                                                    </button>\r\n                                                    <LaunchPadAIOnboarding\r\n                                                        businessData={data}\r\n                                                        onComplete={handleLaunchPadComplete}\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {currentCanvas === 'Logo Designer' ? (\r\n                                            <div className=\"animate-in zoom-in-95 duration-500 relative max-w-4xl mx-auto\">\r\n                                                <button\r\n                                                    onClick={() => setCurrentCanvas(null)}\r\n                                                    className=\"absolute top-0 -left-6 w-12 h-12 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-slate-400 hover:text-slate-900 transition-all z-10\"\r\n                                                >\r\n                                                    <span className=\"material-symbols-outlined font-black\">arrow_back</span>\r\n                                                </button>\r\n                                                <div className=\"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-2xl mt-12\">\r\n                                                    <div className=\"flex items-center gap-4 mb-10\">\r\n                                                        <div className=\"w-16 h-16 bg-indigo-50 rounded-3xl flex items-center justify-center text-indigo-600\">\r\n                                                            <span className=\"material-symbols-outlined text-4xl font-black\">brush</span>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <h2 className=\"text-3xl font-black text-slate-900 tracking-tighter\">Logo Designer Studio</h2>\r\n                                                            <p className=\"text-slate-400 font-bold uppercase tracking-widest text-[10px]\">AI-Powered Brand Identity</p>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-8\">\r\n                                                        {[\r\n                                                            { label: 'Minimalist', desc: 'Clean & Modern' },\r\n                                                            { label: 'Gradient', desc: 'Vibrant & Bold' },\r\n                                                            { label: 'Abstract', desc: 'Unique Shapes' },\r\n                                                            { label: 'Lettermark', desc: 'Typographic focus' }\r\n                                                        ].map((style, i) => (\r\n                                                            <div key={i} className=\"group cursor-pointer\">\r\n                                                                <div className=\"aspect-square bg-slate-50 rounded-[2.5rem] border-2 border-slate-100 group-hover:border-indigo-600 transition-all flex items-center justify-center mb-4 relative overflow-hidden shadow-sm hover:shadow-xl\">\r\n                                                                    <div className=\"w-16 h-16 rounded-full border-4 border-slate-200 flex items-center justify-center text-4xl font-black text-slate-300 group-hover:text-indigo-600 group-hover:border-indigo-600 transition-all\">\r\n                                                                        {data?.name?.charAt(0) || 'b'}\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <h4 className=\"text-xs font-black uppercase tracking-widest text-slate-900\">{style.label}</h4>\r\n                                                                <p className=\"text-[9px] font-bold text-slate-400 uppercase tracking-wider\">{style.desc}</p>\r\n                                                            </div>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"max-w-5xl mx-auto pt-4\">\r\n                                                {/* NEW: Build your Business CTA (35% Smaller Version) */}\r\n                                                <div className=\"mb-8 relative overflow-hidden bg-gradient-to-r from-indigo-950 via-slate-900 to-black rounded-[2.5rem] p-6 text-white shadow-2xl group cursor-pointer border border-white/5\" onClick={() => setShowBuildPopup(true)}>\r\n                                                    <div className=\"absolute top-0 right-0 w-48 h-48 bg-white/5 rounded-full -translate-y-24 translate-x-24 blur-3xl group-hover:bg-white/10 transition-all duration-1000\"></div>\r\n                                                    <div className=\"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6\">\r\n                                                        <div className=\"text-left\">\r\n                                                            <div className=\"flex items-center gap-2 mb-3\">\r\n                                                                <span className=\"px-2.5 py-1 bg-indigo-500/20 text-indigo-300 rounded-lg text-[7px] font-black uppercase tracking-[0.2em] border border-indigo-500/20\">Ignition Phase</span>\r\n                                                                <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"></span>\r\n                                                                <span className=\"text-[7px] font-black text-white/30 uppercase tracking-[0.2em]\">Neural Link Active</span>\r\n                                                            </div>\r\n                                                            <h2 className=\"text-2xl font-black tracking-tightest leading-[0.9] italic mb-3\">\r\n                                                                BUILD YOUR ENTIRE <span className=\"text-indigo-400 not-italic\">BRAND PRESENCE</span>\r\n                                                            </h2>\r\n                                                            <p className=\"text-white/50 text-[9px] font-black uppercase tracking-[0.2em] mb-3\">\r\n                                                                GET LIFE TO YOUR STARTUP • BUILD EVERYTHING IN MINUTE CLICK\r\n                                                            </p>\r\n                                                            <div className=\"flex items-center gap-2 text-indigo-400/80\">\r\n                                                                <span className=\"material-symbols-outlined text-[12px] animate-bounce\">expand_circle_down</span>\r\n                                                                <span className=\"text-[8px] font-black uppercase tracking-[0.3em]\">Initialize Mission Control</span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"w-14 h-14 bg-white/10 rounded-[1.5rem] flex items-center justify-center group-hover:scale-110 transition-transform duration-500 backdrop-blur-xl border border-white/10 shadow-2xl relative shrink-0\">\r\n                                                            <div className=\"absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse\"></div>\r\n                                                            <span className=\"material-symbols-outlined text-2xl font-black animate-bounce relative z-10\">rocket_launch</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Service Category Toggles */}\r\n                                                <div className=\"flex items-center justify-center gap-2 mb-12 bg-white/50 backdrop-blur-md p-2 rounded-2xl border border-white/50 shadow-sm w-fit mx-auto\">\r\n                                                    {[\r\n                                                        { id: 'all', label: 'All Engines', icon: 'grid_view' },\r\n                                                        { id: 'brand', label: 'Brand Identity', icon: 'brush' },\r\n                                                        { id: 'legal', label: 'Legal & Compliance', icon: 'gavel' },\r\n                                                        { id: 'growth', label: 'Growth & Socials', icon: 'campaign' }\r\n                                                    ].map((cat) => (\r\n                                                        <button\r\n                                                            key={cat.id}\r\n                                                            onClick={() => setCurrentServiceCategory(cat.id as any)}\r\n                                                            className={`flex items-center gap-2 px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${currentServiceCategory === cat.id\r\n                                                                ? 'bg-slate-900 text-white shadow-xl scale-105'\r\n                                                                : 'text-slate-400 hover:text-slate-900 hover:bg-white/80'\r\n                                                                }`}\r\n                                                        >\r\n                                                            <span className=\"material-symbols-outlined text-sm\">{cat.icon}</span>\r\n                                                            {cat.label}\r\n                                                        </button>\r\n                                                    ))}\r\n                                                </div>\r\n\r\n                                                {/* Filtered Service Grid */}\r\n                                                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in slide-in-from-bottom-2 duration-500\">\r\n                                                    {[\r\n                                                        { label: 'DOMAIN SEARCH', icon: 'language', bg: 'bg-blue-50', color: 'text-blue-600', badge: 'COMING SOON', cat: 'brand' },\r\n                                                        { label: 'WEBSITE BUILDER', icon: 'web_stories', bg: 'bg-emerald-50', color: 'text-emerald-600', badge: 'COMING SOON', cat: 'brand' },\r\n                                                        { label: 'E-STORE SETUP', icon: 'shopping_cart', bg: 'bg-indigo-50', color: 'text-indigo-600', badge: 'COMING SOON', cat: 'growth' },\r\n                                                        { label: 'PRODUCT COPY', icon: 'edit_note', bg: 'bg-amber-50', color: 'text-amber-600', badge: 'COMING SOON', sub: 'PAGE CREATE', cat: 'growth' },\r\n                                                        { label: 'BRAND BROCHURE', icon: 'folder_open', bg: 'bg-pink-50', color: 'text-pink-600', badge: 'COMING SOON', cat: 'brand' },\r\n                                                        { label: 'PRODUCT CATALOG', icon: 'menu_book', bg: 'bg-purple-50', color: 'text-purple-600', badge: 'COMING SOON', cat: 'brand' },\r\n                                                        { label: 'DIGITAL CARD', icon: 'contact_page', bg: 'bg-slate-50', color: 'text-slate-600', badge: 'COMING SOON', cat: 'brand' },\r\n                                                        { label: 'PITCH DECK AI', icon: 'play_circle', bg: 'bg-cyan-50', color: 'text-cyan-600', badge: 'BETA', cat: 'growth' },\r\n                                                        { label: 'SM MANAGER', icon: 'share', bg: 'bg-rose-50', color: 'text-rose-600', badge: 'COMING SOON', cat: 'growth' },\r\n                                                        { label: 'AI POST GEN', icon: 'post_add', bg: 'bg-green-50', color: 'text-green-600', badge: 'BETA', cat: 'growth' },\r\n                                                        { label: 'BRAND KITS', icon: 'category', bg: 'bg-teal-50', color: 'text-teal-600', badge: 'COMING SOON', cat: 'brand' },\r\n                                                        { label: 'SEO TOOLS', icon: 'build', bg: 'bg-sky-50', color: 'text-sky-600', badge: 'COMING SOON', cat: 'growth' }\r\n                                                    ]\r\n                                                        .filter(s => currentServiceCategory === 'all' || s.cat === currentServiceCategory)\r\n                                                        .map((service, i) => (\r\n                                                            <div\r\n                                                                key={i}\r\n                                                                className=\"bg-white p-4 h-28 rounded-[2rem] shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all group flex flex-col justify-between cursor-pointer relative overflow-hidden\"\r\n                                                                onClick={() => setCurrentCanvas(service.label)}\r\n                                                            >\r\n                                                                <div className=\"absolute top-3 right-5 text-[6px] font-black text-slate-300 uppercase tracking-[0.1em]\">\r\n                                                                    {service.badge}\r\n                                                                </div>\r\n                                                                <div className={`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${service.bg} ${service.color} group-hover:scale-110 transition-transform`}>\r\n                                                                    <span className=\"material-symbols-outlined text-xl font-black\">{service.icon}</span>\r\n                                                                </div>\r\n                                                                <div className=\"text-left\">\r\n                                                                    <h4 className=\"text-[9px] font-black text-slate-900 uppercase tracking-widest leading-tight\">{service.label}</h4>\r\n                                                                    {(service as any).sub && <p className=\"text-[6px] text-slate-400 font-bold uppercase mt-1 tracking-wider leading-none\">{(service as any).sub}</p>}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Right Agent Sidebar */}\r\n                                <div\r\n                                    className={`fixed top-24 bottom-24 right-8 z-50 transition-all duration-300 ease-in-out ${isAgentSidebarExpanded ? '' : 'w-14'}`}\r\n                                    style={{ width: isAgentSidebarExpanded ? `${agentSidebarWidth}px` : '56px' }}\r\n                                >\r\n                                    <div className=\"h-full bg-white rounded-[2.5rem] border border-slate-200 shadow-2xl flex flex-col overflow-hidden relative group/sidebar\">\r\n                                        {/* Resize Drag Handle (Left Edge) */}\r\n                                        {isAgentSidebarExpanded && (\r\n                                            <div\r\n                                                onMouseDown={() => setIsResizing(true)}\r\n                                                className=\"absolute top-1/4 bottom-1/4 left-0 w-1.5 cursor-ew-resize hover:bg-indigo-500/20 transition-colors z-30 group/handle flex items-center justify-center\"\r\n                                            >\r\n                                                <div className=\"w-0.5 h-8 bg-slate-200 group-hover/handle:bg-indigo-400 rounded-full transition-colors\"></div>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Resize/Toggle Button */}\r\n                                        <button\r\n                                            onClick={() => setIsAgentSidebarExpanded(!isAgentSidebarExpanded)}\r\n                                            className=\"absolute top-1/2 -left-4 w-8 h-8 bg-slate-900 text-white rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform z-40\"\r\n                                        >\r\n                                            <span className=\"material-symbols-outlined text-[16px]\">\r\n                                                {isAgentSidebarExpanded ? 'chevron_right' : 'chevron_left'}\r\n                                            </span>\r\n                                        </button>\r\n\r\n                                        {isAgentSidebarExpanded ? (\r\n                                            <>\r\n                                                {/* Sidebar Header */}\r\n                                                <div className=\"border-b border-slate-100 bg-white sticky top-0 z-20\">\r\n                                                    <div className=\"p-6\">\r\n                                                        <div className=\"flex items-center justify-between mb-6\">\r\n                                                            <div className=\"flex items-center gap-3\">\r\n                                                                <div className=\"w-10 h-10 bg-slate-900 text-white rounded-xl flex items-center justify-center shadow-lg group-hover:rotate-12 transition-transform\">\r\n                                                                    <span className=\"material-symbols-outlined text-xl\">bolt</span>\r\n                                                                </div>\r\n                                                                <div>\r\n                                                                    <h3 className=\"text-sm font-black text-slate-900 uppercase tracking-tighter italic flex items-center gap-2\">\r\n                                                                        Arkle <span className={`not-italic ${agentMode === 'developer' ? 'text-emerald-600' : 'text-indigo-600'}`}>\r\n                                                                            {agentMode === 'developer' ? 'Developer' : 'Co-founder'}\r\n                                                                        </span>\r\n                                                                        <span className=\"bg-slate-900 text-white text-[6px] px-1.5 py-0.5 rounded-full not-italic tracking-[0.2em] font-black uppercase\">Plus</span>\r\n                                                                    </h3>\r\n                                                                    <div className=\"flex items-center gap-1\">\r\n                                                                        <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"></div>\r\n                                                                        <span className=\"text-[8px] font-medium text-slate-400 uppercase tracking-widest\">Neural Link Active</span>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <button\r\n                                                                    onClick={() => setAgentSidebarWidth(prev => prev > 500 ? 400 : 700)}\r\n                                                                    className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${agentSidebarWidth > 500 ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-200' : 'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}\r\n                                                                >\r\n                                                                    <span className=\"material-symbols-outlined text-sm font-black\">\r\n                                                                        {agentSidebarWidth > 500 ? 'close_fullscreen' : 'fullscreen'}\r\n                                                                    </span>\r\n                                                                </button>\r\n                                                                <button className=\"w-8 h-8 rounded-lg hover:bg-slate-100 flex items-center justify-center text-slate-400\">\r\n                                                                    <span className=\"material-symbols-outlined text-sm font-black\">settings</span>\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        </div>\r\n\r\n                                                        {/* Mode Switcher Tabs */}\r\n                                                        <div className=\"flex p-1 bg-slate-100 rounded-2xl gap-1\">\r\n                                                            <button\r\n                                                                onClick={() => setAgentMode('cofounder')}\r\n                                                                className={`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl transition-all ${agentMode === 'cofounder' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}\r\n                                                            >\r\n                                                                <span className=\"material-symbols-outlined text-[18px]\">psychology</span>\r\n                                                                <span className=\"text-[10px] font-black uppercase tracking-widest\">Co-founder</span>\r\n                                                            </button>\r\n                                                            <button\r\n                                                                onClick={() => setAgentMode('developer')}\r\n                                                                className={`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl transition-all ${agentMode === 'developer' ? 'bg-white text-emerald-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}\r\n                                                            >\r\n                                                                <span className=\"material-symbols-outlined text-[18px]\">terminal</span>\r\n                                                                <span className=\"text-[10px] font-black uppercase tracking-widest\">Developer</span>\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Chat/Messages Area */}\r\n                                                <div className=\"flex-1 overflow-y-auto p-6 space-y-4 bg-white custom-scrollbar\">\r\n                                                    <div className={`p-4 rounded-2xl ${agentMode === 'developer' ? 'bg-emerald-50 border border-emerald-100' : 'bg-indigo-50 border border-indigo-100'}`}>\r\n                                                        <p className={`text-[10px] font-bold ${agentMode === 'developer' ? 'text-emerald-700' : 'text-indigo-700'} uppercase tracking-widest mb-2 flex items-center justify-between`}>\r\n                                                            <span>{agentMode === 'developer' ? '[ DEV_LOG_ACTIVE ]' : 'Strategic Guidance'}</span>\r\n                                                            <span className=\"text-[7px] text-slate-400\">ENGINE: {selectedModel.toUpperCase()}</span>\r\n                                                        </p>\r\n                                                        <p className=\"text-[11px] text-slate-700 leading-relaxed font-medium\">\r\n                                                            {agentMode === 'developer'\r\n                                                                ? `[System] Using ${selectedModel.toUpperCase()} to monitor build logic. Neural parsing at 99%. All components optimized for rapid deployment.`\r\n                                                                : `Welcome back. I'm using ${selectedModel === 'gemini' ? 'Google Gemini' : selectedModel === 'claude' ? 'Anthropic Claude' : 'OpenAI'} to provide deep architectural insights for ${data?.name || 'your startup'}.`}\r\n                                                        </p>\r\n                                                    </div>\r\n\r\n                                                    {agentMode === 'developer' && (\r\n                                                        <div className=\"bg-slate-900 rounded-xl p-4 font-mono text-[9px] text-emerald-400 shadow-inner\">\r\n                                                            <div className=\"flex gap-2 mb-1\"><span className=\"text-slate-500\">$</span> arkle --model {selectedModel}</div>\r\n                                                            <div className=\"text-white opacity-80\">Configuring Engine: {selectedModel}... Done.</div>\r\n                                                            <div className=\"text-white opacity-80\">Latency: 45ms</div>\r\n                                                            <div className=\"mt-2 text-emerald-300 animate-pulse\">&gt; Ready for High-Fidelity Commands_</div>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n\r\n                                                {/* Arkle Input Command Center */}\r\n                                                <div className=\"p-6 bg-white border-t border-slate-50\">\r\n                                                    <div className=\"relative group/input bg-slate-50 rounded-[2rem] p-3 border-2 border-transparent focus-within:border-slate-200 transition-all shadow-lg overflow-hidden\">\r\n                                                        <textarea\r\n                                                            value={businessDescription}\r\n                                                            onChange={(e) => setBusinessDescription(e.target.value)}\r\n                                                            placeholder={agentMode === 'developer' ? \"Define technical logic...\" : \"Ask Arkle anything...\"}\r\n                                                            className=\"w-full bg-transparent px-4 py-2 text-[13px] font-medium outline-none transition-all resize-none h-28 placeholder-slate-300\"\r\n                                                        />\r\n\r\n                                                        <div className=\"flex items-center justify-between px-2 pt-2 border-t border-slate-100/50 mt-2\">\r\n                                                            <div className=\"flex items-center gap-1.5\">\r\n                                                                {/* Utility Buttons */}\r\n                                                                <label className=\"w-9 h-9 rounded-xl hover:bg-slate-200/50 flex items-center justify-center text-slate-400 hover:text-slate-900 transition-all cursor-pointer group/util\">\r\n                                                                    <input type=\"file\" className=\"hidden\" onChange={(e) => {\r\n                                                                        if (e.target.files?.[0]) {\r\n                                                                            setToast({ visible: true, message: \"Asset Linked\", sub: `${e.target.files[0].name} synchronized.` });\r\n                                                                        }\r\n                                                                    }} />\r\n                                                                    <span className=\"material-symbols-outlined text-[20px]\">add</span>\r\n                                                                </label>\r\n\r\n                                                                {/* Agent Mode Dropdown (Co-founder / Developer) */}\r\n                                                                <button\r\n                                                                    className=\"flex items-center gap-2.5 px-3 py-2 hover:bg-slate-200/60 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-900 transition-all border border-transparent hover:border-slate-200 group/mode\"\r\n                                                                    onClick={() => setAgentMode(agentMode === 'cofounder' ? 'developer' : 'cofounder')}\r\n                                                                >\r\n                                                                    <span className=\"material-symbols-outlined text-[16px] text-indigo-600 group-hover/mode:scale-110 transition-transform\">\r\n                                                                        {agentMode === 'developer' ? 'terminal' : 'psychology'}\r\n                                                                    </span>\r\n                                                                    {agentMode === 'developer' ? 'Arkle Developer' : 'Arkle Co-founder'}\r\n                                                                    <span className=\"material-symbols-outlined text-[14px] opacity-30\">expand_less</span>\r\n                                                                </button>\r\n\r\n                                                                {/* Model Selection Dropdown */}\r\n                                                                <button\r\n                                                                    className=\"flex items-center gap-2.5 px-3 py-2 hover:bg-slate-200/60 rounded-xl text-[9px] font-black uppercase tracking-widest text-slate-900 transition-all border border-transparent hover:border-slate-200 group/model\"\r\n                                                                    onClick={() => {\r\n                                                                        const models: ('gemini' | 'claude' | 'gpt4o')[] = ['gemini', 'claude', 'gpt4o'];\r\n                                                                        const nextIdx = (models.indexOf(selectedModel) + 1) % models.length;\r\n                                                                        setSelectedModel(models[nextIdx]);\r\n                                                                    }}\r\n                                                                >\r\n                                                                    <span className={`w-1.5 h-1.5 rounded-full ${selectedModel === 'gemini' ? 'bg-blue-500' : selectedModel === 'claude' ? 'bg-orange-500' : 'bg-green-500'} animate-pulse`}></span>\r\n                                                                    {selectedModel === 'gemini' ? 'Gemini 3.5' : selectedModel === 'claude' ? 'Claude 3.5' : 'GPT-4o Mini'}\r\n                                                                    <span className=\"material-symbols-outlined text-[14px] opacity-30\">expand_less</span>\r\n                                                                </button>\r\n                                                            </div>\r\n\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <button\r\n                                                                    className=\"w-9 h-9 rounded-xl hover:bg-rose-50 flex items-center justify-center text-slate-400 hover:text-rose-600 transition-all group/mic\"\r\n                                                                    onClick={() => setToast({ visible: true, message: \"Voice Activated\", sub: \"Listening for commands...\" })}\r\n                                                                >\r\n                                                                    <span className=\"material-symbols-outlined text-[20px]\">mic</span>\r\n                                                                </button>\r\n                                                                <button className=\"w-10 h-10 bg-slate-900 text-white rounded-xl flex items-center justify-center shadow-lg hover:scale-110 active:scale-95 transition-all\">\r\n                                                                    <span className=\"material-symbols-outlined text-[18px]\">arrow_forward</span>\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </>\r\n                                        ) : (\r\n                                            /* Minimized View */\r\n                                            <div className=\"flex flex-col items-center py-8 gap-6 h-full\">\r\n                                                <div className=\"w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center shadow-lg cursor-pointer hover:rotate-12 transition-transform\" onClick={() => setIsAgentSidebarExpanded(true)}>\r\n                                                    <span className=\"material-symbols-outlined text-xl\">bolt</span>\r\n                                                </div>\r\n                                                <div className=\"h-full w-[1px] bg-slate-100\"></div>\r\n                                                <div className=\"rotate-90 origin-center whitespace-nowrap text-[10px] font-black text-slate-300 uppercase tracking-[0.3em]\">\r\n                                                    ARKLE AI AGENT\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {activeTab === 'LearnerStudio' && (\r\n                            <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n                                <div className=\"text-center mb-8 bg-white p-6 rounded-xl shadow-sm border border-slate-100\">\r\n                                    <h2 className=\"text-xl font-bold font-serif text-slate-900 mb-2\">Learner Studio</h2>\r\n                                    <p className=\"text-slate-500 text-sm font-sans\">Skill upgradation, tech adoption, and master business operations.</p>\r\n                                </div>\r\n\r\n                                {/* Glassmorphic Coming Soon Overlay for Learner Studio */}\r\n                                <div className=\"fixed bottom-24 right-8 z-30 max-w-sm w-full animate-in slide-in-from-bottom-10 duration-1000 delay-100\">\r\n                                    <div className=\"backdrop-blur-xl bg-white/70 border border-white/50 shadow-2xl rounded-2xl p-5 relative overflow-hidden group hover:bg-white/90 transition-all cursor-pointer\" onClick={() => handleServiceClick('Learner Studio Access', 'Coming Soon')}>\r\n                                        <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-teal-500 via-green-500 to-emerald-500\"></div>\r\n                                        <div className=\"flex items-start gap-4\">\r\n                                            <div className=\"bg-teal-100 text-teal-600 p-2.5 rounded-xl shrink-0 group-hover:scale-110 transition-transform\">\r\n                                                <span className=\"material-symbols-outlined text-2xl\">school</span>\r\n                                            </div>\r\n                                            <div>\r\n                                                <h3 className=\"font-black text-slate-900 text-sm mb-1 uppercase tracking-wide\">Academy Opening Soon</h3>\r\n                                                <p className=\"text-xs text-slate-600 leading-relaxed font-medium\">\r\n                                                    Detailed courses on GST, Funding, and Growth are in production.\r\n                                                </p>\r\n                                                <div className=\"mt-3 flex items-center gap-2 text-[10px] font-bold text-teal-600 uppercase tracking-wider\">\r\n                                                    <span>Join Waitlist</span>\r\n                                                    <span className=\"material-symbols-outlined text-sm group-hover:translate-x-1 transition-transform\">notifications_active</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"absolute -bottom-10 -right-10 w-24 h-24 bg-teal-500/10 rounded-full blur-xl group-hover:bg-teal-500/20 transition-all\"></div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                                    {learnerStudioServices.map((service, i) => (\r\n                                        <div\r\n                                            key={i}\r\n                                            onClick={() => handleServiceClick(service.label, (service as any).badge)}\r\n                                            className=\"bg-white p-4 rounded-xl border border-slate-100 shadow-sm hover:shadow-md transition-all flex items-start gap-4 group cursor-pointer active:scale-95\"\r\n                                        >\r\n                                            <div className={`w-10 h-10 rounded-xl flex items-center justify-center transition-all ${service.bg} ${service.color}`}>\r\n                                                <span className=\"material-symbols-outlined text-lg font-bold\">{service.icon}</span>\r\n                                            </div>\r\n                                            <div className=\"flex-1\">\r\n                                                <h3 className=\"font-bold text-xs text-slate-900 uppercase tracking-tight mb-1\">{service.label}</h3>\r\n                                                <p className=\"text-[10px] text-slate-500 font-medium leading-relaxed\">{service.desc}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div className=\"h-8\"></div>\r\n                    </div>\r\n                    )}\r\n                </main>\r\n\r\n                <div className=\"bg-white border-t border-slate-200 p-3 sticky bottom-0 z-40\">\r\n                    <div className=\"max-w-3xl mx-auto flex items-center justify-between\">\r\n                        <button className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-lg text-[10px] shadow-md transition-colors flex items-center gap-2\">\r\n                            <span className=\"material-symbols-outlined text-sm\">support_agent</span>\r\n                            GET EXPERT SUPPORT\r\n                        </button>\r\n                        <div className=\"hidden lg:flex gap-6 text-[9px] font-bold text-slate-400 uppercase tracking-tight\">\r\n                            <a className=\"hover:text-primary transition-colors cursor-pointer\">Business Setup</a>\r\n                            <a className=\"hover:text-primary transition-colors cursor-pointer\">Branding</a>\r\n                            <a className=\"hover:text-primary transition-colors cursor-pointer\">Growth</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Global Floating Layout Components */}\r\n                {activeTab === 'A' && (\r\n                    <div className=\"fixed bottom-6 right-6 z-[60] flex flex-col items-end gap-4 pointer-events-none\">\r\n                        <div className=\"pointer-events-auto\">\r\n                            <QuickChatBot user={user} data={data} />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <Toast\r\n                message={toast.message}\r\n                subMessage={toast.sub}\r\n                isVisible={toast.visible}\r\n                onClose={() => setToast(prev => ({ ...prev, visible: false }))}\r\n            />\r\n\r\n            {/* Global Incorporation Full Page Modal */}\r\n            {showGlobalIncorporation && (\r\n                <GlobalIncorporationFullPage\r\n                    onClose={() => setShowGlobalIncorporation(false)}\r\n                    onLeadCapture={(leadData) => {\r\n                        console.log('Global lead captured:', leadData);\r\n                        setShowGlobalIncorporation(false);\r\n                        setShowLoginPrompt(true);\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Oracle AI Studio - Full ChatGPT-style Interface */}\r\n            {activeTab === 'Oracle' && (\r\n                <AIStudioLayout />\r\n            )}\r\n\r\n            {/* Build Vision Popup - Spotlight Style Modal */}\r\n            {showBuildPopup && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-6 sm:p-12\">\r\n                    <div className=\"absolute inset-0 bg-slate-900/40 backdrop-blur-md animate-in fade-in duration-300\" onClick={() => setShowBuildPopup(false)}></div>\r\n                    <div className=\"relative w-full max-w-2xl bg-white rounded-[3rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 border border-slate-100\">\r\n                        <div className=\"p-10\">\r\n                            <div className=\"flex items-center gap-5 mb-10\">\r\n                                <div className=\"w-16 h-16 bg-slate-900 text-white rounded-3xl flex items-center justify-center shadow-2xl group-hover:rotate-12 transition-transform\">\r\n                                    <span className=\"material-symbols-outlined text-4xl\">rocket_launch</span>\r\n                                </div>\r\n                                <div className=\"text-left\">\r\n                                    <h3 className=\"text-3xl font-black text-slate-900 tracking-tighter italic leading-none\">NEURAL <span className=\"not-italic text-indigo-600\">IGNITION</span></h3>\r\n                                    <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2\">Initialize your digital ecosystem</p>\r\n                                </div>\r\n                                <button onClick={() => setShowBuildPopup(false)} className=\"ml-auto w-12 h-12 rounded-full hover:bg-slate-100 flex items-center justify-center text-slate-400 transition-colors\">\r\n                                    <span className=\"material-symbols-outlined\">close</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-8\">\r\n                                <div className=\"relative\">\r\n                                    <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block\">Business Description</label>\r\n                                    <textarea\r\n                                        autoFocus\r\n                                        value={businessDescription}\r\n                                        onChange={(e) => setBusinessDescription(e.target.value)}\r\n                                        placeholder=\"Briefly describe your vision. (e.g. 'Build a modern organic skincare brand for athletes')\"\r\n                                        className=\"w-full h-48 bg-slate-50 border-2 border-transparent focus:border-indigo-100 focus:bg-white rounded-[2rem] p-8 text-sm font-medium outline-none transition-all resize-none shadow-inner\"\r\n                                    />\r\n                                    <div className=\"absolute bottom-6 right-8 flex items-center gap-3\">\r\n                                        <span className=\"text-[8px] font-black text-slate-300 uppercase tracking-widest flex items-center gap-1.5\">\r\n                                            <span className=\"material-symbols-outlined text-[10px]\">auto_fix</span> AI ENHANCE READY\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setShowBuildPopup(false);\r\n                                            setIsAgentSidebarExpanded(true);\r\n                                        }}\r\n                                        className=\"p-8 bg-white border-2 border-slate-100 rounded-[2rem] hover:border-indigo-600 hover:shadow-xl hover:-translate-y-1 transition-all group group/btn text-left\"\r\n                                    >\r\n                                        <div className=\"w-12 h-12 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n                                            <span className=\"material-symbols-outlined text-2xl font-black\">forum</span>\r\n                                        </div>\r\n                                        <h4 className=\"text-sm font-black text-slate-900 uppercase tracking-tight mb-1 group-hover:text-indigo-600 transition-colors\">Submit to Arkle</h4>\r\n                                        <p className=\"text-[10px] text-slate-400 font-bold leading-tight\">Discuss and refine your vision with your AI Co-founder.</p>\r\n                                    </button>\r\n\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setShowBuildPopup(false);\r\n                                            setShowLaunchPadFlow(true);\r\n                                        }}\r\n                                        className=\"p-8 bg-slate-900 text-white rounded-[2rem] hover:bg-black hover:shadow-xl hover:-translate-y-1 transition-all group group/btn text-left\"\r\n                                    >\r\n                                        <div className=\"w-12 h-12 bg-white/10 text-white rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\r\n                                            <span className=\"material-symbols-outlined text-2xl font-black\">playlist_add_check</span>\r\n                                        </div>\r\n                                        <h4 className=\"text-sm font-black uppercase tracking-tight mb-1\">Start Setup Flow</h4>\r\n                                        <p className=\"text-[10px] text-white/50 font-bold leading-tight\">Launch the step-by-step interactive builder pages.</p>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-slate-50 p-6 flex items-center justify-center gap-8 border-t border-slate-100\">\r\n                            <div className=\"flex items-center gap-2 text-[8px] font-black text-slate-400 uppercase tracking-widest\">\r\n                                <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"></div> Gemini 3.5 SYNCED\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-[8px] font-black text-slate-400 uppercase tracking-widest\">\r\n                                <div className=\"w-1.5 h-1.5 bg-indigo-500 rounded-full\"></div> GPT-4o MINI READY\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-[8px] font-black text-slate-400 uppercase tracking-widest\">\r\n                                <div className=\"w-1.5 h-1.5 bg-orange-500 rounded-full\"></div> CLAUDE 3.5 ACTIVE\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* AI Project Report (DPR) Tool */}\r\n            {showDPRTool && (\r\n                <AIProjectReportTool \r\n                    businessData={data} \r\n                    onClose={() => setShowDPRTool(false)} \r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\LeadCaptureModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'signInWithEmailPassword' is defined but never used.","line":4,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[267,270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[267,270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'phoneRegex' is assigned a value but never used.","line":52,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":75,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":81,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3858,3861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3858,3861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5443,5446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5443,5446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":182,"column":87,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6447,6465],"text":"Let&apos;s Get Started!"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6447,6465],"text":"Let&lsquo;s Get Started!"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6447,6465],"text":"Let&#39;s Get Started!"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6447,6465],"text":"Let&rsquo;s Get Started!"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":290,"column":29,"nodeType":"JSXOpeningElement","endLine":290,"endColumn":128}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { signInWithGoogle, signInWithEmailPassword, createUserAccount } from '@/lib/firebase';\r\n\r\ninterface LeadCaptureModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onComplete: (leadData: any, userId?: string) => void;\r\n    prefilledData?: {\r\n        businessName?: string;\r\n        email?: string;\r\n        phone?: string;\r\n    };\r\n    source: string; // 'global_incorporation', 'dashboard_a', 'dashboard_b', etc.\r\n}\r\n\r\ntype Step = 'lead_capture' | 'create_account' | 'success';\r\n\r\nexport default function LeadCaptureModal({ isOpen, onClose, onComplete, prefilledData, source }: LeadCaptureModalProps) {\r\n    const [currentStep, setCurrentStep] = useState<Step>('lead_capture');\r\n    const [leadData, setLeadData] = useState({\r\n        businessName: prefilledData?.businessName || '',\r\n        email: prefilledData?.email || '',\r\n        phone: prefilledData?.phone || ''\r\n    });\r\n    const [accountData, setAccountData] = useState({\r\n        fullName: '',\r\n        password: '',\r\n        confirmPassword: ''\r\n    });\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleLeadSubmit = async () => {\r\n        setError('');\r\n\r\n        // Validation\r\n        if (!leadData.email || !leadData.phone || !leadData.businessName) {\r\n            setError('All fields are required');\r\n            return;\r\n        }\r\n\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        if (!emailRegex.test(leadData.email)) {\r\n            setError('Please enter a valid email');\r\n            return;\r\n        }\r\n\r\n        const phoneRegex = /^[0-9]{10}$/;\r\n        const cleanPhone = leadData.phone.replace(/\\D/g, '');\r\n        if (cleanPhone.length !== 10) {\r\n            setError('Please enter a valid 10-digit phone number');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            // Save lead to database\r\n            const response = await fetch('/api/master-leads', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    ...leadData,\r\n                    source,\r\n                    timestamp: new Date().toISOString(),\r\n                    status: 'pending_registration'\r\n                })\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                // Move to account creation\r\n                setCurrentStep('create_account');\r\n            } else {\r\n                setError('Failed to save your information. Please try again.');\r\n            }\r\n        } catch (err) {\r\n            setError('Network error. Please check your connection.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const handleGoogleSignIn = async () => {\r\n        setIsSubmitting(true);\r\n        setError('');\r\n\r\n        try {\r\n            const { user } = await signInWithGoogle();\r\n\r\n            // Save complete lead with user ID\r\n            const completeData = {\r\n                ...leadData,\r\n                userId: user.uid,\r\n                email: user.email || leadData.email,\r\n                displayName: user.displayName || leadData.businessName,\r\n                status: 'registered',\r\n                registrationMethod: 'google'\r\n            };\r\n\r\n            await fetch('/api/master-leads', {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(completeData)\r\n            });\r\n\r\n            setCurrentStep('success');\r\n            setTimeout(() => {\r\n                onComplete(completeData, user.uid);\r\n            }, 2000);\r\n        } catch (err: any) {\r\n            setError(err.message || 'Failed to sign in with Google');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const handleEmailSignUp = async () => {\r\n        setError('');\r\n\r\n        // Validation\r\n        if (!accountData.fullName || !accountData.password || !accountData.confirmPassword) {\r\n            setError('All fields are required');\r\n            return;\r\n        }\r\n\r\n        if (accountData.password.length < 6) {\r\n            setError('Password must be at least 6 characters');\r\n            return;\r\n        }\r\n\r\n        if (accountData.password !== accountData.confirmPassword) {\r\n            setError('Passwords do not match');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            const { user } = await createUserAccount(leadData.email, accountData.password, accountData.fullName);\r\n\r\n            // Save complete lead with user ID\r\n            const completeData = {\r\n                ...leadData,\r\n                userId: user.uid,\r\n                displayName: accountData.fullName,\r\n                status: 'registered',\r\n                registrationMethod: 'email'\r\n            };\r\n\r\n            await fetch('/api/master-leads', {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(completeData)\r\n            });\r\n\r\n            setCurrentStep('success');\r\n            setTimeout(() => {\r\n                onComplete(completeData, user.uid);\r\n            }, 2000);\r\n        } catch (err: any) {\r\n            setError(err.message || 'Failed to create account');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n            <div className=\"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95 duration-500\">\r\n                {/* Step 1: Lead Capture */}\r\n                {currentStep === 'lead_capture' && (\r\n                    <div className=\"p-8\">\r\n                        <div className=\"text-center mb-8\">\r\n                            <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <span className=\"material-icons text-blue-600 text-3xl\">rocket_launch</span>\r\n                            </div>\r\n                            <h2 className=\"text-2xl font-bold text-slate-900 mb-2\">Let's Get Started!</h2>\r\n                            <p className=\"text-slate-600\">We need a few details to create your personalized plan</p>\r\n                        </div>\r\n\r\n                        {error && (\r\n                            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2\">\r\n                                <span className=\"material-icons text-red-600 text-sm\">error</span>\r\n                                <p className=\"text-sm text-red-700 font-medium\">{error}</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    Business Name <span className=\"text-red-500\">*</span>\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={leadData.businessName}\r\n                                    onChange={(e) => setLeadData(prev => ({ ...prev, businessName: e.target.value }))}\r\n                                    placeholder=\"Your Business Name\"\r\n                                    className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium transition-colors\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    Email Address <span className=\"text-red-500\">*</span>\r\n                                </label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    value={leadData.email}\r\n                                    onChange={(e) => setLeadData(prev => ({ ...prev, email: e.target.value }))}\r\n                                    placeholder=\"your@email.com\"\r\n                                    className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium transition-colors\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    Phone Number <span className=\"text-red-500\">*</span>\r\n                                </label>\r\n                                <input\r\n                                    type=\"tel\"\r\n                                    value={leadData.phone}\r\n                                    onChange={(e) => setLeadData(prev => ({ ...prev, phone: e.target.value }))}\r\n                                    placeholder=\"10-digit mobile number\"\r\n                                    className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium transition-colors\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-6 flex gap-3\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"flex-1 px-6 py-3 border-2 border-slate-200 rounded-xl font-bold text-slate-700 hover:bg-slate-50 transition-colors\"\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                onClick={handleLeadSubmit}\r\n                                disabled={isSubmitting}\r\n                                className=\"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg hover:shadow-blue-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                            >\r\n                                {isSubmitting ? (\r\n                                    <>\r\n                                        <span className=\"material-icons animate-spin text-sm\">sync</span>\r\n                                        Processing...\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        Continue\r\n                                        <span className=\"material-icons text-sm\">arrow_forward</span>\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n\r\n                        <p className=\"text-xs text-slate-500 text-center mt-4\">\r\n                            By continuing, you agree to our Terms of Service and Privacy Policy\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 2: Create Account */}\r\n                {currentStep === 'create_account' && (\r\n                    <div className=\"p-8\">\r\n                        <div className=\"text-center mb-8\">\r\n                            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <span className=\"material-icons text-green-600 text-3xl\">verified_user</span>\r\n                            </div>\r\n                            <h2 className=\"text-2xl font-bold text-slate-900 mb-2\">Create Your Account</h2>\r\n                            <p className=\"text-slate-600\">One account for all SetMyBizz dashboards</p>\r\n                        </div>\r\n\r\n                        {error && (\r\n                            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2\">\r\n                                <span className=\"material-icons text-red-600 text-sm\">error</span>\r\n                                <p className=\"text-sm text-red-700 font-medium\">{error}</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Google Sign In */}\r\n                        <button\r\n                            onClick={handleGoogleSignIn}\r\n                            disabled={isSubmitting}\r\n                            className=\"w-full mb-4 px-6 py-3 bg-white border-2 border-slate-200 rounded-xl font-bold text-slate-700 hover:bg-slate-50 transition-all flex items-center justify-center gap-3 disabled:opacity-50\"\r\n                        >\r\n                            <img src=\"https://www.svgrepo.com/show/475656/google-color.svg\" className=\"w-5 h-5\" alt=\"Google\" />\r\n                            Continue with Google\r\n                        </button>\r\n\r\n                        <div className=\"flex items-center gap-4 my-6\">\r\n                            <div className=\"flex-1 h-px bg-slate-200\"></div>\r\n                            <span className=\"text-sm text-slate-500 font-medium\">OR</span>\r\n                            <div className=\"flex-1 h-px bg-slate-200\"></div>\r\n                        </div>\r\n\r\n                        {/* Email Sign Up */}\r\n                        <div className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    Full Name <span className=\"text-red-500\">*</span>\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={accountData.fullName}\r\n                                    onChange={(e) => setAccountData(prev => ({ ...prev, fullName: e.target.value }))}\r\n                                    placeholder=\"Your Full Name\"\r\n                                    className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium transition-colors\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    Password <span className=\"text-red-500\">*</span>\r\n                                </label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    value={accountData.password}\r\n                                    onChange={(e) => setAccountData(prev => ({ ...prev, password: e.target.value }))}\r\n                                    placeholder=\"Minimum 6 characters\"\r\n                                    className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium transition-colors\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                    Confirm Password <span className=\"text-red-500\">*</span>\r\n                                </label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    value={accountData.confirmPassword}\r\n                                    onChange={(e) => setAccountData(prev => ({ ...prev, confirmPassword: e.target.value }))}\r\n                                    placeholder=\"Re-enter password\"\r\n                                    className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium transition-colors\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={handleEmailSignUp}\r\n                            disabled={isSubmitting}\r\n                            className=\"w-full mt-6 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg hover:shadow-blue-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                        >\r\n                            {isSubmitting ? (\r\n                                <>\r\n                                    <span className=\"material-icons animate-spin text-sm\">sync</span>\r\n                                    Creating Account...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    Create Account\r\n                                    <span className=\"material-icons text-sm\">arrow_forward</span>\r\n                                </>\r\n                            )}\r\n                        </button>\r\n\r\n                        <p className=\"text-xs text-slate-500 text-center mt-4\">\r\n                            Email: <strong>{leadData.email}</strong>\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 3: Success */}\r\n                {currentStep === 'success' && (\r\n                    <div className=\"p-12 text-center\">\r\n                        <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-in zoom-in duration-500\">\r\n                            <span className=\"material-icons text-green-600 text-4xl\">check_circle</span>\r\n                        </div>\r\n                        <h2 className=\"text-3xl font-bold text-slate-900 mb-3\">Welcome Aboard! 🎉</h2>\r\n                        <p className=\"text-slate-600 mb-6\">\r\n                            Your account has been created successfully. You now have access to all SetMyBizz dashboards!\r\n                        </p>\r\n                        <div className=\"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto\"></div>\r\n                        <p className=\"text-sm text-slate-500 mt-4\">Redirecting to your dashboard...</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\MainApp.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":184,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6374,6377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6374,6377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { AuthProvider, useAuth } from '@/context/AuthContext';\r\nimport { saveBusinessProfile } from '../lib/db';\r\nimport WelcomeStep from './steps/WelcomeStep';\r\nimport NameStep from './steps/NameStep';\r\nimport IndustryOfferStep from './steps/IndustryOfferStep';\r\nimport IndustryDetailStep from './steps/IndustryDetailStep';\r\nimport SizeStep from './steps/SizeStep';\r\nimport MotivationStep from './steps/MotivationStep';\r\nimport StageStep from './steps/StageStep';\r\nimport FocusStep from './steps/FocusStep';\r\nimport SummaryStep from './steps/SummaryStep';\r\nimport LoginStep from './steps/LoginStep';\r\nimport Dashboard from './Dashboard';\r\nimport Layout from './Layout';\r\nimport ProfileCompletionModal from './ProfileCompletionModal';\r\nimport SmartFooter from './SmartFooter';\r\nimport { BusinessData } from '../types';\r\n\r\nconst INITIAL_DATA: BusinessData = {\r\n    name: '',\r\n    offeringType: 'physical_goods',\r\n    offeringOther: '',\r\n    industry: '',\r\n    sector: '',\r\n    size: 'solo',\r\n    businessModel: '',\r\n    description: '',\r\n    motivation: 'Being my own boss',\r\n    stage: 'launch',\r\n    existingAssets: [],\r\n    focusAreas: [],\r\n};\r\n\r\ntype View = 'onboarding' | 'login' | 'dashboard';\r\n\r\nconst MainApp: React.FC = () => {\r\n    return (\r\n        <AuthProvider>\r\n            <AppContent />\r\n        </AuthProvider>\r\n    );\r\n};\r\n\r\nconst AppContent: React.FC = () => {\r\n    const searchParams = useSearchParams();\r\n    const [view, setView] = useState<View>('onboarding');\r\n    const [currentStep, setCurrentStep] = useState(0);\r\n    const [data, setData] = useState<BusinessData>(INITIAL_DATA);\r\n    const [isDarkMode, setIsDarkMode] = useState(false);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    // Auth Context\r\n    const { user, loading, leadId } = useAuth(); // Destructure leadId\r\n    const [showProfileModal, setShowProfileModal] = useState(false);\r\n\r\n    // Deep Link & Persistence Logic\r\n    useEffect(() => {\r\n        // 1. Load from LocalStorage\r\n        const savedData = localStorage.getItem('setmybizz_data');\r\n        if (savedData) {\r\n            try {\r\n                const parsed = JSON.parse(savedData);\r\n                setTimeout(() => setData(prev => ({ ...prev, ...parsed })), 0);\r\n            } catch (e) {\r\n                console.error(\"Failed to load saved data\", e);\r\n            }\r\n        }\r\n\r\n        // 2. Handle Search Params for Deep Linking\r\n        const businessName = searchParams?.get('businessName');\r\n        const viewParam = searchParams?.get('view');\r\n\r\n        if (businessName) {\r\n            setData(prev => ({ ...prev, name: businessName }));\r\n            setCurrentStep(1);\r\n        }\r\n\r\n        if (viewParam === 'login') {\r\n            setView('login');\r\n        } else if (viewParam === 'dashboard') {\r\n            setView('dashboard');\r\n        }\r\n\r\n        setIsLoaded(true);\r\n    }, [searchParams]);\r\n\r\n    // Session Check Effect\r\n    useEffect(() => {\r\n        if (!loading) {\r\n            const hasLocalSession = localStorage.getItem('setmybizz_session') === 'true';\r\n\r\n            if (user || hasLocalSession) {\r\n                // If user is logged in (Firebase or Local), go to dashboard\r\n                // Check if profile is complete only if using Firebase\r\n                if (user && !user.displayName) {\r\n                    setTimeout(() => setShowProfileModal(true), 0);\r\n                } else {\r\n                    setView('dashboard');\r\n                }\r\n            }\r\n        }\r\n    }, [user, loading]);\r\n\r\n    // Save to LocalStorage on change\r\n    useEffect(() => {\r\n        if (isLoaded) {\r\n            localStorage.setItem('setmybizz_data', JSON.stringify(data));\r\n        }\r\n    }, [data, isLoaded]);\r\n\r\n    useEffect(() => {\r\n        if (isDarkMode) {\r\n            document.documentElement.classList.add('dark');\r\n        } else {\r\n            document.documentElement.classList.remove('dark');\r\n        }\r\n    }, [isDarkMode]);\r\n\r\n    const nextStep = () => setCurrentStep(prev => prev + 1);\r\n    const prevStep = () => setCurrentStep(prev => Math.max(0, prev - 1));\r\n    \r\n    // Updated updateData to sync with Lead Engine\r\n    const updateData = (newData: Partial<BusinessData>) => {\r\n        setData(prev => {\r\n            const updated = { ...prev, ...newData };\r\n            // Sync to Lead Engine if leadId exists\r\n            if (leadId) {\r\n                import('../lib/leadSystem').then(({ syncLeadData }) => {\r\n                    syncLeadData(leadId, updated);\r\n                });\r\n            }\r\n            return updated;\r\n        });\r\n    };\r\n\r\n    const toggleDarkMode = () => setIsDarkMode(prev => !prev);\r\n\r\n    const handleBackToFlow = () => {\r\n        // Clear session so user doesn't get redirected back immediately on refresh\r\n        localStorage.removeItem('setmybizz_session');\r\n        setView('onboarding');\r\n        setCurrentStep(0);\r\n    };\r\n\r\n    const handleLoginSuccess = async (skipAuth = false) => {\r\n        localStorage.setItem('setmybizz_session', 'true');\r\n\r\n        if (skipAuth) {\r\n            setView('dashboard');\r\n            return;\r\n        }\r\n\r\n        // Save data to Firestore if user is present\r\n        if (user && user.uid) {\r\n            try {\r\n                await saveBusinessProfile(user.uid, data);\r\n            } catch (err) {\r\n                console.error(\"Failed to save business profile on login:\", err);\r\n            }\r\n\r\n            // Sync to CRM (Google Sheets)\r\n            try {\r\n                fetch('/api/crm-webhook', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ user, businessData: data, guestId: leadId }) // Use leadId as guestId source if tracking\r\n                });\r\n            } catch (crmErr) {\r\n                console.error(\"Failed to sync with CRM:\", crmErr);\r\n            }\r\n        }\r\n\r\n        // If user just logged in via Firebase in LoginStep, the AuthContext effect above will handle the redirect/modal\r\n        // But for manual enforcement:\r\n        if (user && !user.displayName) {\r\n            setShowProfileModal(true);\r\n        } else {\r\n            setView('dashboard');\r\n        }\r\n    };\r\n\r\n    const handleProfileComplete = async (profileData: any) => {\r\n        const updatedData = {\r\n            ...data,\r\n            name: profileData.businessName || data.name,\r\n        };\r\n        updateData(updatedData);\r\n\r\n        // Save updated data to Firestore\r\n        if (user && user.uid) {\r\n            try {\r\n                await saveBusinessProfile(user.uid, updatedData);\r\n            } catch (err) {\r\n                console.error(\"Failed to save business profile on completion:\", err);\r\n            }\r\n        }\r\n\r\n        setShowProfileModal(false);\r\n        setView('dashboard');\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex h-screen items-center justify-center bg-slate-50\">\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n                    <p className=\"text-slate-500 text-sm font-medium animate-pulse\">Initializing SetMyBizz...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (view === 'login') {\r\n        return <LoginStep onLogin={handleLoginSuccess} businessName={data.name} />;\r\n    }\r\n\r\n    if (view === 'dashboard') {\r\n        return (\r\n            <>\r\n                <Dashboard data={data} initialTab=\"Workspace\" onNavigateToFlow={handleBackToFlow} />\r\n                <ProfileCompletionModal\r\n                    isOpen={showProfileModal}\r\n                    onComplete={handleProfileComplete}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n\r\n    const steps = [\r\n        <WelcomeStep key=\"welcome\" onNext={nextStep} />,\r\n        <NameStep key=\"name\" data={data} updateData={updateData} onNext={nextStep} />,\r\n        <IndustryOfferStep\r\n            key=\"industry\"\r\n            data={data}\r\n            updateData={updateData}\r\n            onNext={nextStep}\r\n            onBack={prevStep}\r\n            uiStep={1}\r\n            totalSteps={6}\r\n        />,\r\n        <IndustryDetailStep\r\n            key=\"detail\"\r\n            data={data}\r\n            updateData={updateData}\r\n            onNext={nextStep}\r\n            onBack={prevStep}\r\n            uiStep={2}\r\n            totalSteps={6}\r\n        />,\r\n        <SizeStep\r\n            key=\"size\"\r\n            data={data}\r\n            updateData={updateData}\r\n            onNext={nextStep}\r\n            onBack={prevStep}\r\n            uiStep={3}\r\n            totalSteps={6}\r\n        />,\r\n        <MotivationStep\r\n            key=\"motivation\"\r\n            data={data}\r\n            updateData={updateData}\r\n            onNext={nextStep}\r\n            onBack={prevStep}\r\n            uiStep={4}\r\n            totalSteps={6}\r\n        />,\r\n        <StageStep\r\n            key=\"stage\"\r\n            data={data}\r\n            updateData={updateData}\r\n            onNext={nextStep}\r\n            onBack={prevStep}\r\n            uiStep={5}\r\n            totalSteps={6}\r\n        />,\r\n        <FocusStep\r\n            key=\"focus\"\r\n            data={data}\r\n            updateData={updateData}\r\n            onNext={nextStep}\r\n            onBack={prevStep}\r\n            uiStep={6}\r\n            totalSteps={6}\r\n        />,\r\n        <SummaryStep\r\n            key=\"summary\"\r\n            data={data}\r\n            onBack={prevStep}\r\n            onDashboard={() => setView('login')}\r\n        />\r\n    ];\r\n\r\n    return (\r\n        <Layout\r\n            currentStep={currentStep}\r\n            totalSteps={steps.length}\r\n            isDarkMode={isDarkMode}\r\n            toggleDarkMode={toggleDarkMode}\r\n        >\r\n            {steps[currentStep]}\r\n            <SmartFooter currentStep={currentStep} />\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default MainApp;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\Marketplace.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'industry' is defined but never used.","line":13,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'businessSize' is defined but never used.","line":13,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onInstall' is defined but never used.","line":137,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6188,6191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6188,6191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":223,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":223,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10001,10004],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10001,10004],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":285,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13355,13358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13355,13358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { MarketplaceApp, IndustryType, BusinessSize } from '@/types/workspace';\r\nimport { MARKETPLACE_APPS, searchApps, getAppsByCategory } from '@/lib/marketplace-apps';\r\n\r\ninterface MarketplaceProps {\r\n    industry?: IndustryType;\r\n    businessSize?: BusinessSize;\r\n    onInstallApp?: (appId: string) => void;\r\n}\r\n\r\nexport default function Marketplace({ industry, businessSize, onInstallApp }: MarketplaceProps) {\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [selectedCategory, setSelectedCategory] = useState<string>('all');\r\n    const [selectedApp, setSelectedApp] = useState<MarketplaceApp | null>(null);\r\n\r\n    const categories = [\r\n        { id: 'all', name: 'All Apps', icon: '📦' },\r\n        { id: 'crm', name: 'CRM & Sales', icon: '🎯' },\r\n        { id: 'erp', name: 'ERP & Operations', icon: '📊' },\r\n        { id: 'communication', name: 'Communication', icon: '💬' },\r\n        { id: 'payment', name: 'Payments', icon: '💳' },\r\n        { id: 'marketing', name: 'Marketing', icon: '📢' },\r\n        { id: 'finance', name: 'Finance', icon: '💰' },\r\n        { id: 'productivity', name: 'Productivity', icon: '⚡' },\r\n        { id: 'support', name: 'Support', icon: '🎧' },\r\n        { id: 'inventory', name: 'Inventory', icon: '📦' },\r\n        { id: 'analytics', name: 'Analytics', icon: '📈' }\r\n    ];\r\n\r\n    // Filter apps\r\n    let filteredApps = searchQuery ? searchApps(searchQuery) : MARKETPLACE_APPS;\r\n\r\n    if (selectedCategory !== 'all') {\r\n        filteredApps = getAppsByCategory(selectedCategory);\r\n    }\r\n\r\n    // Sort by rating\r\n    filteredApps.sort((a, b) => b.ratings.average - a.ratings.average);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50\">\r\n\r\n            {/* Header */}\r\n            <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-12\">\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                    <h1 className=\"text-4xl font-bold mb-4\">SetMyBizz Marketplace 🚀</h1>\r\n                    <p className=\"text-xl text-white/90 mb-6\">\r\n                        Discover and install the best business tools - as easy as WordPress plugins\r\n                    </p>\r\n\r\n                    {/* Search Bar */}\r\n                    <div className=\"max-w-2xl\">\r\n                        <div className=\"relative\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                placeholder=\"Search apps... (e.g., CRM, WhatsApp, invoicing)\"\r\n                                className=\"w-full px-6 py-4 rounded-xl text-gray-900 text-lg focus:outline-none focus:ring-4 focus:ring-white/30\"\r\n                            />\r\n                            <div className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 text-2xl\">\r\n                                🔍\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n\r\n                {/* Categories */}\r\n                <div className=\"mb-8\">\r\n                    <div className=\"flex items-center space-x-3 overflow-x-auto pb-4\">\r\n                        {categories.map((cat) => (\r\n                            <button\r\n                                key={cat.id}\r\n                                onClick={() => setSelectedCategory(cat.id)}\r\n                                className={`flex items-center space-x-2 px-4 py-2 rounded-full font-medium whitespace-nowrap transition-all ${selectedCategory === cat.id\r\n                                    ? 'bg-indigo-600 text-white shadow-lg'\r\n                                    : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                                    }`}\r\n                            >\r\n                                <span>{cat.icon}</span>\r\n                                <span>{cat.name}</span>\r\n                                {cat.id === 'all' && (\r\n                                    <span className=\"px-2 py-0.5 bg-white/20 rounded-full text-xs\">\r\n                                        {MARKETPLACE_APPS.length}\r\n                                    </span>\r\n                                )}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Results Count */}\r\n                <div className=\"mb-6\">\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">\r\n                        {filteredApps.length} {filteredApps.length === 1 ? 'app' : 'apps'} found\r\n                    </h2>\r\n                </div>\r\n\r\n                {/* Apps Grid */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {filteredApps.map((app) => (\r\n                        <AppCard\r\n                            key={app.id}\r\n                            app={app}\r\n                            onClick={() => setSelectedApp(app)}\r\n                            onInstall={onInstallApp}\r\n                        />\r\n                    ))}\r\n                </div>\r\n\r\n                {filteredApps.length === 0 && (\r\n                    <div className=\"text-center py-16\">\r\n                        <div className=\"text-6xl mb-4\">🔍</div>\r\n                        <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">No apps found</h3>\r\n                        <p className=\"text-gray-600\">Try a different search term or category</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* App Detail Modal */}\r\n            {selectedApp && (\r\n                <AppDetailModal\r\n                    app={selectedApp}\r\n                    onClose={() => setSelectedApp(null)}\r\n                    onInstall={onInstallApp}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction AppCard({ app, onClick, onInstall }: any) {\r\n    return (\r\n        <div\r\n            className=\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all cursor-pointer overflow-hidden border-2 border-transparent hover:border-indigo-200\"\r\n        >\r\n            <div className=\"p-6\">\r\n                {/* Header */}\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                        <div className=\"text-4xl\">{app.icon}</div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-lg text-gray-900\">{app.name}</h3>\r\n                            <p className=\"text-sm text-gray-500\">{app.category}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Rating */}\r\n                <div className=\"flex items-center space-x-2 mb-3\">\r\n                    <div className=\"flex\">\r\n                        {[1, 2, 3, 4, 5].map((star: number) => (\r\n                            <span\r\n                                key={star}\r\n                                className={star <= Math.round(app.ratings.average) ? 'text-yellow-400' : 'text-gray-300'}\r\n                            >\r\n                                ⭐\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n                    <span className=\"text-sm text-gray-600\">\r\n                        {app.ratings.average} ({app.ratings.count})\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Description */}\r\n                <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">\r\n                    {app.description}\r\n                </p>\r\n\r\n                {/* Pricing */}\r\n                <div className=\"mb-4\">\r\n                    {app.pricing.free ? (\r\n                        <div className=\"inline-flex items-center space-x-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium\">\r\n                            <span>✓ Free tier available</span>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"inline-flex items-center space-x-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium\">\r\n                            <span>From ₹{app.pricing.tiers[0].price}/mo</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Features */}\r\n                <div className=\"mb-4\">\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                        {app.features.slice(0, 3).map((feature: string, idx: number) => (\r\n                            <span\r\n                                key={idx}\r\n                                className=\"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs\"\r\n                            >\r\n                                {feature}\r\n                            </span>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Install Count */}\r\n                <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\r\n                    <span className=\"text-xs text-gray-500\">\r\n                        {app.installCount.toLocaleString()} installs\r\n                    </span>\r\n                    <button\r\n                        onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            onClick();\r\n                        }}\r\n                        className=\"text-sm font-medium text-indigo-600 hover:text-indigo-700\"\r\n                    >\r\n                        View Details →\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction AppDetailModal({ app, onClose, onInstall }: any) {\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n\r\n                {/* Header */}\r\n                <div className=\"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-start justify-between\">\r\n                    <div className=\"flex items-center space-x-4\">\r\n                        <div className=\"text-5xl\">{app.icon}</div>\r\n                        <div>\r\n                            <h2 className=\"text-3xl font-bold text-gray-900\">{app.name}</h2>\r\n                            <p className=\"text-gray-600\">{app.category}</p>\r\n                            <div className=\"flex items-center space-x-2 mt-2\">\r\n                                <div className=\"flex\">\r\n                                    {[1, 2, 3, 4, 5].map((star: number) => (\r\n                                        <span\r\n                                            key={star}\r\n                                            className={star <= Math.round(app.ratings.average) ? 'text-yellow-400' : 'text-gray-300'}\r\n                                        >\r\n                                            ⭐\r\n                                        </span>\r\n                                    ))}\r\n                                </div>\r\n                                <span className=\"text-sm text-gray-600\">\r\n                                    {app.ratings.average} ({app.ratings.count} reviews)\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"text-gray-400 hover:text-gray-600 text-2xl\"\r\n                    >\r\n                        ✕\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"p-6\">\r\n\r\n                    {/* Description */}\r\n                    <section className=\"mb-6\">\r\n                        <h3 className=\"text-xl font-bold text-gray-900 mb-3\">About</h3>\r\n                        <p className=\"text-gray-700 leading-relaxed\">{app.longDescription}</p>\r\n                    </section>\r\n\r\n                    {/* Features */}\r\n                    <section className=\"mb-6\">\r\n                        <h3 className=\"text-xl font-bold text-gray-900 mb-3\">Key Features</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                            {app.features.map((feature: string, idx: number) => (\r\n                                <div key={idx} className=\"flex items-start space-x-2\">\r\n                                    <span className=\"text-green-500 mt-1\">✓</span>\r\n                                    <span className=\"text-gray-700\">{feature}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Pricing */}\r\n                    <section className=\"mb-6\">\r\n                        <h3 className=\"text-xl font-bold text-gray-900 mb-3\">Pricing</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                            {app.pricing.tiers.map((tier: any, idx: number) => (\r\n                                <div\r\n                                    key={idx}\r\n                                    className=\"border-2 border-gray-200 rounded-xl p-4 hover:border-indigo-300 transition-all\"\r\n                                >\r\n                                    <h4 className=\"font-bold text-lg text-gray-900 mb-2\">{tier.name}</h4>\r\n                                    <div className=\"text-3xl font-bold text-indigo-600 mb-3\">\r\n                                        {tier.price === 0 ? 'Free' : `₹${tier.price}`}\r\n                                        {tier.price > 0 && <span className=\"text-sm text-gray-500\">/mo</span>}\r\n                                    </div>\r\n                                    <ul className=\"space-y-2\">\r\n                                        {tier.features.map((feature: string, fidx: number) => (\r\n                                            <li key={fidx} className=\"text-sm text-gray-700 flex items-start\">\r\n                                                <span className=\"text-green-500 mr-2\">✓</span>\r\n                                                <span>{feature}</span>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Integrations */}\r\n                    {app.integrations.length > 0 && (\r\n                        <section className=\"mb-6\">\r\n                            <h3 className=\"text-xl font-bold text-gray-900 mb-3\">Integrations</h3>\r\n                            <div className=\"flex flex-wrap gap-2\">\r\n                                {app.integrations.map((integration: string, idx: number) => (\r\n                                    <span\r\n                                        key={idx}\r\n                                        className=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"\r\n                                    >\r\n                                        {integration}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n                        </section>\r\n                    )}\r\n\r\n                    {/* Developer Info */}\r\n                    <section className=\"mb-6\">\r\n                        <h3 className=\"text-xl font-bold text-gray-900 mb-3\">Developer</h3>\r\n                        <div className=\"bg-gray-50 rounded-xl p-4\">\r\n                            <p className=\"font-medium text-gray-900\">{app.developer.name}</p>\r\n                            {app.developer.website && (\r\n                                <a\r\n                                    href={app.developer.website}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"text-sm text-indigo-600 hover:text-indigo-700\"\r\n                                >\r\n                                    Visit website →\r\n                                </a>\r\n                            )}\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Install Button */}\r\n                    <div className=\"sticky bottom-0 bg-white border-t border-gray-200 pt-6 -mx-6 px-6 -mb-6 pb-6\">\r\n                        <button\r\n                            onClick={() => {\r\n                                if (onInstall) onInstall(app.id);\r\n                                onClose();\r\n                            }}\r\n                            className=\"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg py-4 rounded-xl hover:shadow-lg transition-all\"\r\n                        >\r\n                            Install {app.name}\r\n                        </button>\r\n                        <p className=\"text-center text-sm text-gray-500 mt-3\">\r\n                            {app.installCount.toLocaleString()} businesses already use this\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ProfileCompletionModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[295,298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[295,298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { doc, setDoc } from 'firebase/firestore';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\ninterface ProfileCompletionModalProps {\r\n    isOpen: boolean;\r\n    onComplete: (data: any) => void;\r\n}\r\n\r\nconst ProfileCompletionModal: React.FC<ProfileCompletionModalProps> = ({ isOpen, onComplete }) => {\r\n    const { user, dbUser } = useAuth();\r\n    const [formData, setFormData] = useState({\r\n        displayName: '',\r\n        businessName: '',\r\n        phone: '',\r\n        state: '',\r\n        city: '',\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Load existing data when modal opens\r\n    useEffect(() => {\r\n        if (isOpen && user) {\r\n            setFormData({\r\n                displayName: dbUser?.displayName || user.displayName || '',\r\n                businessName: dbUser?.businessName || '',\r\n                phone: dbUser?.phone || '',\r\n                state: dbUser?.state || '',\r\n                city: dbUser?.city || '',\r\n            });\r\n        }\r\n    }, [isOpen, user, dbUser]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            if (user) {\r\n                // Generate Unique Registered ID if not exists\r\n                const existingId = dbUser?.registeredId;\r\n                const uniqueId = existingId || `SMB-2026-${Math.floor(1000 + Math.random() * 9000)}`;\r\n\r\n                const updateData = {\r\n                    ...formData,\r\n                    email: user.email,\r\n                    uid: user.uid,\r\n                    registeredId: uniqueId,\r\n                    updatedAt: new Date(),\r\n                    role: dbUser?.role || 'user'\r\n                };\r\n\r\n                // Save to Firestore\r\n                await setDoc(doc(db, \"users\", user.uid), updateData, { merge: true });\r\n\r\n                onComplete(updateData);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error saving profile:\", error);\r\n            alert(\"Failed to save profile. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/70 backdrop-blur-md z-[200] flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n            <div className=\"bg-white rounded-[2rem] shadow-2xl max-w-md w-full p-8 border border-white/20 relative overflow-hidden animate-in zoom-in-95 duration-300\" onClick={e => e.stopPropagation()}>\r\n                \r\n                {/* Decorative Element */}\r\n                <div className=\"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2 pointer-events-none\"></div>\r\n\r\n                {!dbUser && (\r\n                     <div className=\"w-12 h-12 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mb-6 shadow-sm\">\r\n                        <span className=\"material-symbols-outlined text-2xl\">person_add</span>\r\n                    </div>\r\n                )}\r\n\r\n                {dbUser && (\r\n                    <button onClick={() => onComplete(null)} className=\"absolute top-6 right-6 w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-colors z-10\">\r\n                        <span className=\"material-symbols-outlined text-sm\">close</span>\r\n                    </button>\r\n                )}\r\n\r\n                <h2 className=\"text-2xl font-black text-slate-900 mb-2 tracking-tight relative z-10\">\r\n                    {dbUser ? 'Update Profile' : 'Complete Your Profile'}\r\n                </h2>\r\n                <p className=\"text-slate-500 mb-8 text-sm font-medium relative z-10\">\r\n                    {dbUser ? 'Update your personal and business details.' : 'Please provide a few more details to customize your dashboard experince.'}\r\n                </p>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-5 relative z-10\">\r\n                    <div>\r\n                        <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 ml-1\">Full Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            required\r\n                            value={formData.displayName}\r\n                            onChange={e => setFormData({ ...formData, displayName: e.target.value })}\r\n                            className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium placeholder-slate-400\"\r\n                            placeholder=\"e.g. Michael Scott\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 ml-1\">Business Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            required\r\n                            value={formData.businessName}\r\n                            onChange={e => setFormData({ ...formData, businessName: e.target.value })}\r\n                            className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium placeholder-slate-400\"\r\n                            placeholder=\"e.g. Dunder Mifflin\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 ml-1\">Mobile Number</label>\r\n                        <div className=\"flex gap-2\">\r\n                             <div className=\"px-3 py-3.5 bg-slate-100 border border-slate-200 rounded-xl text-slate-500 font-bold text-sm flex items-center\">\r\n                                🇮🇳\r\n                            </div>\r\n                            <input\r\n                                type=\"tel\"\r\n                                required\r\n                                value={formData.phone}\r\n                                onChange={e => setFormData({ ...formData, phone: e.target.value })}\r\n                                className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium placeholder-slate-400\"\r\n                                placeholder=\"98765 43210\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                            <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 ml-1\">State</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                required\r\n                                value={formData.state}\r\n                                onChange={e => setFormData({ ...formData, state: e.target.value })}\r\n                                className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium placeholder-slate-400\"\r\n                                placeholder=\"State\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 ml-1\">City</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                required\r\n                                value={formData.city}\r\n                                onChange={e => setFormData({ ...formData, city: e.target.value })}\r\n                                className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium placeholder-slate-400\"\r\n                                placeholder=\"City\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pt-6\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                        >\r\n                            {loading ? <span className=\"material-symbols-outlined animate-spin\">sync</span> : null}\r\n                            {loading ? 'Saving...' : (dbUser ? 'Update Profile' : 'Enter Dashboard')}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfileCompletionModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\RegistrationPopup.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'db' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'collection' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addDoc' is defined but never used.","line":5,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serverTimestamp' is defined but never used.","line":5,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\n\r\ninterface RegistrationPopupProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function RegistrationPopup({ isOpen, onClose }: RegistrationPopupProps) {\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        email: '',\r\n        phone: '',\r\n        businessName: '',\r\n        nature: '', // Added nature field\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            // Use the API route to register lead and get AI insight\r\n            const response = await fetch('/api/register-lead', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(formData),\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to register');\r\n\r\n            setSuccess(true);\r\n            setTimeout(() => {\r\n                onClose();\r\n                setSuccess(false);\r\n                setFormData({ name: '', email: '', phone: '', businessName: '', nature: '' });\r\n            }, 2000);\r\n        } catch (error) {\r\n            console.error(\"Error adding document: \", error);\r\n            alert(\"Error submitting form. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[200] p-4 transition-opacity duration-300\">\r\n            <div className=\"bg-white rounded-[2rem] shadow-2xl max-w-md w-full p-8 relative animate-in fade-in zoom-in-95 duration-500 overflow-hidden\">\r\n                <div className=\"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500\"></div>\r\n                \r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-colors\"\r\n                >\r\n                    <span className=\"material-symbols-outlined text-lg\">close</span>\r\n                </button>\r\n\r\n                {success ? (\r\n                    <div className=\"text-center py-12\">\r\n                        <div className=\"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-[bounce_1s_ease-in-out_1]\">\r\n                            <span className=\"material-symbols-outlined text-3xl\">check</span>\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-black text-slate-800 mb-2\">Success!</h3>\r\n                        <p className=\"text-slate-600 font-medium\">Your business roadmap is being prepared.</p>\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"mb-8\">\r\n                            <span className=\"inline-block px-3 py-1 rounded-full bg-indigo-50 text-indigo-600 text-[10px] font-black uppercase tracking-wider mb-3\">Early Access</span>\r\n                            <h2 className=\"text-2xl font-black text-slate-900 leading-tight\">Get Your Free Business Roadmap</h2>\r\n                            <p className=\"text-slate-500 mt-2 text-sm\">Unlock tech tools, expert consultation, and a personalized incorporation plan.</p>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1\">Your Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-slate-900 font-medium transition-all\"\r\n                                        value={formData.name}\r\n                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                        placeholder=\"John Doe\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1\">Phone</label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        required\r\n                                        className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-slate-900 font-medium transition-all\"\r\n                                        value={formData.phone}\r\n                                        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n                                        placeholder=\"9876543210\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1\">Email Address</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    required\r\n                                    className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-slate-900 font-medium transition-all\"\r\n                                    value={formData.email}\r\n                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                    placeholder=\"john@example.com\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1\">Business Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    required\r\n                                    className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-slate-900 font-medium transition-all\"\r\n                                    value={formData.businessName}\r\n                                    onChange={(e) => setFormData({ ...formData, businessName: e.target.value })}\r\n                                    placeholder=\"TechNova Solutions\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1\">Business Sector</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    required\r\n                                    placeholder=\"e.g. Consulting, Retail, IT\"\r\n                                    className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 text-slate-900 font-medium transition-all\"\r\n                                    value={formData.nature}\r\n                                    onChange={(e) => setFormData({ ...formData, nature: e.target.value })}\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full mt-4 bg-slate-900 text-white py-4 px-6 rounded-xl font-bold hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 transform active:scale-[0.98]\"\r\n                            >\r\n                                {loading ? (\r\n                                    <>\r\n                                        <span className=\"material-symbols-outlined animate-spin text-sm\">sync</span>\r\n                                        Processing...\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        Get Roadmap\r\n                                        <span className=\"material-symbols-outlined text-sm\">arrow_forward</span>\r\n                                    </>\r\n                                )}\r\n                            </button>\r\n                        </form>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\SmartFooter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ToastNotification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\AIStudioLayout.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\AIStudioLayout.tsx:70:145\n  68 |     const [chats, setChats] = useState<Chat[]>([\n  69 |         { id: '1', projectId: '1', title: 'Create sales strategy', lastMessage: 'Here\\'s a comprehensive sales strategy...', timestamp: new Date(), pinned: true },\n> 70 |         { id: '2', projectId: '1', title: 'Marketing campaign ideas', lastMessage: 'I suggest a multi-channel approach...', timestamp: new Date(Date.now() - 3600000) },\n     |                                                                                                                                                 ^^^^^^^^^^ Cannot call impure function\n  71 |         { id: '3', projectId: '2', title: 'Business plan for Q2', lastMessage: 'Let me help you outline Q2 goals...', timestamp: new Date(Date.now() - 7200000) },\n  72 |     ]);\n  73 |","line":70,"column":145,"nodeType":null,"endLine":70,"endColumn":155},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\AIStudioLayout.tsx:71:139\n  69 |         { id: '1', projectId: '1', title: 'Create sales strategy', lastMessage: 'Here\\'s a comprehensive sales strategy...', timestamp: new Date(), pinned: true },\n  70 |         { id: '2', projectId: '1', title: 'Marketing campaign ideas', lastMessage: 'I suggest a multi-channel approach...', timestamp: new Date(Date.now() - 3600000) },\n> 71 |         { id: '3', projectId: '2', title: 'Business plan for Q2', lastMessage: 'Let me help you outline Q2 goals...', timestamp: new Date(Date.now() - 7200000) },\n     |                                                                                                                                           ^^^^^^^^^^ Cannot call impure function\n  72 |     ]);\n  73 |\n  74 |     const [connectedApps, setConnectedApps] = useState<ConnectedApp[]>([","line":71,"column":139,"nodeType":null,"endLine":71,"endColumn":149},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\AIStudioLayout.tsx:76:136\n  74 |     const [connectedApps, setConnectedApps] = useState<ConnectedApp[]>([\n  75 |         { id: 'sheets', name: 'Google Sheets', icon: 'table_chart', color: 'green', connected: true, category: 'google', lastUsed: new Date() },\n> 76 |         { id: 'docs', name: 'Google Docs', icon: 'description', color: 'blue', connected: true, category: 'google', lastUsed: new Date(Date.now() - 1800000) },\n     |                                                                                                                                        ^^^^^^^^^^ Cannot call impure function\n  77 |         { id: 'gmail', name: 'Gmail', icon: 'mail', color: 'red', connected: false, category: 'google' },\n  78 |         { id: 'slides', name: 'Google Slides', icon: 'slideshow', color: 'yellow', connected: false, category: 'google' },\n  79 |     ]);","line":76,"column":136,"nodeType":null,"endLine":76,"endColumn":146}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport LeftSidebar from './LeftSidebar';\r\nimport CenterChat from './CenterChat';\r\nimport RightSidebar from './RightSidebar';\r\nimport QuickChatFloating from './QuickChatFloating';\r\n\r\nexport interface Project {\r\n    id: string;\r\n    name: string;\r\n    icon: string;\r\n    color: string;\r\n    chatCount: number;\r\n}\r\n\r\nexport interface Chat {\r\n    id: string;\r\n    projectId: string;\r\n    title: string;\r\n    lastMessage: string;\r\n    timestamp: Date;\r\n    pinned?: boolean;\r\n}\r\n\r\nexport interface Message {\r\n    id: string;\r\n    chatId: string;\r\n    role: 'user' | 'rkle';\r\n    content: string;\r\n    timestamp: Date;\r\n    attachments?: Attachment[];\r\n    canCopy?: boolean;\r\n    canShare?: boolean;\r\n}\r\n\r\nexport interface Attachment {\r\n    id: string;\r\n    name: string;\r\n    type: string;\r\n    url: string;\r\n    size: number;\r\n}\r\n\r\nexport interface ConnectedApp {\r\n    id: string;\r\n    name: string;\r\n    icon: string;\r\n    color: string;\r\n    connected: boolean;\r\n    lastUsed?: Date;\r\n    category: 'google' | 'erp' | 'invoice' | 'crm' | 'other';\r\n}\r\n\r\nconst AIStudioLayout: React.FC = () => {\r\n    const [leftSidebarOpen, setLeftSidebarOpen] = useState(true);\r\n    const [rightSidebarOpen, setRightSidebarOpen] = useState(true);\r\n    const [currentChatId, setCurrentChatId] = useState<string | null>(null);\r\n    const [currentProjectId, setCurrentProjectId] = useState<string | null>(null);\r\n\r\n    // Sample data\r\n    const [projects, setProjects] = useState<Project[]>([\r\n        { id: '1', name: 'Sales & Marketing', icon: 'trending_up', color: 'blue', chatCount: 5 },\r\n        { id: '2', name: 'Business Development', icon: 'business_center', color: 'purple', chatCount: 3 },\r\n        { id: '3', name: 'Finance & Accounting', icon: 'account_balance', color: 'green', chatCount: 2 },\r\n    ]);\r\n\r\n    const [chats, setChats] = useState<Chat[]>([\r\n        { id: '1', projectId: '1', title: 'Create sales strategy', lastMessage: 'Here\\'s a comprehensive sales strategy...', timestamp: new Date(), pinned: true },\r\n        { id: '2', projectId: '1', title: 'Marketing campaign ideas', lastMessage: 'I suggest a multi-channel approach...', timestamp: new Date(Date.now() - 3600000) },\r\n        { id: '3', projectId: '2', title: 'Business plan for Q2', lastMessage: 'Let me help you outline Q2 goals...', timestamp: new Date(Date.now() - 7200000) },\r\n    ]);\r\n\r\n    const [connectedApps, setConnectedApps] = useState<ConnectedApp[]>([\r\n        { id: 'sheets', name: 'Google Sheets', icon: 'table_chart', color: 'green', connected: true, category: 'google', lastUsed: new Date() },\r\n        { id: 'docs', name: 'Google Docs', icon: 'description', color: 'blue', connected: true, category: 'google', lastUsed: new Date(Date.now() - 1800000) },\r\n        { id: 'gmail', name: 'Gmail', icon: 'mail', color: 'red', connected: false, category: 'google' },\r\n        { id: 'slides', name: 'Google Slides', icon: 'slideshow', color: 'yellow', connected: false, category: 'google' },\r\n    ]);\r\n\r\n    const handleNewChat = () => {\r\n        const newChat: Chat = {\r\n            id: Date.now().toString(),\r\n            projectId: currentProjectId || '1',\r\n            title: 'New Chat',\r\n            lastMessage: '',\r\n            timestamp: new Date(),\r\n        };\r\n        setChats([newChat, ...chats]);\r\n        setCurrentChatId(newChat.id);\r\n    };\r\n\r\n    const handleNewProject = (name: string, icon: string, color: string) => {\r\n        const newProject: Project = {\r\n            id: Date.now().toString(),\r\n            name,\r\n            icon,\r\n            color,\r\n            chatCount: 0,\r\n        };\r\n        setProjects([...projects, newProject]);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen overflow-hidden bg-slate-50\">\r\n            {/* Left Sidebar - Chat History & Projects */}\r\n            <LeftSidebar\r\n                isOpen={leftSidebarOpen}\r\n                onToggle={() => setLeftSidebarOpen(!leftSidebarOpen)}\r\n                projects={projects}\r\n                chats={chats}\r\n                currentChatId={currentChatId}\r\n                currentProjectId={currentProjectId}\r\n                onSelectChat={setCurrentChatId}\r\n                onSelectProject={setCurrentProjectId}\r\n                onNewChat={handleNewChat}\r\n                onNewProject={handleNewProject}\r\n            />\r\n\r\n            {/* Center - Main Chat Area */}\r\n            <CenterChat\r\n                chatId={currentChatId}\r\n                leftSidebarOpen={leftSidebarOpen}\r\n                rightSidebarOpen={rightSidebarOpen}\r\n                onToggleLeftSidebar={() => setLeftSidebarOpen(!leftSidebarOpen)}\r\n                onToggleRightSidebar={() => setRightSidebarOpen(!rightSidebarOpen)}\r\n                onNewChat={handleNewChat}\r\n                onNewProject={handleNewProject}\r\n            />\r\n\r\n            {/* Right Sidebar - AI Assistants & Tools */}\r\n            <RightSidebar\r\n                isOpen={rightSidebarOpen}\r\n                onToggle={() => setRightSidebarOpen(!rightSidebarOpen)}\r\n                connectedApps={connectedApps}\r\n                onConnectApp={(appId) => {\r\n                    setConnectedApps(connectedApps.map(app =>\r\n                        app.id === appId ? { ...app, connected: !app.connected } : app\r\n                    ));\r\n                }}\r\n            />\r\n\r\n            {/* Quick Chat Floating (Left Bottom) */}\r\n            <QuickChatFloating />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AIStudioLayout;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\CenterChat.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Attachment' is defined but never used.","line":4,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'leftSidebarOpen' is defined but never used.","line":18,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onToggleLeftSidebar' is defined but never used.","line":20,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'voiceTranscript' is assigned a value but never used.","line":31,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1945,1948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1945,1948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5239,5242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5239,5242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":87,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":90,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5276,5279],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5276,5279],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5601,5604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5601,5604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6003,6006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6003,6006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'messages.length'. Either include it or remove the dependency array.","line":185,"column":8,"nodeType":"ArrayExpression","endLine":185,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [chatId, messages.length]","fix":{"range":[7283,7291],"text":"[chatId, messages.length]"}}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":898,"column":82,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[55221,55256],"text":"We&apos;ll integrate with your favorites"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[55221,55256],"text":"We&lsquo;ll integrate with your favorites"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[55221,55256],"text":"We&#39;ll integrate with your favorites"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[55221,55256],"text":"We&rsquo;ll integrate with your favorites"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Message, Attachment } from './AIStudioLayout';\r\n\r\ninterface CenterChatProps {\r\n    chatId: string | null;\r\n    leftSidebarOpen: boolean;\r\n    rightSidebarOpen: boolean;\r\n    onToggleLeftSidebar: () => void;\r\n    onToggleRightSidebar: () => void;\r\n    onNewChat?: () => void;\r\n    onNewProject?: (name: string, icon: string, color: string) => void;\r\n}\r\n\r\nconst CenterChat: React.FC<CenterChatProps> = ({\r\n    chatId,\r\n    leftSidebarOpen,\r\n    rightSidebarOpen,\r\n    onToggleLeftSidebar,\r\n    onToggleRightSidebar,\r\n    onNewChat,\r\n    onNewProject,\r\n}) => {\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isRecording, setIsRecording] = useState(false);\r\n    const [uploadedFiles, setUploadedFiles] = useState<File[]>([]);\r\n    const [oracleSidebarOpen, setOracleSidebarOpen] = useState(false);\r\n    const [voiceTranscript, setVoiceTranscript] = useState('');\r\n    const [showProjectModal, setShowProjectModal] = useState(false);\r\n    const [projectName, setProjectName] = useState('');\r\n    const [projectIcon, setProjectIcon] = useState('folder');\r\n    const [projectColor, setProjectColor] = useState('blue');\r\n    const [isSpeaking, setIsSpeaking] = useState(false);\r\n    const [voiceEnabled, setVoiceEnabled] = useState(false);\r\n    const [showWorkspaceBuilder, setShowWorkspaceBuilder] = useState(false);\r\n    const [workspaceStep, setWorkspaceStep] = useState(1);\r\n    const [workspaceData, setWorkspaceData] = useState({\r\n        industry: '',\r\n        teamSize: '',\r\n        goals: [] as string[],\r\n        tools: [] as string[],\r\n        budget: ''\r\n    });\r\n\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const recognitionRef = useRef<any>(null);\r\n    const synthRef = useRef<SpeechSynthesis | null>(null);\r\n\r\n    // Text-to-Speech Handler\r\n    const speakText = (text: string) => {\r\n        if (!voiceEnabled || !synthRef.current) return;\r\n\r\n        // Cancel any ongoing speech\r\n        synthRef.current.cancel();\r\n\r\n        const utterance = new SpeechSynthesisUtterance(text);\r\n        utterance.rate = 1.0;\r\n        utterance.pitch = 1.0;\r\n        utterance.volume = 1.0;\r\n        utterance.lang = 'en-US';\r\n\r\n        utterance.onstart = () => setIsSpeaking(true);\r\n        utterance.onend = () => setIsSpeaking(false);\r\n        utterance.onerror = () => setIsSpeaking(false);\r\n\r\n        synthRef.current.speak(utterance);\r\n    };\r\n\r\n    // Toggle Voice Conversation\r\n    const toggleVoiceConversation = () => {\r\n        const newState = !voiceEnabled;\r\n        setVoiceEnabled(newState);\r\n\r\n        if (!newState && synthRef.current) {\r\n            synthRef.current.cancel();\r\n            setIsSpeaking(false);\r\n        }\r\n\r\n        // Show notification\r\n        const notification = document.createElement('div');\r\n        notification.className = 'fixed top-4 right-4 bg-purple-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in slide-in-from-top';\r\n        notification.textContent = newState ? '🔊 Voice conversation enabled' : '🔇 Voice conversation disabled';\r\n        document.body.appendChild(notification);\r\n        setTimeout(() => notification.remove(), 2000);\r\n    };\r\n\r\n    // Handler for New Chat\r\n    const handleNewChat = () => {\r\n        setMessages([]);\r\n        setInputValue('');\r\n        setUploadedFiles([]);\r\n        setOracleSidebarOpen(false);\r\n\r\n        if (onNewChat) onNewChat();\r\n\r\n        // Show success notification\r\n        const notification = document.createElement('div');\r\n        notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in slide-in-from-top';\r\n        notification.textContent = '✓ New chat started!';\r\n        document.body.appendChild(notification);\r\n        setTimeout(() => notification.remove(), 2000);\r\n    };\r\n\r\n    // Handler for New Project\r\n    const handleCreateProject = () => {\r\n        if (!projectName.trim()) return;\r\n\r\n        // Save project\r\n        if (onNewProject) {\r\n            onNewProject(projectName, projectIcon, projectColor);\r\n        }\r\n\r\n        console.log('Creating project:', { name: projectName, icon: projectIcon, color: projectColor });\r\n\r\n        // Show success notification\r\n        const notification = document.createElement('div');\r\n        notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in slide-in-from-top';\r\n        notification.textContent = `✓ Project \"${projectName}\" created!`;\r\n        document.body.appendChild(notification);\r\n        setTimeout(() => notification.remove(), 2000);\r\n\r\n        // Reset and close modal\r\n        setProjectName('');\r\n        setProjectIcon('folder');\r\n        setProjectColor('blue');\r\n        setShowProjectModal(false);\r\n    };\r\n\r\n    // Voice Recognition & Speech Synthesis Setup\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined') {\r\n            // Initialize Speech Recognition\r\n            const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n            if (SpeechRecognition) {\r\n                const recognition = new SpeechRecognition();\r\n                recognition.continuous = true;\r\n                recognition.interimResults = true;\r\n                recognition.lang = 'en-US';\r\n\r\n                recognition.onresult = (event: any) => {\r\n                    let transcript = '';\r\n                    for (let i = event.resultIndex; i < event.results.length; i++) {\r\n                        transcript += event.results[i][0].transcript;\r\n                    }\r\n                    setVoiceTranscript(transcript);\r\n                    setInputValue(transcript);\r\n                };\r\n\r\n                recognition.onerror = (event: any) => {\r\n                    console.error('Speech recognition error:', event.error);\r\n                    setIsRecording(false);\r\n                };\r\n\r\n                recognition.onend = () => {\r\n                    setIsRecording(false);\r\n                };\r\n\r\n                recognitionRef.current = recognition;\r\n            }\r\n\r\n            // Initialize Speech Synthesis\r\n            if (window.speechSynthesis) {\r\n                synthRef.current = window.speechSynthesis;\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // Load initial message\r\n    useEffect(() => {\r\n        if (chatId && messages.length === 0) {\r\n            setMessages([{\r\n                id: '1',\r\n                chatId,\r\n                role: 'rkle',\r\n                content: \"👋 Hello! I'm Rkle, your AI Co-Founder. I'm here to help you with sales, marketing, business development, and everything in between.\\n\\nI can:\\n• Generate images, documents, spreadsheets\\n• Connect with Google Workspace, ERP, Invoice tools\\n• Analyze data and provide strategic insights\\n• Create brochures, presentations, and reports\\n\\nHow can I help your business today?\",\r\n                timestamp: new Date(),\r\n                canCopy: true,\r\n                canShare: true,\r\n            }]);\r\n        }\r\n    }, [chatId]);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages]);\r\n\r\n    const handleSubmit = async () => {\r\n        if (!inputValue.trim() && uploadedFiles.length === 0) return;\r\n        if (isLoading) return;\r\n\r\n        const userMessage: Message = {\r\n            id: Date.now().toString(),\r\n            chatId: chatId || 'default',\r\n            role: 'user',\r\n            content: inputValue,\r\n            timestamp: new Date(),\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInputValue('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/oracle/chat', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: inputValue,\r\n                    chatId,\r\n                    conversationHistory: messages.slice(-6),\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                const oracleMessage: Message = {\r\n                    id: Date.now().toString(),\r\n                    chatId: chatId || 'default',\r\n                    role: 'rkle',\r\n                    content: data.response,\r\n                    timestamp: new Date(),\r\n                    canCopy: true,\r\n                    canShare: true,\r\n                };\r\n                setMessages(prev => [...prev, oracleMessage]);\r\n\r\n                // Speak the response if voice conversation is enabled\r\n                speakText(data.response);\r\n            }\r\n        } catch (error) {\r\n            console.error('Chat error:', error);\r\n            const errorMessage: Message = {\r\n                id: Date.now().toString(),\r\n                chatId: chatId || 'default',\r\n                role: 'rkle',\r\n                content: \"I apologize, but I'm having trouble connecting right now. Please try again.\",\r\n                timestamp: new Date(),\r\n            };\r\n            setMessages(prev => [...prev, errorMessage]);\r\n\r\n            // Speak error message if voice is enabled\r\n            speakText(\"I apologize, but I'm having trouble connecting right now. Please try again.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n            setUploadedFiles([]);\r\n        }\r\n    };\r\n\r\n    const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files) {\r\n            setUploadedFiles(Array.from(e.target.files));\r\n        }\r\n    };\r\n\r\n    const handleCopy = (content: string) => {\r\n        navigator.clipboard.writeText(content);\r\n        // TODO: Show toast notification\r\n    };\r\n\r\n    const handleShare = (content: string) => {\r\n        if (navigator.share) {\r\n            navigator.share({\r\n                text: content,\r\n                title: 'Rkle AI Response',\r\n            });\r\n        }\r\n    };\r\n\r\n    const toggleVoiceRecording = () => {\r\n        if (!recognitionRef.current) {\r\n            alert('Voice recognition not supported in this browser. Please use Chrome or Edge.');\r\n            return;\r\n        }\r\n\r\n        if (isRecording) {\r\n            recognitionRef.current.stop();\r\n            setIsRecording(false);\r\n        } else {\r\n            recognitionRef.current.start();\r\n            setIsRecording(true);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-full overflow-hidden\">\r\n            {/* Oracle Internal Sidebar */}\r\n            <div className={`bg-slate-900 border-r border-slate-700 transition-all duration-300 flex-shrink-0 ${oracleSidebarOpen ? 'w-64' : 'w-0 overflow-hidden'}`}>\r\n                <div className=\"h-full flex flex-col p-4 space-y-4\">\r\n                    {/* Header */}\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-8 h-8 bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-700 rounded-lg flex items-center justify-center shadow-lg\">\r\n                                <span className=\"material-icons text-white text-sm\">psychology</span>\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-white font-bold text-xs\">Rkle</h3>\r\n                                <p className=\"text-slate-400 text-[9px]\">SetMyBizz AI Studio</p>\r\n                            </div>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setOracleSidebarOpen(false)}\r\n                            className=\"p-1 hover:bg-slate-800 rounded transition-colors\"\r\n                        >\r\n                            <span className=\"material-icons text-slate-400 text-sm\">close</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* New Chat Button */}\r\n                    <button\r\n                        onClick={handleNewChat}\r\n                        className=\"w-full px-3 py-2.5 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-colors\"\r\n                    >\r\n                        <span className=\"material-icons text-sm\">add</span>\r\n                        New Chat\r\n                    </button>\r\n\r\n                    {/* Menu Items */}\r\n                    <div className=\"flex-1 space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700\">\r\n                        <button\r\n                            onClick={() => setShowProjectModal(true)}\r\n                            className=\"w-full px-3 py-2 hover:bg-slate-800 text-slate-300 hover:text-white rounded-lg text-xs font-medium flex items-center gap-2 transition-colors text-left\"\r\n                        >\r\n                            <span className=\"material-icons text-sm\">folder</span>\r\n                            New Project\r\n                        </button>\r\n\r\n                        <div className=\"border-t border-slate-700 my-2\"></div>\r\n\r\n                        <button className=\"w-full px-3 py-2 hover:bg-slate-800 text-slate-300 hover:text-white rounded-lg text-xs font-medium flex items-center gap-2 transition-colors text-left\">\r\n                            <span className=\"material-icons text-sm\">extension</span>\r\n                            Connect Apps\r\n                        </button>\r\n\r\n                        <button className=\"w-full px-3 py-2 hover:bg-slate-800 text-slate-300 hover:text-white rounded-lg text-xs font-medium flex items-center gap-2 transition-colors text-left\">\r\n                            <span className=\"material-icons text-sm\">task_alt</span>\r\n                            Tasks\r\n                            <span className=\"ml-auto bg-purple-600 text-white text-[9px] px-1.5 py-0.5 rounded-full\">3</span>\r\n                        </button>\r\n\r\n                        <button className=\"w-full px-3 py-2 hover:bg-slate-800 text-slate-300 hover:text-white rounded-lg text-xs font-medium flex items-center gap-2 transition-colors text-left\">\r\n                            <span className=\"material-icons text-sm\">notifications</span>\r\n                            Notifications\r\n                            <span className=\"ml-auto bg-red-600 text-white text-[9px] px-1.5 py-0.5 rounded-full\">5</span>\r\n                        </button>\r\n\r\n                        <div className=\"border-t border-slate-700 my-2\"></div>\r\n\r\n                        <button className=\"w-full px-3 py-2 hover:bg-slate-800 text-slate-300 hover:text-white rounded-lg text-xs font-medium flex items-center gap-2 transition-colors text-left\">\r\n                            <span className=\"material-icons text-sm\">settings</span>\r\n                            Settings\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* User Info */}\r\n                    <div className=\"border-t border-slate-700 pt-3\">\r\n                        <div className=\"flex items-center gap-2 px-2 py-1.5 hover:bg-slate-800 rounded-lg transition-colors cursor-pointer\">\r\n                            <div className=\"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center\">\r\n                                <span className=\"material-icons text-white text-xs\">person</span>\r\n                            </div>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <p className=\"text-white text-xs font-medium truncate\">User</p>\r\n                                <p className=\"text-slate-400 text-[9px] truncate\">Free Plan</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Chat Area */}\r\n            <div className=\"flex-1 flex flex-col bg-white h-full overflow-hidden\">\r\n                {/* Header */}\r\n                <div className=\"h-14 border-b border-slate-200 flex items-center justify-between px-4 flex-shrink-0 bg-white\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                            onClick={() => setOracleSidebarOpen(!oracleSidebarOpen)}\r\n                            className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors\"\r\n                            title=\"Toggle Rkle Menu\"\r\n                        >\r\n                            <span className=\"material-icons text-slate-600\">menu</span>\r\n                        </button>\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"w-10 h-10 bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-700 rounded-xl flex items-center justify-center shadow-lg shadow-purple-300 ring-2 ring-purple-200 animate-pulse\">\r\n                                <span className=\"material-icons text-white text-xl\">psychology</span>\r\n                            </div>\r\n                            <div>\r\n                                <h2 className=\"font-bold text-base text-slate-900\">Rkle</h2>\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\r\n                                    <p className=\"text-[11px] text-purple-600 font-semibold\">Your AI co-founder</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        {/* Voice Conversation Toggle */}\r\n                        <button\r\n                            onClick={toggleVoiceConversation}\r\n                            className={`p-2 rounded-lg transition-all ${voiceEnabled\r\n                                ? 'bg-purple-100 text-purple-600'\r\n                                : 'hover:bg-slate-100 text-slate-600'\r\n                                } ${isSpeaking ? 'animate-pulse' : ''}`}\r\n                            title={voiceEnabled ? \"Disable voice conversation\" : \"Enable voice conversation\"}\r\n                        >\r\n                            <span className=\"material-icons text-xl\">\r\n                                {voiceEnabled ? 'volume_up' : 'volume_off'}\r\n                            </span>\r\n                        </button>\r\n                        {!rightSidebarOpen && (\r\n                            <button\r\n                                onClick={onToggleRightSidebar}\r\n                                className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors\"\r\n                                title=\"Show Tools\"\r\n                            >\r\n                                <span className=\"material-icons text-slate-600\">widgets</span>\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Messages Area */}\r\n                <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-white to-slate-50\">\r\n                    {messages.length === 0 ? (\r\n                        <div className=\"flex items-center justify-center h-full\">\r\n                            <div className=\"text-center max-w-2xl px-4\">\r\n                                {/* AI Co-Founder Brain - Large Visual */}\r\n                                <div className=\"relative mb-8\">\r\n                                    <div className=\"absolute inset-0 bg-gradient-to-r from-purple-400 via-pink-400 to-indigo-400 rounded-full blur-3xl opacity-30 animate-pulse\"></div>\r\n                                    <div className=\"relative w-32 h-32 mx-auto bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-700 rounded-3xl flex items-center justify-center shadow-2xl shadow-purple-300 ring-8 ring-purple-50\">\r\n                                        <span className=\"material-icons text-white\" style={{ fontSize: '80px' }}>psychology</span>\r\n                                    </div>\r\n                                    {/* Orbiting Icons */}\r\n                                    <div className=\"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-4 bg-blue-100 p-2 rounded-lg shadow-lg animate-bounce\">\r\n                                        <span className=\"material-icons text-blue-600 text-sm\">email</span>\r\n                                    </div>\r\n                                    <div className=\"absolute bottom-0 right-1/4 translate-y-4 bg-green-100 p-2 rounded-lg shadow-lg animate-bounce\" style={{ animationDelay: '0.2s' }}>\r\n                                        <span className=\"material-icons text-green-600 text-sm\">trending_up</span>\r\n                                    </div>\r\n                                    <div className=\"absolute bottom-0 left-1/4 translate-y-4 bg-orange-100 p-2 rounded-lg shadow-lg animate-bounce\" style={{ animationDelay: '0.4s' }}>\r\n                                        <span className=\"material-icons text-orange-600 text-sm\">analytics</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Title */}\r\n                                <h1 className=\"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-600 to-indigo-600 mb-3\">\r\n                                    Welcome to Rkle\r\n                                </h1>\r\n                                <div className=\"flex items-center justify-center gap-2 mb-2\">\r\n                                    <span className=\"text-lg font-bold text-slate-700\">🧠 Your AI Co-founder</span>\r\n                                    <span className=\"px-3 py-1 bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 text-xs font-bold rounded-full border border-purple-200\">\r\n                                        Business Brain\r\n                                    </span>\r\n                                </div>\r\n                                <p className=\"text-sm text-slate-500 mb-8 max-w-lg mx-auto\">\r\n                                    I help with sales, marketing, business development, and everything in between. Just ask me anything!\r\n                                </p>\r\n\r\n                                {/* Quick Actions */}\r\n                                <div className=\"grid grid-cols-2 gap-3 text-left max-w-md mx-auto\">\r\n                                    <button\r\n                                        onClick={() => setInputValue(\"Create a sales strategy for Q2\")}\r\n                                        className=\"p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 hover:shadow-lg transition-all group\"\r\n                                    >\r\n                                        <span className=\"material-icons text-2xl text-purple-600 mb-2 group-hover:scale-110 transition-transform\">trending_up</span>\r\n                                        <div className=\"font-bold text-slate-800 text-sm\">Sales Strategy</div>\r\n                                        <div className=\"text-xs text-slate-500\">Q2 planning</div>\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setInputValue(\"Generate a marketing campaign\")}\r\n                                        className=\"p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 hover:shadow-lg transition-all group\"\r\n                                    >\r\n                                        <span className=\"material-icons text-2xl text-purple-600 mb-2 group-hover:scale-110 transition-transform\">campaign</span>\r\n                                        <div className=\"font-bold text-slate-800 text-sm\">Marketing Ideas</div>\r\n                                        <div className=\"text-xs text-slate-500\">Get campaigns</div>\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setInputValue(\"Create a business plan\")}\r\n                                        className=\"p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 hover:shadow-lg transition-all group\"\r\n                                    >\r\n                                        <span className=\"material-icons text-2xl text-purple-600 mb-2 group-hover:scale-110 transition-transform\">description</span>\r\n                                        <div className=\"font-bold text-slate-800 text-sm\">Business Plan</div>\r\n                                        <div className=\"text-xs text-slate-500\">Full roadmap</div>\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setInputValue(\"Analyze my sales data\")}\r\n                                        className=\"p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-purple-400 hover:bg-purple-50 hover:shadow-lg transition-all group\"\r\n                                    >\r\n                                        <span className=\"material-icons text-2xl text-purple-600 mb-2 group-hover:scale-110 transition-transform\">analytics</span>\r\n                                        <div className=\"font-bold text-slate-800 text-sm\">Data Analysis</div>\r\n                                        <div className=\"text-xs text-slate-500\">Insights</div>\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Build Customized Workspace Button */}\r\n                                <button\r\n                                    onClick={() => setShowWorkspaceBuilder(true)}\r\n                                    className=\"mt-6 w-full max-w-md mx-auto py-4 px-6 bg-gradient-to-r from-purple-600 via-pink-600 to-indigo-600 text-white rounded-xl font-bold text-base shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 group\"\r\n                                >\r\n                                    <span className=\"material-icons text-2xl group-hover:rotate-12 transition-transform\">construction</span>\r\n                                    Build Your Customized Workspace\r\n                                    <span className=\"material-icons text-2xl group-hover:translate-x-1 transition-transform\">arrow_forward</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {messages.map(msg => (\r\n                                <div key={msg.id} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} animate-in fade-in slide-in-from-bottom-3 duration-500`}>\r\n                                    <div className={`flex items-start gap-3 max-w-[75%]`}>\r\n                                        {msg.role === 'rkle' && (\r\n                                            <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                                                <span className=\"material-icons text-white text-sm\">auto_awesome</span>\r\n                                            </div>\r\n                                        )}\r\n                                        <div className={`flex-1`}>\r\n                                            <div className={`rounded-2xl px-4 py-3 ${msg.role === 'user'\r\n                                                ? 'bg-purple-600 text-white'\r\n                                                : 'bg-slate-100 text-slate-800'\r\n                                                }`}>\r\n                                                <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{msg.content}</p>\r\n                                            </div>\r\n                                            {msg.canCopy && msg.role === 'rkle' && (\r\n                                                <div className=\"flex items-center gap-2 mt-2\">\r\n                                                    <button\r\n                                                        onClick={() => handleCopy(msg.content)}\r\n                                                        className=\"text-xs text-slate-500 hover:text-purple-600 flex items-center gap-1 transition-colors\"\r\n                                                    >\r\n                                                        <span className=\"material-icons text-sm\">content_copy</span>\r\n                                                        Copy\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleShare(msg.content)}\r\n                                                        className=\"text-xs text-slate-500 hover:text-purple-600 flex items-center gap-1 transition-colors\"\r\n                                                    >\r\n                                                        <span className=\"material-icons text-sm\">share</span>\r\n                                                        Share\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        {msg.role === 'user' && (\r\n                                            <div className=\"w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                                                <span className=\"material-icons text-white text-sm\">person</span>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                            {isLoading && (\r\n                                <div className=\"flex justify-start\">\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center\">\r\n                                            <span className=\"material-icons text-white text-sm\">auto_awesome</span>\r\n                                        </div>\r\n                                        <div className=\"bg-slate-100 rounded-2xl px-4 py-3\">\r\n                                            <div className=\"flex gap-1\">\r\n                                                <span className=\"w-2 h-2 bg-purple-400 rounded-full animate-bounce [animation-delay:-0.3s]\"></span>\r\n                                                <span className=\"w-2 h-2 bg-purple-400 rounded-full animate-bounce [animation-delay:-0.15s]\"></span>\r\n                                                <span className=\"w-2 h-2 bg-purple-400 rounded-full animate-bounce\"></span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            <div ref={messagesEndRef} />\r\n                        </>\r\n                    )}\r\n                </div >\r\n\r\n                {/* Input Area */}\r\n                < div className=\"border-t border-slate-200 p-4 bg-white flex-shrink-0\" >\r\n                    {\r\n                        uploadedFiles.length > 0 && (\r\n                            <div className=\"mb-2 flex flex-wrap gap-2\">\r\n                                {uploadedFiles.map((file, idx) => (\r\n                                    <div key={idx} className=\"bg-purple-50 border border-purple-200 rounded-lg px-3 py-1.5 flex items-center gap-2 text-xs\">\r\n                                        <span className=\"material-icons text-sm text-purple-600\">attach_file</span>\r\n                                        <span className=\"text-purple-800\">{file.name}</span>\r\n                                        <button\r\n                                            onClick={() => setUploadedFiles(uploadedFiles.filter((_, i) => i !== idx))}\r\n                                            className=\"text-purple-600 hover:text-purple-800\"\r\n                                        >\r\n                                            <span className=\"material-icons text-sm\">close</span>\r\n                                        </button>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )\r\n                    }\r\n                    < div className=\"max-w-4xl mx-auto bg-slate-50 border border-slate-300 rounded-2xl p-3 focus-within:border-purple-500 focus-within:bg-white transition-all\" >\r\n                        <textarea\r\n                            value={inputValue}\r\n                            onChange={(e) => setInputValue(e.target.value)}\r\n                            onKeyDown={(e) => {\r\n                                if (e.key === 'Enter' && !e.shiftKey) {\r\n                                    e.preventDefault();\r\n                                    handleSubmit();\r\n                                }\r\n                            }}\r\n                            placeholder=\"Ask your AI co-founder...\"\r\n                            disabled={isLoading}\r\n                            rows={1}\r\n                            className=\"w-full bg-transparent border-none outline-none text-slate-800 placeholder:text-slate-400 text-sm resize-none\"\r\n                            style={{ minHeight: '24px', maxHeight: '200px' }}\r\n                        />\r\n                        <div className=\"flex items-center justify-between mt-2\">\r\n                            <div className=\"flex items-center gap-1\">\r\n                                <input\r\n                                    ref={fileInputRef}\r\n                                    type=\"file\"\r\n                                    multiple\r\n                                    onChange={handleFileUpload}\r\n                                    className=\"hidden\"\r\n                                    accept=\".pdf,.doc,.docx,.xls,.xlsx,.csv,.png,.jpg,.jpeg,.svg\"\r\n                                />\r\n                                <button\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    className=\"p-1.5 hover:bg-slate-200 rounded-lg transition-colors\"\r\n                                    title=\"Attach Files\"\r\n                                >\r\n                                    <span className=\"material-icons text-slate-600 text-lg\">attach_file</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={toggleVoiceRecording}\r\n                                    className={`p-1.5 rounded-lg transition-all duration-200 ${isRecording ? 'bg-red-100 text-red-600 animate-pulse' : 'hover:bg-slate-200 text-slate-600'}`}\r\n                                    title={isRecording ? \"Stop Recording\" : \"Start Voice Input\"}\r\n                                >\r\n                                    <span className=\"material-icons text-lg\">{isRecording ? 'stop_circle' : 'mic'}</span>\r\n                                </button>\r\n                            </div>\r\n                            <button\r\n                                onClick={handleSubmit}\r\n                                disabled={(!inputValue.trim() && uploadedFiles.length === 0) || isLoading}\r\n                                className={`px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-1 transition-all ${(!inputValue.trim() && uploadedFiles.length === 0) || isLoading\r\n                                    ? 'bg-slate-200 text-slate-400 cursor-not-allowed'\r\n                                    : 'bg-purple-600 text-white hover:bg-purple-700'\r\n                                    }`}\r\n                            >\r\n                                <span className=\"material-icons text-sm\">send</span>\r\n                                Send\r\n                            </button>\r\n                        </div>\r\n                    </div >\r\n                    <p className=\"text-center text-[10px] text-slate-400 mt-2\">Rkle can make mistakes. Check important info.</p>\r\n                </div >\r\n            </div >\r\n\r\n            {/* Project Creation Modal */}\r\n            {\r\n                showProjectModal && (\r\n                    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200\">\r\n                        <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-in zoom-in duration-200\">\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <h3 className=\"text-xl font-bold text-slate-900\">Create New Project</h3>\r\n                                <button\r\n                                    onClick={() => setShowProjectModal(false)}\r\n                                    className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors\"\r\n                                >\r\n                                    <span className=\"material-icons text-slate-600\">close</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Project Name Input */}\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-2\">Project Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={projectName}\r\n                                    onChange={(e) => setProjectName(e.target.value)}\r\n                                    placeholder=\"e.g., Marketing Campaign 2024\"\r\n                                    className=\"w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-xl text-sm focus:border-purple-500 focus:bg-white focus:outline-none transition-all\"\r\n                                    onKeyDown={(e) => {\r\n                                        if (e.key === 'Enter') {\r\n                                            handleCreateProject();\r\n                                        }\r\n                                    }}\r\n                                    autoFocus\r\n                                />\r\n                            </div>\r\n\r\n                            {/* Icon Picker */}\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-3\">Choose Icon</label>\r\n                                <div className=\"grid grid-cols-6 gap-2\">\r\n                                    {['folder', 'trending_up', 'business_center', 'account_balance', 'shopping_cart', 'campaign', 'analytics', 'lightbulb', 'rocket_launch', 'EmojiObjects', 'psychology', 'auto_awesome'].map((icon) => (\r\n                                        <button\r\n                                            key={icon}\r\n                                            onClick={() => setProjectIcon(icon)}\r\n                                            className={`p-3 rounded-lg border-2 transition-all ${projectIcon === icon\r\n                                                ? 'border-purple-600 bg-purple-50'\r\n                                                : 'border-slate-200 hover:border-purple-300 hover:bg-slate-50'\r\n                                                }`}\r\n                                        >\r\n                                            <span className={`material-icons text-xl ${projectIcon === icon ? 'text-purple-600' : 'text-slate-600'}`}>\r\n                                                {icon}\r\n                                            </span>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Color Picker */}\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-sm font-bold text-slate-700 mb-3\">Choose Color</label>\r\n                                <div className=\"grid grid-cols-8 gap-2\">\r\n                                    {['blue', 'purple', 'pink', 'red', 'orange', 'yellow', 'green', 'teal'].map((color) => (\r\n                                        <button\r\n                                            key={color}\r\n                                            onClick={() => setProjectColor(color)}\r\n                                            className={`w-10 h-10 rounded-lg transition-all ${projectColor === color\r\n                                                ? 'ring-2 ring-offset-2 ring-slate-900 scale-110'\r\n                                                : 'hover:scale-105'\r\n                                                }`}\r\n                                            style={{ backgroundColor: `var(--color-${color}-500, #6366f1)` }}\r\n                                            title={color}\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Preview */}\r\n                            <div className=\"mb-6 p-4 bg-slate-50 rounded-xl border border-slate-200\">\r\n                                <p className=\"text-xs text-slate-600 mb-2 font-bold\">Preview</p>\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className={`w-10 h-10 bg-${projectColor}-100 rounded-xl flex items-center justify-center`}>\r\n                                        <span className={`material-icons text-${projectColor}-600`}>{projectIcon}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"font-bold text-slate-900\">{projectName || 'Project Name'}</p>\r\n                                        <p className=\"text-xs text-slate-500\">0 chats</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Action Buttons */}\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setShowProjectModal(false)}\r\n                                    className=\"flex-1 px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold text-sm transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleCreateProject}\r\n                                    disabled={!projectName.trim()}\r\n                                    className={`flex-1 px-4 py-3 rounded-xl font-bold text-sm transition-all ${projectName.trim()\r\n                                        ? 'bg-purple-600 hover:bg-purple-700 text-white'\r\n                                        : 'bg-slate-200 text-slate-400 cursor-not-allowed'\r\n                                        }`}\r\n                                >\r\n                                    Create Project\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n            {/* Workspace Builder Modal - Questionnaire Flow */}\r\n            {\r\n                showWorkspaceBuilder && (\r\n                    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n                        <div className=\"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-in zoom-in duration-300\">\r\n                            {/* Header */}\r\n                            <div className=\"sticky top-0 bg-gradient-to-r from-purple-600 via-pink-600 to-indigo-600 text-white p-6 rounded-t-3xl text-left\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <div>\r\n                                        <h2 className=\"text-2xl font-black\">Build Your Workspace</h2>\r\n                                        <p className=\"text-sm text-purple-100 mt-1\">Step {workspaceStep} of 5 - Let&apos;s customize your perfect workspace!</p>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setShowWorkspaceBuilder(false);\r\n                                            setWorkspaceStep(1);\r\n                                        }}\r\n                                        className=\"p-2 hover:bg-white/20 rounded-lg transition-colors\"\r\n                                    >\r\n                                        <span className=\"material-icons\">close</span>\r\n                                    </button>\r\n                                </div>\r\n                                {/* Progress Bar */}\r\n                                <div className=\"mt-4 h-2 bg-white/20 rounded-full overflow-hidden\">\r\n                                    <div\r\n                                        className=\"h-full bg-white transition-all duration-300\"\r\n                                        style={{ width: `${(workspaceStep / 5) * 100}%` }}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Question Content */}\r\n                            <div className=\"p-8\">\r\n                                {/* Step 1: Industry */}\r\n                                {workspaceStep === 1 && (\r\n                                    <div className=\"space-y-6 animate-in slide-in-from-right duration-300\">\r\n                                        <div className=\"text-center mb-8\">\r\n                                            <span className=\"material-icons text-6xl text-purple-600 mb-4 inline-block\">business</span>\r\n                                            <h3 className=\"text-2xl font-bold text-slate-900\">What&apos;s your industry?</h3>\r\n                                            <p className=\"text-slate-600 mt-2\">Help us understand your business better</p>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 gap-3\">\r\n                                            {['E-commerce', 'SaaS', 'Consulting', 'Manufacturing', 'Healthcare', 'Education', 'Real Estate', 'Other'].map((ind) => (\r\n                                                <button\r\n                                                    key={ind}\r\n                                                    onClick={() => setWorkspaceData({ ...workspaceData, industry: ind })}\r\n                                                    className={`p-4 rounded-xl border-2 transition-all text-left ${workspaceData.industry === ind\r\n                                                        ? 'border-purple-600 bg-purple-50 shadow-lg scale-105'\r\n                                                        : 'border-slate-200 hover:border-purple-300 hover:bg-purple-50'\r\n                                                        }`}\r\n                                                >\r\n                                                    <span className=\"font-bold text-slate-900\">{ind}</span>\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Step 2: Team Size */}\r\n                                {workspaceStep === 2 && (\r\n                                    <div className=\"space-y-6 animate-in slide-in-from-right duration-300\">\r\n                                        <div className=\"text-center mb-8\">\r\n                                            <span className=\"material-icons text-6xl text-purple-600 mb-4 inline-block\">groups</span>\r\n                                            <h3 className=\"text-2xl font-bold text-slate-900\">What&apos;s your team size?</h3>\r\n                                            <p className=\"text-slate-600 mt-2\">This helps us scale your workspace</p>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 gap-4\">\r\n                                            {['Just me (1)', 'Small (2-10)', 'Medium (11-50)', 'Large (50+)'].map((size) => (\r\n                                                <button\r\n                                                    key={size}\r\n                                                    onClick={() => setWorkspaceData({ ...workspaceData, teamSize: size })}\r\n                                                    className={`p-6 rounded-xl border-2 transition-all ${workspaceData.teamSize === size\r\n                                                        ? 'border-purple-600 bg-purple-50 shadow-lg scale-105'\r\n                                                        : 'border-slate-200 hover:border-purple-300 hover:bg-purple-50'\r\n                                                        }`}\r\n                                                >\r\n                                                    <div className=\"text-3xl mb-2\">{size.includes('Just') ? '👤' : size.includes('Small') ? '👥' : size.includes('Medium') ? '👨‍👩‍👧‍👦' : '🏢'}</div>\r\n                                                    <span className=\"font-bold text-slate-900\">{size}</span>\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Step 3: Goals */}\r\n                                {workspaceStep === 3 && (\r\n                                    <div className=\"space-y-6 animate-in slide-in-from-right duration-300\">\r\n                                        <div className=\"text-center mb-8\">\r\n                                            <span className=\"material-icons text-6xl text-purple-600 mb-4 inline-block\">flag</span>\r\n                                            <h3 className=\"text-2xl font-bold text-slate-900\">What are your main goals?</h3>\r\n                                            <p className=\"text-slate-600 mt-2\">Select all that apply</p>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-1 gap-3\">\r\n                                            {[\r\n                                                { id: 'sales', label: 'Increase Sales', icon: 'trending_up' },\r\n                                                { id: 'marketing', label: 'Improve Marketing', icon: 'campaign' },\r\n                                                { id: 'operations', label: 'Streamline Operations', icon: 'settings' },\r\n                                                { id: 'customer', label: 'Better Customer Service', icon: 'support_agent' },\r\n                                                { id: 'analytics', label: 'Data & Analytics', icon: 'analytics' }\r\n                                            ].map((goal) => (\r\n                                                <button\r\n                                                    key={goal.id}\r\n                                                    onClick={() => {\r\n                                                        const goals = workspaceData.goals.includes(goal.id)\r\n                                                            ? workspaceData.goals.filter(g => g !== goal.id)\r\n                                                            : [...workspaceData.goals, goal.id];\r\n                                                        setWorkspaceData({ ...workspaceData, goals });\r\n                                                    }}\r\n                                                    className={`p-4 rounded-xl border-2 transition-all flex items-center gap-4 ${workspaceData.goals.includes(goal.id)\r\n                                                        ? 'border-purple-600 bg-purple-50 shadow-md'\r\n                                                        : 'border-slate-200 hover:border-purple-300'\r\n                                                        }`}\r\n                                                >\r\n                                                    <span className={`material-icons text-2xl ${workspaceData.goals.includes(goal.id) ? 'text-purple-600' : 'text-slate-400'}`}>\r\n                                                        {goal.icon}\r\n                                                    </span>\r\n                                                    <span className=\"font-bold text-slate-900 flex-1 text-left\">{goal.label}</span>\r\n                                                    {workspaceData.goals.includes(goal.id) && (\r\n                                                        <span className=\"material-icons text-purple-600\">check_circle</span>\r\n                                                    )}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Step 4: Tools */}\r\n                                {workspaceStep === 4 && (\r\n                                    <div className=\"space-y-6 animate-in slide-in-from-right duration-300\">\r\n                                        <div className=\"text-center mb-8\">\r\n                                            <span className=\"material-icons text-6xl text-purple-600 mb-4 inline-block\">extension</span>\r\n                                            <h3 className=\"text-2xl font-bold text-slate-900\">Which tools do you use?</h3>\r\n                                            <p className=\"text-slate-600 mt-2\">We'll integrate with your favorites</p>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 gap-3\">\r\n                                            {[\r\n                                                { id: 'sheets', label: 'Google Sheets', icon: 'table_chart' },\r\n                                                { id: 'docs', label: 'Google Docs', icon: 'description' },\r\n                                                { id: 'gmail', label: 'Gmail', icon: 'mail' },\r\n                                                { id: 'crm', label: 'CRM Software', icon: 'people' },\r\n                                                { id: 'slack', label: 'Slack', icon: 'chat' },\r\n                                                { id: 'zoom', label: 'Zoom', icon: 'videocam' }\r\n                                            ].map((tool) => (\r\n                                                <button\r\n                                                    key={tool.id}\r\n                                                    onClick={() => {\r\n                                                        const tools = workspaceData.tools.includes(tool.id)\r\n                                                            ? workspaceData.tools.filter(t => t !== tool.id)\r\n                                                            : [...workspaceData.tools, tool.id];\r\n                                                        setWorkspaceData({ ...workspaceData, tools });\r\n                                                    }}\r\n                                                    className={`p-4 rounded-xl border-2 transition-all ${workspaceData.tools.includes(tool.id)\r\n                                                        ? 'border-purple-600 bg-purple-50 shadow-md'\r\n                                                        : 'border-slate-200 hover:border-purple-300'\r\n                                                        }`}\r\n                                                >\r\n                                                    <span className={`material-icons text-3xl mb-2 ${workspaceData.tools.includes(tool.id) ? 'text-purple-600' : 'text-slate-400'}`}>\r\n                                                        {tool.icon}\r\n                                                    </span>\r\n                                                    <div className=\"font-bold text-sm text-slate-900\">{tool.label}</div>\r\n                                                    {workspaceData.tools.includes(tool.id) && (\r\n                                                        <span className=\"material-icons text-green-600 text-sm mt-1\">check</span>\r\n                                                    )}\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Step 5: Budget */}\r\n                                {workspaceStep === 5 && (\r\n                                    <div className=\"space-y-6 animate-in slide-in-from-right duration-300\">\r\n                                        <div className=\"text-center mb-8\">\r\n                                            <span className=\"material-icons text-6xl text-purple-600 mb-4 inline-block\">account_balance_wallet</span>\r\n                                            <h3 className=\"text-2xl font-bold text-slate-900\">What&apos;s your monthly budget?</h3>\r\n                                            <p className=\"text-slate-600 mt-2\">For automation and tools</p>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-1 gap-3\">\r\n                                            {[\r\n                                                { value: 'free', label: 'Free Plan', desc: 'Perfect for getting started' },\r\n                                                { value: 'basic', label: '$49/month', desc: 'Essential features' },\r\n                                                { value: 'pro', label: '$99/month', desc: 'Advanced automation' },\r\n                                                { value: 'enterprise', label: '$299+/month', desc: 'Full enterprise suite' }\r\n                                            ].map((plan) => (\r\n                                                <button\r\n                                                    key={plan.value}\r\n                                                    onClick={() => setWorkspaceData({ ...workspaceData, budget: plan.value })}\r\n                                                    className={`p-5 rounded-xl border-2 transition-all text-left ${workspaceData.budget === plan.value\r\n                                                        ? 'border-purple-600 bg-purple-50 shadow-lg scale-105'\r\n                                                        : 'border-slate-200 hover:border-purple-300 hover:bg-purple-50'\r\n                                                        }`}\r\n                                                >\r\n                                                    <div className=\"font-bold text-lg text-slate-900\">{plan.label}</div>\r\n                                                    <div className=\"text-sm text-slate-600 mt-1\">{plan.desc}</div>\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Navigation Buttons */}\r\n                                <div className=\"flex gap-3 mt-8 pt-6 border-t border-slate-200\">\r\n                                    {workspaceStep > 1 && (\r\n                                        <button\r\n                                            onClick={() => setWorkspaceStep(workspaceStep - 1)}\r\n                                            className=\"flex-1 px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-colors flex items-center justify-center gap-2\"\r\n                                        >\r\n                                            <span className=\"material-icons\">arrow_back</span>\r\n                                            Previous\r\n                                        </button>\r\n                                    )}\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            if (workspaceStep < 5) {\r\n                                                setWorkspaceStep(workspaceStep + 1);\r\n                                            } else {\r\n                                                // Final step - Generate workspace\r\n                                                console.log('Workspace Data:', workspaceData);\r\n\r\n                                                // Save to localStorage so Workspace dashboard can use it\r\n                                                localStorage.setItem('workspaceProfile', JSON.stringify(workspaceData));\r\n\r\n                                                const notification = document.createElement('div');\r\n                                                notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-in slide-in-from-top';\r\n                                                notification.textContent = '✓ Your customized workspace is being generated!';\r\n                                                document.body.appendChild(notification);\r\n                                                setTimeout(() => {\r\n                                                    notification.remove();\r\n                                                    // Trigger a reload if we're in the workspace view to show the new data\r\n                                                    if (window.location.pathname.includes('workspace')) {\r\n                                                        window.location.reload();\r\n                                                    }\r\n                                                }, 3000);\r\n\r\n                                                setShowWorkspaceBuilder(false);\r\n                                                setWorkspaceStep(1);\r\n                                            }\r\n                                        }}\r\n                                        className=\"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-xl font-bold transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2\"\r\n                                    >\r\n                                        {workspaceStep < 5 ? 'Next' : 'Generate Workspace'}\r\n                                        <span className=\"material-icons\">{workspaceStep < 5 ? 'arrow_forward' : 'rocket_launch'}</span>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            {/* Floating AI Co-Founder Avatar - Transparent */}\r\n            {\r\n                messages.length > 0 && !isLoading && (\r\n                    <div className=\"fixed bottom-24 right-8 z-30 animate-in slide-in-from-bottom duration-500\">\r\n                        <div className=\"relative group cursor-pointer\">\r\n                            {/* Glow effect */}\r\n                            <div className=\"absolute inset-0 bg-gradient-to-r from-purple-400 via-pink-400 to-indigo-400 rounded-full blur-2xl opacity-40 group-hover:opacity-60 animate-pulse\"></div>\r\n                            {/* Avatar */}\r\n                            <div className=\"relative w-20 h-20 bg-gradient-to-br from-purple-600/90 via-pink-600/90 to-indigo-700/90 backdrop-blur-sm rounded-full flex items-center justify-center shadow-2xl ring-4 ring-white/50 group-hover:scale-110 transition-transform\">\r\n                                <span className=\"material-icons text-white text-4xl\">{isSpeaking ? 'graphic_eq' : 'psychology'}</span>\r\n                            </div>\r\n                            {/* Tooltip */}\r\n                            <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1 bg-slate-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\r\n                                {isSpeaking ? 'Speaking...' : 'Rkle - Your AI Co-founder'}\r\n                            </div>\r\n                            {/* Voice indicator */}\r\n                            {isSpeaking && (\r\n                                <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center animate-pulse\">\r\n                                    <span className=\"material-icons text-white text-sm\">mic</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default CenterChat;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\LeftSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onNewProject' is defined but never used.","line":29,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showNewProjectModal' is assigned a value but never used.","line":32,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'older' is assigned a value but never used.","line":58,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Project, Chat } from './AIStudioLayout';\r\n\r\ninterface LeftSidebarProps {\r\n    isOpen: boolean;\r\n    onToggle: () => void;\r\n    projects: Project[];\r\n    chats: Chat[];\r\n    currentChatId: string | null;\r\n    currentProjectId: string | null;\r\n    onSelectChat: (chatId: string) => void;\r\n    onSelectProject: (projectId: string) => void;\r\n    onNewChat: () => void;\r\n    onNewProject: (name: string, icon: string, color: string) => void;\r\n}\r\n\r\nconst LeftSidebar: React.FC<LeftSidebarProps> = ({\r\n    isOpen,\r\n    onToggle,\r\n    projects,\r\n    chats,\r\n    currentChatId,\r\n    currentProjectId,\r\n    onSelectChat,\r\n    onSelectProject,\r\n    onNewChat,\r\n    onNewProject,\r\n}) => {\r\n    const [view, setView] = useState<'chats' | 'projects'>('chats');\r\n    const [showNewProjectModal, setShowNewProjectModal] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n\r\n    const filteredChats = chats.filter(chat =>\r\n        chat.title.toLowerCase().includes(searchQuery.toLowerCase()) &&\r\n        (!currentProjectId || chat.projectId === currentProjectId)\r\n    );\r\n\r\n    const groupChatsByDate = (chats: Chat[]) => {\r\n        const now = new Date();\r\n        const today: Chat[] = [];\r\n        const yesterday: Chat[] = [];\r\n        const lastWeek: Chat[] = [];\r\n        const older: Chat[] = [];\r\n\r\n        chats.forEach(chat => {\r\n            const diffDays = Math.floor((now.getTime() - chat.timestamp.getTime()) / (1000 * 60 * 60 * 24));\r\n            if (diffDays === 0) today.push(chat);\r\n            else if (diffDays === 1) yesterday.push(chat);\r\n            else if (diffDays <= 7) lastWeek.push(chat);\r\n            else older.push(chat);\r\n        });\r\n\r\n        return { today, yesterday, lastWeek, older };\r\n    };\r\n\r\n    const { today, yesterday, lastWeek, older } = groupChatsByDate(filteredChats);\r\n\r\n    if (!isOpen) {\r\n        return (\r\n            <div className=\"w-12 bg-slate-900 flex flex-col items-center py-4 gap-4 flex-shrink-0\">\r\n                <button\r\n                    onClick={onToggle}\r\n                    className=\"p-2 text-white hover:bg-slate-800 rounded-lg transition-colors\"\r\n                    title=\"Open Sidebar\"\r\n                >\r\n                    <span className=\"material-icons text-xl\">menu</span>\r\n                </button>\r\n                <button\r\n                    onClick={onNewChat}\r\n                    className=\"p-2 text-white hover:bg-slate-800 rounded-lg transition-colors\"\r\n                    title=\"New Chat\"\r\n                >\r\n                    <span className=\"material-icons text-xl\">add</span>\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-72 bg-slate-900 text-white flex flex-col h-full flex-shrink-0 animate-in slide-in-from-left duration-300\">\r\n            {/* Header */}\r\n            <div className=\"p-3 border-b border-slate-800 flex items-center justify-between flex-shrink-0\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center\">\r\n                        <span className=\"material-icons text-white text-lg\">auto_awesome</span>\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"font-bold text-sm\">Rkle AI Studio</h1>\r\n                        <p className=\"text-[9px] text-slate-400\">Your AI Co-Founder</p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={onToggle}\r\n                    className=\"p-1.5 hover:bg-slate-800 rounded transition-colors\"\r\n                    title=\"Collapse\"\r\n                >\r\n                    <span className=\"material-icons text-lg\">chevron_left</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* New Chat Button */}\r\n            <div className=\"p-2 border-b border-slate-800 flex-shrink-0\">\r\n                <button\r\n                    onClick={onNewChat}\r\n                    className=\"w-full bg-slate-800 hover:bg-slate-700 text-white px-3 py-2.5 rounded-lg font-bold text-sm flex items-center justify-center gap-2 transition-all\"\r\n                >\r\n                    <span className=\"material-icons text-lg\">add</span>\r\n                    New Chat\r\n                </button>\r\n            </div>\r\n\r\n            {/* View Tabs */}\r\n            <div className=\"p-2 flex gap-1 border-b border-slate-800 flex-shrink-0\">\r\n                <button\r\n                    onClick={() => setView('chats')}\r\n                    className={`flex-1 px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${view === 'chats'\r\n                        ? 'bg-slate-800 text-white'\r\n                        : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\r\n                        }`}\r\n                >\r\n                    <span className=\"material-icons text-sm mr-1 align-middle\">chat</span>\r\n                    Chats\r\n                </button>\r\n                <button\r\n                    onClick={() => setView('projects')}\r\n                    className={`flex-1 px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${view === 'projects'\r\n                        ? 'bg-slate-800 text-white'\r\n                        : 'text-slate-400 hover:text-white hover:bg-slate-800/50'\r\n                        }`}\r\n                >\r\n                    <span className=\"material-icons text-sm mr-1 align-middle\">folder</span>\r\n                    Projects\r\n                </button>\r\n            </div>\r\n\r\n            {/* Search */}\r\n            <div className=\"p-2 border-b border-slate-800 flex-shrink-0\">\r\n                <div className=\"relative\">\r\n                    <span className=\"material-icons absolute left-2.5 top-2 text-slate-500 text-sm\">search</span>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        placeholder=\"Search...\"\r\n                        className=\"w-full bg-slate-800 text-white text-xs px-8 py-2 rounded-lg outline-none focus:ring-1 focus:ring-purple-500 placeholder:text-slate-500\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-800 scrollbar-track-slate-900\">\r\n                {view === 'chats' ? (\r\n                    <div className=\"p-2 space-y-4\">\r\n                        {/* Today */}\r\n                        {today.length > 0 && (\r\n                            <div>\r\n                                <h3 className=\"text-[10px] font-bold text-slate-500 mb-1.5 px-2\">TODAY</h3>\r\n                                <div className=\"space-y-0.5\">\r\n                                    {today.map(chat => (\r\n                                        <button\r\n                                            key={chat.id}\r\n                                            onClick={() => onSelectChat(chat.id)}\r\n                                            className={`w-full text-left px-3 py-2 rounded-lg text-xs transition-all group ${currentChatId === chat.id\r\n                                                ? 'bg-slate-800 text-white'\r\n                                                : 'text-slate-300 hover:bg-slate-800/50'\r\n                                                }`}\r\n                                        >\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"material-icons text-sm text-slate-500\">chat_bubble</span>\r\n                                                <span className=\"flex-1 truncate font-medium\">{chat.title}</span>\r\n                                                {chat.pinned && <span className=\"material-icons text-[10px] text-yellow-500\">push_pin</span>}\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Yesterday */}\r\n                        {yesterday.length > 0 && (\r\n                            <div>\r\n                                <h3 className=\"text-[10px] font-bold text-slate-500 mb-1.5 px-2\">YESTERDAY</h3>\r\n                                <div className=\"space-y-0.5\">\r\n                                    {yesterday.map(chat => (\r\n                                        <button\r\n                                            key={chat.id}\r\n                                            onClick={() => onSelectChat(chat.id)}\r\n                                            className={`w-full text-left px-3 py-2 rounded-lg text-xs transition-all ${currentChatId === chat.id\r\n                                                ? 'bg-slate-800 text-white'\r\n                                                : 'text-slate-300 hover:bg-slate-800/50'\r\n                                                }`}\r\n                                        >\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"material-icons text-sm text-slate-500\">chat_bubble</span>\r\n                                                <span className=\"flex-1 truncate font-medium\">{chat.title}</span>\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Last 7 Days */}\r\n                        {lastWeek.length > 0 && (\r\n                            <div>\r\n                                <h3 className=\"text-[10px] font-bold text-slate-500 mb-1.5 px-2\">LAST 7 DAYS</h3>\r\n                                <div className=\"space-y-0.5\">\r\n                                    {lastWeek.map(chat => (\r\n                                        <button\r\n                                            key={chat.id}\r\n                                            onClick={() => onSelectChat(chat.id)}\r\n                                            className={`w-full text-left px-3 py-2 rounded-lg text-xs transition-all ${currentChatId === chat.id\r\n                                                ? 'bg-slate-800 text-white'\r\n                                                : 'text-slate-300 hover:bg-slate-800/50'\r\n                                                }`}\r\n                                        >\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <span className=\"material-icons text-sm text-slate-500\">chat_bubble</span>\r\n                                                <span className=\"flex-1 truncate font-medium\">{chat.title}</span>\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"p-2 space-y-1\">\r\n                        {projects.map(project => (\r\n                            <button\r\n                                key={project.id}\r\n                                onClick={() => onSelectProject(project.id)}\r\n                                className={`w-full text-left px-3 py-2.5 rounded-lg transition-all ${currentProjectId === project.id\r\n                                    ? 'bg-slate-800 text-white'\r\n                                    : 'text-slate-300 hover:bg-slate-800/50'\r\n                                    }`}\r\n                            >\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className={`w-8 h-8 bg-${project.color}-500/20 rounded-lg flex items-center justify-center`}>\r\n                                        <span className={`material-icons text-sm text-${project.color}-400`}>{project.icon}</span>\r\n                                    </div>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"font-medium text-sm truncate\">{project.name}</div>\r\n                                        <div className=\"text-[10px] text-slate-500\">{project.chatCount} chats</div>\r\n                                    </div>\r\n                                </div>\r\n                            </button>\r\n                        ))}\r\n\r\n                        <button\r\n                            onClick={() => setShowNewProjectModal(true)}\r\n                            className=\"w-full text-left px-3 py-2.5 rounded-lg border border-dashed border-slate-700 hover:border-purple-500 hover:bg-slate-800/50 text-slate-400 hover:text-white transition-all\"\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-8 h-8 rounded-lg flex items-center justify-center\">\r\n                                    <span className=\"material-icons text-sm\">add</span>\r\n                                </div>\r\n                                <span className=\"text-sm font-medium\">New Project</span>\r\n                            </div>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"p-2 border-t border-slate-800 flex-shrink-0\">\r\n                <button className=\"w-full px-3 py-2 rounded-lg text-xs text-slate-400 hover:bg-slate-800 hover:text-white transition-all flex items-center gap-2\">\r\n                    <span className=\"material-icons text-sm\">settings</span>\r\n                    Settings\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LeftSidebar;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\QuickChatFloating.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\ai-studio\\RightSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\AIIncorporationAssistant.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":371,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[20046,20236],"text":"\r\n                                            &quot;Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.\"\r\n                                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[20046,20236],"text":"\r\n                                            &ldquo;Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.\"\r\n                                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[20046,20236],"text":"\r\n                                            &#34;Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.\"\r\n                                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[20046,20236],"text":"\r\n                                            &rdquo;Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.\"\r\n                                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":371,"column":146,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[20046,20236],"text":"\r\n                                            \"Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.&quot;\r\n                                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[20046,20236],"text":"\r\n                                            \"Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.&ldquo;\r\n                                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[20046,20236],"text":"\r\n                                            \"Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.&#34;\r\n                                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[20046,20236],"text":"\r\n                                            \"Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.&rdquo;\r\n                                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userId' is defined but never used.","line":471,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":471,"endColumn":46}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { BusinessData } from '@/types';\r\nimport LeadCaptureModal from '../LeadCaptureModal';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\ninterface AIIncorporationAssistantProps {\r\n    onComplete?: (data: BusinessData) => void;\r\n}\r\n\r\nexport default function AIIncorporationAssistant({ onComplete }: AIIncorporationAssistantProps) {\r\n    const { user, leadId } = useAuth();\r\n    const isGuest = !user;\r\n\r\n    const [showChatbot, setShowChatbot] = useState(false);\r\n    const [showFlowPopup, setShowFlowPopup] = useState(false);\r\n    const [showLeadCapture, setShowLeadCapture] = useState(false);\r\n    const [chatMessages, setChatMessages] = useState<Array<{ role: 'ai' | 'user'; message: string }>>([\r\n        {\r\n            role: 'ai',\r\n            message: 'Hello! I\\'m your AI Incorporation Assistant. I can help you with business registration, compliance, and setup. What would you like to know?'\r\n        }\r\n    ]);\r\n    const [userInput, setUserInput] = useState('');\r\n    const [guestEmail, setGuestEmail] = useState('');\r\n    const [guestPhone, setGuestPhone] = useState('');\r\n\r\n    // Flow Pages State\r\n    const [currentFlowStep, setCurrentFlowStep] = useState(0);\r\n    const [businessData, setBusinessData] = useState<Partial<BusinessData>>({});\r\n\r\n    // Contact step for guests (first step)\r\n    const guestContactStep = {\r\n        id: 'contact',\r\n        question: 'Almost there! Where should we send your Tailor-Made Setup Plan?',\r\n        type: 'contact',\r\n        placeholder: '',\r\n        options: [] as string[]\r\n    };\r\n\r\n    const mainFlowSteps = [\r\n        {\r\n            id: 'businessName',\r\n            question: 'What is your business name?',\r\n            placeholder: 'Enter your business name',\r\n            type: 'text'\r\n        },\r\n        {\r\n            id: 'stage',\r\n            question: 'What stage is your business in?',\r\n            options: ['Idea Stage', 'MVP Ready', 'Pre-Revenue', 'Revenue Generating', 'Scaling'],\r\n            type: 'select'\r\n        },\r\n        {\r\n            id: 'industry',\r\n            question: 'Which industry are you in?',\r\n            options: ['Technology', 'E-commerce', 'Healthcare', 'Education', 'Finance', 'Manufacturing', 'Services', 'Other'],\r\n            type: 'select'\r\n        },\r\n        {\r\n            id: 'focus',\r\n            question: 'What is your primary focus?',\r\n            options: ['B2B', 'B2C', 'B2B2C', 'D2C', 'Marketplace'],\r\n            type: 'select'\r\n        },\r\n        {\r\n            id: 'teamSize',\r\n            question: 'How many team members do you have?',\r\n            options: ['Just Me', '2-5', '6-10', '11-20', '20+'],\r\n            type: 'select'\r\n        },\r\n        {\r\n            id: 'funding',\r\n            question: 'Have you raised funding?',\r\n            options: ['Bootstrapped', 'Angel Round', 'Seed Round', 'Series A+', 'Not Yet'],\r\n            type: 'select'\r\n        },\r\n        {\r\n            id: 'location',\r\n            question: 'Where is your business located?',\r\n            placeholder: 'City, State',\r\n            type: 'text'\r\n        },\r\n        {\r\n            id: 'goal',\r\n            question: 'What is your primary goal for the next 6 months?',\r\n            placeholder: 'E.g., Launch MVP, Get first customers, Raise funding...',\r\n            type: 'textarea'\r\n        }\r\n    ];\r\n\r\n    // Combine steps: main steps first, then contact at the end for guests (Soft Collection)\r\n    const flowSteps = isGuest ? [...mainFlowSteps, guestContactStep] : mainFlowSteps;\r\n    const totalSteps = flowSteps.length;\r\n\r\n    const handleSendMessage = () => {\r\n        if (!userInput.trim()) return;\r\n\r\n        setChatMessages(prev => [...prev, { role: 'user', message: userInput }]);\r\n\r\n        setTimeout(() => {\r\n            let aiResponse = '';\r\n\r\n            const input = userInput.toLowerCase();\r\n\r\n            if (input.includes('register') || input.includes('incorporation')) {\r\n                aiResponse = 'For business incorporation in India, you can choose from: Private Limited Company (most popular for startups), LLP (for partnerships), or Sole Proprietorship (for solo entrepreneurs). Which one interests you?';\r\n            } else if (input.includes('private limited') || input.includes('pvt ltd')) {\r\n                aiResponse = 'Private Limited Company is great for startups! Benefits: Limited liability, easier to raise funding, separate legal entity. Required: 2 directors, 2 shareholders, DIN, DSC. Timeline: 10-15 days. Cost starts at ₹6,999. Would you like to start the process?';\r\n            } else if (input.includes('gst')) {\r\n                aiResponse = 'GST registration is required if your turnover exceeds ₹40 lakhs (₹20 lakhs for services). Timeline: 3-7 days. Documents needed: PAN, Aadhaar, Business proof. Cost: ₹2,499. Need help with GST registration?';\r\n            } else if (input.includes('trademark')) {\r\n                aiResponse = 'Trademark registration protects your brand name and logo. Timeline: 12-18 months. Cost: ₹4,999 onwards. Benefits: Exclusive rights, legal protection, brand value. Shall I help you search for trademark availability?';\r\n            } else if (input.includes('cost') || input.includes('price')) {\r\n                aiResponse = 'Here are our incorporation packages:\\n• Basic: ₹6,999 (Pvt Ltd registration)\\n• Standard: ₹12,999 (Pvt Ltd + GST)\\n• Premium: ₹24,999 (Pvt Ltd + GST + Trademark)\\nAll include: Name approval, MOA/AOA, Certificate of Incorporation, PAN, TAN. What package suits you?';\r\n            } else if (input.includes('time') || input.includes('duration')) {\r\n                aiResponse = 'Typical timelines:\\n• Pvt Ltd Company: 10-15 days\\n• GST Registration: 3-7 days\\n• Trademark: 12-18 months\\n• MSME: 1-2 days\\nWant to get started with a customized plan?';\r\n            } else if (input.includes('document')) {\r\n                aiResponse = 'For Private Limited Company, you need:\\n• PAN Card (all directors)\\n• Aadhaar Card (all directors)\\n• Passport size photos\\n• Address proof (utility bill)\\n• Rent agreement (if office is rented)\\nI can help you prepare these documents. Ready to proceed?';\r\n            } else {\r\n                aiResponse = 'I can help you with: Business Incorporation, GST Registration, Trademark, MSME, Compliance, and more. You can also click \"Get Tailor-Made Business Setup\" for a personalized plan. What would you like to explore?';\r\n            }\r\n\r\n            setChatMessages(prev => [...prev, { role: 'ai', message: aiResponse }]);\r\n\r\n            if (isGuest && chatMessages.length >= 5) {\r\n                setTimeout(() => {\r\n                    setChatMessages(prev => [...prev, {\r\n                        role: 'ai',\r\n                        message: '💡 To save your conversation and get personalized recommendations, please create an account. It takes just 1 minute!'\r\n                    }]);\r\n                }, 1500);\r\n            }\r\n        }, 800);\r\n\r\n        // Tracker: Log Chat Action\r\n        if (leadId) {\r\n            import('@/lib/leadSystem').then(({ logUserAction }) => {\r\n                logUserAction(leadId, 'ai_chat', { message: userInput });\r\n            });\r\n        }\r\n\r\n        setUserInput('');\r\n    };\r\n\r\n    const handleFlowAnswer = (value: string) => {\r\n        const currentStep = flowSteps[currentFlowStep];\r\n        setBusinessData(prev => ({\r\n            ...prev,\r\n            [currentStep.id]: value\r\n        }));\r\n    };\r\n\r\n    const handleContactSubmit = () => {\r\n        if (!guestEmail || !guestPhone) return;\r\n\r\n        // If it's the last step for a guest, show the lead capture / account creation modal\r\n        if (currentFlowStep === totalSteps - 1 && isGuest) {\r\n            setShowLeadCapture(true);\r\n        } else {\r\n            setCurrentFlowStep(prev => prev + 1);\r\n        }\r\n    };\r\n\r\n    const handleFlowNext = () => {\r\n        const currentStep = flowSteps[currentFlowStep];\r\n\r\n        // If on contact step (first for guests)\r\n        if (currentStep.type === 'contact') {\r\n            handleContactSubmit();\r\n            return;\r\n        }\r\n\r\n        if (currentFlowStep < totalSteps - 1) {\r\n            setCurrentFlowStep(prev => prev + 1);\r\n        } else {\r\n            // Last question - show login for guests\r\n            if (isGuest) {\r\n                setShowLeadCapture(true);\r\n            } else {\r\n                // Complete flow for logged-in users\r\n                const completeData: BusinessData = {\r\n                    name: businessData.businessName || '',\r\n                    businessName: businessData.businessName || '',\r\n                    stage: businessData.stage || 'idea',\r\n                    industry: businessData.industry || '',\r\n                    focus: businessData.focus || '',\r\n                    teamSize: businessData.teamSize || '',\r\n                    funding: businessData.funding || '',\r\n                    location: businessData.location || '',\r\n                    goal: businessData.goal || '',\r\n                    offeringType: 'services',\r\n                    offeringOther: '',\r\n                    sector: '',\r\n                    size: 'solo',\r\n                    businessModel: '',\r\n                    description: '',\r\n                    motivation: '',\r\n                    existingAssets: [],\r\n                    focusAreas: []\r\n                };\r\n\r\n                onComplete?.(completeData);\r\n                setShowFlowPopup(false);\r\n                setCurrentFlowStep(0);\r\n                setBusinessData({});\r\n                setGuestEmail('');\r\n                setGuestPhone('');\r\n            }\r\n        }\r\n    };\r\n\r\n    const currentStep = flowSteps[currentFlowStep];\r\n\r\n    return (\r\n        <div className=\"mb-6\">\r\n            {/* Header Cards - 30% Smaller */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {/* AI Chatbot Card - Reduced size */}\r\n                <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100 shadow-md hover:shadow-lg transition-all\">\r\n                    <div className=\"flex items-start gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center shadow-md\">\r\n                            <span className=\"material-icons text-white text-lg\">smart_toy</span>\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <h3 className=\"text-base font-bold text-slate-900 mb-0.5\">AI Incorporation Assistant</h3>\r\n                            <p className=\"text-xs text-slate-600 font-medium\">Get instant answers to your queries</p>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowChatbot(!showChatbot)}\r\n                        className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg py-2 px-4 text-sm font-bold shadow-md hover:shadow-blue-500/30 transition-all hover:scale-105 flex items-center justify-center gap-2\"\r\n                    >\r\n                        <span className=\"material-icons text-sm\">{showChatbot ? 'close' : 'chat'}</span>\r\n                        {showChatbot ? 'Close Chat' : 'Start Chatting'}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tailor-Made Setup Card - Reduced size */}\r\n                <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100 shadow-md hover:shadow-lg transition-all\">\r\n                    <div className=\"flex items-start gap-3 mb-3\">\r\n                        <div className=\"w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-lg flex items-center justify-center shadow-md\">\r\n                            <span className=\"material-icons text-white text-lg\">auto_awesome</span>\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <h3 className=\"text-base font-bold text-slate-900 mb-0.5\">Get Tailor-Made Business Setup</h3>\r\n                            <p className=\"text-xs text-slate-600 font-medium\">Personalized recommendations</p>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => {\r\n                            setShowFlowPopup(true);\r\n                            setCurrentFlowStep(0);\r\n                            setBusinessData({});\r\n                        }}\r\n                        className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg py-2 px-4 text-sm font-bold shadow-md hover:shadow-purple-500/30 transition-all hover:scale-105 flex items-center justify-center gap-2\"\r\n                    >\r\n                        <span className=\"material-icons text-sm\">rocket_launch</span>\r\n                        Start Questionnaire\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Chatbot Popup - 30% Smaller */}\r\n            {showChatbot && (\r\n                <div className=\"mt-4 bg-white rounded-xl shadow-xl border border-blue-100 overflow-hidden animate-in slide-in-from-top duration-500\">\r\n                    <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 p-3 text-white flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center\">\r\n                                <span className=\"material-icons text-sm\">smart_toy</span>\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-sm font-bold\">AI Assistant</h3>\r\n                                <p className=\"text-xs text-blue-100\">Online • Ready to help</p>\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={() => setShowChatbot(false)} className=\"hover:bg-white/10 rounded-lg p-1 transition-colors\">\r\n                            <span className=\"material-icons text-sm\">close</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"h-64 overflow-y-auto p-3 bg-slate-50\">\r\n                        <div className=\"space-y-3\">\r\n                            {chatMessages.map((msg, idx) => (\r\n                                <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                                    <div className={`max-w-[80%] rounded-xl p-2.5 ${msg.role === 'user'\r\n                                        ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white'\r\n                                        : 'bg-white border border-slate-200 text-slate-900'\r\n                                        }`}>\r\n                                        <p className=\"text-xs leading-relaxed whitespace-pre-line\">{msg.message}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-3 bg-white border-t border-slate-200\">\r\n                        <div className=\"flex gap-2 mb-2\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={userInput}\r\n                                onChange={(e) => setUserInput(e.target.value)}\r\n                                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                                placeholder=\"Ask anything...\"\r\n                                className=\"flex-1 px-3 py-2 text-sm border border-slate-200 rounded-lg focus:border-blue-500 focus:outline-none text-slate-900\"\r\n                            />\r\n                            <button\r\n                                onClick={handleSendMessage}\r\n                                className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg px-4 py-2 text-sm font-bold shadow-md hover:shadow-blue-500/30 transition-all flex items-center gap-1\"\r\n                            >\r\n                                <span className=\"material-icons text-sm\">send</span>\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Login prompt for guests after chatting */}\r\n                        {isGuest && chatMessages.length >= 6 && (\r\n                            <button\r\n                                onClick={() => setShowLeadCapture(true)}\r\n                                className=\"w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg py-2 text-xs font-bold shadow-md hover:shadow-green-500/30 transition-all flex items-center justify-center gap-1\"\r\n                            >\r\n                                <span className=\"material-icons text-sm\">account_circle</span>\r\n                                Create Account to Save Progress\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Flow Pages Popup - 30% Smaller */}\r\n            {showFlowPopup && (\r\n                <div className=\"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n                    <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95 duration-500\">\r\n                        {/* Header - Smaller */}\r\n                        <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 p-4 text-white\">\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <h2 className=\"text-lg font-bold\">Tailor-Made Setup</h2>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setShowFlowPopup(false);\r\n                                        setCurrentFlowStep(0);\r\n                                        setGuestEmail('');\r\n                                        setGuestPhone('');\r\n                                    }}\r\n                                    className=\"w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors\"\r\n                                >\r\n                                    <span className=\"material-icons text-sm\">close</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"flex justify-between text-xs mb-1.5\">\r\n                                <span>Question {currentFlowStep + 1} of {totalSteps}</span>\r\n                                <span>{Math.round(((currentFlowStep + 1) / totalSteps) * 100)}%</span>\r\n                            </div>\r\n                            <div className=\"w-full bg-white/20 rounded-full h-1.5\">\r\n                                <div\r\n                                    className=\"bg-white h-1.5 rounded-full transition-all duration-500\"\r\n                                    style={{ width: `${((currentFlowStep + 1) / totalSteps) * 100}%` }}\r\n                                ></div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Question - Smaller */}\r\n                        <div className=\"p-5\">\r\n                            <h3 className=\"text-lg font-bold text-slate-900 mb-4\">{currentStep.question}</h3>\r\n\r\n                            {/* Contact Form for Guests */}\r\n                            {currentStep.type === 'contact' && (\r\n                                <div className=\"space-y-3\">\r\n                                    <div>\r\n                                        <p className=\"text-xs text-slate-500 mb-4 bg-purple-50 p-3 rounded-lg border border-purple-100 italic\">\r\n                                            \"Enter your details to unlock your secure workspace and get the full 30-day roadmap delivered to you.\"\r\n                                        </p>\r\n                                        <label className=\"block text-xs font-bold text-slate-700 mb-1\">Email Address *</label>\r\n                                        <input\r\n                                            type=\"email\"\r\n                                            value={guestEmail}\r\n                                            onChange={(e) => setGuestEmail(e.target.value)}\r\n                                            placeholder=\"your@email.com\"\r\n                                            className=\"w-full px-4 py-2.5 text-sm border border-slate-200 rounded-lg focus:border-purple-500 focus:outline-none text-slate-900\"\r\n                                            autoFocus\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block text-xs font-bold text-slate-700 mb-1\">Phone Number *</label>\r\n                                        <input\r\n                                            type=\"tel\"\r\n                                            value={guestPhone}\r\n                                            onChange={(e) => setGuestPhone(e.target.value)}\r\n                                            placeholder=\"10-digit mobile number\"\r\n                                            className=\"w-full px-4 py-2.5 text-sm border border-slate-200 rounded-lg focus:border-purple-500 focus:outline-none text-slate-900\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {currentStep.type === 'text' && (\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={businessData[currentStep.id as keyof BusinessData] || ''}\r\n                                    onChange={(e) => handleFlowAnswer(e.target.value)}\r\n                                    placeholder={currentStep.placeholder}\r\n                                    className=\"w-full px-4 py-2.5 text-sm border border-slate-200 rounded-lg focus:border-purple-500 focus:outline-none text-slate-900\"\r\n                                    autoFocus\r\n                                />\r\n                            )}\r\n\r\n                            {currentStep.type === 'textarea' && (\r\n                                <textarea\r\n                                    value={businessData[currentStep.id as keyof BusinessData] || ''}\r\n                                    onChange={(e) => handleFlowAnswer(e.target.value)}\r\n                                    placeholder={currentStep.placeholder}\r\n                                    rows={3}\r\n                                    className=\"w-full px-4 py-2.5 text-sm border border-slate-200 rounded-lg focus:border-purple-500 focus:outline-none text-slate-900 resize-none\"\r\n                                    autoFocus\r\n                                />\r\n                            )}\r\n\r\n                            {currentStep.type === 'select' && (\r\n                                <div className=\"space-y-2\">\r\n                                    {currentStep.options?.map((option: string) => (\r\n                                        <button\r\n                                            key={option}\r\n                                            onClick={() => handleFlowAnswer(option)}\r\n                                            className={`w-full p-3 rounded-lg border text-left text-sm font-bold transition-all ${businessData[currentStep.id as keyof BusinessData] === option\r\n                                                ? 'border-purple-600 bg-purple-50 text-purple-900'\r\n                                                : 'border-slate-200 hover:border-purple-300 text-slate-700 hover:bg-slate-50'\r\n                                                }`}\r\n                                        >\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <span>{option}</span>\r\n                                                {businessData[currentStep.id as keyof BusinessData] === option && (\r\n                                                    <span className=\"material-icons text-purple-600 text-sm\">check_circle</span>\r\n                                                )}\r\n                                            </div>\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Footer - Smaller */}\r\n                        <div className=\"p-4 bg-slate-50 border-t border-slate-200 flex gap-2 justify-between\">\r\n                            <button\r\n                                onClick={() => setCurrentFlowStep(prev => Math.max(0, prev - 1))}\r\n                                disabled={currentFlowStep === 0}\r\n                                className=\"px-4 py-2 text-sm rounded-lg font-bold text-slate-600 hover:bg-slate-200 transition-colors disabled:opacity-30 disabled:cursor-not-allowed\"\r\n                            >\r\n                                Previous\r\n                            </button>\r\n                            <button\r\n                                onClick={handleFlowNext}\r\n                                disabled={\r\n                                    currentStep.type === 'contact'\r\n                                        ? !guestEmail || !guestPhone\r\n                                        : !businessData[currentStep.id as keyof BusinessData]\r\n                                }\r\n                                className=\"px-6 py-2 text-sm bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold shadow-md hover:shadow-purple-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1\"\r\n                            >\r\n                                {currentFlowStep === totalSteps - 1 ? (isGuest ? 'Create Account' : 'Complete') : 'Next'}\r\n                                <span className=\"material-icons text-xs\">arrow_forward</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Lead Capture Modal */}\r\n            <LeadCaptureModal\r\n                isOpen={showLeadCapture}\r\n                onClose={() => setShowLeadCapture(false)}\r\n                onComplete={(leadData, userId) => {\r\n                    // Account created\r\n                    setShowLeadCapture(false);\r\n                    setShowFlowPopup(false);\r\n                    setShowChatbot(false);\r\n\r\n                    // Complete flow if coming from questionnaire\r\n                    if (Object.keys(businessData).length > 0) {\r\n                        const completeData: BusinessData = {\r\n                            name: businessData.businessName || '',\r\n                            businessName: businessData.businessName || '',\r\n                            stage: businessData.stage || 'idea',\r\n                            industry: businessData.industry || '',\r\n                            focus: businessData.focus || '',\r\n                            teamSize: businessData.teamSize || '',\r\n                            funding: businessData.funding || '',\r\n                            location: businessData.location || '',\r\n                            goal: businessData.goal || '',\r\n                            offeringType: 'services',\r\n                            offeringOther: '',\r\n                            sector: '',\r\n                            size: 'solo',\r\n                            businessModel: '',\r\n                            description: '',\r\n                            motivation: '',\r\n                            existingAssets: [],\r\n                            focusAreas: []\r\n                        };\r\n                        onComplete?.({ ...completeData, ...leadData } as BusinessData);\r\n                    }\r\n\r\n                    setCurrentFlowStep(0);\r\n                    setBusinessData({});\r\n                    setGuestEmail('');\r\n                    setGuestPhone('');\r\n                }}\r\n                prefilledData={{\r\n                    businessName: businessData.businessName || '',\r\n                    email: guestEmail,\r\n                    phone: guestPhone\r\n                }}\r\n                source=\"ai_incorporation_assistant\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\AIProjectReportTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":3,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DPRFinancials' is defined but never used.","line":4,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DPRContent' is defined but never used.","line":4,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'calculatePMEGPSubsidy' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'calculateBankingRatios' is defined but never used.","line":5,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateDoc' is defined but never used.","line":10,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'doc' is defined but never used.","line":10,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[677,680],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[677,680],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mode' is assigned a value but never used.","line":21,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used.","line":22,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mudraType' is assigned a value but never used.","line":23,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'schemeInfo' is assigned a value but never used.","line":81,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":116,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":146,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6788,6791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6788,6791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7658,7661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7658,7661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":171,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7837,7840],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7837,7840],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8444,8447],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8444,8447],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":208,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9233,9236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9233,9236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":209,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":209,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":161,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":164,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9427,9430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9427,9430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":285,"column":77,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[14051,14113],"text":"We&apos;ll tailor the entire report format based on your selection."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[14051,14113],"text":"We&lsquo;ll tailor the entire report format based on your selection."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[14051,14113],"text":"We&#39;ll tailor the entire report format based on your selection."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[14051,14113],"text":"We&rsquo;ll tailor the entire report format based on your selection."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":320,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":320,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17205,17208],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17205,17208],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":372,"column":140,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":372,"endColumn":143,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20920,20923],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20920,20923],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":807,"column":114,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[59677,59748],"text":"Try: &quot;Add local market trends for Dairy in Pune\" or \"Request CA Review\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[59677,59748],"text":"Try: &ldquo;Add local market trends for Dairy in Pune\" or \"Request CA Review\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[59677,59748],"text":"Try: &#34;Add local market trends for Dairy in Pune\" or \"Request CA Review\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[59677,59748],"text":"Try: &rdquo;Add local market trends for Dairy in Pune\" or \"Request CA Review\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":807,"column":156,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune&quot; or \"Request CA Review\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune&ldquo; or \"Request CA Review\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune&#34; or \"Request CA Review\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune&rdquo; or \"Request CA Review\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":807,"column":161,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or &quot;Request CA Review\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or &ldquo;Request CA Review\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or &#34;Request CA Review\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or &rdquo;Request CA Review\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":807,"column":179,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or \"Request CA Review&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or \"Request CA Review&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or \"Request CA Review&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[59677,59748],"text":"Try: \"Add local market trends for Dairy in Pune\" or \"Request CA Review&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":900,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[66862,66888],"text":"(Entrepreneur&apos;s Signature)"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[66862,66888],"text":"(Entrepreneur&lsquo;s Signature)"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[66862,66888],"text":"(Entrepreneur&#39;s Signature)"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[66862,66888],"text":"(Entrepreneur&rsquo;s Signature)"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { ProjectScheme, ProjectReport, DPRFinancials, DPRContent } from '../../types/dpr';\r\nimport { calculatePMEGPSubsidy, calculateBankingRatios } from '../../lib/dpr-engine';\r\nimport { SCHEME_KNOWLEDGE, SUPPORTED_LANGUAGES } from '../../lib/schemes';\r\nimport { BIZZY_SYSTEM_PROMPT } from '../../lib/prompts/bizzy';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, addDoc, serverTimestamp, updateDoc, doc } from 'firebase/firestore';\r\nimport Toast from '../ToastNotification';\r\n\r\ninterface AIProjectReportToolProps {\r\n    businessData: any;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function AIProjectReportTool({ businessData, onClose }: AIProjectReportToolProps) {\r\n    const { user, guestId } = useAuth();\r\n    const [step, setStep] = useState(0); // 0: Scheme, 1: Promoters, 2: Financials, 3: AI Generation, 4: Review & Polish\r\n    const [mode, setMode] = useState<'TEMPLATE' | 'AI'>('TEMPLATE');\r\n    const [loading, setLoading] = useState(false);\r\n    const [mudraType, setMudraType] = useState<'SHISHU' | 'KISHORE' | 'TARUN' | null>(null);\r\n    const [selectedLang, setSelectedLang] = useState('en');\r\n    const [isListening, setIsListening] = useState(false);\r\n    const [toast, setToast] = useState({ visible: false, message: '', sub: '' });\r\n\r\n    // State for the Report\r\n    const [report, setReport] = useState<Partial<ProjectReport>>({\r\n        scheme: 'PMEGP',\r\n        businessName: businessData?.name || '',\r\n        industry: businessData?.industry || '',\r\n        location: { city: '', state: '', areaType: 'URBAN' },\r\n        promoter: { \r\n            name: user?.displayName || '', \r\n            qualification: '', \r\n            experience: '', \r\n            category: 'GENERAL', \r\n            gender: 'MALE' \r\n        },\r\n        financials: {\r\n            fixedAssets: { landAndBuilding: 0, machinery: 0, furniture: 0, otherAssets: 0 },\r\n            workingCapital: { rawMaterial: 0, salaries: 0, utilities: 0, marketing: 0, contingency: 0 },\r\n            revenue: { monthlyTarget: 0, unitPrice: 0, unitsPerMonth: 0 },\r\n            funding: { ownContribution: 0, loanRequired: 0, subsidyEligible: 0 },\r\n            parameters: { workingDays: 300, shifts: 1, capacityUtil: 45, interestRate: 9.5 }\r\n        }\r\n    });\r\n\r\n    const [finSubStep, setFinSubStep] = useState(0); // 0: Project Cost, 1: Operations, 2: Revenue\r\n\r\n    const [chatInput, setChatInput] = useState(\"\");\r\n    const [chatHistory, setChatHistory] = useState<Array<{role: 'user' | 'ai', content: string}>>([]);\r\n\r\n    // Set initial greeting based on language\r\n    useEffect(() => {\r\n        const greetings: Record<string, string> = {\r\n            te: \"నమస్కారం! 🙏 నేను Bizzy — setmybizz.in AI Business Advisor. మీకు ఏ scheme కోసం Project Report కావాలి? 1️⃣ PMEGP 2️⃣ Mudra 3️⃣ MSME 4️⃣ Standup India...\",\r\n            hi: \"Namaste! 🙏 Main Bizzy hoon — setmybizz.in ka AI Business Advisor. Kaunse scheme ke liye Project Report chahiye? 1️⃣ PMEGP 2️⃣ Mudra 3️⃣ MSME 4️⃣ Standup India...\",\r\n            en: \"Hello! I'm Bizzy — your setmybizz.in AI Business Advisor. Which scheme do you need a Project Report for? (PMEGP, Mudra, MSME, or Standup India)\"\r\n        };\r\n        setChatHistory([{ role: 'ai', content: greetings[selectedLang] || greetings.en }]);\r\n    }, [selectedLang]);\r\n\r\n    const handleSchemeSelect = (scheme: ProjectScheme) => {\r\n        setReport(prev => ({ ...prev, scheme }));\r\n        setStep(1);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        if (step === 3) {\r\n            handleGenerateDPR();\r\n        } else {\r\n            setStep(prev => prev + 1);\r\n        }\r\n    };\r\n\r\n    const handleGenerateDPR = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const schemeInfo = SCHEME_KNOWLEDGE[report.scheme as keyof typeof SCHEME_KNOWLEDGE] || {};\r\n            const langName = SUPPORTED_LANGUAGES.find(l => l.code === selectedLang)?.name || 'English';\r\n            \r\n            const prompt = `${BIZZY_SYSTEM_PROMPT}\r\n            \r\n            USER INPUTS:\r\n            Business Name: ${report.businessName}\r\n            Scheme: ${report.scheme}\r\n            Industry: ${report.industry}\r\n            Language: ${langName}\r\n            Promoter: ${JSON.stringify(report.promoter)}\r\n            Financials: ${JSON.stringify(report.financials)}\r\n            \r\n            TASK: Generate the DPR following Bizzy's identity and scheme rules.\r\n            Format the output ONLY as JSON:\r\n            {\r\n                \"executiveSummary\": \"...\",\r\n                \"businessConcept\": \"...\",\r\n                \"marketAnalysis\": \"...\",\r\n                \"swotAnalysis\": { \"strengths\": [], \"weaknesses\": [], \"opportunities\": [], \"threats\": [] },\r\n                \"implementationSchedule\": [],\r\n                \"dscrCheck\": { \"value\": number, \"status\": \"OK\" | \"WARNING\", \"fix\": \"...\" }\r\n            }`;\r\n\r\n            const res = await fetch('/api/gemini', {\r\n                method: 'POST',\r\n                body: JSON.stringify({ prompt })\r\n            });\r\n            const data = await res.json();\r\n            \r\n            // Basic parsing of AI text (should be JSON)\r\n            let aiContent;\r\n            try {\r\n                const cleanText = data.text.replace(/```json/g, '').replace(/```/g, '').trim();\r\n                aiContent = JSON.parse(cleanText);\r\n            } catch (e) {\r\n                // Fallback if AI fails to give JSON\r\n                aiContent = {\r\n                    executiveSummary: data.text.substring(0, 300) + \"...\",\r\n                    businessConcept: \"Click AI Chat to refine details.\",\r\n                    marketAnalysis: \"Generating detailed stats...\",\r\n                    swotAnalysis: { strengths: [\"AI Generated\"], weaknesses: [], opportunities: [], threats: [] },\r\n                    implementationSchedule: [\"Step 1: Registration\"]\r\n                };\r\n            }\r\n\r\n            setReport(prev => ({\r\n                ...prev,\r\n                status: 'COMPLETED',\r\n                content: aiContent\r\n            }));\r\n\r\n            // Auto-save to DB for GTM tracking\r\n            saveReportToDb({ ...report, content: aiContent, status: 'COMPLETED' });\r\n            \r\n            setStep(4);\r\n            setToast({ visible: true, message: \"DPR Generated Successfully\", sub: `Your ${report.scheme} report is ready for review.` });\r\n        } catch (error) {\r\n            console.error(\"DPR Generation Error:\", error);\r\n            setToast({ visible: true, message: \"Generation Failed\", sub: \"Please check your internet connection.\" });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const saveReportToDb = async (finalReport: any) => {\r\n        try {\r\n            const reportData = {\r\n                ...finalReport,\r\n                userId: user?.uid || guestId,\r\n                timestamp: serverTimestamp(),\r\n                platform: 'web-asap'\r\n            };\r\n            const docRef = await addDoc(collection(db, 'project_reports'), reportData);\r\n            setReport(prev => ({ ...prev, id: docRef.id }));\r\n        } catch (e) {\r\n            console.error(\"Error saving report:\", e);\r\n        }\r\n    };\r\n\r\n    const toggleVoice = () => {\r\n        if (!('webkitSpeechRecognition' in window)) {\r\n            setToast({ visible: true, message: \"Voice not supported\", sub: \"Please use Chrome or Edge browser.\" });\r\n            return;\r\n        }\r\n        \r\n        setIsListening(prev => !prev);\r\n        // Simple Web Speech API Implementation\r\n        const recognition = new (window as any).webkitSpeechRecognition();\r\n        recognition.lang = selectedLang === 'te' ? 'te-IN' : (selectedLang === 'hi' ? 'hi-IN' : 'en-US');\r\n        recognition.onresult = (event: any) => {\r\n            const transcript = event.results[0][0].transcript;\r\n            setChatInput(transcript);\r\n            setIsListening(false);\r\n        };\r\n        recognition.onerror = () => setIsListening(false);\r\n        \r\n        if (!isListening) {\r\n            recognition.start();\r\n        } else {\r\n            recognition.stop();\r\n        }\r\n    };\r\n\r\n    const handleChatAsk = async () => {\r\n        if (!chatInput.trim()) return;\r\n        const userInput = chatInput;\r\n        const newHistory = [...chatHistory, { role: 'user', content: userInput }];\r\n        setChatHistory(newHistory as any);\r\n        setChatInput(\"\");\r\n        setLoading(true);\r\n\r\n        try {\r\n            const prompt = `${BIZZY_SYSTEM_PROMPT}\r\n            \r\n            CURRENT REPORT DATA: ${JSON.stringify(report)}\r\n            CONVERSATION HISTORY: ${JSON.stringify(newHistory.slice(-5))}\r\n            USER MESSAGE: ${userInput}\r\n            \r\n            TASK: Provide a helpful, multilingual advisor-style response. If the user asks for changes, explain how you'll adjust the financials or content.`;\r\n\r\n            const res = await fetch('/api/gemini', {\r\n                method: 'POST',\r\n                body: JSON.stringify({ prompt })\r\n            });\r\n            const data = await res.json();\r\n            \r\n            setChatHistory([...newHistory, { role: 'ai', content: data.text }] as any);\r\n        } catch (error) {\r\n            setChatHistory([...newHistory, { role: 'ai', content: \"I'm having trouble connecting to my neural link. Please try again or check your data.\" }] as any);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleExport = (type: 'PDF' | 'DOCS' | 'WHATSAPP') => {\r\n        if (type === 'WHATSAPP') {\r\n            const message = `Hello, I've generated my Detailed Project Report (DPR) for ${report.businessName} using SetMyBizz AI. Scheme: ${report.scheme}. Please review the financials and banking ratios.`;\r\n            window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');\r\n            return;\r\n        }\r\n        \r\n        if (type === 'PDF') {\r\n            setToast({ visible: true, message: \"Preparing PDF...\", sub: \"Optimization for Bank Print Format active.\" });\r\n            setTimeout(() => window.print(), 1000);\r\n            return;\r\n        }\r\n        \r\n        setToast({ visible: true, message: `Exporting to ${type}...`, sub: \"Your file is being prepared and synced to your workspace.\" });\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-100 bg-slate-900/60 backdrop-blur-xl flex items-center justify-center p-4\">\r\n            <div className=\"bg-white w-full max-w-5xl h-[90vh] rounded-[3rem] shadow-2xl flex flex-col overflow-hidden border border-white/20\">\r\n                {/* Header */}\r\n                <div className=\"bg-linear-to-r from-blue-900 via-indigo-900 to-purple-900 p-8 text-white shrink-0 relative overflow-hidden\">\r\n                    <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-y-32 translate-x-32\"></div>\r\n                    <div className=\"relative z-10 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"w-14 h-14 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center border border-white/20\">\r\n                                <span className=\"material-icons text-3xl\">bar_chart</span>\r\n                            </div>\r\n                            <div>\r\n                                <h2 className=\"text-2xl font-black tracking-tight\">AI Project Report (DPR) Builder</h2>\r\n                                <p className=\"text-indigo-200 text-xs font-bold uppercase tracking-widest mt-1 opacity-80\">\r\n                                    Scheme: {report.scheme} • Bank-Ready Format\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={onClose} className=\"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center transition-all\">\r\n                            <span className=\"material-icons text-white\">close</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Progress Steps */}\r\n                    <div className=\"mt-8 flex items-center gap-2\">\r\n                        {[0, 1, 2, 3, 4].map((s) => (\r\n                            <div key={s} className=\"flex-1 h-1.5 rounded-full bg-white/10 overflow-hidden\">\r\n                                <div className={`h-full bg-white transition-all duration-500 ${step >= s ? 'w-full' : 'w-0'}`}></div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-10 bg-[#f8faff] custom-scroll\">\r\n                    \r\n                    {/* Multi-Language Selector */}\r\n                    <div className=\"flex justify-center mb-8 gap-2\">\r\n                        {SUPPORTED_LANGUAGES.map(lang => (\r\n                            <button \r\n                                key={lang.code}\r\n                                onClick={() => setSelectedLang(lang.code)}\r\n                                className={`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${selectedLang === lang.code ? 'bg-slate-900 text-white shadow-lg' : 'bg-white text-slate-400 border border-slate-100 hover:bg-slate-50'}`}\r\n                            >\r\n                                {lang.native}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Step 0: Scheme Selection */}\r\n                    {step === 0 && (\r\n                        <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                            <div className=\"text-center mb-10\">\r\n                                <h3 className=\"text-2xl font-black text-slate-900 mb-2\">Select your Loan/Subsidy Scheme</h3>\r\n                                <p className=\"text-slate-500 font-medium\">We'll tailor the entire report format based on your selection.</p>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                {[\r\n                                    { id: 'PMEGP', name: 'PMEGP Scheme', desc: 'Up to 35% Govt. Subsidy', icon: 'payments', color: 'indigo' },\r\n                                    { id: 'MUDRA', name: 'MUDRA Loan', desc: 'Shishu, Kishore, Tarun', icon: 'account_balance', color: 'blue' },\r\n                                    { id: 'GENERAL_BANK_LOAN', name: 'General Bank Loan', desc: 'Custom Bank Format', icon: 'business', color: 'emerald' },\r\n                                    { id: 'STARTUP_INDIA', name: 'Startup India', desc: 'For Seed Fund/Grants', icon: 'rocket_launch', color: 'purple' },\r\n                                    { id: 'MSME_LOAN', name: 'MSME Business Loan', desc: 'For Small Enterprises', icon: 'storefront', color: 'orange' }\r\n                                ].map((s) => (\r\n                                    <div \r\n                                        key={s.id} \r\n                                        onClick={() => {\r\n                                            if (s.id === 'MUDRA') {\r\n                                                setReport(prev => ({ ...prev, scheme: 'MUDRA' }));\r\n                                                // Trigger mudra selector\r\n                                            } else {\r\n                                                handleSchemeSelect(s.id as ProjectScheme);\r\n                                            }\r\n                                        }}\r\n                                        className=\"bg-white p-6 rounded-4xl border border-slate-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer group\"\r\n                                    >\r\n                                        <div className={`w-12 h-12 rounded-2xl bg-${s.color}-50 text-${s.color}-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`}>\r\n                                            <span className=\"material-icons text-2xl\">{s.icon}</span>\r\n                                        </div>\r\n                                        <h4 className=\"font-black text-slate-800 mb-1\">{s.name}</h4>\r\n                                        <p className=\"text-xs text-slate-400 font-bold\">{s.desc}</p>\r\n                                        \r\n                                        {report.scheme === 'MUDRA' && s.id === 'MUDRA' && (\r\n                                            <div className=\"mt-4 flex gap-2 animate-in fade-in zoom-in-95 duration-300\">\r\n                                                {['SHISHU', 'KISHORE', 'TARUN'].map(m => (\r\n                                                    <button \r\n                                                        key={m}\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            setMudraType(m as any);\r\n                                                            handleSchemeSelect('MUDRA');\r\n                                                        }}\r\n                                                        className=\"flex-1 py-1.5 bg-blue-600 text-white rounded-lg text-[9px] font-black uppercase tracking-tighter\"\r\n                                                    >\r\n                                                        {m}\r\n                                                    </button>\r\n                                                ))}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <div className=\"mt-12 flex items-center justify-center\">\r\n                                <button \r\n                                    onClick={() => {\r\n                                        setMode('AI');\r\n                                        handleGenerateDPR();\r\n                                    }}\r\n                                    className=\"px-8 py-4 bg-indigo-900 text-white rounded-3xl font-black text-xs uppercase tracking-[0.2em] shadow-2xl hover:bg-slate-900 transition-all flex items-center gap-3 border border-white/20\"\r\n                                >\r\n                                    <span className=\"material-icons animate-pulse text-indigo-400\">auto_awesome</span>\r\n                                    Instant AI Mode (Skip Manual Entry)\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 1: Promoter Details */}\r\n                    {step === 1 && (\r\n                        <div className=\"animate-in fade-in slide-in-from-right-4 duration-500 max-w-2xl mx-auto\">\r\n                            <h3 className=\"text-xl font-black text-slate-900 mb-6 flex items-center gap-3\">\r\n                                <span className=\"w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center text-sm\">1</span>\r\n                                Promoter Profile\r\n                            </h3>\r\n                            <div className=\"grid grid-cols-2 gap-6\">\r\n                                <div className=\"col-span-2\">\r\n                                    <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2\">Full Name (As per Aadhar)</label>\r\n                                    <input \r\n                                        type=\"text\" \r\n                                        value={report.promoter?.name} \r\n                                        onChange={(e) => setReport({...report, promoter: {...report.promoter!, name: e.target.value}})}\r\n                                        className=\"w-full bg-white border border-slate-200 rounded-2xl px-5 py-3 text-sm font-bold focus:border-blue-500 focus:outline-none shadow-sm\"\r\n                                        placeholder=\"Enter your name\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2\">Category</label>\r\n                                    <select \r\n                                        aria-label=\"Promoter Category\"\r\n                                        value={report.promoter?.category}\r\n                                        onChange={(e) => setReport({...report, promoter: {...report.promoter!, category: e.target.value as any}})}\r\n                                        className=\"w-full bg-white border border-slate-200 rounded-2xl px-5 py-3 text-sm font-bold focus:border-blue-500 focus:outline-none shadow-sm appearance-none\"\r\n                                    >\r\n                                        <option value=\"GENERAL\">General</option>\r\n                                        <option value=\"SC\">Scheduled Caste (SC)</option>\r\n                                        <option value=\"ST\">Scheduled Tribe (ST)</option>\r\n                                        <option value=\"OBC\">OBC</option>\r\n                                        <option value=\"MINORITY\">Minority</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2\">Educational Qualification</label>\r\n                                    <select \r\n                                        aria-label=\"Educational Qualification\"\r\n                                        value={report.promoter?.qualification}\r\n                                        onChange={(e) => setReport({...report, promoter: {...report.promoter!, qualification: e.target.value}})}\r\n                                        className=\"w-full bg-white border border-slate-200 rounded-2xl px-5 py-3 text-sm font-bold focus:border-blue-500 focus:outline-none shadow-sm\"\r\n                                    >\r\n                                        <option value=\"\">Select Qualification</option>\r\n                                        <option value=\"Less than 8th\">Less than 8th</option>\r\n                                        <option value=\"8th Pass\">8th Pass</option>\r\n                                        <option value=\"10th/12th Pass\">10th/12th Pass</option>\r\n                                        <option value=\"Graduate\">Graduate</option>\r\n                                        <option value=\"Post Graduate\">Post Graduate</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <button \r\n                                onClick={handleNext}\r\n                                className=\"mt-10 w-full py-4 bg-slate-900 text-white rounded-2xl font-black text-sm shadow-xl hover:bg-slate-800 transition-all flex items-center justify-center gap-2\"\r\n                            >\r\n                                Continue to Financials <span className=\"material-icons text-sm\">arrow_forward</span>\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 2: Professional Financial Interface */}\r\n                    {step === 2 && (\r\n                        <div className=\"animate-in fade-in slide-in-from-right-4 duration-500 flex gap-8\">\r\n                            {/* Left: Financial Inputs */}\r\n                            <div className=\"flex-[2] space-y-8\">\r\n                                <div className=\"flex items-center justify-between mb-4\">\r\n                                    <h3 className=\"text-xl font-black text-slate-900 flex items-center gap-3\">\r\n                                        <span className=\"w-8 h-8 bg-emerald-100 text-emerald-600 rounded-lg flex items-center justify-center text-sm\">2</span>\r\n                                        Financial Architecture\r\n                                    </h3>\r\n                                    <div className=\"flex gap-2 bg-slate-100 p-1.5 rounded-2xl\">\r\n                                        {['CAPITAL', 'OPERATIONS', 'REVENUE'].map((t, idx) => (\r\n                                            <button \r\n                                                key={t}\r\n                                                onClick={() => setFinSubStep(idx)}\r\n                                                className={`px-4 py-1.5 rounded-xl text-[9px] font-black tracking-widest transition-all ${finSubStep === idx ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}\r\n                                            >\r\n                                                {t}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {finSubStep === 0 && (\r\n                                    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300\">\r\n                                        <div className=\"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm relative overflow-hidden\">\r\n                                            <div className=\"absolute top-0 right-0 w-32 h-32 bg-blue-50 rounded-full blur-3xl -translate-y-16 translate-x-16\"></div>\r\n                                            <p className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6\">Project Capital Expenditure (CAPEX)</p>\r\n                                            <div className=\"grid grid-cols-2 gap-8\">\r\n                                                <div>\r\n                                                    <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Land & Building (₹)</label>\r\n                                                    <input \r\n                                                        type=\"number\" \r\n                                                        value={report.financials?.fixedAssets.landAndBuilding}\r\n                                                        onChange={(e) => setReport({...report, financials: {...report.financials!, fixedAssets: {...report.financials!.fixedAssets, landAndBuilding: Number(e.target.value)}}})}\r\n                                                        className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                        placeholder=\"0\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Plant & Machinery (₹)</label>\r\n                                                    <input \r\n                                                        type=\"number\" \r\n                                                        value={report.financials?.fixedAssets.machinery}\r\n                                                        onChange={(e) => setReport({...report, financials: {...report.financials!, fixedAssets: {...report.financials!.fixedAssets, machinery: Number(e.target.value)}}})}\r\n                                                        className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                        placeholder=\"0\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Furniture & Office (₹)</label>\r\n                                                    <input \r\n                                                        type=\"number\" \r\n                                                        value={report.financials?.fixedAssets.furniture}\r\n                                                        onChange={(e) => setReport({...report, financials: {...report.financials!, fixedAssets: {...report.financials!.fixedAssets, furniture: Number(e.target.value)}}})}\r\n                                                        className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                        placeholder=\"0\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Other Assets (₹)</label>\r\n                                                    <input \r\n                                                        type=\"number\" \r\n                                                        value={report.financials?.fixedAssets.otherAssets}\r\n                                                        onChange={(e) => setReport({...report, financials: {...report.financials!, fixedAssets: {...report.financials!.fixedAssets, otherAssets: Number(e.target.value)}}})}\r\n                                                        className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                        placeholder=\"0\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {finSubStep === 1 && (\r\n                                    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300\">\r\n                                        <div className=\"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm\">\r\n                                            <p className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6\">Operational Parameters</p>\r\n                                            <div className=\"grid grid-cols-2 gap-8\">\r\n                                                <div>\r\n                                                    <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Working Days / Year</label>\r\n                                                    <input \r\n                                                        type=\"number\" \r\n                                                        className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                        defaultValue=\"300\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Capacity Utilisation (%)</label>\r\n                                                    <input \r\n                                                        type=\"number\" \r\n                                                        className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                        defaultValue=\"45\"\r\n                                                    />\r\n                                                    <p className=\"text-[9px] text-slate-400 mt-2 font-bold italic\">Banks prefer 45-55% for Year 1.</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {finSubStep === 2 && (\r\n                                    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-300\">\r\n                                        <div className=\"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm\">\r\n                                            <p className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6\">Revenue & Sales Targets</p>\r\n                                            <div className=\"space-y-6\">\r\n                                                <div className=\"grid grid-cols-2 gap-8\">\r\n                                                    <div>\r\n                                                        <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Monthly Sales Quantity</label>\r\n                                                        <input \r\n                                                            type=\"number\" \r\n                                                            className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                            placeholder=\"e.g. 1000 Units\"\r\n                                                        />\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <label className=\"block text-[10px] font-black text-slate-500 uppercase mb-2\">Average Selling Price (₹)</label>\r\n                                                        <input \r\n                                                            type=\"number\" \r\n                                                            className=\"w-full bg-slate-50 border-b-2 border-slate-100 py-3 font-black text-lg focus:outline-none focus:border-indigo-600 transition-all px-4 rounded-t-xl\"\r\n                                                            placeholder=\"e.g. 500\"\r\n                                                        />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"p-6 bg-indigo-50 rounded-2xl border border-indigo-100 mt-4\">\r\n                                                    <div className=\"flex justify-between items-center text-indigo-900\">\r\n                                                        <span className=\"text-xs font-black uppercase tracking-widest\">Est. Annual Revenue</span>\r\n                                                        <span className=\"text-xl font-black\">₹ 0.00</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"flex justify-between items-center pt-4\">\r\n                                    <button \r\n                                        onClick={() => setFinSubStep(prev => Math.max(0, prev - 1))}\r\n                                        className={`px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all ${finSubStep === 0 ? 'opacity-0' : 'bg-white text-slate-600 hover:bg-slate-100'}`}\r\n                                    >\r\n                                        Prev Module\r\n                                    </button>\r\n                                    <button \r\n                                        onClick={() => {\r\n                                            if (finSubStep < 2) setFinSubStep(prev => prev + 1);\r\n                                            else handleNext();\r\n                                        }}\r\n                                        className=\"px-10 py-4 bg-indigo-600 text-white rounded-2xl font-black text-xs uppercase tracking-[0.2em] shadow-lg hover:shadow-indigo-500/30 transition-all hover:scale-105 flex items-center gap-2\"\r\n                                    >\r\n                                        {finSubStep === 2 ? 'Generate Final Report' : 'Next Module'} \r\n                                        <span className=\"material-icons text-sm\">{finSubStep === 2 ? 'auto_awesome' : 'east'}</span>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Right: Live Summary Dashboard */}\r\n                            <div className=\"flex-1 space-y-6\">\r\n                                <div className=\"bg-slate-900 rounded-[2.5rem] p-8 text-white shadow-2xl sticky top-4 overflow-hidden border border-white/10\">\r\n                                    <div className=\"absolute top-0 right-0 w-32 h-32 bg-indigo-500/20 rounded-full blur-2xl -translate-y-16 translate-x-16\"></div>\r\n                                    <h4 className=\"text-[10px] font-black uppercase tracking-[0.3em] text-indigo-400 mb-8 border-b border-white/10 pb-4 italic\">Real-time Analysis</h4>\r\n                                    \r\n                                    <div className=\"space-y-8\">\r\n                                        <div>\r\n                                            <p className=\"text-[8px] font-black text-slate-400 uppercase tracking-widest mb-1\">Total Project Cost</p>\r\n                                            <p className=\"text-3xl font-black\">₹ {((report.financials?.fixedAssets.landAndBuilding || 0) + (report.financials?.fixedAssets.machinery || 0) + (report.financials?.fixedAssets.furniture || 0) + (report.financials?.fixedAssets.otherAssets || 0)).toLocaleString()}</p>\r\n                                        </div>\r\n\r\n                                        <div className=\"grid grid-cols-1 gap-6 pt-4\">\r\n                                            <div className=\"bg-white/5 p-4 rounded-2xl border border-white/5\">\r\n                                                <div className=\"flex justify-between items-center mb-1\">\r\n                                                    <span className=\"text-[9px] font-bold text-slate-400\">Promoter Margin (10%)</span>\r\n                                                    <span className=\"text-xs font-black\">₹ {(((report.financials?.fixedAssets.machinery || 0) + (report.financials?.fixedAssets.landAndBuilding || 0)) * 0.1).toLocaleString()}</span>\r\n                                                </div>\r\n                                                <div className=\"w-full h-1 bg-white/10 rounded-full\">\r\n                                                    <div className=\"h-full bg-blue-500 w-[10%] rounded-full\"></div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"bg-white/5 p-4 rounded-2xl border border-white/5\">\r\n                                                <div className=\"flex justify-between items-center mb-1 text-green-400\">\r\n                                                    <span className=\"text-[9px] font-bold\">Estimated Subsidy</span>\r\n                                                    <span className=\"text-xs font-black\">₹ {(((report.financials?.fixedAssets.machinery || 0) + (report.financials?.fixedAssets.landAndBuilding || 0)) * 0.35).toLocaleString()}</span>\r\n                                                </div>\r\n                                                <div className=\"w-full h-1 bg-white/10 rounded-full\">\r\n                                                    <div className=\"h-full bg-green-500 w-[35%] rounded-full\"></div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"pt-6 mt-4 border-t border-white/10\">\r\n                                            <div className=\"flex items-center gap-3 p-4 bg-indigo-500/10 rounded-2xl border border-indigo-500/20\">\r\n                                                <div className=\"w-8 h-8 rounded-lg bg-indigo-500/20 flex items-center justify-center\">\r\n                                                    <span className=\"material-icons text-indigo-400 text-lg\">verified_user</span>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-[9px] font-black text-slate-300 uppercase tracking-widest\">Bankability Score</p>\r\n                                                    <p className=\"text-xs font-black text-white\">HIGH (Estimated DSCR 1.82)</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"p-6 bg-white rounded-[2rem] border border-slate-100 shadow-sm\">\r\n                                    <h5 className=\"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-4\">Quick Load Industry Norms</h5>\r\n                                    <div className=\"grid grid-cols-2 gap-2\">\r\n                                        {['Dairy Farm', 'Oil Mill', 'Bakery', 'Garments'].map(ind => (\r\n                                            <button \r\n                                                key={ind} \r\n                                                className=\"py-2 px-3 text-[9px] font-black text-slate-600 bg-slate-50 rounded-xl hover:bg-slate-900 hover:text-white transition-all border border-slate-100\"\r\n                                            >\r\n                                                {ind}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 3: Loading Page */}\r\n                    {step === 3 && (\r\n                        <div className=\"h-full flex flex-col items-center justify-center text-center animate-in fade-in duration-700\">\r\n                            <div className=\"w-24 h-24 bg-blue-50 rounded-3xl flex items-center justify-center relative mb-8\">\r\n                                <div className=\"absolute inset-0 border-4 border-blue-500 border-t-transparent rounded-3xl animate-spin\"></div>\r\n                                <span className=\"material-icons text-4xl text-blue-600\">psychology</span>\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black text-slate-900 mb-4\">Architecting Your Project Report...</h3>\r\n                            <p className=\"text-slate-500 max-w-sm font-medium leading-relaxed\">\r\n                                Our AI is analyzing banking norms, industry standard ratios, and local market potential to build a compliant DPR.\r\n                            </p>\r\n                            \r\n                            <div className=\"mt-12 w-full max-w-md bg-slate-100 h-2 rounded-full overflow-hidden\">\r\n                                <div className=\"h-full bg-blue-600 transition-all duration-3000 w-full ease-out\"></div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Step 4: Review & Polish (Chat Mode) */}\r\n                    {step === 4 && (\r\n                        <div className=\"flex gap-8 h-full animate-in fade-in zoom-in-95 duration-500\">\r\n                            {/* Left: Report Preview */}\r\n                            <div className=\"flex-[1.5] bg-white rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col overflow-hidden\">\r\n                                <div className=\"p-6 border-b border-slate-50 flex items-center justify-between bg-slate-50/50\">\r\n                                    <h4 className=\"font-black text-slate-800 text-sm flex items-center gap-2\">\r\n                                        <span className=\"material-icons text-indigo-600 text-lg\">preview</span> Draft Report Preview\r\n                                    </h4>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button onClick={() => handleExport('PDF')} className=\"p-2 bg-white rounded-lg border border-slate-200 text-slate-600 hover:text-blue-600 transition-all shadow-sm\">\r\n                                            <span className=\"material-icons text-sm\">picture_as_pdf</span>\r\n                                        </button>\r\n                                        <button onClick={() => handleExport('DOCS')} className=\"p-2 bg-white rounded-lg border border-slate-200 text-slate-600 hover:text-blue-600 transition-all shadow-sm\">\r\n                                            <span className=\"material-icons text-sm\">description</span>\r\n                                        </button>\r\n                                        <button onClick={() => handleExport('WHATSAPP')} className=\"p-2 bg-white rounded-lg border border-slate-200 text-slate-600 hover:text-green-600 transition-all shadow-sm\">\r\n                                            <span className=\"material-icons text-sm\">share</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex-1 overflow-y-auto p-10 font-serif text-slate-700 leading-relaxed custom-scroll bg-white\">\r\n                                    <div className=\"max-w-2xl mx-auto space-y-8\">\r\n                                        <div className=\"text-center pb-10 border-b-2 border-slate-100\">\r\n                                            <h1 className=\"text-3xl font-black text-slate-900 mb-2 uppercase tracking-tight\">{report.businessName}</h1>\r\n                                            <p className=\"text-xs font-black text-indigo-600 uppercase tracking-[0.3em]\">DETAILED PROJECT REPORT</p>\r\n                                        </div>\r\n                                        \r\n                                        <section>\r\n                                            <h5 className=\"text-sm font-black text-slate-900 border-l-4 border-blue-600 pl-3 mb-4 uppercase\">1. Executive Summary</h5>\r\n                                            <p className=\"text-sm text-slate-600\">{report.content?.executiveSummary}</p>\r\n                                        </section>\r\n\r\n                                        <section>\r\n                                            <h5 className=\"text-sm font-black text-slate-900 border-l-4 border-blue-600 pl-3 mb-4 uppercase\">2. SWOT Analysis</h5>\r\n                                            <div className=\"grid grid-cols-2 gap-4 mt-4\">\r\n                                                <div className=\"bg-green-50 p-4 rounded-2xl\">\r\n                                                    <p className=\"font-black text-[10px] text-green-700 mb-2 uppercase tracking-widest italic\">Strengths</p>\r\n                                                    <ul className=\"text-[11px] list-disc pl-4 space-y-1\">\r\n                                                        {report.content?.swotAnalysis.strengths.map((s, i) => <li key={i}>{s}</li>)}\r\n                                                    </ul>\r\n                                                </div>\r\n                                                <div className=\"bg-red-50 p-4 rounded-2xl\">\r\n                                                    <p className=\"font-black text-[10px] text-red-700 mb-2 uppercase tracking-widest italic\">Weaknesses</p>\r\n                                                    <ul className=\"text-[11px] list-disc pl-4 space-y-1\">\r\n                                                        {report.content?.swotAnalysis.weaknesses.map((s, i) => <li key={i}>{s}</li>)}\r\n                                                    </ul>\r\n                                                </div>\r\n                                            </div>\r\n                                        </section>\r\n\r\n                                        <section>\r\n                                            <h5 className=\"text-sm font-black text-slate-900 border-l-4 border-blue-600 pl-3 mb-4 uppercase\">4. Projected Balance Sheet (Year 1)</h5>\r\n                                            <div className=\"bg-slate-50 rounded-2xl border border-slate-100 p-4 overflow-hidden\">\r\n                                                <table className=\"w-full text-[10px]\">\r\n                                                    <thead>\r\n                                                        <tr className=\"border-b border-slate-200 text-slate-400 font-bold uppercase tracking-widest text-[8px]\">\r\n                                                            <th className=\"text-left pb-2\">Liabilities</th>\r\n                                                            <th className=\"text-right pb-2\">Amount (₹)</th>\r\n                                                            <th className=\"text-left pl-4 pb-2\">Assets</th>\r\n                                                            <th className=\"text-right pb-2\">Amount (₹)</th>\r\n                                                        </tr>\r\n                                                    </thead>\r\n                                                    <tbody className=\"text-slate-700 font-medium\">\r\n                                                        <tr className=\"border-b border-slate-100\">\r\n                                                            <td className=\"py-2\">Capital Account</td>\r\n                                                            <td className=\"text-right py-2\">5,00,000</td>\r\n                                                            <td className=\"py-2 pl-4\">Fixed Assets</td>\r\n                                                            <td className=\"text-right py-2\">{(report.financials?.fixedAssets.machinery || 0).toLocaleString()}</td>\r\n                                                        </tr>\r\n                                                        <tr className=\"border-b border-slate-100\">\r\n                                                            <td className=\"py-2\">Bank Term Loan</td>\r\n                                                            <td className=\"text-right py-2\">15,00,000</td>\r\n                                                            <td className=\"py-2 pl-4\">Current Assets</td>\r\n                                                            <td className=\"text-right py-2\">3,50,000</td>\r\n                                                        </tr>\r\n                                                        <tr className=\"bg-slate-100/50 font-black\">\r\n                                                            <td className=\"py-2\">TOTAL</td>\r\n                                                            <td className=\"text-right py-2\">20,00,000</td>\r\n                                                            <td className=\"py-2 pl-4\">TOTAL</td>\r\n                                                            <td className=\"text-right py-2\">20,00,000</td>\r\n                                                        </tr>\r\n                                                    </tbody>\r\n                                                </table>\r\n                                            </div>\r\n                                        </section>\r\n\r\n                                        <section>\r\n                                            <h5 className=\"text-sm font-black text-slate-900 border-l-4 border-blue-600 pl-3 mb-4 uppercase\">5. CMA Data Projections (3 Years)</h5>\r\n                                            <div className=\"space-y-3\">\r\n                                                {[1, 2, 3].map(yr => (\r\n                                                    <div key={yr} className=\"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl shadow-sm\">\r\n                                                        <span className=\"text-[10px] font-black text-slate-400\">YEAR {yr}</span>\r\n                                                        <div className=\"flex gap-6\">\r\n                                                            <div className=\"text-right\">\r\n                                                                <p className=\"text-[8px] font-bold text-slate-400 uppercase\">Sales</p>\r\n                                                                <p className=\"text-xs font-black text-slate-900\">₹{(4500000 * yr).toLocaleString()}</p>\r\n                                                            </div>\r\n                                                            <div className=\"text-right\">\r\n                                                                <p className=\"text-[8px] font-bold text-slate-400 uppercase\">Net Profit</p>\r\n                                                                <p className=\"text-xs font-black text-green-600\">₹{(900000 * yr).toLocaleString()}</p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </section>\r\n\r\n                                        <div className=\"pt-10 border-t border-slate-100 italic text-[10px] text-slate-400 flex justify-between\">\r\n                                            <span>Prepared by SetMyBizz AI Architect</span>\r\n                                            <span>Date: {new Date().toLocaleDateString()}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Right: AI Polish Chat */}\r\n                            <div className=\"flex-1 flex flex-col h-full\">\r\n                                <div className=\"bg-white rounded-[2.5rem] shadow-sm border border-slate-100 flex-1 flex flex-col overflow-hidden\">\r\n                                     <div className=\"p-6 border-b border-slate-50 bg-indigo-50/50 flex items-center justify-between\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span className=\"material-icons text-indigo-600 text-lg\">auto_awesome</span>\r\n                                            <h4 className=\"font-black text-slate-800 text-xs\">AI Report Polishing</h4>\r\n                                        </div>\r\n                                        <span className=\"bg-indigo-600 text-white text-[8px] px-2 py-0.5 rounded-full font-black uppercase tracking-widest\">Live Mode</span>\r\n                                     </div>\r\n\r\n                                     <div className=\"flex-1 overflow-y-auto p-6 space-y-4 custom-scroll bg-slate-50/30\">\r\n                                        {chatHistory.map((msg, i) => (\r\n                                            <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                                                <div className={`p-4 rounded-2xl text-xs max-w-[85%] shadow-sm ${msg.role === 'user' ? 'bg-slate-900 text-white font-bold' : 'bg-white border border-slate-200 text-slate-700 font-medium leading-relaxed'}`}>\r\n                                                    {msg.content}\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                     </div>\r\n\r\n                                     <div className=\"p-4 bg-white border-t border-slate-50\">\r\n                                        <div className=\"relative group flex gap-2\">\r\n                                            <div className=\"relative flex-1\">\r\n                                                <input \r\n                                                    type=\"text\" \r\n                                                    value={chatInput}\r\n                                                    onChange={(e) => setChatInput(e.target.value)}\r\n                                                    onKeyPress={(e) => e.key === 'Enter' && handleChatAsk()}\r\n                                                    placeholder=\"e.g. Add 5% contingency to financials...\"\r\n                                                    className=\"w-full bg-slate-50 border border-slate-200 rounded-2xl pl-5 pr-12 py-4 text-xs font-bold text-slate-700 focus:outline-none focus:border-indigo-500 transition-all focus:bg-white\"\r\n                                                />\r\n                                                <button \r\n                                                    onClick={toggleVoice}\r\n                                                    className={`absolute right-12 top-2.5 w-8 h-8 rounded-lg flex items-center justify-center transition-all ${isListening ? 'bg-red-50 text-red-600 animate-pulse' : 'text-slate-400 hover:text-indigo-600'}`}\r\n                                                >\r\n                                                    <span className=\"material-icons text-lg\">{isListening ? 'mic_active' : 'mic'}</span>\r\n                                                </button>\r\n                                                <button \r\n                                                    onClick={handleChatAsk}\r\n                                                    className=\"absolute right-2 top-2 w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center hover:bg-indigo-700 transition-all shadow-md group-hover:scale-105\"\r\n                                                >\r\n                                                    <span className=\"material-icons text-sm\">send</span>\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                        <p className=\"text-[9px] text-slate-400 mt-3 text-center font-bold\">Try: \"Add local market trends for Dairy in Pune\" or \"Request CA Review\"</p>\r\n                                     </div>\r\n                                </div>\r\n\r\n                                {/* Premium Upgrade CTA */}\r\n                                <div className=\"mt-6 p-6 bg-linear-to-br from-indigo-900 to-purple-900 rounded-[2.5rem] shadow-xl text-white group overflow-hidden relative\">\r\n                                    <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-2xl -translate-y-16 translate-x-16 group-hover:bg-white/10 transition-all\"></div>\r\n                                    <div className=\"relative z-10\">\r\n                                        <h5 className=\"font-black text-sm mb-1 flex items-center gap-2\">\r\n                                            <span className=\"material-icons text-amber-500 text-lg\">verified</span> Get Professional Seal\r\n                                        </h5>\r\n                                        <p className=\"text-[10px] text-indigo-200 mb-4 font-bold leading-relaxed\">Required for bank loans over ₹25 Lakhs.</p>\r\n                                        <button className=\"w-full py-3 bg-white text-indigo-900 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg hover:shadow-indigo-500/20 transition-all hover:scale-[1.02]\">\r\n                                            Request CA Signature (₹4,999)\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-6 bg-white border-t border-slate-100 flex items-center justify-between shrink-0 px-10\">\r\n                    <button \r\n                        onClick={() => setStep(prev => Math.max(0, prev - 1))}\r\n                        disabled={step === 0}\r\n                        className=\"text-xs font-black text-slate-400 hover:text-slate-900 transition-colors uppercase tracking-widest disabled:opacity-0\"\r\n                    >\r\n                        Back\r\n                    </button>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        {step === 4 ? (\r\n                            <button \r\n                                onClick={onClose}\r\n                                className=\"px-10 py-4 bg-linear-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-black text-sm shadow-xl hover:shadow-blue-500/30 transition-all hover:-translate-y-1 flex items-center gap-2\"\r\n                            >\r\n                                <span className=\"material-icons text-lg\">save</span> Save to AI Workspace\r\n                            </button>\r\n                        ) : null}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* HIDDEN PRINT-ONLY BANK DPR LAYOUT */}\r\n                <div className=\"hidden print:block print:p-10 font-serif text-slate-900 bg-white\">\r\n                    <div className=\"text-center mb-10 border-b-4 border-slate-900 pb-6\">\r\n                        <h1 className=\"text-4xl font-black uppercase mb-2\">{report.businessName}</h1>\r\n                        <p className=\"text-sm font-bold tracking-[0.4em] text-slate-500\">DETAILED PROJECT REPORT (DPR)</p>\r\n                        <p className=\"mt-4 font-bold\">Scheme: {report.scheme} | Category: {report.promoter?.category}</p>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-10\">\r\n                        <section>\r\n                            <h2 className=\"text-xl font-black border-b-2 border-slate-200 pb-2 mb-4\">1. EXECUTIVE SUMMARY</h2>\r\n                            <p className=\"text-sm leading-relaxed\">{report.content?.executiveSummary}</p>\r\n                        </section>\r\n\r\n                        <section>\r\n                            <h2 className=\"text-xl font-black border-b-2 border-slate-200 pb-2 mb-4\">2. PROMOTER PROFILE</h2>\r\n                            <table className=\"w-full text-sm border-collapse border border-slate-300\">\r\n                                <tbody>\r\n                                    <tr><td className=\"border border-slate-300 p-3 font-bold bg-slate-50 w-1/3\">Promoter Name</td><td className=\"border border-slate-300 p-3\">{report.promoter?.name}</td></tr>\r\n                                    <tr><td className=\"border border-slate-300 p-3 font-bold bg-slate-50\">Qualification</td><td className=\"border border-slate-300 p-3\">{report.promoter?.qualification}</td></tr>\r\n                                    <tr><td className=\"border border-slate-300 p-3 font-bold bg-slate-50\">Category</td><td className=\"border border-slate-300 p-3\">{report.promoter?.category}</td></tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </section>\r\n\r\n                        <section>\r\n                            <h2 className=\"text-xl font-black border-b-2 border-slate-200 pb-2 mb-4\">3. FINANCIAL ANALYSIS</h2>\r\n                            <div className=\"grid grid-cols-2 gap-8\">\r\n                                <div className=\"border border-slate-300 p-5 rounded-xl\">\r\n                                    <h3 className=\"font-black text-sm mb-4\">COST OF PROJECT</h3>\r\n                                    <ul className=\"text-sm space-y-2\">\r\n                                        <li className=\"flex justify-between\"><span>Machinery</span> <span>₹{(report.financials?.fixedAssets.machinery || 0).toLocaleString()}</span></li>\r\n                                        <li className=\"flex justify-between font-black border-t pt-2\"><span>Total</span> <span>₹{(report.financials?.fixedAssets.machinery || 0).toLocaleString()}</span></li>\r\n                                    </ul>\r\n                                </div>\r\n                                <div className=\"border border-slate-300 p-5 rounded-xl\">\r\n                                    <h3 className=\"font-black text-sm mb-4\">MEANS OF FINANCE</h3>\r\n                                    <ul className=\"text-sm space-y-2\">\r\n                                        <li className=\"flex justify-between\"><span>Own Contribution</span> <span>10%</span></li>\r\n                                        <li className=\"flex justify-between\"><span>Bank Loan</span> <span>90%</span></li>\r\n                                        <li className=\"flex justify-between text-green-700 font-bold\"><span>PMEGP Subsidy</span> <span>Eligible</span></li>\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </section>\r\n\r\n                        <div className=\"mt-32 pt-10 border-t flex justify-between italic text-sm text-slate-400\">\r\n                            <span>Digitally Generated by setmybizz.in</span>\r\n                            <div className=\"text-right\">\r\n                                <div className=\"w-48 h-20 border-2 border-dashed border-slate-200 mb-2\"></div>\r\n                                <span>(Entrepreneur's Signature)</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {toast.visible && <Toast message={toast.message} subMessage={toast.sub} isVisible={toast.visible} onClose={() => setToast({ ...toast, visible: false })} />}\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\AdvancedAiCoFounder.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fileInputRef' is assigned a value but never used.","line":63,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4739,4742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4739,4742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport Draggable from 'react-draggable';\r\n\r\ninterface Message {\r\n    id: string;\r\n    role: 'user' | 'ai';\r\n    content: string;\r\n    timestamp: Date;\r\n    chatId: string;\r\n    attachments?: Array<{\r\n        type: 'image' | 'document';\r\n        name: string;\r\n        url: string;\r\n        size?: string;\r\n    }>;\r\n    generatedContent?: {\r\n        type: 'image' | 'document';\r\n        url: string;\r\n        name: string;\r\n    };\r\n}\r\n\r\ninterface Chat {\r\n    id: string;\r\n    name: string;\r\n    createdAt: Date;\r\n    lastMessageAt: Date;\r\n    messageCount: number;\r\n}\r\n\r\ntype ChatMode = 'quick' | 'deep' | 'minimized';\r\n\r\nconst AdvancedAiCoFounder: React.FC = () => {\r\n    const [mode, setMode] = useState<ChatMode>('quick');\r\n    const [chats, setChats] = useState<Chat[]>([\r\n        {\r\n            id: 'default',\r\n            name: 'General Chat',\r\n            createdAt: new Date(),\r\n            lastMessageAt: new Date(),\r\n            messageCount: 1\r\n        }\r\n    ]);\r\n    const [currentChatId, setCurrentChatId] = useState('default');\r\n    const [messages, setMessages] = useState<Message[]>([\r\n        {\r\n            id: '1',\r\n            role: 'ai',\r\n            content: \"नमस्ते! Hi! I'm your Advanced AI Co-Founder 🚀\\n\\nI'm powered by Gemini AI and ready to help with:\\n• Marketing strategies\\n• Sales optimization\\n• Content generation\\n• Data analysis\\n• And much more!\\n\\nWhat can I help you build today?\",\r\n            timestamp: new Date(),\r\n            chatId: 'default'\r\n        }\r\n    ]);\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [showChatList, setShowChatList] = useState(false);\r\n    const [showNewChatModal, setShowNewChatModal] = useState(false);\r\n    const [newChatName, setNewChatName] = useState('');\r\n    const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Auto-scroll\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const currentChat = chats.find(c => c.id === currentChatId);\r\n    const currentMessages = messages.filter(m => m.chatId === currentChatId);\r\n\r\n    const createNewChat = () => {\r\n        if (!newChatName.trim()) return;\r\n\r\n        const newChat: Chat = {\r\n            id: `chat-${Date.now()}`,\r\n            name: newChatName,\r\n            createdAt: new Date(),\r\n            lastMessageAt: new Date(),\r\n            messageCount: 0\r\n        };\r\n\r\n        setChats(prev => [newChat, ...prev]);\r\n        setCurrentChatId(newChat.id);\r\n        setNewChatName('');\r\n        setShowNewChatModal(false);\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if ((!inputValue.trim()) || isLoading) return;\r\n\r\n        const userMessage: Message = {\r\n            id: `msg-${Date.now()}`,\r\n            role: 'user',\r\n            content: inputValue,\r\n            timestamp: new Date(),\r\n            chatId: currentChatId\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInputValue('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const modelToUse = mode === 'deep' ? 'gemini-1.5-pro' : 'gemini-1.5-flash';\r\n\r\n            const response = await fetch('/api/ai-cofounder', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: inputValue,\r\n                    chatId: currentChatId,\r\n                    chatName: currentChat?.name,\r\n                    mode: mode,\r\n                    model: modelToUse,\r\n                    conversationHistory: currentMessages.slice(-10),\r\n                    replyingTo: replyingTo\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                const aiMessage: Message = {\r\n                    id: `msg-${Date.now()}`,\r\n                    role: 'ai',\r\n                    content: data.response,\r\n                    timestamp: new Date(),\r\n                    chatId: currentChatId,\r\n                    generatedContent: data.generatedContent\r\n                };\r\n                setMessages(prev => [...prev, aiMessage]);\r\n\r\n                // Update chat metadata\r\n                setChats(prev => prev.map(c =>\r\n                    c.id === currentChatId\r\n                        ? { ...c, lastMessageAt: new Date(), messageCount: c.messageCount + 2 }\r\n                        : c\r\n                ));\r\n            }\r\n        } catch (error: any) {\r\n            console.error('AI error:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n            setReplyingTo(null);\r\n        }\r\n    };\r\n\r\n    const handleCopy = (content: string) => {\r\n        navigator.clipboard.writeText(content);\r\n        // Show toast notification\r\n    };\r\n\r\n    const handleShare = async (content: string) => {\r\n        if (navigator.share) {\r\n            await navigator.share({\r\n                title: 'AI Co-Founder Response',\r\n                text: content\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleSave = (message: Message) => {\r\n        // Save to local storage or database\r\n        const savedChats = JSON.parse(localStorage.getItem('saved-ai-responses') || '[]');\r\n        savedChats.push(message);\r\n        localStorage.setItem('saved-ai-responses', JSON.stringify(savedChats));\r\n    };\r\n\r\n    const handleDownload = (url: string, name: string) => {\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = name;\r\n        link.click();\r\n    };\r\n\r\n    const handleExportToDrive = async (url: string, name: string) => {\r\n        // Integration with Google Drive API\r\n        try {\r\n            await fetch('/api/export-to-drive', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ url, name })\r\n            });\r\n        } catch (error) {\r\n            console.error('Export error:', error);\r\n        }\r\n    };\r\n\r\n    const renderMessage = (msg: Message) => (\r\n        <div key={msg.id} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} animate-in fade-in slide-in-from-bottom-2 duration-300 group`}>\r\n            {msg.role === 'ai' && (\r\n                <div className=\"w-8 h-8 mr-3 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 flex items-center justify-center flex-shrink-0 mt-1 shadow-lg\">\r\n                    <span className=\"material-icons text-white text-sm\">psychology</span>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex flex-col max-w-[80%]\">\r\n                <div className={`rounded-2xl shadow-lg backdrop-blur-md ${msg.role === 'user'\r\n                    ? 'bg-gradient-to-br from-indigo-600 to-purple-600 text-white rounded-tr-none'\r\n                    : 'bg-white border-2 border-indigo-200 text-slate-800 rounded-tl-none'\r\n                    }`}>\r\n                    <div className=\"px-4 py-3\">\r\n                        <p className=\"text-sm whitespace-pre-wrap leading-relaxed\">{msg.content}</p>\r\n                    </div>\r\n\r\n                    {msg.generatedContent && (\r\n                        <div className=\"px-4 pb-3 border-t border-indigo-200 pt-3 space-y-2\">\r\n                            <div className=\"flex items-center justify-between bg-indigo-50 p-3 rounded-lg\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <span className=\"material-icons text-indigo-600\">\r\n                                        {msg.generatedContent.type === 'image' ? 'image' : 'description'}\r\n                                    </span>\r\n                                    <span className=\"text-xs font-bold text-slate-700\">{msg.generatedContent.name}</span>\r\n                                </div>\r\n                                <div className=\"flex gap-1\">\r\n                                    <button\r\n                                        onClick={() => handleDownload(msg.generatedContent!.url, msg.generatedContent!.name)}\r\n                                        className=\"p-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-bold flex items-center gap-1 transition-all\"\r\n                                        title=\"Save to PC\"\r\n                                    >\r\n                                        <span className=\"material-icons text-sm\">download</span>\r\n                                        PC\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleExportToDrive(msg.generatedContent!.url, msg.generatedContent!.name)}\r\n                                        className=\"p-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg text-xs font-bold flex items-center gap-1 transition-all\"\r\n                                        title=\"Export to Google Drive\"\r\n                                    >\r\n                                        <span className=\"material-icons text-sm\">cloud_upload</span>\r\n                                        Drive\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"px-4 pb-2 text-[10px] text-right opacity-60 font-medium flex items-center justify-between\">\r\n                        <span>{msg.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Message Action Buttons */}\r\n                <div className=\"flex items-center gap-1 mt-1 ml-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                    <button\r\n                        onClick={() => handleCopy(msg.content)}\r\n                        className=\"p-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg transition-all flex items-center gap-1\"\r\n                        title=\"Copy\"\r\n                    >\r\n                        <span className=\"material-icons text-xs text-slate-600\">content_copy</span>\r\n                        <span className=\"text-[10px] font-bold text-slate-600\">Copy</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => handleShare(msg.content)}\r\n                        className=\"p-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg transition-all flex items-center gap-1\"\r\n                        title=\"Share\"\r\n                    >\r\n                        <span className=\"material-icons text-xs text-slate-600\">share</span>\r\n                        <span className=\"text-[10px] font-bold text-slate-600\">Share</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => handleSave(msg)}\r\n                        className=\"p-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg transition-all flex items-center gap-1\"\r\n                        title=\"Save\"\r\n                    >\r\n                        <span className=\"material-icons text-xs text-slate-600\">bookmark</span>\r\n                        <span className=\"text-[10px] font-bold text-slate-600\">Save</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setReplyingTo(msg.id)}\r\n                        className=\"p-1.5 bg-indigo-100 hover:bg-indigo-200 rounded-lg transition-all flex items-center gap-1\"\r\n                        title=\"Reply\"\r\n                    >\r\n                        <span className=\"material-icons text-xs text-indigo-600\">reply</span>\r\n                        <span className=\"text-[10px] font-bold text-indigo-600\">Reply</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {msg.role === 'user' && (\r\n                <div className=\"w-8 h-8 ml-3 rounded-full bg-gradient-to-br from-slate-700 to-slate-600 flex items-center justify-center flex-shrink-0 mt-1\">\r\n                    <span className=\"material-icons text-slate-300 text-sm\">person</span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n\r\n    // Quick Chat Widget (Draggable & Resizable)\r\n    if (mode === 'quick') {\r\n        return (\r\n            <Draggable handle=\".drag-handle\" bounds=\"parent\">\r\n                <div className=\"fixed bottom-6 right-6 z-50 w-[400px] h-[600px] bg-white rounded-2xl shadow-2xl border-2 border-indigo-300 flex flex-col overflow-hidden resize animate-in slide-in-from-right duration-500 fade-in\" style={{ resize: 'both', minWidth: '350px', minHeight: '400px', maxWidth: '600px', maxHeight: '800px' }}>\r\n                    {/* Header */}\r\n                    <div className=\"drag-handle cursor-move bg-gradient-to-r from-indigo-600 to-purple-600 p-3 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span className=\"material-icons text-white\">psychology</span>\r\n                            <div>\r\n                                <h3 className=\"text-white font-bold text-sm\">AI Co-Founder</h3>\r\n                                <p className=\"text-indigo-200 text-[10px]\">Quick Chat • Gemini 1.5 Flash</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <button\r\n                                onClick={() => setMode('deep')}\r\n                                className=\"p-1.5 hover:bg-white/10 rounded-lg transition-all\"\r\n                                title=\"Switch to Deep Mode\"\r\n                            >\r\n                                <span className=\"material-icons text-white text-lg\">open_in_full</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setMode('minimized')}\r\n                                className=\"p-1.5 hover:bg-white/10 rounded-lg transition-all\"\r\n                                title=\"Minimize\"\r\n                            >\r\n                                <span className=\"material-icons text-white text-lg\">minimize</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chat Selector */}\r\n                    <div className=\"border-b border-indigo-200 bg-indigo-50/50 p-2 flex items-center justify-between\">\r\n                        <button\r\n                            onClick={() => setShowChatList(!showChatList)}\r\n                            className=\"flex items-center gap-2 px-3 py-1.5 bg-white border border-indigo-300 rounded-lg hover:bg-indigo-50 transition-all\"\r\n                        >\r\n                            <span className=\"text-sm font-bold text-slate-700 truncate max-w-[150px]\">{currentChat?.name}</span>\r\n                            <span className=\"material-icons text-sm text-indigo-600\">expand_more</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setShowNewChatModal(true)}\r\n                            className=\"px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-xs font-bold hover:bg-indigo-700 transition-all flex items-center gap-1\"\r\n                        >\r\n                            <span className=\"material-icons text-sm\">add</span>\r\n                            New Chat\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Chat List Dropdown */}\r\n                    {showChatList && (\r\n                        <div className=\"absolute top-24 left-2 right-2 bg-white border-2 border-indigo-300 rounded-lg shadow-xl z-10 max-h-[200px] overflow-y-auto animate-in slide-in-from-top-2 fade-in duration-300\">\r\n                            {chats.map(chat => (\r\n                                <button\r\n                                    key={chat.id}\r\n                                    onClick={() => {\r\n                                        setCurrentChatId(chat.id);\r\n                                        setShowChatList(false);\r\n                                    }}\r\n                                    className={`w-full text-left px-4 py-2 hover:bg-indigo-50 transition-all border-b border-indigo-100 ${chat.id === currentChatId ? 'bg-indigo-100' : ''}`}\r\n                                >\r\n                                    <div className=\"font-bold text-sm text-slate-800\">{chat.name}</div>\r\n                                    <div className=\"text-[10px] text-slate-500\">{chat.messageCount} messages • {chat.lastMessageAt.toLocaleDateString()}</div>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Messages */}\r\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-br from-white via-indigo-50/30 to-purple-50/30\">\r\n                        {currentMessages.map(msg => renderMessage(msg))}\r\n                        {isLoading && (\r\n                            <div className=\"flex justify-start animate-in fade-in\">\r\n                                <div className=\"bg-white border-2 border-indigo-200 rounded-2xl px-4 py-3 shadow-lg\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"flex gap-1\">\r\n                                            <span className=\"w-2 h-2 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.3s]\"></span>\r\n                                            <span className=\"w-2 h-2 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.15s]\"></span>\r\n                                            <span className=\"w-2 h-2 bg-indigo-400 rounded-full animate-bounce\"></span>\r\n                                        </span>\r\n                                        <span className=\"text-xs text-indigo-700 font-medium ml-2\">Thinking...</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div ref={messagesEndRef} />\r\n                    </div>\r\n\r\n                    {/* Replying To Indicator */}\r\n                    {replyingTo && (\r\n                        <div className=\"px-4 py-2 bg-indigo-100 border-t border-indigo-200 flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"material-icons text-sm text-indigo-600\">reply</span>\r\n                                <span className=\"text-xs font-bold text-indigo-700\">Replying to message</span>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setReplyingTo(null)}\r\n                                className=\"text-indigo-600 hover:text-indigo-800\"\r\n                            >\r\n                                <span className=\"material-icons text-sm\">close</span>\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Input */}\r\n                    <div className=\"p-3 bg-white border-t border-indigo-200\">\r\n                        <div className=\"flex items-end gap-2 bg-white border-2 border-indigo-300 rounded-xl p-2 focus-within:ring-2 focus-within:ring-indigo-400\">\r\n                            <textarea\r\n                                value={inputValue}\r\n                                onChange={(e) => setInputValue(e.target.value)}\r\n                                onKeyDown={(e) => {\r\n                                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                                        e.preventDefault();\r\n                                        handleSubmit();\r\n                                    }\r\n                                }}\r\n                                placeholder=\"Ask anything...\"\r\n                                disabled={isLoading}\r\n                                rows={1}\r\n                                className=\"flex-1 bg-transparent border-none outline-none text-slate-800 placeholder:text-indigo-400/60 text-sm py-2 px-2 resize-none max-h-24\"\r\n                            />\r\n                            <button\r\n                                onClick={handleSubmit}\r\n                                disabled={!inputValue.trim() || isLoading}\r\n                                className={`p-2 rounded-lg transition-all ${!inputValue.trim() || isLoading\r\n                                    ? 'bg-slate-300 text-slate-400 cursor-not-allowed'\r\n                                    : 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:scale-105'\r\n                                    }`}\r\n                            >\r\n                                <span className=\"material-icons text-lg\">send</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* New Chat Modal */}\r\n                    {showNewChatModal && (\r\n                        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-20 animate-in fade-in duration-200\">\r\n                            <div className=\"bg-white rounded-xl p-6 w-[90%] max-w-sm shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-300\">\r\n                                <h3 className=\"text-lg font-bold text-slate-800 mb-4\">Create New Chat</h3>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={newChatName}\r\n                                    onChange={(e) => setNewChatName(e.target.value)}\r\n                                    onKeyDown={(e) => e.key === 'Enter' && createNewChat()}\r\n                                    placeholder=\"Enter chat name (e.g., Sales, Marketing)\"\r\n                                    className=\"w-full px-4 py-2 border-2 border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none text-sm\"\r\n                                    autoFocus\r\n                                />\r\n                                <div className=\"flex gap-2 mt-4\">\r\n                                    <button\r\n                                        onClick={createNewChat}\r\n                                        className=\"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-all\"\r\n                                    >\r\n                                        Create\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setShowNewChatModal(false);\r\n                                            setNewChatName('');\r\n                                        }}\r\n                                        className=\"flex-1 bg-slate-200 text-slate-700 px-4 py-2 rounded-lg font-bold hover:bg-slate-300 transition-all\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </Draggable>\r\n        );\r\n    }\r\n\r\n    // Deep Chat Mode (70% screen)\r\n    if (mode === 'deep') {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n                <div className=\"w-[90vw] h-[85vh] bg-white rounded-2xl shadow-2xl border-2 border-indigo-300 flex flex-col overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-4 duration-500\">\r\n                    {/* Header */}\r\n                    <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <span className=\"material-icons text-white text-2xl\">psychology</span>\r\n                            <div>\r\n                                <h3 className=\"text-white font-bold text-lg\">AI Co-Founder - Deep Mode</h3>\r\n                                <p className=\"text-indigo-200 text-xs\">Advanced Analysis • Gemini 1.5 Pro</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                                onClick={() => setMode('quick')}\r\n                                className=\"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all text-white text-sm font-bold flex items-center gap-2\"\r\n                            >\r\n                                <span className=\"material-icons text-sm\">close_fullscreen</span>\r\n                                Quick Mode\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setMode('minimized')}\r\n                                className=\"p-2 hover:bg-white/10 rounded-lg transition-all\"\r\n                            >\r\n                                <span className=\"material-icons text-white\">close</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Similar content as Quick Chat but with more space */}\r\n                    <div className=\"flex-1 flex overflow-hidden\">\r\n                        {/* Sidebar - Chat History */}\r\n                        <div className=\"w-64 border-r border-indigo-200 bg-indigo-50/30 p-4 overflow-y-auto animate-in slide-in-from-left duration-500\">\r\n                            <button\r\n                                onClick={() => setShowNewChatModal(true)}\r\n                                className=\"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-all flex items-center justify-center gap-2 mb-4\"\r\n                            >\r\n                                <span className=\"material-icons\">add</span>\r\n                                New Chat\r\n                            </button>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                {chats.map(chat => (\r\n                                    <button\r\n                                        key={chat.id}\r\n                                        onClick={() => setCurrentChatId(chat.id)}\r\n                                        className={`w-full text-left px-3 py-2 rounded-lg transition-all ${chat.id === currentChatId\r\n                                            ? 'bg-indigo-200 border-2 border-indigo-400'\r\n                                            : 'bg-white border border-indigo-200 hover:bg-indigo-100'\r\n                                            }`}\r\n                                    >\r\n                                        <div className=\"font-bold text-sm text-slate-800 truncate\">{chat.name}</div>\r\n                                        <div className=\"text-[10px] text-slate-500\">{chat.messageCount} msgs</div>\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Main Chat Area */}\r\n                        <div className=\"flex-1 flex flex-col\">\r\n                            <div className=\"flex-1 overflow-y-auto p-6 space-y-6 bg-gradient-to-br from-white via-indigo-50/30 to-purple-50/30\">\r\n                                {currentMessages.map(msg => renderMessage(msg))}\r\n                                {isLoading && (\r\n                                    <div className=\"flex justify-start animate-in fade-in\">\r\n                                        <div className=\"bg-white border-2 border-indigo-200 rounded-2xl px-6 py-4 shadow-lg\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <span className=\"flex gap-1\">\r\n                                                    <span className=\"w-3 h-3 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.3s]\"></span>\r\n                                                    <span className=\"w-3 h-3 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.15s]\"></span>\r\n                                                    <span className=\"w-3 h-3 bg-indigo-400 rounded-full animate-bounce\"></span>\r\n                                                </span>\r\n                                                <span className=\"text-sm text-indigo-700 font-medium ml-2\">Deep analysis in progress...</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <div ref={messagesEndRef} />\r\n                            </div>\r\n\r\n                            {replyingTo && (\r\n                                <div className=\"px-6 py-3 bg-indigo-100 border-t border-indigo-200 flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"material-icons text-indigo-600\">reply</span>\r\n                                        <span className=\"text-sm font-bold text-indigo-700\">Replying to message</span>\r\n                                    </div>\r\n                                    <button onClick={() => setReplyingTo(null)} className=\"text-indigo-600 hover:text-indigo-800\">\r\n                                        <span className=\"material-icons\">close</span>\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"p-4 bg-white border-t border-indigo-200\">\r\n                                <div className=\"flex items-end gap-3 bg-white border-2 border-indigo-300 rounded-xl p-3 focus-within:ring-2 focus-within:ring-indigo-400\">\r\n                                    <textarea\r\n                                        value={inputValue}\r\n                                        onChange={(e) => setInputValue(e.target.value)}\r\n                                        onKeyDown={(e) => {\r\n                                            if (e.key === 'Enter' && !e.shiftKey) {\r\n                                                e.preventDefault();\r\n                                                handleSubmit();\r\n                                            }\r\n                                        }}\r\n                                        placeholder=\"Ask for deep analysis, strategic planning, complex problem solving...\"\r\n                                        disabled={isLoading}\r\n                                        rows={2}\r\n                                        className=\"flex-1 bg-transparent border-none outline-none text-slate-800 placeholder:text-indigo-400/60 text-sm py-2 px-2 resize-none max-h-32\"\r\n                                    />\r\n                                    <button\r\n                                        onClick={handleSubmit}\r\n                                        disabled={!inputValue.trim() || isLoading}\r\n                                        className={`p-3 rounded-xl transition-all ${!inputValue.trim() || isLoading\r\n                                            ? 'bg-slate-300 text-slate-400 cursor-not-allowed'\r\n                                            : 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:scale-105 shadow-lg'\r\n                                            }`}\r\n                                    >\r\n                                        <span className=\"material-icons text-xl\">send</span>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {showNewChatModal && (\r\n                        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-20 animate-in fade-in duration-200\">\r\n                            <div className=\"bg-white rounded-xl p-6 w-[400px] shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-300\">\r\n                                <h3 className=\"text-xl font-bold text-slate-800 mb-4\">Create New Chat</h3>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={newChatName}\r\n                                    onChange={(e) => setNewChatName(e.target.value)}\r\n                                    onKeyDown={(e) => e.key === 'Enter' && createNewChat()}\r\n                                    placeholder=\"e.g., Sales Strategy, Marketing Plan, Product Launch\"\r\n                                    className=\"w-full px-4 py-3 border-2 border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none\"\r\n                                    autoFocus\r\n                                />\r\n                                <div className=\"flex gap-3 mt-4\">\r\n                                    <button onClick={createNewChat} className=\"flex-1 bg-indigo-600 text-white px-4 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-all\">\r\n                                        Create\r\n                                    </button>\r\n                                    <button onClick={() => { setShowNewChatModal(false); setNewChatName(''); }} className=\"flex-1 bg-slate-200 text-slate-700 px-4 py-3 rounded-lg font-bold hover:bg-slate-300 transition-all\">\r\n                                        Cancel\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Minimized Mode (FAB)\r\n    return (\r\n        <button\r\n            onClick={() => setMode('quick')}\r\n            className=\"fixed bottom-6 right-6 z-50 w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-all group animate-in zoom-in-50 bounce-in duration-500\"\r\n        >\r\n            <span className=\"material-icons text-white text-2xl\">psychology</span>\r\n            <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white animate-pulse\"></span>\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default AdvancedAiCoFounder;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\AiCoFounderChat.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'defaultMinimized' is assigned a value but never used.","line":21,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":76},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4272,4275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4272,4275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":275,"column":49,"nodeType":"JSXOpeningElement","endLine":275,"endColumn":126}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\n\r\ninterface Message {\r\n    role: 'user' | 'ai';\r\n    content: string;\r\n    timestamp: Date;\r\n    attachments?: Array<{\r\n        type: 'image' | 'document';\r\n        name: string;\r\n        url: string;\r\n        size?: string;\r\n    }>;\r\n}\r\n\r\ninterface AiCoFounderChatProps {\r\n    defaultMinimized?: boolean;\r\n}\r\n\r\nconst AiCoFounderChat: React.FC<AiCoFounderChatProps> = ({ defaultMinimized = false }) => {\r\n    const [messages, setMessages] = useState<Message[]>([\r\n        {\r\n            role: 'ai',\r\n            content: \"नमस्ते! Hi! I'm your AI Co-Founder 🚀\\n\\nI can help you with Marketing, Sales, Operations, Analytics and much more. What would you like to work on today?\",\r\n            timestamp: new Date()\r\n        }\r\n    ]);\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [attachments, setAttachments] = useState<File[]>([]);\r\n    const [isRecording, setIsRecording] = useState(false);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Auto-scroll\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const getBusinessProfile = () => {\r\n        try {\r\n            const profile = localStorage.getItem('workspaceProfile');\r\n            return profile ? JSON.parse(profile) : null;\r\n        } catch {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const handleFileSelect = (files: FileList | null) => {\r\n        if (!files || files.length === 0) return;\r\n        const fileArray = Array.from(files);\r\n        setAttachments(prev => [...prev, ...fileArray]);\r\n    };\r\n\r\n    const removeAttachment = (index: number) => {\r\n        setAttachments(prev => prev.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const handleQuickAction = (action: string) => {\r\n        setInputValue(action);\r\n    };\r\n\r\n    const handleVoiceInput = () => {\r\n        setIsRecording(!isRecording);\r\n        // Voice recording logic would go here\r\n        if (!isRecording) {\r\n            setTimeout(() => setIsRecording(false), 3000);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if ((!inputValue.trim() && attachments.length === 0) || isLoading) return;\r\n\r\n        const userMessage: Message = {\r\n            role: 'user',\r\n            content: inputValue || '📎 Sent attachments',\r\n            timestamp: new Date(),\r\n            attachments: attachments.map(file => ({\r\n                type: file.type.startsWith('image/') ? 'image' : 'document',\r\n                name: file.name,\r\n                url: URL.createObjectURL(file),\r\n                size: `${(file.size / 1024).toFixed(1)} KB`\r\n            }))\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInputValue('');\r\n        const currentAttachments = [...attachments];\r\n        setAttachments([]);\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            let apiMessage = inputValue;\r\n            if (currentAttachments.length > 0) {\r\n                apiMessage += `\\n\\n[User attached ${currentAttachments.length} file(s): ${currentAttachments.map(f => f.name).join(', ')}]`;\r\n            }\r\n\r\n            const response = await fetch('/api/ai-cofounder', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: apiMessage,\r\n                    userId: 'workspace-user',\r\n                    userRole: 'owner',\r\n                    businessProfile: getBusinessProfile(),\r\n                    conversationHistory: messages.slice(-6)\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                const aiMessage: Message = {\r\n                    role: 'ai',\r\n                    content: data.response,\r\n                    timestamp: new Date()\r\n                };\r\n                setMessages(prev => [...prev, aiMessage]);\r\n            } else {\r\n                throw new Error(data.response || data.error || 'Failed to get response');\r\n            }\r\n        } catch (error: any) {\r\n            console.error('AI error:', error);\r\n            const errorMessage: Message = {\r\n                role: 'ai',\r\n                content: `I encountered an issue: ${error.message}. Please try again.`,\r\n                timestamp: new Date()\r\n            };\r\n            setMessages(prev => [...prev, errorMessage]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSubmit();\r\n        }\r\n    };\r\n\r\n    const quickActions = [\r\n        { label: 'Marketing Ideas', icon: 'campaign', gradient: 'from-pink-500 to-rose-500' },\r\n        { label: 'Email Campaign', icon: 'mail', gradient: 'from-blue-500 to-cyan-500' },\r\n        { label: 'WhatsApp Message', icon: 'chat', gradient: 'from-green-500 to-emerald-500' },\r\n        { label: 'Sales Strategy', icon: 'trending_up', gradient: 'from-purple-500 to-indigo-500' },\r\n        { label: 'Financial Report', icon: 'analytics', gradient: 'from-orange-500 to-amber-500' },\r\n    ];\r\n\r\n    const toolConnections = [\r\n        { label: 'Marketing', icon: 'campaign', angle: 0, color: 'text-pink-400' },\r\n        { label: 'Email', icon: 'mail', angle: 45, color: 'text-blue-400' },\r\n        { label: 'Inventory', icon: 'inventory_2', angle: 90, color: 'text-green-400' },\r\n        { label: 'CRM', icon: 'people', angle: 135, color: 'text-purple-400' },\r\n        { label: 'Analytics', icon: 'bar_chart', angle: 180, color: 'text-orange-400' },\r\n        { label: 'Sales', icon: 'shopping_cart', angle: 225, color: 'text-cyan-400' },\r\n        { label: 'Support', icon: 'support_agent', angle: 270, color: 'text-indigo-400' },\r\n        { label: 'Finance', icon: 'account_balance', angle: 315, color: 'text-yellow-400' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-full h-full bg-gradient-to-br from-white via-indigo-50 to-purple-50 rounded-2xl shadow-2xl border border-indigo-200 flex flex-col overflow-hidden relative\">\r\n            {/* Background Animation */}\r\n            <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(99,102,241,0.1),transparent_50%)]\"></div>\r\n                <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent animate-pulse\"></div>\r\n            </div>\r\n\r\n            {/* AI Brain Hub Section */}\r\n            <div className=\"relative p-8 border-b border-indigo-200 bg-gradient-to-b from-indigo-100/30 to-transparent\">\r\n                {/* Central Brain Container */}\r\n                <div className=\"relative w-48 h-48 mx-auto mb-6\">\r\n                    {/* Animated Pulse Rings */}\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <div className=\"absolute w-32 h-32 rounded-full bg-gradient-to-r from-cyan-500 to-indigo-500 opacity-20 animate-ping\"></div>\r\n                        <div className=\"absolute w-40 h-40 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 opacity-10 animate-pulse\"></div>\r\n                    </div>\r\n\r\n                    {/* Tool Connections */}\r\n                    {toolConnections.map((tool, idx) => {\r\n                        const radius = 90;\r\n                        const x = Math.cos((tool.angle * Math.PI) / 180) * radius;\r\n                        const y = Math.sin((tool.angle * Math.PI) / 180) * radius;\r\n\r\n                        return (\r\n                            <div key={idx}>\r\n                                {/* Connection Line */}\r\n                                <svg className=\"absolute inset-0 w-full h-full pointer-events-none\" style={{ zIndex: 1 }}>\r\n                                    <line\r\n                                        x1=\"50%\"\r\n                                        y1=\"50%\"\r\n                                        x2={`calc(50% + ${x}px)`}\r\n                                        y2={`calc(50% + ${y}px)`}\r\n                                        stroke=\"url(#gradient)\"\r\n                                        strokeWidth=\"1\"\r\n                                        className=\"animate-pulse\"\r\n                                        opacity=\"0.4\"\r\n                                    />\r\n                                    <defs>\r\n                                        <linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                            <stop offset=\"0%\" stopColor=\"#6366f1\" stopOpacity=\"0\" />\r\n                                            <stop offset=\"50%\" stopColor=\"#8b5cf6\" stopOpacity=\"1\" />\r\n                                            <stop offset=\"100%\" stopColor=\"#ec4899\" stopOpacity=\"0\" />\r\n                                        </linearGradient>\r\n                                    </defs>\r\n                                </svg>\r\n\r\n                                {/* Tool Icon */}\r\n                                <div\r\n                                    className=\"absolute w-10 h-10 -ml-5 -mt-5 flex items-center justify-center bg-white backdrop-blur-md rounded-lg border border-indigo-300 shadow-lg hover:scale-110 transition-transform cursor-pointer group\"\r\n                                    style={{\r\n                                        left: `calc(50% + ${x}px)`,\r\n                                        top: `calc(50% + ${y}px)`,\r\n                                        zIndex: 10,\r\n                                    }}\r\n                                >\r\n                                    <span className={`material-icons text-sm ${tool.color} group-hover:scale-125 transition-transform`}>\r\n                                        {tool.icon}\r\n                                    </span>\r\n                                    <div className=\"absolute -bottom-6 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-slate-800 px-2 py-1 rounded text-[10px] font-bold text-white whitespace-nowrap\">\r\n                                        {tool.label}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n\r\n                    {/* Central Brain Icon */}\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\" style={{ zIndex: 20 }}>\r\n                        <div className=\"relative w-24 h-24 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-2xl shadow-indigo-500/50 animate-pulse\">\r\n                            <div className=\"absolute inset-1 bg-white rounded-full flex items-center justify-center\">\r\n                                <span className=\"material-icons text-5xl bg-gradient-to-br from-cyan-400 via-indigo-400 to-pink-400 bg-clip-text text-transparent\">\r\n                                    psychology\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <div className=\"text-center\">\r\n                    <h2 className=\"text-2xl font-black bg-gradient-to-r from-cyan-400 via-indigo-400 to-pink-400 bg-clip-text text-transparent mb-2\">\r\n                        AI Co-Founder\r\n                    </h2>\r\n                    <p className=\"text-indigo-700 text-sm font-medium\">\r\n                        Central Intelligence • Connected to All Business Functions\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Messages Area */}\r\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-4 relative z-10\" style={{ scrollbarWidth: 'thin', scrollbarColor: '#4f46e5 transparent' }}>\r\n                {messages.map((msg, idx) => (\r\n                    <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} animate-in fade-in slide-in-from-bottom-2 duration-300`}>\r\n                        {msg.role === 'ai' && (\r\n                            <div className=\"w-8 h-8 mr-3 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 flex items-center justify-center flex-shrink-0 mt-1 shadow-lg\">\r\n                                <span className=\"material-icons text-white text-sm\">psychology</span>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className={`max-w-[80%] rounded-2xl shadow-lg backdrop-blur-md ${msg.role === 'user'\r\n                            ? 'bg-gradient-to-br from-indigo-600 to-purple-600 text-white rounded-tr-none'\r\n                            : 'bg-white border-2 border-indigo-200 text-slate-800 rounded-tl-none'\r\n                            }`}>\r\n                            <div className=\"px-4 py-3\">\r\n                                <p className=\"text-sm whitespace-pre-wrap leading-relaxed\">{msg.content}</p>\r\n                            </div>\r\n\r\n                            {msg.attachments && msg.attachments.length > 0 && (\r\n                                <div className={`px-4 pb-3 space-y-2 border-t ${msg.role === 'user' ? 'border-white/20' : 'border-indigo-200'} pt-2`}>\r\n                                    {msg.attachments.map((att, i) => (\r\n                                        <div key={i} className={`flex items-center gap-2 p-2 rounded-lg ${msg.role === 'user' ? 'bg-white/10' : 'bg-indigo-50 border border-indigo-100'}`}>\r\n                                            {att.type === 'image' ? (\r\n                                                <img src={att.url} alt={att.name} className=\"w-8 h-8 rounded object-cover\" />\r\n                                            ) : (\r\n                                                <span className=\"material-icons text-lg opacity-70\">description</span>\r\n                                            )}\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <p className=\"text-xs font-semibold truncate\">{att.name}</p>\r\n                                                <p className=\"text-[10px] opacity-70\">{att.size}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"px-4 pb-2 text-[10px] text-right opacity-60 font-medium\">\r\n                                {msg.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {msg.role === 'user' && (\r\n                            <div className=\"w-8 h-8 ml-3 rounded-full bg-gradient-to-br from-slate-700 to-slate-600 flex items-center justify-center flex-shrink-0 mt-1\">\r\n                                <span className=\"material-icons text-slate-300 text-sm\">person</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n\r\n                {isLoading && (\r\n                    <div className=\"flex justify-start animate-in fade-in\">\r\n                        <div className=\"w-8 h-8 mr-3 rounded-full bg-gradient-to-br from-indigo-500 to-pink-500 flex items-center justify-center shadow-lg\">\r\n                            <span className=\"material-icons text-white text-sm animate-spin\">psychology</span>\r\n                        </div>\r\n                        <div className=\"bg-white border-2 border-indigo-200 rounded-2xl rounded-tl-none px-4 py-3 shadow-lg\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"flex gap-1\">\r\n                                    <span className=\"w-2 h-2 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.3s]\"></span>\r\n                                    <span className=\"w-2 h-2 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.15s]\"></span>\r\n                                    <span className=\"w-2 h-2 bg-indigo-400 rounded-full animate-bounce\"></span>\r\n                                </span>\r\n                                <span className=\"text-xs text-indigo-700 font-medium ml-2\">Thinking...</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"px-6 py-3 border-t border-indigo-200 bg-white/80 backdrop-blur-sm\">\r\n                <div className=\"flex gap-2 overflow-x-auto pb-2\" style={{ scrollbarWidth: 'none' }}>\r\n                    {quickActions.map((action, idx) => (\r\n                        <button\r\n                            key={idx}\r\n                            onClick={() => handleQuickAction(action.label)}\r\n                            className={`flex-shrink-0 px-4 py-2 rounded-xl bg-gradient-to-r ${action.gradient} text-white text-xs font-bold shadow-lg hover:scale-105 transition-all flex items-center gap-2 hover:shadow-xl`}\r\n                        >\r\n                            <span className=\"material-icons text-sm\">{action.icon}</span>\r\n                            {action.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Attachment Preview */}\r\n            {attachments.length > 0 && (\r\n                <div className=\"px-6 py-3 bg-indigo-50/50 border-t border-indigo-200 flex gap-2 overflow-x-auto\">\r\n                    {attachments.map((file, idx) => (\r\n                        <div key={idx} className=\"relative group bg-white border border-indigo-300 rounded-lg p-2 min-w-[120px] flex items-center gap-2 shadow-md\">\r\n                            <button\r\n                                onClick={() => removeAttachment(idx)}\r\n                                className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-0.5 shadow-md opacity-0 group-hover:opacity-100 transition-opacity z-10\"\r\n                            >\r\n                                <span className=\"material-icons text-xs block\">close</span>\r\n                            </button>\r\n                            <span className=\"material-icons text-indigo-400 text-lg\">\r\n                                {file.type.startsWith('image/') ? 'image' : 'description'}\r\n                            </span>\r\n                            <div className=\"overflow-hidden\">\r\n                                <p className=\"text-xs font-medium text-slate-800 truncate w-20\">{file.name}</p>\r\n                                <p className=\"text-[10px] text-indigo-600\">{(file.size / 1024).toFixed(0)} KB</p>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Input Area */}\r\n            <div className=\"p-4 bg-white/90 backdrop-blur-md border-t border-indigo-200 relative z-20\">\r\n                <div className=\"flex items-end gap-2 bg-white border-2 border-indigo-300 rounded-xl p-2 focus-within:ring-2 focus-within:ring-indigo-400 focus-within:border-indigo-500 transition-all shadow-lg\">\r\n                    {/* Left Icons: Upload & Voice */}\r\n                    <div className=\"flex gap-1 pb-1 pl-1\">\r\n                        <input ref={fileInputRef} type=\"file\" multiple className=\"hidden\" onChange={(e) => handleFileSelect(e.target.files)} />\r\n                        <button\r\n                            onClick={() => fileInputRef.current?.click()}\r\n                            className=\"p-2 text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-lg transition-all\"\r\n                            title=\"Upload Documents\"\r\n                        >\r\n                            <span className=\"material-icons text-xl\">attach_file</span>\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={handleVoiceInput}\r\n                            className={`p-2 rounded-lg transition-all ${isRecording ? 'text-red-400 bg-red-500/10 animate-pulse' : 'text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10'}`}\r\n                            title=\"Voice Input (All Indian Languages)\"\r\n                        >\r\n                            <span className=\"material-icons text-xl\">{isRecording ? 'mic' : 'mic_none'}</span>\r\n                        </button>\r\n\r\n                        <button\r\n                            className=\"p-2 text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 rounded-lg transition-all relative group\"\r\n                            title=\"Multi-language Support\"\r\n                        >\r\n                            <span className=\"material-icons text-xl\">translate</span>\r\n                            <div className=\"absolute bottom-full left-0 mb-2 hidden group-hover:block bg-slate-800 text-white text-[10px] px-3 py-2 rounded-lg shadow-xl whitespace-nowrap border border-indigo-400\">\r\n                                🇮🇳 Hindi • English • Telugu • Tamil • Bengali\r\n                            </div>\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Input */}\r\n                    <textarea\r\n                        value={inputValue}\r\n                        onChange={(e) => setInputValue(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                        placeholder=\"Ask anything... (Type in English, Hindi, Telugu, or any Indian language)\"\r\n                        disabled={isLoading}\r\n                        rows={1}\r\n                        className=\"flex-1 bg-transparent border-none outline-none text-slate-800 placeholder:text-indigo-400/60 text-sm py-3 px-2 resize-none max-h-32 min-h-[44px]\"\r\n                    />\r\n\r\n                    {/* Send Button */}\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        disabled={(!inputValue.trim() && attachments.length === 0) || isLoading}\r\n                        className={`p-3 rounded-xl transition-all flex items-center justify-center mb-0.5 shadow-lg ${(!inputValue.trim() && attachments.length === 0) || isLoading\r\n                            ? 'bg-slate-300 text-slate-400 cursor-not-allowed'\r\n                            : 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-700 hover:to-purple-700 hover:shadow-indigo-500/50 hover:scale-105'\r\n                            }`}\r\n                    >\r\n                        {isLoading ? (\r\n                            <span className=\"material-icons animate-spin\">refresh</span>\r\n                        ) : (\r\n                            <span className=\"material-icons\">send</span>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AiCoFounderChat;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\ClaudeStyleAiCoFounder.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Draggable' is defined but never used.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'replyingTo' is assigned a value but never used.","line":134,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setReplyingTo' is assigned a value but never used.","line":134,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":37},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":446,"column":29,"nodeType":"JSXOpeningElement","endLine":446,"endColumn":140}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport Draggable from 'react-draggable';\r\n\r\ninterface Message {\r\n    id: string;\r\n    role: 'user' | 'ai';\r\n    content: string;\r\n    timestamp: Date;\r\n    chatId: string;\r\n    projectId?: string;\r\n    artifacts?: Artifact[];\r\n    toolRecommendations?: ToolRecommendation[];\r\n}\r\n\r\ninterface Artifact {\r\n    id: string;\r\n    type: 'image' | 'document' | 'code' | 'chart' | 'table';\r\n    name: string;\r\n    content: string;\r\n    url?: string;\r\n    exportFormats: ExportFormat[];\r\n}\r\n\r\ninterface ExportFormat {\r\n    type: 'docs' | 'slides' | 'sheets' | 'csv' | 'pdf' | 'png' | 'jpg';\r\n    icon: string;\r\n    label: string;\r\n}\r\n\r\ninterface ToolRecommendation {\r\n    toolId: string;\r\n    toolName: string;\r\n    toolIcon: string;\r\n    reason: string;\r\n    connected: boolean;\r\n    canConnect: boolean;\r\n}\r\n\r\ninterface Chat {\r\n    id: string;\r\n    name: string;\r\n    createdAt: Date;\r\n    lastMessageAt: Date;\r\n    messageCount: number;\r\n    projectId?: string;\r\n}\r\n\r\ninterface Project {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    color: string;\r\n    icon: string;\r\n    createdAt: Date;\r\n    chatCount: number;\r\n}\r\n\r\ninterface ConnectedTool {\r\n    id: string;\r\n    name: string;\r\n    icon: string;\r\n    status: 'connected' | 'disconnected';\r\n    lastUsed?: Date;\r\n}\r\n\r\ntype ViewMode = 'quick' | 'deep' | 'minimized';\r\ntype SidebarView = 'chats' | 'projects' | 'connectors' | 'artifacts';\r\n\r\nconst ClaudeStyleAiCoFounder: React.FC = () => {\r\n    const [mode, setMode] = useState<ViewMode>('deep');\r\n    const [sidebarView, setSidebarView] = useState<SidebarView>('projects');\r\n    const [showArtifactsPanel, setShowArtifactsPanel] = useState(true);\r\n\r\n    // Projects\r\n    const [projects, setProjects] = useState<Project[]>([\r\n        {\r\n            id: 'default',\r\n            name: 'General Business',\r\n            description: 'General business discussions and planning',\r\n            color: 'indigo',\r\n            icon: 'business_center',\r\n            createdAt: new Date(),\r\n            chatCount: 1\r\n        }\r\n    ]);\r\n    const [currentProjectId, setCurrentProjectId] = useState('default');\r\n    const [showNewProjectModal, setShowNewProjectModal] = useState(false);\r\n    const [newProjectName, setNewProjectName] = useState('');\r\n    const [newProjectDesc, setNewProjectDesc] = useState('');\r\n\r\n    // Chats\r\n    const [chats, setChats] = useState<Chat[]>([\r\n        {\r\n            id: 'default',\r\n            name: 'Getting Started',\r\n            createdAt: new Date(),\r\n            lastMessageAt: new Date(),\r\n            messageCount: 1,\r\n            projectId: 'default'\r\n        }\r\n    ]);\r\n    const [currentChatId, setCurrentChatId] = useState('default');\r\n    const [showNewChatModal, setShowNewChatModal] = useState(false);\r\n    const [newChatName, setNewChatName] = useState('');\r\n\r\n    // Messages & Artifacts\r\n    const [messages, setMessages] = useState<Message[]>([\r\n        {\r\n            id: '1',\r\n            role: 'ai',\r\n            content: \"नमस्ते! Welcome to your AI Co-Founder 🚀\\n\\nI can help you with:\\n• Create and manage Projects\\n• Generate images, documents, charts\\n• Export to Google Docs, Slides, Sheets\\n• Connect with your dashboard tools\\n• Strategic business planning\\n\\nWhat would you like to build today?\",\r\n            timestamp: new Date(),\r\n            chatId: 'default',\r\n            projectId: 'default'\r\n        }\r\n    ]);\r\n    const [selectedArtifact, setSelectedArtifact] = useState<Artifact | null>(null);\r\n\r\n    // Connected Tools\r\n    const [connectedTools, setConnectedTools] = useState<ConnectedTool[]>([\r\n        { id: 'gmail', name: 'Gmail', icon: 'mail', status: 'connected', lastUsed: new Date() },\r\n        { id: 'gdrive', name: 'Google Drive', icon: 'cloud', status: 'connected', lastUsed: new Date() },\r\n        { id: 'calendar', name: 'Calendar', icon: 'event', status: 'connected' },\r\n        { id: 'sheets', name: 'Sheets', icon: 'table_chart', status: 'connected' },\r\n        { id: 'crm', name: 'CRM', icon: 'people', status: 'disconnected' },\r\n        { id: 'analytics', name: 'Analytics', icon: 'analytics', status: 'disconnected' }\r\n    ]);\r\n\r\n    // UI State\r\n    const [inputValue, setInputValue] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [replyingTo, setReplyingTo] = useState<string | null>(null);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages]);\r\n\r\n    const currentProject = projects.find(p => p.id === currentProjectId);\r\n    const currentChat = chats.find(c => c.id === currentChatId);\r\n    const currentMessages = messages.filter(m => m.chatId === currentChatId);\r\n    const projectChats = chats.filter(c => c.projectId === currentProjectId);\r\n\r\n    // Create New Project\r\n    const createNewProject = () => {\r\n        if (!newProjectName.trim()) return;\r\n\r\n        const colors = ['indigo', 'purple', 'pink', 'blue', 'green', 'orange', 'red'];\r\n        const icons = ['folder', 'work', 'business_center', 'campaign', 'analytics', 'store'];\r\n\r\n        const newProject: Project = {\r\n            id: `proj-${Date.now()}`,\r\n            name: newProjectName,\r\n            description: newProjectDesc,\r\n            color: colors[Math.floor(Math.random() * colors.length)],\r\n            icon: icons[Math.floor(Math.random() * icons.length)],\r\n            createdAt: new Date(),\r\n            chatCount: 0\r\n        };\r\n\r\n        setProjects(prev => [newProject, ...prev]);\r\n        setCurrentProjectId(newProject.id);\r\n        setNewProjectName('');\r\n        setNewProjectDesc('');\r\n        setShowNewProjectModal(false);\r\n    };\r\n\r\n    // Create New Chat\r\n    const createNewChat = () => {\r\n        if (!newChatName.trim()) return;\r\n\r\n        const newChat: Chat = {\r\n            id: `chat-${Date.now()}`,\r\n            name: newChatName,\r\n            createdAt: new Date(),\r\n            lastMessageAt: new Date(),\r\n            messageCount: 0,\r\n            projectId: currentProjectId\r\n        };\r\n\r\n        setChats(prev => [newChat, ...prev]);\r\n        setCurrentChatId(newChat.id);\r\n        setNewChatName('');\r\n        setShowNewChatModal(false);\r\n\r\n        // Update project chat count\r\n        setProjects(prev => prev.map(p =>\r\n            p.id === currentProjectId ? { ...p, chatCount: p.chatCount + 1 } : p\r\n        ));\r\n    };\r\n\r\n    // Handle Message Submit\r\n    const handleSubmit = async () => {\r\n        if (!inputValue.trim() || isLoading) return;\r\n\r\n        const userMessage: Message = {\r\n            id: `msg-${Date.now()}`,\r\n            role: 'user',\r\n            content: inputValue,\r\n            timestamp: new Date(),\r\n            chatId: currentChatId,\r\n            projectId: currentProjectId\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInputValue('');\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/ai-cofounder-claude', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: inputValue,\r\n                    chatId: currentChatId,\r\n                    projectId: currentProjectId,\r\n                    projectName: currentProject?.name,\r\n                    mode: mode === 'deep' ? 'deep' : 'quick',\r\n                    conversationHistory: currentMessages.slice(-10),\r\n                    connectedTools: connectedTools.filter(t => t.status === 'connected')\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                const aiMessage: Message = {\r\n                    id: `msg-${Date.now()}`,\r\n                    role: 'ai',\r\n                    content: data.response,\r\n                    timestamp: new Date(),\r\n                    chatId: currentChatId,\r\n                    projectId: currentProjectId,\r\n                    artifacts: data.artifacts,\r\n                    toolRecommendations: data.toolRecommendations\r\n                };\r\n                setMessages(prev => [...prev, aiMessage]);\r\n\r\n                if (data.artifacts && data.artifacts.length > 0) {\r\n                    setSelectedArtifact(data.artifacts[0]);\r\n                    setShowArtifactsPanel(true);\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('AI error:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // Export Artifact\r\n    const handleExportArtifact = async (artifact: Artifact, format: ExportFormat) => {\r\n        try {\r\n            const response = await fetch('/api/export-artifact', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    artifact,\r\n                    format: format.type,\r\n                    projectId: currentProjectId,\r\n                    projectName: currentProject?.name\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                // Show success toast\r\n                console.log(`Exported to ${format.label}:`, data.url);\r\n            }\r\n        } catch (error) {\r\n            console.error('Export error:', error);\r\n        }\r\n    };\r\n\r\n    // Download Artifact\r\n    const handleDownloadArtifact = (artifact: Artifact) => {\r\n        if (artifact.url) {\r\n            const link = document.createElement('a');\r\n            link.href = artifact.url;\r\n            link.download = artifact.name;\r\n            link.click();\r\n        }\r\n    };\r\n\r\n    // Connect Tool\r\n    const handleConnectTool = async (toolId: string) => {\r\n        setConnectedTools(prev => prev.map(t =>\r\n            t.id === toolId ? { ...t, status: 'connected' as const, lastUsed: new Date() } : t\r\n        ));\r\n    };\r\n\r\n    // Render Sidebar\r\n    const renderSidebar = () => {\r\n        if (sidebarView === 'projects') {\r\n            return (\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    <button\r\n                        onClick={() => setShowNewProjectModal(true)}\r\n                        className=\"w-full bg-indigo-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-[10px] md:text-xs font-bold hover:bg-indigo-700 transition-all flex items-center justify-center gap-1 mb-2\"\r\n                    >\r\n                        <span className=\"material-icons text-xs\">add</span>\r\n                        <span className=\"hidden md:inline\">New Project</span>\r\n                    </button>\r\n\r\n                    <div className=\"space-y-1.5\">\r\n                        {projects.map(project => (\r\n                            <button\r\n                                key={project.id}\r\n                                onClick={() => setCurrentProjectId(project.id)}\r\n                                className={`w-full text-left px-2 md:px-2.5 py-1.5 md:py-2 rounded-lg transition-all ${project.id === currentProjectId\r\n                                    ? 'bg-indigo-100 border border-indigo-400'\r\n                                    : 'bg-white border border-indigo-100 hover:bg-indigo-50'\r\n                                    }`}\r\n                            >\r\n                                <div className=\"flex items-center gap-1.5 md:gap-2\">\r\n                                    <span className={`material-icons text-xs md:text-sm text-${project.color}-600 flex-shrink-0`}>{project.icon}</span>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"font-bold text-[10px] md:text-xs text-slate-800 truncate\">{project.name}</div>\r\n                                        <div className=\"text-[8px] md:text-[9px] text-slate-500\">{project.chatCount} chats</div>\r\n                                    </div>\r\n                                </div>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (sidebarView === 'chats') {\r\n            return (\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    <button\r\n                        onClick={() => setShowNewChatModal(true)}\r\n                        className=\"w-full bg-indigo-600 text-white px-2 md:px-3 py-1.5 md:py-2 rounded text-[10px] md:text-xs font-bold hover:bg-indigo-700 transition-all flex items-center justify-center gap-1 mb-2\"\r\n                    >\r\n                        <span className=\"material-icons text-xs\">add</span>\r\n                        <span className=\"hidden md:inline\">New Chat</span>\r\n                    </button>\r\n\r\n                    <div className=\"text-[9px] md:text-[10px] font-bold text-slate-500 mb-1 md:mb-1.5 px-1 truncate\">\r\n                        {currentProject?.name}\r\n                    </div>\r\n\r\n                    <div className=\"space-y-1\">\r\n                        {projectChats.map(chat => (\r\n                            <button\r\n                                key={chat.id}\r\n                                onClick={() => setCurrentChatId(chat.id)}\r\n                                className={`w-full text-left px-2 py-1.5 rounded-md transition-all ${chat.id === currentChatId\r\n                                    ? 'bg-indigo-200 border-l-2 border-indigo-600'\r\n                                    : 'bg-white hover:bg-indigo-50 border-l-2 border-transparent'\r\n                                    }`}\r\n                            >\r\n                                <div className=\"font-semibold text-[10px] md:text-xs text-slate-800 truncate\">{chat.name}</div>\r\n                                <div className=\"text-[8px] md:text-[9px] text-slate-500\">{chat.messageCount} msgs</div>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (sidebarView === 'connectors') {\r\n            return (\r\n                <div className=\"flex-1 overflow-y-auto space-y-2\">\r\n                    <div className=\"text-[10px] md:text-xs font-bold text-slate-700 mb-2\">Tools</div>\r\n                    {connectedTools.map(tool => (\r\n                        <div\r\n                            key={tool.id}\r\n                            className={`p-2 md:p-2.5 rounded-lg border transition-all ${tool.status === 'connected'\r\n                                ? 'bg-green-50 border-green-300'\r\n                                : 'bg-slate-50 border-slate-200'\r\n                                }`}\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-1\">\r\n                                <div className=\"flex items-center gap-1.5 min-w-0 flex-1\">\r\n                                    <span className=\"material-icons text-sm md:text-base text-indigo-600 flex-shrink-0\">{tool.icon}</span>\r\n                                    <span className=\"font-bold text-[10px] md:text-xs truncate\">{tool.name}</span>\r\n                                </div>\r\n                                {tool.status === 'connected' ? (\r\n                                    <span className=\"px-1.5 py-0.5 bg-green-600 text-white text-[8px] md:text-[9px] font-bold rounded-full flex-shrink-0\">\r\n                                        ✓\r\n                                    </span>\r\n                                ) : (\r\n                                    <button\r\n                                        onClick={() => handleConnectTool(tool.id)}\r\n                                        className=\"px-1.5 py-0.5 bg-indigo-600 text-white text-[8px] md:text-[9px] font-bold rounded-full hover:bg-indigo-700 flex-shrink-0\"\r\n                                    >\r\n                                        Connect\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                            {tool.lastUsed && (\r\n                                <div className=\"text-[8px] md:text-[9px] text-slate-500 truncate\">\r\n                                    Last used: {tool.lastUsed.toLocaleDateString()}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    // Render Artifacts Panel\r\n    const renderArtifactsPanel = () => {\r\n        if (!showArtifactsPanel || !selectedArtifact) return null;\r\n\r\n        return (\r\n            <div className=\"w-72 md:w-80 lg:w-96 border-l border-slate-200 bg-white flex flex-col animate-in slide-in-from-right duration-300 flex-shrink-0\">\r\n                {/* Header */}\r\n                <div className=\"p-2 md:p-3 border-b border-slate-200 flex items-center justify-between flex-shrink-0\">\r\n                    <div className=\"flex items-center gap-1.5\">\r\n                        <span className=\"material-icons text-indigo-600 text-sm\">folder_special</span>\r\n                        <span className=\"font-bold text-xs md:text-sm\">Artifacts</span>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setShowArtifactsPanel(false)}\r\n                        className=\"p-1 hover:bg-slate-100 rounded transition-all\"\r\n                    >\r\n                        <span className=\"material-icons text-xs\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Artifact Preview */}\r\n                <div className=\"flex-1 overflow-y-auto p-2 md:p-3\">\r\n                    <div className=\"bg-slate-100 rounded-lg md:rounded-xl p-2 md:p-3 mb-2 md:mb-3\">\r\n                        <div className=\"flex items-center gap-1.5 mb-2\">\r\n                            <span className=\"material-icons text-base md:text-xl text-indigo-600\">\r\n                                {selectedArtifact.type === 'image' ? 'image' :\r\n                                    selectedArtifact.type === 'code' ? 'code' :\r\n                                        selectedArtifact.type === 'chart' ? 'bar_chart' :\r\n                                            selectedArtifact.type === 'table' ? 'table_chart' : 'description'}\r\n                            </span>\r\n                            <div className=\"min-w-0 flex-1\">\r\n                                <div className=\"font-bold text-xs md:text-sm text-slate-800 truncate\">{selectedArtifact.name}</div>\r\n                                <div className=\"text-[8px] md:text-[9px] text-slate-500 capitalize truncate\">{selectedArtifact.type}</div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {selectedArtifact.url && selectedArtifact.type === 'image' && (\r\n                            <img src={selectedArtifact.url} alt={selectedArtifact.name} className=\"w-full rounded-md md:rounded-lg mb-2\" />\r\n                        )}\r\n\r\n                        {selectedArtifact.content && (\r\n                            <div className=\"bg-white p-2 md:p-2.5 rounded-md text-[9px] md:text-xs font-mono max-h-32 md:max-h-48 overflow-y-auto\">\r\n                                {selectedArtifact.content}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Export Options */}\r\n                    <div className=\"space-y-1.5\">\r\n                        <div className=\"text-[9px] md:text-[10px] font-bold text-slate-600 mb-1.5\">Export:</div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-1.5 md:gap-2\">\r\n                            <button\r\n                                onClick={() => handleDownloadArtifact(selectedArtifact)}\r\n                                className=\"p-2 md:p-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-[9px] md:text-xs font-bold flex flex-col items-center gap-0.5 md:gap-1 transition-all\"\r\n                            >\r\n                                <span className=\"material-icons text-xs md:text-sm\">download</span>\r\n                                <span className=\"hidden md:inline\">Download</span>\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => handleExportArtifact(selectedArtifact, { type: 'docs', icon: 'description', label: 'Google Docs' })}\r\n                                className=\"p-2 md:p-2.5 bg-blue-500 hover:bg-blue-600 text-white rounded-md text-[9px] md:text-xs font-bold flex flex-col items-center gap-0.5 md:gap-1 transition-all\"\r\n                            >\r\n                                <span className=\"material-icons text-xs md:text-sm\">description</span>\r\n                                Docs\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => handleExportArtifact(selectedArtifact, { type: 'slides', icon: 'slideshow', label: 'Google Slides' })}\r\n                                className=\"p-2 md:p-2.5 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md text-[9px] md:text-xs font-bold flex flex-col items-center gap-0.5 md:gap-1 transition-all\"\r\n                            >\r\n                                <span className=\"material-icons text-xs md:text-sm\">slideshow</span>\r\n                                Slides\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => handleExportArtifact(selectedArtifact, { type: 'sheets', icon: 'table_chart', label: 'Google Sheets' })}\r\n                                className=\"p-2 md:p-2.5 bg-green-500 hover:bg-green-600 text-white rounded-md text-[9px] md:text-xs font-bold flex flex-col items-center gap-0.5 md:gap-1 transition-all\"\r\n                            >\r\n                                <span className=\"material-icons text-xs md:text-sm\">table_chart</span>\r\n                                Sheets\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => handleExportArtifact(selectedArtifact, { type: 'pdf', icon: 'picture_as_pdf', label: 'PDF' })}\r\n                                className=\"p-2 md:p-2.5 bg-red-500 hover:bg-red-600 text-white rounded-md text-[9px] md:text-xs font-bold flex flex-col items-center gap-0.5 md:gap-1 transition-all\"\r\n                            >\r\n                                <span className=\"material-icons text-xs md:text-sm\">picture_as_pdf</span>\r\n                                PDF\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => handleExportArtifact(selectedArtifact, { type: 'csv', icon: 'table_view', label: 'CSV' })}\r\n                                className=\"p-2 md:p-2.5 bg-teal-500 hover:bg-teal-600 text-white rounded-md text-[9px] md:text-xs font-bold flex flex-col items-center gap-0.5 md:gap-1 transition-all\"\r\n                            >\r\n                                <span className=\"material-icons text-xs md:text-sm\">table_view</span>\r\n                                CSV\r\n                            </button>\r\n                        </div>\r\n\r\n                        <button\r\n                            className=\"w-full p-2 md:p-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-md md:rounded-lg text-[10px] md:text-xs font-bold flex items-center justify-center gap-1 md:gap-1.5 transition-all mt-2\"\r\n                        >\r\n                            <span className=\"material-icons text-xs md:text-sm\">cloud</span>\r\n                            <span>Save to Workspace</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // Deep Mode (Claude-style full screen)\r\n    if (mode === 'deep') {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-white z-50 flex animate-in fade-in duration-300 overflow-hidden\">\r\n                {/* Left Sidebar */}\r\n                <div className=\"w-48 md:w-56 lg:w-60 border-r border-slate-200 bg-slate-50 flex flex-col animate-in slide-in-from-left duration-500 flex-shrink-0\">\r\n                    {/* Sidebar Header */}\r\n                    <div className=\"p-2 md:p-3 border-b border-slate-200\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                            <div className=\"w-7 h-7 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-md flex items-center justify-center flex-shrink-0\">\r\n                                <span className=\"material-icons text-white text-sm\">psychology</span>\r\n                            </div>\r\n                            <div className=\"min-w-0\">\r\n                                <h2 className=\"font-bold text-xs md:text-sm text-slate-800 truncate\">AI Co-Founder</h2>\r\n                                <p className=\"text-[9px] text-slate-500 truncate\">Claude-style</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Sidebar Tabs */}\r\n                        <div className=\"grid grid-cols-4 gap-0.5 bg-slate-200 p-0.5 rounded-md\">\r\n                            <button\r\n                                onClick={() => setSidebarView('projects')}\r\n                                className={`p-1.5 rounded-sm transition-all ${sidebarView === 'projects' ? 'bg-white shadow-sm' : 'hover:bg-slate-100'}`}\r\n                                title=\"Projects\"\r\n                            >\r\n                                <span className=\"material-icons text-xs\">folder</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setSidebarView('chats')}\r\n                                className={`p-1.5 rounded-sm transition-all ${sidebarView === 'chats' ? 'bg-white shadow-sm' : 'hover:bg-slate-100'}`}\r\n                                title=\"Chats\"\r\n                            >\r\n                                <span className=\"material-icons text-xs\">chat</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setSidebarView('connectors')}\r\n                                className={`p-1.5 rounded-sm transition-all ${sidebarView === 'connectors' ? 'bg-white shadow-sm' : 'hover:bg-slate-100'}`}\r\n                                title=\"Connectors\"\r\n                            >\r\n                                <span className=\"material-icons text-xs\">extension</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setMode('quick')}\r\n                                className=\"p-1.5 rounded-sm hover:bg-slate-100 transition-all\"\r\n                                title=\"Minimize\"\r\n                            >\r\n                                <span className=\"material-icons text-xs\">close_fullscreen</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sidebar Content */}\r\n                    <div className=\"flex-1 p-2 md:p-3 overflow-hidden flex flex-col\">\r\n                        {renderSidebar()}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Chat Area */}\r\n                <div className=\"flex-1 flex flex-col min-w-0 overflow-hidden\">\r\n                    {/* Chat Header */}\r\n                    <div className=\"h-10 md:h-12 border-b border-slate-200 px-3 md:px-4 flex items-center justify-between flex-shrink-0\">\r\n                        <div className=\"min-w-0 flex-1 mr-2\">\r\n                            <h3 className=\"font-bold text-xs md:text-sm text-slate-800 truncate\">{currentChat?.name}</h3>\r\n                            <p className=\"text-[10px] text-slate-500 truncate\">{currentProject?.name}</p>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setShowArtifactsPanel(!showArtifactsPanel)}\r\n                            className=\"px-2 md:px-3 py-1 md:py-1.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-md text-[10px] md:text-xs font-bold flex items-center gap-1 transition-all flex-shrink-0\"\r\n                        >\r\n                            <span className=\"material-icons text-xs\">folder_special</span>\r\n                            <span className=\"hidden md:inline\">Artifacts</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Messages */}\r\n                    <div className=\"flex-1 overflow-y-auto p-2 md:p-4 space-y-3 md:space-y-4\">\r\n                        {currentMessages.map(msg => (\r\n                            <div key={msg.id} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} animate-in fade-in slide-in-from-bottom-2 duration-300`}>\r\n                                {msg.role === 'ai' && (\r\n                                    <div className=\"w-8 h-8 mr-3 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center flex-shrink-0\">\r\n                                        <span className=\"material-icons text-white text-sm\">psychology</span>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"max-w-[85%] md:max-w-[75%] lg:max-w-[70%]\">\r\n                                    <div className={`rounded-xl md:rounded-2xl p-2 md:p-3 ${msg.role === 'user'\r\n                                        ? 'bg-indigo-600 text-white'\r\n                                        : 'bg-slate-100 text-slate-800'\r\n                                        }`}>\r\n                                        <p className=\"text-xs md:text-sm whitespace-pre-wrap leading-relaxed\">{msg.content}</p>\r\n                                    </div>\r\n\r\n                                    {/* Artifacts */}\r\n                                    {msg.artifacts && msg.artifacts.length > 0 && (\r\n                                        <div className=\"mt-1.5 md:mt-2 space-y-1.5\">\r\n                                            {msg.artifacts.map(artifact => (\r\n                                                <button\r\n                                                    key={artifact.id}\r\n                                                    onClick={() => {\r\n                                                        setSelectedArtifact(artifact);\r\n                                                        setShowArtifactsPanel(true);\r\n                                                    }}\r\n                                                    className=\"w-full p-2 md:p-2.5 bg-white border border-indigo-200 rounded-lg hover:border-indigo-400 transition-all flex items-center gap-2\"\r\n                                                >\r\n                                                    <span className=\"material-icons text-indigo-600 text-sm md:text-base\">\r\n                                                        {artifact.type === 'image' ? 'image' : 'description'}\r\n                                                    </span>\r\n                                                    <span className=\"text-xs md:text-sm font-bold text-slate-700 truncate flex-1 text-left\">{artifact.name}</span>\r\n                                                    <span className=\"material-icons text-sm text-slate-400 ml-auto\">arrow_forward</span>\r\n                                                </button>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Tool Recommendations */}\r\n                                    {msg.toolRecommendations && msg.toolRecommendations.length > 0 && (\r\n                                        <div className=\"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg\">\r\n                                            <div className=\"text-[10px] md:text-xs font-bold text-amber-800 mb-1.5\">🔧 Tools</div>\r\n                                            {msg.toolRecommendations.map(rec => (\r\n                                                <div key={rec.toolId} className=\"flex items-center justify-between p-1.5 md:p-2 bg-white rounded-md mb-1\">\r\n                                                    <div className=\"flex items-center gap-1.5 min-w-0 flex-1\">\r\n                                                        <span className=\"material-icons text-xs md:text-sm\">{rec.toolIcon}</span>\r\n                                                        <div className=\"min-w-0 flex-1\">\r\n                                                            <div className=\"text-[10px] md:text-xs font-bold truncate\">{rec.toolName}</div>\r\n                                                            <div className=\"text-[9px] text-slate-500 truncate\">{rec.reason}</div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    {rec.canConnect && !rec.connected && (\r\n                                                        <button\r\n                                                            onClick={() => handleConnectTool(rec.toolId)}\r\n                                                            className=\"px-2 py-0.5 bg-indigo-600 text-white text-[9px] md:text-[10px] font-bold rounded-full hover:bg-indigo-700 flex-shrink-0\"\r\n                                                        >\r\n                                                            Connect\r\n                                                        </button>\r\n                                                    )}\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {msg.role === 'user' && (\r\n                                    <div className=\"w-6 h-6 ml-2 rounded-md bg-slate-700 flex items-center justify-center flex-shrink-0\">\r\n                                        <span className=\"material-icons text-white text-xs\">person</span>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n\r\n                        {isLoading && (\r\n                            <div className=\"flex justify-start\">\r\n                                <div className=\"bg-slate-100 rounded-xl px-4 py-2.5\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"flex gap-1\">\r\n                                            <span className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.3s]\"></span>\r\n                                            <span className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.15s]\"></span>\r\n                                            <span className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce\"></span>\r\n                                        </span>\r\n                                        <span className=\"text-xs text-slate-600 font-medium\">Thinking...</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div ref={messagesEndRef} />\r\n                    </div>\r\n\r\n                    {/* Input Area */}\r\n                    <div className=\"border-t border-slate-200 p-2 md:p-3\">\r\n                        <div className=\"max-w-4xl mx-auto bg-white border border-slate-300 rounded-lg md:rounded-xl p-2 md:p-2.5 focus-within:border-indigo-500 transition-all\">\r\n                            <textarea\r\n                                value={inputValue}\r\n                                onChange={(e) => setInputValue(e.target.value)}\r\n                                onKeyDown={(e) => {\r\n                                    if (e.key === 'Enter' && !e.shiftKey) {\r\n                                        e.preventDefault();\r\n                                        handleSubmit();\r\n                                    }\r\n                                }}\r\n                                placeholder=\"Ask anything...\"\r\n                                disabled={isLoading}\r\n                                rows={1}\r\n                                className=\"w-full bg-transparent border-none outline-none text-slate-800 placeholder:text-slate-400 text-xs md:text-sm resize-none\"\r\n                            />\r\n                            <div className=\"flex items-center justify-between mt-1.5\">\r\n                                <div className=\"flex items-center gap-1.5 text-[9px] md:text-[10px] text-slate-500\">\r\n                                    <span className=\"material-icons text-[10px]\">info</span>\r\n                                    <span className=\"hidden sm:inline\">{connectedTools.filter(t => t.status === 'connected').length} tools</span>\r\n                                </div>\r\n                                <button\r\n                                    onClick={handleSubmit}\r\n                                    disabled={!inputValue.trim() || isLoading}\r\n                                    className={`px-2.5 md:px-3 py-1 md:py-1.5 rounded-md text-xs font-bold flex items-center gap-1 transition-all ${!inputValue.trim() || isLoading\r\n                                        ? 'bg-slate-200 text-slate-400 cursor-not-allowed'\r\n                                        : 'bg-indigo-600 text-white hover:bg-indigo-700'\r\n                                        }`}\r\n                                >\r\n                                    <span className=\"material-icons text-xs\">send</span>\r\n                                    <span className=\"hidden sm:inline\">Send</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Artifacts Panel */}\r\n                {renderArtifactsPanel()}\r\n\r\n                {/* Modals */}\r\n                {showNewProjectModal && (\r\n                    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-200\">\r\n                        <div className=\"bg-white rounded-2xl p-6 w-[500px] shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-300\">\r\n                            <h3 className=\"text-xl font-black text-slate-800 mb-4\">Create New Project</h3>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={newProjectName}\r\n                                onChange={(e) => setNewProjectName(e.target.value)}\r\n                                placeholder=\"Project name (e.g., Sales Campaign, Product Launch)\"\r\n                                className=\"w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none mb-3\"\r\n                                autoFocus\r\n                            />\r\n                            <textarea\r\n                                value={newProjectDesc}\r\n                                onChange={(e) => setNewProjectDesc(e.target.value)}\r\n                                placeholder=\"Project description (optional)\"\r\n                                className=\"w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none resize-none\"\r\n                                rows={3}\r\n                            />\r\n                            <div className=\"flex gap-3 mt-4\">\r\n                                <button\r\n                                    onClick={createNewProject}\r\n                                    className=\"flex-1 bg-indigo-600 text-white px-4 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-all\"\r\n                                >\r\n                                    Create Project\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setShowNewProjectModal(false);\r\n                                        setNewProjectName('');\r\n                                        setNewProjectDesc('');\r\n                                    }}\r\n                                    className=\"flex-1 bg-slate-200 text-slate-700 px-4 py-3 rounded-lg font-bold hover:bg-slate-300 transition-all\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {showNewChatModal && (\r\n                    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-200\">\r\n                        <div className=\"bg-white rounded-2xl p-6 w-[400px] shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-300\">\r\n                            <h3 className=\"text-xl font-black text-slate-800 mb-4\">New Chat in {currentProject?.name}</h3>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={newChatName}\r\n                                onChange={(e) => setNewChatName(e.target.value)}\r\n                                onKeyDown={(e) => e.key === 'Enter' && createNewChat()}\r\n                                placeholder=\"Chat name (e.g., Logo Design, Pricing Strategy)\"\r\n                                className=\"w-full px-4 py-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none\"\r\n                                autoFocus\r\n                            />\r\n                            <div className=\"flex gap-3 mt-4\">\r\n                                <button\r\n                                    onClick={createNewChat}\r\n                                    className=\"flex-1 bg-indigo-600 text-white px-4 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-all\"\r\n                                >\r\n                                    Create\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setShowNewChatModal(false);\r\n                                        setNewChatName('');\r\n                                    }}\r\n                                    className=\"flex-1 bg-slate-200 text-slate-700 px-4 py-3 rounded-lg font-bold hover:bg-slate-300 transition-all\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Quick Mode (minimized widget)\r\n    return (\r\n        <button\r\n            onClick={() => setMode('deep')}\r\n            className=\"fixed bottom-6 right-6 z-50 w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-all animate-in zoom-in-50 duration-500\"\r\n        >\r\n            <span className=\"material-icons text-white text-2xl\">psychology</span>\r\n            <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white animate-pulse\"></span>\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default ClaudeStyleAiCoFounder;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\ContextMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\CountrySelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\GlobalChatbot.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PackageSuggestion' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[302,305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[302,305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":198,"column":44,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11192,11249],"text":"\r\n                                        You&apos;ll need to "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11192,11249],"text":"\r\n                                        You&lsquo;ll need to "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11192,11249],"text":"\r\n                                        You&#39;ll need to "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11192,11249],"text":"\r\n                                        You&rsquo;ll need to "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { CHATBOT_QUESTIONS } from '@/lib/globalIncorporationData';\r\nimport { PackageSuggestion } from '@/types/globalIncorporation';\r\n\r\ninterface GlobalChatbotProps {\r\n    countryName: string;\r\n    serviceName: string;\r\n    onComplete: (data: any, leadData: { email: string; phone: string }) => void;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function GlobalChatbot({ countryName, serviceName, onComplete, onClose }: GlobalChatbotProps) {\r\n    const [currentQuestion, setCurrentQuestion] = useState(0);\r\n    const [answers, setAnswers] = useState<Record<string, string>>({});\r\n    const [showLeadCapture, setShowLeadCapture] = useState(false);\r\n    const [leadData, setLeadData] = useState({ email: '', phone: '' });\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    const questions = CHATBOT_QUESTIONS;\r\n    const currentQ = questions[currentQuestion];\r\n\r\n    const handleAnswer = (value: string) => {\r\n        setAnswers(prev => ({ ...prev, [currentQ.id]: value }));\r\n    };\r\n\r\n    const handleNext = () => {\r\n        if (currentQuestion < questions.length - 1) {\r\n            setCurrentQuestion(prev => prev + 1);\r\n        } else {\r\n            // All questions answered, show lead capture\r\n            setShowLeadCapture(true);\r\n        }\r\n    };\r\n\r\n    const handlePrevious = () => {\r\n        if (currentQuestion > 0) {\r\n            setCurrentQuestion(prev => prev - 1);\r\n        }\r\n    };\r\n\r\n    const handleSubmitLead = () => {\r\n        if (!leadData.email || !leadData.phone) {\r\n            alert('Please provide both email and phone number');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n        // Combine all data\r\n        const completeData = {\r\n            ...answers,\r\n            targetCountry: countryName,\r\n            selectedService: serviceName,\r\n            timestamp: new Date().toISOString()\r\n        };\r\n\r\n        onComplete(completeData, leadData);\r\n    };\r\n\r\n    const canProceed = currentQ.required ? !!answers[currentQ.id] : true;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n            <div className=\"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden animate-in slide-in-from-bottom-10 duration-500\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white relative\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"absolute top-4 right-4 w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors\"\r\n                    >\r\n                        <span className=\"material-icons text-sm\">close</span>\r\n                    </button>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center\">\r\n                            <span className=\"material-icons text-2xl\">quiz</span>\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold\">Global Expansion Assistant</h2>\r\n                            <p className=\"text-blue-100 text-sm\">{countryName} • {serviceName}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Progress Bar */}\r\n                {!showLeadCapture && (\r\n                    <div className=\"px-6 pt-4\">\r\n                        <div className=\"flex justify-between text-xs font-bold text-slate-500 mb-2\">\r\n                            <span>Question {currentQuestion + 1} of {questions.length}</span>\r\n                            <span>{Math.round(((currentQuestion + 1) / questions.length) * 100)}%</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-slate-100 rounded-full h-2 overflow-hidden\">\r\n                            <div\r\n                                className=\"bg-gradient-to-r from-blue-600 to-indigo-600 h-2 rounded-full transition-all duration-500\"\r\n                                style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}\r\n                            ></div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Content */}\r\n                <div className=\"p-6 overflow-y-auto\" style={{ maxHeight: 'calc(90vh - 280px)' }}>\r\n                    {!showLeadCapture ? (\r\n                        <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                            {/* Question */}\r\n                            <div>\r\n                                <label className=\"block text-lg font-bold text-slate-900 mb-4\">\r\n                                    {currentQ.question}\r\n                                    {currentQ.required && <span className=\"text-red-500 ml-1\">*</span>}\r\n                                </label>\r\n\r\n                                {/* Input based on type */}\r\n                                {currentQ.type === 'text' && (\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={answers[currentQ.id] || ''}\r\n                                        onChange={(e) => handleAnswer(e.target.value)}\r\n                                        placeholder={currentQ.placeholder}\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium transition-colors\"\r\n                                        autoFocus\r\n                                    />\r\n                                )}\r\n\r\n                                {currentQ.type === 'textarea' && (\r\n                                    <textarea\r\n                                        value={answers[currentQ.id] || ''}\r\n                                        onChange={(e) => handleAnswer(e.target.value)}\r\n                                        placeholder={currentQ.placeholder}\r\n                                        rows={4}\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900 font-medium resize-none transition-colors\"\r\n                                        autoFocus\r\n                                    />\r\n                                )}\r\n\r\n                                {currentQ.type === 'select' && (\r\n                                    <div className=\"space-y-2\">\r\n                                        {currentQ.options?.map((option) => (\r\n                                            <button\r\n                                                key={option}\r\n                                                onClick={() => handleAnswer(option)}\r\n                                                className={`w-full p-4 rounded-xl border-2 text-left font-medium transition-all ${answers[currentQ.id] === option\r\n                                                        ? 'border-blue-600 bg-blue-50 text-blue-900'\r\n                                                        : 'border-slate-200 hover:border-blue-300 text-slate-700 hover:bg-slate-50'\r\n                                                    }`}\r\n                                            >\r\n                                                <div className=\"flex items-center justify-between\">\r\n                                                    <span>{option}</span>\r\n                                                    {answers[currentQ.id] === option && (\r\n                                                        <span className=\"material-icons text-blue-600\">check_circle</span>\r\n                                                    )}\r\n                                                </div>\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\r\n                            <div className=\"text-center mb-6\">\r\n                                <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                    <span className=\"material-icons text-blue-600 text-3xl\">connect_without_contact</span>\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold text-slate-900 mb-2\">Almost There!</h3>\r\n                                <p className=\"text-slate-600\">Let our experts connect with you to provide personalized guidance</p>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                        Email Address <span className=\"text-red-500\">*</span>\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={leadData.email}\r\n                                        onChange={(e) => setLeadData(prev => ({ ...prev, email: e.target.value }))}\r\n                                        placeholder=\"your@email.com\"\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold text-slate-700 mb-2\">\r\n                                        Phone Number <span className=\"text-red-500\">*</span>\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        value={leadData.phone}\r\n                                        onChange={(e) => setLeadData(prev => ({ ...prev, phone: e.target.value }))}\r\n                                        placeholder=\"+91 XXXXX XXXXX\"\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:outline-none text-slate-900\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3\">\r\n                                    <span className=\"material-icons text-amber-600\">info</span>\r\n                                    <p className=\"text-xs text-amber-800 font-medium\">\r\n                                        You'll need to <strong>login or register</strong> to view your personalized package recommendations and connect with our experts.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"border-t border-slate-100 p-6 bg-slate-50\">\r\n                    {!showLeadCapture ? (\r\n                        <div className=\"flex gap-3 justify-between\">\r\n                            <button\r\n                                onClick={handlePrevious}\r\n                                disabled={currentQuestion === 0}\r\n                                className=\"px-6 py-3 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors disabled:opacity-30 disabled:cursor-not-allowed\"\r\n                            >\r\n                                Previous\r\n                            </button>\r\n                            <button\r\n                                onClick={handleNext}\r\n                                disabled={!canProceed}\r\n                                className=\"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg hover:shadow-blue-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n                            >\r\n                                {currentQuestion === questions.length - 1 ? 'Continue' : 'Next'}\r\n                                <span className=\"material-icons text-sm\">arrow_forward</span>\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <button\r\n                            onClick={handleSubmitLead}\r\n                            disabled={isSubmitting || !leadData.email || !leadData.phone}\r\n                            className=\"w-full px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold text-lg shadow-xl hover:shadow-blue-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                        >\r\n                            {isSubmitting ? (\r\n                                <>\r\n                                    <span className=\"material-icons animate-spin\">sync</span>\r\n                                    Processing...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    Get My Package Recommendations\r\n                                    <span className=\"material-icons\">arrow_forward</span>\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\GlobalIncorporation.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[407,410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[407,410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1446,1449],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1446,1449],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Country, GlobalService } from '@/types/globalIncorporation';\r\nimport { COUNTRIES, getServicesForCountry, getServiceInfo, LANGUAGES } from '@/lib/globalIncorporationData';\r\nimport CountrySelector from './CountrySelector';\r\nimport GlobalChatbot from './GlobalChatbot';\r\n\r\ninterface GlobalIncorporationProps {\r\n    onLeadCapture?: (leadData: any) => void;\r\n}\r\n\r\nexport default function GlobalIncorporation({ onLeadCapture }: GlobalIncorporationProps) {\r\n    const [selectedCountry, setSelectedCountry] = useState<Country | null>(null);\r\n    const [selectedService, setSelectedService] = useState<GlobalService | null>(null);\r\n    const [showChatbot, setShowChatbot] = useState(false);\r\n    const [selectedLanguage, setSelectedLanguage] = useState('en');\r\n\r\n    const services = selectedCountry ? getServicesForCountry(selectedCountry.id) : [];\r\n    const serviceInfo = selectedCountry && selectedService\r\n        ? getServiceInfo(selectedCountry.id, selectedService.type)\r\n        : null;\r\n\r\n    const handleServiceClick = (service: GlobalService) => {\r\n        setSelectedService(service);\r\n    };\r\n\r\n    const handleGetAssistance = () => {\r\n        if (!selectedCountry || !selectedService) {\r\n            alert('Please select a country and service first');\r\n            return;\r\n        }\r\n        setShowChatbot(true);\r\n    };\r\n\r\n    const handleChatbotComplete = async (data: any, leadData: { email: string; phone: string }) => {\r\n        const completeLeadData = {\r\n            ...data,\r\n            ...leadData,\r\n            country: selectedCountry?.name,\r\n            service: selectedService?.title,\r\n            timestamp: new Date()\r\n        };\r\n\r\n        // Save to database\r\n        try {\r\n            const response = await fetch('/api/global-leads', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(completeLeadData)\r\n            });\r\n\r\n            if (response.ok) {\r\n                setShowChatbot(false);\r\n                // Trigger parent callback\r\n                onLeadCapture?.(completeLeadData);\r\n\r\n                // Show login modal (will be handled by parent)\r\n                alert('Lead captured! Please login to continue.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to save lead:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full py-12 bg-gradient-to-b from-slate-50 to-white\">\r\n            {/* Hero Section */}\r\n            <div className=\"max-w-7xl mx-auto px-6 mb-12 text-center\">\r\n                <div className=\"inline-block mb-4 px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-xs font-bold uppercase tracking-widest\">\r\n                    🌍 Expand Globally\r\n                </div>\r\n                <h2 className=\"text-4xl md:text-5xl font-black text-slate-900 mb-4 leading-tight\">\r\n                    Take Your Business <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600\">Global</span>\r\n                </h2>\r\n                <p className=\"text-lg text-slate-600 max-w-2xl mx-auto font-medium\">\r\n                    Expand your Indian startup to international markets. We handle incorporation, export compliance, and market access in 50+ countries.\r\n                </p>\r\n\r\n                {/* Language Selector */}\r\n                <div className=\"mt-6 flex items-center justify-center gap-2\">\r\n                    <span className=\"material-icons text-slate-400 text-sm\">translate</span>\r\n                    <div className=\"flex gap-1 bg-white border border-slate-200 rounded-lg p-1\">\r\n                        {LANGUAGES.map((lang) => (\r\n                            <button\r\n                                key={lang.code}\r\n                                onClick={() => setSelectedLanguage(lang.code)}\r\n                                className={`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${selectedLanguage === lang.code\r\n                                        ? 'bg-blue-600 text-white'\r\n                                        : 'text-slate-600 hover:bg-slate-50'\r\n                                    }`}\r\n                            >\r\n                                {lang.flag} {lang.name}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Country Selector */}\r\n            <div className=\"max-w-7xl mx-auto px-6 mb-12\">\r\n                <h3 className=\"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2\">\r\n                    <span className=\"material-icons text-blue-600\">public</span>\r\n                    Select Target Country\r\n                </h3>\r\n                <CountrySelector\r\n                    countries={COUNTRIES}\r\n                    selectedCountry={selectedCountry}\r\n                    onSelectCountry={setSelectedCountry}\r\n                />\r\n            </div>\r\n\r\n            {/* Services Section */}\r\n            {selectedCountry && (\r\n                <div className=\"max-w-7xl mx-auto px-6 mb-12 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n                    <h3 className=\"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2\">\r\n                        <span className=\"material-icons text-blue-600\">business_center</span>\r\n                        Choose Your Service for {selectedCountry.name}\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                        {services.map((service) => {\r\n                            const isSelected = selectedService?.id === service.id;\r\n                            const colorMap: Record<string, string> = {\r\n                                blue: 'from-blue-600 to-blue-700',\r\n                                green: 'from-green-600 to-green-700',\r\n                                purple: 'from-purple-600 to-purple-700'\r\n                            };\r\n\r\n                            return (\r\n                                <button\r\n                                    key={service.id}\r\n                                    onClick={() => handleServiceClick(service)}\r\n                                    className={`group p-6 rounded-2xl border-2 transition-all duration-300 text-left ${isSelected\r\n                                            ? 'border-blue-600 bg-blue-50 shadow-xl shadow-blue-500/20'\r\n                                            : 'border-slate-200 bg-white hover:border-blue-300 hover:shadow-lg'\r\n                                        }`}\r\n                                >\r\n                                    <div className={`w-14 h-14 rounded-xl bg-gradient-to-br ${colorMap[service.color]} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`}>\r\n                                        <span className=\"material-icons text-white text-2xl\">{service.icon}</span>\r\n                                    </div>\r\n                                    <h4 className={`text-lg font-bold mb-2 ${isSelected ? 'text-blue-900' : 'text-slate-900'}`}>\r\n                                        {service.title}\r\n                                    </h4>\r\n                                    <p className={`text-sm font-medium ${isSelected ? 'text-blue-700' : 'text-slate-600'}`}>\r\n                                        {service.description}\r\n                                    </p>\r\n                                    {isSelected && (\r\n                                        <div className=\"mt-4 flex items-center gap-2 text-blue-600 text-sm font-bold\">\r\n                                            <span className=\"material-icons text-sm\">check_circle</span>\r\n                                            Selected\r\n                                        </div>\r\n                                    )}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Service Information Boxes */}\r\n            {selectedService && serviceInfo && (\r\n                <div className=\"max-w-7xl mx-auto px-6 mb-12 animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                        {/* What Is It */}\r\n                        <div className=\"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm\">\r\n                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center\">\r\n                                    <span className=\"material-icons text-blue-600\">info</span>\r\n                                </div>\r\n                                <h4 className=\"text-lg font-bold text-slate-900\">What is {selectedService.title}?</h4>\r\n                            </div>\r\n                            <p className=\"text-slate-700 leading-relaxed\">{serviceInfo.whatIs}</p>\r\n                            <div className=\"mt-4 flex items-center gap-4 text-sm\">\r\n                                <div className=\"flex items-center gap-1 text-green-600 font-bold\">\r\n                                    <span className=\"material-icons text-sm\">schedule</span>\r\n                                    {serviceInfo.timeline}\r\n                                </div>\r\n                                <div className=\"flex items-center gap-1 text-blue-600 font-bold\">\r\n                                    <span className=\"material-icons text-sm\">currency_rupee</span>\r\n                                    Starting at {serviceInfo.startingPrice}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Eligibility */}\r\n                        <div className=\"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm\">\r\n                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center\">\r\n                                    <span className=\"material-icons text-green-600\">verified</span>\r\n                                </div>\r\n                                <h4 className=\"text-lg font-bold text-slate-900\">Eligibility Criteria</h4>\r\n                            </div>\r\n                            <ul className=\"space-y-2\">\r\n                                {serviceInfo.eligibility.map((item, idx) => (\r\n                                    <li key={idx} className=\"flex items-start gap-2 text-sm text-slate-700\">\r\n                                        <span className=\"material-icons text-green-500 text-sm mt-0.5\">check_circle</span>\r\n                                        {item}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n\r\n                        {/* Who Can Start */}\r\n                        <div className=\"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm\">\r\n                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center\">\r\n                                    <span className=\"material-icons text-purple-600\">groups</span>\r\n                                </div>\r\n                                <h4 className=\"text-lg font-bold text-slate-900\">Who Can Apply?</h4>\r\n                            </div>\r\n                            <ul className=\"space-y-2\">\r\n                                {serviceInfo.whoCanStart.map((item, idx) => (\r\n                                    <li key={idx} className=\"flex items-start gap-2 text-sm text-slate-700\">\r\n                                        <span className=\"material-icons text-purple-500 text-sm mt-0.5\">person</span>\r\n                                        {item}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n\r\n                        {/* Benefits */}\r\n                        <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200\">\r\n                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                <div className=\"w-10 h-10 rounded-lg bg-blue-600 flex items-center justify-center\">\r\n                                    <span className=\"material-icons text-white\">workspace_premium</span>\r\n                                </div>\r\n                                <h4 className=\"text-lg font-bold text-slate-900\">Key Benefits</h4>\r\n                            </div>\r\n                            <ul className=\"space-y-2\">\r\n                                {serviceInfo.benefits.map((item, idx) => (\r\n                                    <li key={idx} className=\"flex items-start gap-2 text-sm text-slate-700 font-medium\">\r\n                                        <span className=\"material-icons text-blue-600 text-sm mt-0.5\">star</span>\r\n                                        {item}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* CTA Button */}\r\n                    <div className=\"mt-8 text-center\">\r\n                        <button\r\n                            onClick={handleGetAssistance}\r\n                            className=\"inline-flex items-center gap-3 px-10 py-5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-bold text-lg shadow-2xl shadow-blue-500/30 hover:shadow-blue-500/50 transition-all hover:scale-105 active:scale-95\"\r\n                        >\r\n                            <span className=\"material-icons text-2xl\">rocket_launch</span>\r\n                            Get Global Incorporation Assistance\r\n                            <span className=\"material-icons\">arrow_forward</span>\r\n                        </button>\r\n                        <p className=\"mt-3 text-sm text-slate-500 font-medium\">\r\n                            Free consultation • Expert guidance • Custom package\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Chatbot Modal */}\r\n            {showChatbot && selectedCountry && selectedService && (\r\n                <GlobalChatbot\r\n                    countryName={selectedCountry.name}\r\n                    serviceName={selectedService.title}\r\n                    onComplete={handleChatbotComplete}\r\n                    onClose={() => setShowChatbot(false)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\GlobalIncorporationFullPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[361,364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[361,364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { Country, GlobalService } from '@/types/globalIncorporation';\r\nimport { COUNTRIES, getServicesForCountry, getServiceInfo } from '@/lib/globalIncorporationData';\r\nimport LeadCaptureModal from '../LeadCaptureModal';\r\n\r\ninterface GlobalIncorporationFullPageProps {\r\n    onLeadCapture?: (leadData: any) => void;\r\n    onClose?: () => void;\r\n}\r\n\r\ntype Step = 'country' | 'service' | 'assistance' | 'chatbot';\r\n\r\nexport default function GlobalIncorporationFullPage({ onLeadCapture, onClose }: GlobalIncorporationFullPageProps) {\r\n    const [currentStep, setCurrentStep] = useState<Step>('country');\r\n    const [selectedCountry, setSelectedCountry] = useState<Country | null>(null);\r\n    const [selectedService, setSelectedService] = useState<GlobalService | null>(null);\r\n    const [showCountrySidebar, setShowCountrySidebar] = useState(false);\r\n    const [showServiceSidebar, setShowServiceSidebar] = useState(false);\r\n    const [chatMessages, setChatMessages] = useState<Array<{ role: 'ai' | 'user'; message: string }>>([]);\r\n    const [userInput, setUserInput] = useState('');\r\n    const [showLeadCapture, setShowLeadCapture] = useState(false);\r\n    const services = selectedCountry ? getServicesForCountry(selectedCountry.id) : [];\r\n    const serviceInfo = selectedCountry && selectedService\r\n        ? getServiceInfo(selectedCountry.id, selectedService.type)\r\n        : null;\r\n\r\n    const handleCountryClick = (country: Country) => {\r\n        setSelectedCountry(country);\r\n        setShowCountrySidebar(true);\r\n    };\r\n\r\n    const handleCountryConfirm = () => {\r\n        setShowCountrySidebar(false);\r\n        setCurrentStep('service');\r\n    };\r\n\r\n    const handleServiceClick = (service: GlobalService) => {\r\n        setSelectedService(service);\r\n        setShowServiceSidebar(true);\r\n    };\r\n\r\n    const handleServiceConfirm = () => {\r\n        setShowServiceSidebar(false);\r\n        setCurrentStep('assistance');\r\n    };\r\n\r\n    const handleGetExpert = () => {\r\n        setCurrentStep('chatbot');\r\n        // Initialize AI conversation\r\n        setChatMessages([\r\n            {\r\n                role: 'ai',\r\n                message: `Hello! I'm your global expansion assistant. I'll help you understand what licenses and registrations you need for ${selectedCountry?.name} ${selectedService?.type === 'incorporation' ? 'incorporation' : selectedService?.type === 'export' ? 'export' : 'market access'}. What would you like to know?`\r\n            }\r\n        ]);\r\n    };\r\n\r\n    const handleSendMessage = () => {\r\n        if (!userInput.trim()) return;\r\n\r\n        setChatMessages(prev => [...prev, { role: 'user', message: userInput }]);\r\n\r\n        // Simulate AI response\r\n        setTimeout(() => {\r\n            let aiResponse = '';\r\n\r\n            if (userInput.toLowerCase().includes('cost') || userInput.toLowerCase().includes('price')) {\r\n                aiResponse = `For ${selectedCountry?.name} ${selectedService?.title}, the cost typically ranges from ${serviceInfo?.startingPrice} onwards. This includes registration fees, legal documentation, and compliance setup. Would you like a detailed pricing breakdown?`;\r\n            } else if (userInput.toLowerCase().includes('time') || userInput.toLowerCase().includes('duration')) {\r\n                aiResponse = `The typical timeline for ${selectedService?.title} in ${selectedCountry?.name} is ${serviceInfo?.timeline}. However, this can vary based on your specific business type and documentation readiness. Shall I connect you with an expert for a precise timeline?`;\r\n            } else if (userInput.toLowerCase().includes('document') || userInput.toLowerCase().includes('requirement')) {\r\n                aiResponse = `For ${selectedCountry?.name} ${selectedService?.type}, you'll need: PAN Card, Aadhaar, Business Plan, Financial Statements, and industry-specific licenses. I can provide a complete checklist. Would you like that?`;\r\n            } else {\r\n                aiResponse = `That's a great question! For ${selectedService?.title} in ${selectedCountry?.name}, I recommend speaking with our expert who can provide detailed guidance on your specific situation. Would you like to connect now?`;\r\n            }\r\n\r\n            setChatMessages(prev => [...prev, { role: 'ai', message: aiResponse }]);\r\n        }, 1000);\r\n\r\n        setUserInput('');\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 overflow-hidden\">\r\n            {/* Close Button */}\r\n            {onClose && (\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"absolute top-6 right-6 z-50 w-12 h-12 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center text-white hover:bg-white/20 transition-all\"\r\n                >\r\n                    <span className=\"material-icons\">close</span>\r\n                </button>\r\n            )}\r\n\r\n            {/* Page 1: Country Selection */}\r\n            {currentStep === 'country' && (\r\n                <div className=\"h-full overflow-y-auto custom-scroll\">\r\n                    <div className=\"min-h-full flex flex-col items-center justify-center p-8\">\r\n                        {/* Hero Section */}\r\n                        <div className=\"text-center mb-16 animate-in fade-in slide-in-from-bottom-8 duration-1000\">\r\n                            <div className=\"inline-block mb-6 px-6 py-3 bg-white/10 backdrop-blur-md border border-white/20 rounded-full\">\r\n                                <span className=\"text-white/90 text-sm font-bold uppercase tracking-widest\">🌍 Global Expansion Made Easy</span>\r\n                            </div>\r\n                            <h1 className=\"text-6xl md:text-7xl font-black text-white mb-6 leading-tight\">\r\n                                Reach Your Business\r\n                                <br />\r\n                                <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-cyan-400 to-teal-400\">\r\n                                    Global\r\n                                </span>\r\n                            </h1>\r\n                            <p className=\"text-xl md:text-2xl text-blue-100 max-w-3xl mx-auto font-medium leading-relaxed\">\r\n                                Expand your Indian startup to international markets. We handle incorporation, export compliance, and market access in 50+ countries with expert guidance.\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* Country Grid */}\r\n                        <div className=\"max-w-6xl w-full\">\r\n                            <h2 className=\"text-2xl font-bold text-white mb-8 text-center\">Select Your Target Country</h2>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n                                {COUNTRIES.map((country, idx) => (\r\n                                    <button\r\n                                        key={country.id}\r\n                                        onClick={() => handleCountryClick(country)}\r\n                                        className=\"group relative bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 hover:bg-white/20 transition-all hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/30 animate-in zoom-in duration-500\"\r\n                                        style={{ animationDelay: `${idx * 100}ms` }}\r\n                                    >\r\n                                        <div className=\"text-6xl mb-4 group-hover:scale-110 transition-transform\">\r\n                                            {country.flag}\r\n                                        </div>\r\n                                        <h3 className=\"text-white font-bold text-lg mb-2\">{country.name}</h3>\r\n                                        <p className=\"text-blue-200 text-sm font-medium\">{country.language}</p>\r\n                                        <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                            <span className=\"material-icons text-blue-400 text-xl\">arrow_forward</span>\r\n                                        </div>\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Page 2: Service Selection */}\r\n            {currentStep === 'service' && (\r\n                <div className=\"h-full overflow-y-auto custom-scroll\">\r\n                    <div className=\"min-h-full flex flex-col items-center justify-center p-8\">\r\n                        {/* Back Button */}\r\n                        <button\r\n                            onClick={() => setCurrentStep('country')}\r\n                            className=\"absolute top-6 left-6 flex items-center gap-2 text-white/80 hover:text-white transition-colors\"\r\n                        >\r\n                            <span className=\"material-icons\">arrow_back</span>\r\n                            <span className=\"font-bold\">Change Country</span>\r\n                        </button>\r\n\r\n                        <div className=\"text-center mb-12\">\r\n                            <div className=\"text-6xl mb-4\">{selectedCountry?.flag}</div>\r\n                            <h1 className=\"text-5xl font-black text-white mb-4\">\r\n                                {selectedCountry?.name}\r\n                            </h1>\r\n                            <p className=\"text-xl text-blue-100\">Choose your service type</p>\r\n                        </div>\r\n\r\n                        {/* Service Cards */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl w-full\">\r\n                            {services.map((service, idx) => {\r\n                                const colorClasses = {\r\n                                    blue: { gradient: 'from-blue-500 to-blue-600', hover: 'hover:shadow-blue-500/50' },\r\n                                    green: { gradient: 'from-green-500 to-green-600', hover: 'hover:shadow-green-500/50' },\r\n                                    purple: { gradient: 'from-purple-500 to-purple-600', hover: 'hover:shadow-purple-500/50' }\r\n                                };\r\n                                const colors = colorClasses[service.color as keyof typeof colorClasses];\r\n\r\n                                return (\r\n                                    <button\r\n                                        key={service.id}\r\n                                        onClick={() => handleServiceClick(service)}\r\n                                        className={`group bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 hover:bg-white/20 transition-all hover:scale-105 hover:shadow-2xl ${colors.hover} text-left animate-in zoom-in duration-500`}\r\n                                        style={{ animationDelay: `${idx * 150}ms` }}\r\n                                    >\r\n                                        <div className={`w-20 h-20 rounded-2xl bg-gradient-to-br ${colors.gradient} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-xl`}>\r\n                                            <span className=\"material-icons text-white text-4xl\">{service.icon}</span>\r\n                                        </div>\r\n                                        <h3 className=\"text-2xl font-bold text-white mb-3\">{service.title}</h3>\r\n                                        <p className=\"text-blue-100 font-medium leading-relaxed\">{service.description}</p>\r\n                                        <div className=\"mt-6 flex items-center text-cyan-400 font-bold group-hover:gap-3 gap-2 transition-all\">\r\n                                            <span>Learn More</span>\r\n                                            <span className=\"material-icons\">arrow_forward</span>\r\n                                        </div>\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Page 3: Get Assistance */}\r\n            {currentStep === 'assistance' && serviceInfo && (\r\n                <div className=\"h-full overflow-y-auto custom-scroll\">\r\n                    <div className=\"min-h-full flex flex-col items-center justify-center p-8\">\r\n                        <div className=\"max-w-4xl w-full\">\r\n                            <div className=\"text-center mb-12\">\r\n                                <h1 className=\"text-5xl font-black text-white mb-6\">\r\n                                    Get Your Customized Plan\r\n                                </h1>\r\n                                <p className=\"text-xl text-blue-100 mb-8\">\r\n                                    For <span className=\"font-bold text-cyan-400\">{selectedService?.title}</span> in <span className=\"font-bold text-cyan-400\">{selectedCountry?.name}</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* What You Need Section */}\r\n                            <div className=\"bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl p-8 mb-8\">\r\n                                <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\r\n                                    <span className=\"material-icons text-cyan-400 text-3xl\">checklist</span>\r\n                                    What Licenses & Registrations Do You Need?\r\n                                </h2>\r\n\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n                                    <div>\r\n                                        <h3 className=\"text-lg font-bold text-cyan-400 mb-3\">✅ Eligibility</h3>\r\n                                        <ul className=\"space-y-2\">\r\n                                            {serviceInfo.eligibility.slice(0, 3).map((item, idx) => (\r\n                                                <li key={idx} className=\"text-blue-100 flex items-start gap-2\">\r\n                                                    <span className=\"material-icons text-green-400 text-sm mt-1\">check_circle</span>\r\n                                                    <span>{item}</span>\r\n                                                </li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"text-lg font-bold text-cyan-400 mb-3\">⚡ Key Benefits</h3>\r\n                                        <ul className=\"space-y-2\">\r\n                                            {serviceInfo.benefits.slice(0, 3).map((item, idx) => (\r\n                                                <li key={idx} className=\"text-blue-100 flex items-start gap-2\">\r\n                                                    <span className=\"material-icons text-yellow-400 text-sm mt-1\">star</span>\r\n                                                    <span>{item}</span>\r\n                                                </li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center justify-between bg-white/10 rounded-2xl p-6\">\r\n                                    <div>\r\n                                        <div className=\"text-sm text-blue-200 mb-1\">Timeline</div>\r\n                                        <div className=\"text-2xl font-bold text-white\">{serviceInfo.timeline}</div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <div className=\"text-sm text-blue-200 mb-1\">Starting From</div>\r\n                                        <div className=\"text-2xl font-bold text-cyan-400\">{serviceInfo.startingPrice}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* CTA Buttons */}\r\n                            <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                                <button\r\n                                    onClick={handleGetExpert}\r\n                                    className=\"flex-1 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-2xl py-6 px-8 font-bold text-lg shadow-2xl shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all hover:scale-105 flex items-center justify-center gap-3\"\r\n                                >\r\n                                    <span className=\"material-icons text-2xl\">smart_toy</span>\r\n                                    Explore with AI Assistant\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleGetExpert}\r\n                                    className=\"flex-1 bg-white/10 backdrop-blur-md border-2 border-white/30 text-white rounded-2xl py-6 px-8 font-bold text-lg hover:bg-white/20 transition-all hover:scale-105 flex items-center justify-center gap-3\"\r\n                                >\r\n                                    <span className=\"material-icons text-2xl\">support_agent</span>\r\n                                    Talk to Expert Now\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Page 4: AI Chatbot */}\r\n            {currentStep === 'chatbot' && (\r\n                <div className=\"h-full flex flex-col\">\r\n                    {/* Chat Header */}\r\n                    <div className=\"bg-white/10 backdrop-blur-md border-b border-white/20 p-6\">\r\n                        <div className=\"max-w-4xl mx-auto flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center\">\r\n                                    <span className=\"material-icons text-white\">smart_toy</span>\r\n                                </div>\r\n                                <div>\r\n                                    <h2 className=\"text-xl font-bold text-white\">AI Global Expansion Assistant</h2>\r\n                                    <p className=\"text-sm text-blue-200\">{selectedCountry?.name} • {selectedService?.title}</p>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setCurrentStep('assistance')}\r\n                                className=\"text-white/80 hover:text-white transition-colors\"\r\n                            >\r\n                                <span className=\"material-icons\">close</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chat Messages */}\r\n                    <div className=\"flex-1 overflow-y-auto custom-scroll p-6\">\r\n                        <div className=\"max-w-4xl mx-auto space-y-4\">\r\n                            {chatMessages.map((msg, idx) => (\r\n                                <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n                                    <div className={`max-w-2xl rounded-2xl p-4 ${msg.role === 'user'\r\n                                        ? 'bg-gradient-to-r from-cyan-500 to-blue-500 text-white'\r\n                                        : 'bg-white/10 backdrop-blur-md border border-white/20 text-white'\r\n                                        }`}>\r\n                                        <p className=\"leading-relaxed\">{msg.message}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chat Input */}\r\n                    <div className=\"bg-white/10 backdrop-blur-md border-t border-white/20 p-6\">\r\n                        <div className=\"max-w-4xl mx-auto\">\r\n                            <div className=\"flex gap-4 mb-4\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={userInput}\r\n                                    onChange={(e) => setUserInput(e.target.value)}\r\n                                    onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                                    placeholder=\"Ask anything about global expansion...\"\r\n                                    className=\"flex-1 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl px-6 py-4 text-white placeholder-blue-200 focus:outline-none focus:border-cyan-400 transition-colors\"\r\n                                />\r\n                                <button\r\n                                    onClick={handleSendMessage}\r\n                                    className=\"bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-xl px-8 py-4 font-bold shadow-lg hover:shadow-cyan-500/30 transition-all hover:scale-105 flex items-center gap-2\"\r\n                                >\r\n                                    <span>Send</span>\r\n                                    <span className=\"material-icons\">send</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Get Started Button */}\r\n                            {chatMessages.length >= 3 && (\r\n                                <button\r\n                                    onClick={() => setShowLeadCapture(true)}\r\n                                    className=\"w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl py-4 font-bold shadow-2xl hover:shadow-green-500/30 transition-all hover:scale-105 flex items-center justify-center gap-3 animate-in fade-in zoom-in duration-500\"\r\n                                >\r\n                                    <span className=\"material-icons text-2xl\">rocket_launch</span>\r\n                                    Ready to Get Started? Create Your Account\r\n                                    <span className=\"material-icons\">arrow_forward</span>\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Country Sidebar */}\r\n            {showCountrySidebar && selectedCountry && (\r\n                <>\r\n                    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40\" onClick={() => setShowCountrySidebar(false)}></div>\r\n                    <div className=\"fixed right-0 top-0 bottom-0 w-full md:w-[500px] bg-white z-50 shadow-2xl overflow-y-auto animate-in slide-in-from-right duration-500\">\r\n                        <div className=\"p-8\">\r\n                            <div className=\"flex items-center justify-between mb-8\">\r\n                                <h2 className=\"text-3xl font-bold text-slate-900\">Country Details</h2>\r\n                                <button onClick={() => setShowCountrySidebar(false)} className=\"text-slate-400 hover:text-slate-900\">\r\n                                    <span className=\"material-icons\">close</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"text-center mb-8\">\r\n                                <div className=\"text-8xl mb-4\">{selectedCountry.flag}</div>\r\n                                <h3 className=\"text-2xl font-bold text-slate-900 mb-2\">{selectedCountry.name}</h3>\r\n                                <div className=\"flex items-center justify-center gap-4 text-sm text-slate-600\">\r\n                                    <span>💱 {selectedCountry.currency}</span>\r\n                                    <span>🗣️ {selectedCountry.language}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6\">\r\n                                <h4 className=\"font-bold text-slate-900 mb-3\">Why Choose {selectedCountry.name}?</h4>\r\n                                <ul className=\"space-y-2 text-sm text-slate-700\">\r\n                                    <li className=\"flex items-start gap-2\">\r\n                                        <span className=\"material-icons text-blue-600 text-sm mt-0.5\">check_circle</span>\r\n                                        Strong economy and stable market\r\n                                    </li>\r\n                                    <li className=\"flex items-start gap-2\">\r\n                                        <span className=\"material-icons text-blue-600 text-sm mt-0.5\">check_circle</span>\r\n                                        Business-friendly regulations\r\n                                    </li>\r\n                                    <li className=\"flex items-start gap-2\">\r\n                                        <span className=\"material-icons text-blue-600 text-sm mt-0.5\">check_circle</span>\r\n                                        Large consumer base\r\n                                    </li>\r\n                                    <li className=\"flex items-start gap-2\">\r\n                                        <span className=\"material-icons text-blue-600 text-sm mt-0.5\">check_circle</span>\r\n                                        Access to international markets\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleCountryConfirm}\r\n                                className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl py-4 font-bold shadow-lg hover:shadow-blue-500/30 transition-all flex items-center justify-center gap-2\"\r\n                            >\r\n                                Select {selectedCountry.name}\r\n                                <span className=\"material-icons\">arrow_forward</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* Service Sidebar */}\r\n            {showServiceSidebar && selectedService && serviceInfo && (\r\n                <>\r\n                    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40\" onClick={() => setShowServiceSidebar(false)}></div>\r\n                    <div className=\"fixed right-0 top-0 bottom-0 w-full md:w-[500px] bg-white z-50 shadow-2xl overflow-y-auto animate-in slide-in-from-right duration-500\">\r\n                        <div className=\"p-8\">\r\n                            <div className=\"flex items-center justify-between mb-8\">\r\n                                <h2 className=\"text-3xl font-bold text-slate-900\">Service Details</h2>\r\n                                <button onClick={() => setShowServiceSidebar(false)} className=\"text-slate-400 hover:text-slate-900\">\r\n                                    <span className=\"material-icons\">close</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"mb-8\">\r\n                                <h3 className=\"text-2xl font-bold text-slate-900 mb-4\">{selectedService.title}</h3>\r\n                                <p className=\"text-slate-600 leading-relaxed mb-6\">{serviceInfo.whatIs}</p>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n                                    <div className=\"bg-green-50 rounded-xl p-4 text-center\">\r\n                                        <div className=\"text-2xl font-bold text-green-600 mb-1\">{serviceInfo.timeline}</div>\r\n                                        <div className=\"text-xs text-green-700 font-medium\">Timeline</div>\r\n                                    </div>\r\n                                    <div className=\"bg-blue-50 rounded-xl p-4 text-center\">\r\n                                        <div className=\"text-2xl font-bold text-blue-600 mb-1\">{serviceInfo.startingPrice}</div>\r\n                                        <div className=\"text-xs text-blue-700 font-medium\">Starting From</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-4\">\r\n                                    <div>\r\n                                        <h4 className=\"font-bold text-slate-900 mb-2 flex items-center gap-2\">\r\n                                            <span className=\"material-icons text-green-600\">verified</span>\r\n                                            Eligibility\r\n                                        </h4>\r\n                                        <ul className=\"space-y-1 text-sm text-slate-600\">\r\n                                            {serviceInfo.eligibility.slice(0, 3).map((item, idx) => (\r\n                                                <li key={idx}>• {item}</li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <h4 className=\"font-bold text-slate-900 mb-2 flex items-center gap-2\">\r\n                                            <span className=\"material-icons text-yellow-600\">star</span>\r\n                                            Benefits\r\n                                        </h4>\r\n                                        <ul className=\"space-y-1 text-sm text-slate-600\">\r\n                                            {serviceInfo.benefits.slice(0, 3).map((item, idx) => (\r\n                                                <li key={idx}>• {item}</li>\r\n                                            ))}\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleServiceConfirm}\r\n                                className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl py-4 font-bold shadow-lg hover:shadow-blue-500/30 transition-all flex items-center justify-center gap-2\"\r\n                            >\r\n                                Continue with {selectedService.type === 'incorporation' ? 'Incorporation' : selectedService.type === 'export' ? 'Export' : 'Market Access'}\r\n                                <span className=\"material-icons\">arrow_forward</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* Lead Capture Modal */}\r\n            <LeadCaptureModal\r\n                isOpen={showLeadCapture}\r\n                onClose={() => setShowLeadCapture(false)}\r\n                onComplete={(leadData, userId) => {\r\n                    // Lead captured and account created\r\n                    setShowLeadCapture(false);\r\n                    if (onLeadCapture) {\r\n                        onLeadCapture({ ...leadData, userId });\r\n                    }\r\n                }}\r\n                prefilledData={{\r\n                    businessName: '',\r\n                    email: '',\r\n                    phone: ''\r\n                }}\r\n                source=\"global_incorporation\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\GoogleIntegrationModal.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":36,"column":25,"nodeType":"JSXOpeningElement","endLine":36,"endColumn":147},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":65,"column":33,"nodeType":"JSXOpeningElement","endLine":65,"endColumn":170},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":65,"column":33,"nodeType":"JSXOpeningElement","endLine":65,"endColumn":170}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\n\r\ninterface GoogleIntegrationModalProps {\r\n    onClose: () => void;\r\n    onConnect: () => void;\r\n}\r\n\r\nexport default function GoogleIntegrationModal({ onClose, onConnect }: GoogleIntegrationModalProps) {\r\n    const [status, setStatus] = useState<'initial' | 'connecting' | 'success'>('initial');\r\n\r\n    const handleGoogleLogin = () => {\r\n        setStatus('connecting');\r\n        // Simulate OAuth Process\r\n        setTimeout(() => {\r\n            setStatus('success');\r\n            setTimeout(() => {\r\n                onConnect();\r\n            }, 1000);\r\n        }, 2000);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden animate-in zoom-in-95 relative\">\r\n\r\n                {/* Close Button */}\r\n                <button onClick={onClose} className=\"absolute top-3 right-3 text-slate-400 hover:text-slate-600 z-10\">\r\n                    <span className=\"material-icons-outlined\">close</span>\r\n                </button>\r\n\r\n                <div className=\"p-8 flex flex-col items-center text-center\">\r\n                    {/* Google Logo */}\r\n                    <div className=\"w-16 h-16 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center mb-6\">\r\n                        <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" alt=\"Google\" className=\"w-8 h-8\" />\r\n                    </div>\r\n\r\n                    {status === 'initial' && (\r\n                        <>\r\n                            <h2 className=\"text-xl font-bold text-slate-800 mb-2\">Connect Google Workspace</h2>\r\n                            <p className=\"text-sm text-slate-500 mb-8 leading-relaxed\">\r\n                                Manage your emails, calendar, and files directly from SetMyBizz Dashboard.\r\n                            </p>\r\n\r\n                            <div className=\"w-full space-y-3 mb-8\">\r\n                                <div className=\"flex items-center gap-3 text-left p-2 rounded-lg bg-slate-50 border border-slate-100\">\r\n                                    <span className=\"material-icons-outlined text-red-500 text-lg\">mail</span>\r\n                                    <span className=\"text-xs font-bold text-slate-600\">Gmail Access</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 text-left p-2 rounded-lg bg-slate-50 border border-slate-100\">\r\n                                    <span className=\"material-icons-outlined text-blue-500 text-lg\">calendar_today</span>\r\n                                    <span className=\"text-xs font-bold text-slate-600\">Calendar Events</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 text-left p-2 rounded-lg bg-slate-50 border border-slate-100\">\r\n                                    <span className=\"material-icons-outlined text-green-600 text-lg\">description</span>\r\n                                    <span className=\"text-xs font-bold text-slate-600\">Google Drive Files</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleGoogleLogin}\r\n                                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-200 transition-all flex items-center justify-center gap-2\"\r\n                            >\r\n                                <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" className=\"w-4 h-4 bg-white rounded-full p-0.5\" />\r\n                                Sign in with Google\r\n                            </button>\r\n                            <p className=\"text-[10px] text-slate-400 mt-4\">Safe & Secure via Google OAuth 2.0</p>\r\n                        </>\r\n                    )}\r\n\r\n                    {status === 'connecting' && (\r\n                        <div className=\"py-8\">\r\n                            <div className=\"w-12 h-12 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mx-auto mb-4\"></div>\r\n                            <h3 className=\"font-bold text-slate-800\">Connecting to Google...</h3>\r\n                            <p className=\"text-xs text-slate-500 mt-1\">Please wait while we verify your credentials.</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {status === 'success' && (\r\n                        <div className=\"py-8 animate-in bg-green-50 rounded-xl w-full\">\r\n                            <span className=\"material-icons-outlined text-5xl text-green-500 mb-2\">check_circle</span>\r\n                            <h3 className=\"font-bold text-green-700\">Connected Successfully!</h3>\r\n                            <p className=\"text-xs text-green-600 mt-1\">Redirecting to your workspace...</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\GoogleWorkspaceDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[701,704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[701,704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":82,"column":25,"nodeType":"JSXOpeningElement","endLine":82,"endColumn":147},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":93,"column":29,"nodeType":"JSXOpeningElement","endLine":93,"endColumn":143},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":93,"column":29,"nodeType":"JSXOpeningElement","endLine":93,"endColumn":143},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":102,"column":47,"nodeType":"JSXOpeningElement","endLine":102,"endColumn":142},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":169,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9468,9471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9468,9471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12223,12226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12223,12226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14413,14416],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14413,14416],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":233,"column":62,"nodeType":"JSXOpeningElement","endLine":233,"endColumn":116}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from 'react';\r\nimport { signInWithGoogleWorkspace } from '@/lib/firebase';\r\nimport { fetchUserEmails, fetchUserEvents, fetchUserFiles, GoogleEmail, GoogleCalendarEvent, GoogleDriveFile, getMockEmails, getMockEvents, getMockFiles } from '@/lib/google-api'; // Real + Fallback\r\n\r\nexport interface GoogleApp {\r\n    id: string;\r\n    label: string;\r\n    icon: string;\r\n    color: string;\r\n    url?: string;\r\n}\r\n\r\ninterface GoogleWorkspaceDashboardProps {\r\n    onBack: () => void;\r\n    onPinApp?: (app: GoogleApp) => void;\r\n}\r\n\r\nexport default function GoogleWorkspaceDashboard({ onBack, onPinApp }: GoogleWorkspaceDashboardProps) {\r\n    const [user, setUser] = React.useState<any>(null);\r\n    const [token, setToken] = React.useState<string | null>(null);\r\n    const [isConnecting, setIsConnecting] = React.useState(false);\r\n\r\n    // Real Data State\r\n    const [emails, setEmails] = React.useState<GoogleEmail[]>([]);\r\n    const [events, setEvents] = React.useState<GoogleCalendarEvent[]>([]);\r\n    const [files, setFiles] = React.useState<GoogleDriveFile[]>([]);\r\n    const [isLoadingData, setIsLoadingData] = React.useState(false);\r\n\r\n    // Fetch data when token is available\r\n    React.useEffect(() => {\r\n        if (token) {\r\n            const loadData = async () => {\r\n                setIsLoadingData(true);\r\n                try {\r\n                    const [fetchedEmails, fetchedEvents, fetchedFiles] = await Promise.all([\r\n                        fetchUserEmails(token),\r\n                        fetchUserEvents(token),\r\n                        fetchUserFiles(token)\r\n                    ]);\r\n                    setEmails(fetchedEmails);\r\n                    setEvents(fetchedEvents);\r\n                    setFiles(fetchedFiles);\r\n                } catch (e) {\r\n                    console.error(\"Error loading workspace data\", e);\r\n                } finally {\r\n                    setIsLoadingData(false);\r\n                }\r\n            };\r\n            loadData();\r\n        } else {\r\n            // Reset to mocks/empty if no token (UI handles the blur)\r\n            setEmails(getMockEmails().slice(0, 3));\r\n            setEvents(getMockEvents().slice(0, 1));\r\n            setFiles(getMockFiles().slice(0, 2));\r\n        }\r\n    }, [token]);\r\n\r\n    const handleConnect = async () => {\r\n        setIsConnecting(true);\r\n        try {\r\n            const { user, token } = await signInWithGoogleWorkspace();\r\n            setUser(user);\r\n            setToken(token || null);\r\n        } catch (error) {\r\n            console.error(\"Failed to connect:\", error);\r\n        } finally {\r\n            setIsConnecting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full min-h-screen bg-slate-50 animate-in fade-in duration-500\">\r\n            {/* Header */}\r\n            <div className=\"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button onClick={onBack} className=\"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-500\">\r\n                        <span className=\"material-icons-outlined\">arrow_back</span>\r\n                    </button>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" alt=\"Google\" className=\"w-6 h-6\" />\r\n                        <h1 className=\"text-xl font-bold text-slate-800\">Google Workspace</h1>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    {!user ? (\r\n                        <button\r\n                            onClick={handleConnect}\r\n                            disabled={isConnecting}\r\n                            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold transition-all disabled:opacity-50\"\r\n                        >\r\n                            <img src=\"https://www.svgrepo.com/show/475656/google-color.svg\" className=\"w-5 h-5 bg-white rounded-full p-0.5\" />\r\n                            {isConnecting ? 'Connecting...' : 'Connect Workspace'}\r\n                        </button>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"flex items-center gap-2 px-3 py-1.5 bg-green-50 text-green-700 rounded-full border border-green-100\">\r\n                                <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\r\n                                <span className=\"text-xs font-bold\">Connected as {user.email}</span>\r\n                            </div>\r\n                            {user.photoURL && <img src={user.photoURL} className=\"w-9 h-9 rounded-full border border-slate-200\" alt=\"User\" />}\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"max-w-7xl mx-auto p-6 lg:p-10 space-y-8\">\r\n\r\n                {/* Stats Row */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div className=\"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-4\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-red-50 flex items-center justify-center text-red-600\">\r\n                            <span className=\"material-icons-outlined\">mail</span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-2xl font-black text-slate-900\">12</h3>\r\n                            <p className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Unread Emails</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-4\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center text-blue-600\">\r\n                            <span className=\"material-icons-outlined\">calendar_today</span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-2xl font-black text-slate-900\">3</h3>\r\n                            <p className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Meetings Today</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-4\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-green-50 flex items-center justify-center text-green-600\">\r\n                            <span className=\"material-icons-outlined\">description</span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-2xl font-black text-slate-900\">Recent</h3>\r\n                            <p className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Files Accessed</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Widgets Grid */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n\r\n                    {/* Gmail Widget */}\r\n                    <div className=\"lg:col-span-2 bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden flex flex-col relative\">\r\n                        {!user && (\r\n                            <div className=\"absolute inset-0 bg-white/60 backdrop-blur-sm z-10 flex flex-col items-center justify-center text-center p-6\">\r\n                                <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4\">\r\n                                    <span className=\"material-icons text-red-500 text-3xl\">lock</span>\r\n                                </div>\r\n                                <h3 className=\"font-bold text-slate-900 text-lg\">Connect Gmail</h3>\r\n                                <p className=\"text-slate-500 max-w-xs mb-4\">Securely connect your Google account to view and manage your emails directly here.</p>\r\n                                <button onClick={handleConnect} className=\"text-blue-600 font-bold hover:underline\">Connect Now</button>\r\n                            </div>\r\n                        )}\r\n                        <div className=\"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <span className=\"material-icons text-red-500\">mail</span>\r\n                                <h3 className=\"font-bold text-slate-800\">Inbox</h3>\r\n                            </div>\r\n                            <button className=\"text-xs font-bold bg-white border border-slate-200 px-3 py-1.5 rounded-lg hover:bg-slate-50 flex items-center gap-2\">\r\n                                <span className=\"material-icons-outlined text-sm\">edit</span> Compose\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"divide-y divide-slate-100\">\r\n                            {isLoadingData ? (\r\n                                <div className=\"p-8 text-center text-slate-400 text-sm\">Loading your emails...</div>\r\n                            ) : (\r\n                                emails.map((mail: any, i: number) => (\r\n                                    <div key={i} className={`p-4 hover:bg-red-50/10 cursor-pointer transition-colors flex items-center gap-4 group ${!user ? 'blur-[2px] select-none opacity-50' : ''}`}>\r\n                                        <div className={`w-2 h-2 rounded-full ${i < 3 ? 'bg-blue-600' : 'bg-transparent'}`}></div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex justify-between mb-1\">\r\n                                                <span className={`text-sm font-bold ${i < 3 ? 'text-slate-900' : 'text-slate-600'}`}>{mail.from}</span>\r\n                                                <span className=\"text-xs text-slate-400 font-medium\">{mail.date}</span>\r\n                                            </div>\r\n                                            <p className=\"text-sm text-slate-500 truncate group-hover:text-slate-700\">{mail.subject}</p>\r\n                                        </div>\r\n                                        {mail.isUnread && <span className=\"material-icons text-yellow-500 text-lg\">star</span>}\r\n                                    </div>\r\n                                )))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sidebar Widgets (Calendar & Drive) */}\r\n                    <div className=\"space-y-8\">\r\n                        {/* Calendar */}\r\n                        <div className=\"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden relative\">\r\n                            {!user && (\r\n                                <div className=\"absolute inset-0 bg-white/60 backdrop-blur-sm z-10 flex flex-col items-center justify-center p-4 text-center\">\r\n                                    <span className=\"material-icons text-blue-500 text-2xl mb-2\">lock</span>\r\n                                    <p className=\"bold text-sm text-slate-800\">Connect to see events</p>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <span className=\"material-icons text-blue-500\">calendar_today</span>\r\n                                    <h3 className=\"font-bold text-slate-800\">Today</h3>\r\n                                </div>\r\n                                <span className=\"text-xs font-bold text-slate-500\">Jan 29</span>\r\n                            </div>\r\n                            <div className=\"p-4 space-y-3\">\r\n                                {events.map((event: any, i: number) => (\r\n                                    <div key={i} className={`p-3 rounded-xl border-l-4 bg-blue-50 border-blue-500 hover:bg-blue-100 transition-colors cursor-pointer ${!user ? 'blur-[2px] opacity-50' : ''}`}>\r\n                                        <h4 className={`text-sm font-bold text-slate-900`}>{event.title}</h4>\r\n                                        <p className={`text-xs text-slate-700 mt-1`}>{event.startTime} - {event.endTime}</p>\r\n                                        {event.meetLink && (\r\n                                            <a href={event.meetLink} target=\"_blank\" rel=\"noreferrer\" className=\"mt-2 block w-full text-center bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold py-1.5 rounded-lg\">Join Google Meet</a>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Drive */}\r\n                        <div className=\"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden relative\">\r\n                            {!user && (\r\n                                <div className=\"absolute inset-0 bg-white/60 backdrop-blur-sm z-10 flex flex-col items-center justify-center p-4 text-center\">\r\n                                    <span className=\"material-icons text-green-500 text-2xl mb-2\">lock</span>\r\n                                    <p className=\"bold text-sm text-slate-800\">Connect to see files</p>\r\n                                </div>\r\n                            )}\r\n                            <div className=\"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <span className=\"material-icons text-green-600\">description</span>\r\n                                    <h3 className=\"font-bold text-slate-800\">Files</h3>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"p-2\">\r\n                                {files.map((file: any, i: number) => (\r\n                                    <div key={i} onClick={() => file.webViewLink && window.open(file.webViewLink, '_blank')} className={`flex items-center gap-3 p-3 hover:bg-slate-50 rounded-xl cursor-pointer transition-colors ${!user ? 'blur-[2px] opacity-50' : ''}`}>\r\n                                        <div className={`w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center overflow-hidden`}>\r\n                                            {file.iconLink ? <img src={file.iconLink} alt=\"\" className=\"w-5 h-5\" /> : <span className=\"material-icons text-green-600 text-lg\">description</span>}\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <h4 className=\"text-sm font-bold text-slate-700 truncate\">{file.name}</h4>\r\n                                            <p className=\"text-[10px] text-slate-400 capitalize\">Google File</p>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Apps Grid for Pinning */}\r\n                <div className=\"mt-8\">\r\n                    <h2 className=\"font-bold text-slate-800 mb-4 px-2\">Quick Access Apps (Pin to Dashboard)</h2>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4\">\r\n                        {[\r\n                            { id: 'gmail', label: 'Gmail', icon: 'mail', color: 'red' },\r\n                            { id: 'drive', label: 'Drive', icon: 'add_to_drive', color: 'green' },\r\n                            { id: 'calendar', label: 'Calendar', icon: 'calendar_today', color: 'blue' },\r\n                            { id: 'docs', label: 'Docs', icon: 'description', color: 'blue' },\r\n                            { id: 'sheets', label: 'Sheets', icon: 'table_chart', color: 'green' },\r\n                            { id: 'slides', label: 'Slides', icon: 'slideshow', color: 'orange' },\r\n                            { id: 'meet', label: 'Meet', icon: 'videocam', color: 'purple' },\r\n                        ].map((app) => (\r\n                            <button\r\n                                key={app.id}\r\n                                onClick={() => onPinApp?.(app)}\r\n                                className=\"flex flex-col items-center justify-center p-4 rounded-xl border border-slate-100 bg-white hover:shadow-md hover:border-blue-100 transition-all group\"\r\n                            >\r\n                                <div className={`w-10 h-10 rounded-full bg-${app.color}-50 flex items-center justify-center text-${app.color}-600 mb-3 group-hover:scale-110 transition-transform`}>\r\n                                    <span className=\"material-icons text-xl\">{app.icon}</span>\r\n                                </div>\r\n                                <span className=\"text-xs font-bold text-slate-700\">{app.label}</span>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\IncorporationWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\IncorporationWidget.tsx:182:17\n  180 |             try {\n  181 |                 const data: PurchaseData = JSON.parse(saved);\n> 182 |                 setPurchase(data);\n      |                 ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  183 |\n  184 |                 // Initialize services status\n  185 |                 const initServices: ServiceState[] = data.services","line":182,"column":17,"nodeType":null,"endLine":182,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { storage } from \"@/lib/firebase\";\r\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\r\n\r\ninterface PackageService {\r\n    name: string;\r\n    included: boolean;\r\n}\r\n\r\ninterface Addon {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    price: number;\r\n    emoji: string;\r\n    popular?: boolean;\r\n}\r\n\r\ninterface PurchaseData {\r\n    packageId: string;\r\n    packageName: string;\r\n    packageEmoji: string;\r\n    packageColor: string;\r\n    services: PackageService[];\r\n    addons: Addon[];\r\n    totalPrice: number;\r\n    purchasedAt: string;\r\n    userName: string;\r\n    userPhone: string;\r\n    userEmail: string;\r\n}\r\n\r\ntype ServiceStatus = \"pending\" | \"in_progress\" | \"completed\" | \"uploaded\";\r\n\r\ninterface ServiceState {\r\n    name: string;\r\n    status: ServiceStatus;\r\n    uploadedFile?: string;\r\n    downloadUrl?: string;\r\n    isAddon?: boolean;\r\n    addonEmoji?: string;\r\n}\r\n\r\n// ─── Document Upload Modal ───\r\nfunction UploadModal({\r\n    serviceName,\r\n    onUpload,\r\n    onClose,\r\n}: {\r\n    serviceName: string;\r\n    onUpload: (file: File) => Promise<void>;\r\n    onClose: () => void;\r\n}) {\r\n    const [dragging, setDragging] = useState(false);\r\n    const [file, setFile] = useState<File | null>(null);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    const handleFile = (f: File) => {\r\n        setFile(f);\r\n    };\r\n\r\n    const handleUploadClick = async () => {\r\n        if (!file) return;\r\n        setIsUploading(true);\r\n        try {\r\n            await onUpload(file);\r\n            onClose();\r\n        } catch (error) {\r\n            console.error(\"Upload failed\", error);\r\n            // Optionally handle error state here\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[300] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden\" onClick={e => e.stopPropagation()}>\r\n                <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 p-5 text-white\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-[10px] font-black uppercase tracking-widest opacity-70 mb-1\">Upload Documents</p>\r\n                            <h3 className=\"text-base font-black leading-tight\">{serviceName}</h3>\r\n                        </div>\r\n                        <button onClick={onClose} className=\"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors\">\r\n                            <span className=\"material-icons text-sm\">close</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-6\">\r\n                    <div\r\n                        onDragOver={e => { e.preventDefault(); setDragging(true); }}\r\n                        onDragLeave={() => setDragging(false)}\r\n                        onDrop={e => { e.preventDefault(); setDragging(false); if (e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0]); }}\r\n                        className={`border-2 border-dashed rounded-2xl p-8 text-center transition-all cursor-pointer ${dragging ? \"border-indigo-500 bg-indigo-50\" : \"border-slate-200 hover:border-indigo-300 hover:bg-slate-50\"}`}\r\n                        onClick={() => document.getElementById(\"file-input\")?.click()}\r\n                    >\r\n                        <span className=\"material-icons text-4xl text-slate-300 mb-3 block\">cloud_upload</span>\r\n                        {file ? (\r\n                            <p className=\"text-sm font-black text-indigo-600\">{file.name}</p>\r\n                        ) : (\r\n                            <>\r\n                                <p className=\"text-sm font-bold text-slate-600\">Drop files here or click to browse</p>\r\n                                <p className=\"text-xs text-slate-400 mt-1\">PDF, JPG, PNG up to 10MB</p>\r\n                            </>\r\n                        )}\r\n                        <input\r\n                            id=\"file-input\"\r\n                            type=\"file\"\r\n                            className=\"hidden\"\r\n                            accept=\".pdf,.jpg,.jpeg,.png\"\r\n                            onChange={e => { if (e.target.files?.[0]) handleFile(e.target.files[0]); }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 space-y-2\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">Required Documents</p>\r\n                        {[\"Aadhaar Card\", \"PAN Card\", \"Address Proof\", \"Passport Photo\"].map(doc => (\r\n                            <div key={doc} className=\"flex items-center gap-2 text-xs text-slate-600\">\r\n                                <span className=\"material-icons text-sm text-slate-300\">radio_button_unchecked</span>\r\n                                {doc}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-3 mt-5\">\r\n                        <button onClick={onClose} disabled={isUploading} className=\"flex-1 py-3 rounded-xl border border-slate-200 text-sm font-bold text-slate-600 hover:bg-slate-50 transition-colors disabled:opacity-50\">\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={handleUploadClick}\r\n                            disabled={!file || isUploading}\r\n                            className={`flex-1 py-3 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2 ${file ? \"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg hover:shadow-indigo-500/30\" : \"bg-slate-100 text-slate-400 cursor-not-allowed\"}`}\r\n                        >\r\n                            {isUploading ? (\r\n                                <>\r\n                                    <span className=\"material-icons text-sm animate-spin\">autorenew</span>\r\n                                    Uploading...\r\n                                </>\r\n                            ) : (\r\n                                \"Upload Document\"\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Status Badge ───\r\nfunction StatusBadge({ status }: { status: ServiceStatus }) {\r\n    const config = {\r\n        pending: { label: \"Pending\", color: \"bg-slate-100 text-slate-500\", icon: \"schedule\" },\r\n        in_progress: { label: \"In Progress\", color: \"bg-blue-100 text-blue-600\", icon: \"autorenew\" },\r\n        completed: { label: \"Completed\", color: \"bg-green-100 text-green-600\", icon: \"check_circle\" },\r\n        uploaded: { label: \"Docs Uploaded\", color: \"bg-amber-100 text-amber-600\", icon: \"upload_file\" },\r\n    };\r\n    const c = config[status];\r\n    return (\r\n        <span className={`inline-flex items-center gap-1 text-[10px] font-black uppercase tracking-wider px-2.5 py-1 rounded-full ${c.color}`}>\r\n            <span className={`material-icons text-[11px] ${status === \"in_progress\" ? \"animate-spin\" : \"\"}`}>{c.icon}</span>\r\n            {c.label}\r\n        </span>\r\n    );\r\n}\r\n\r\n// ─── Main Widget Component ───\r\nexport default function IncorporationWidget({ onNavigate }: { onNavigate?: (tab: 'A') => void }) {\r\n    const [purchase, setPurchase] = useState<PurchaseData | null>(null);\r\n    const [services, setServices] = useState<ServiceState[]>([]);\r\n    const [uploadModal, setUploadModal] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const saved = localStorage.getItem(\"smb_purchased_package\");\r\n        if (saved) {\r\n            try {\r\n                const data: PurchaseData = JSON.parse(saved);\r\n                setPurchase(data);\r\n\r\n                // Initialize services status\r\n                const initServices: ServiceState[] = data.services\r\n                    .filter(s => s.included)\r\n                    .map(s => ({ name: s.name, status: \"pending\" }));\r\n\r\n                // Add addons\r\n                data.addons.forEach(a => {\r\n                    initServices.push({\r\n                        name: a.name,\r\n                        status: \"pending\",\r\n                        isAddon: true,\r\n                        addonEmoji: a.emoji\r\n                    });\r\n                });\r\n\r\n                // Check previously saved status\r\n                const savedStatus = localStorage.getItem(\"smb_services_status\");\r\n                if (savedStatus) {\r\n                    setServices(JSON.parse(savedStatus));\r\n                } else {\r\n                    setServices(initServices);\r\n                }\r\n            } catch (e) {\r\n                console.error(\"Error parsing purchase data\", e);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const handleUpload = async (file: File) => {\r\n        if (!uploadModal || !purchase) return;\r\n\r\n        // Create a storage ref -> uploads/userName/serviceName/fileName\r\n        // Sanitizing names to avoid path issues\r\n        const safeUserName = purchase.userName.replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n        const safeServiceName = uploadModal.replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n        const storageRef = ref(storage, `uploads/${safeUserName}/${safeServiceName}/${file.name}`);\r\n\r\n        try {\r\n            // Upload the file\r\n            const uploadTask = uploadBytesResumable(storageRef, file);\r\n            \r\n            // Wait for upload to complete\r\n            await new Promise<void>((resolve, reject) => {\r\n                uploadTask.on('state_changed',\r\n                    (snapshot) => {\r\n                        // Observe state change events such as progress, pause, and resume\r\n                        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\r\n                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                        console.log('Upload is ' + progress + '% done');\r\n                    },\r\n                    (error) => {\r\n                        // Handle unsuccessful uploads\r\n                        reject(error);\r\n                    },\r\n                    () => {\r\n                        // Handle successful uploads on complete\r\n                        resolve();\r\n                    }\r\n                );\r\n            });\r\n\r\n            // Get download URL\r\n            const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\r\n\r\n            const updated = services.map(s =>\r\n                s.name === uploadModal ? { \r\n                    ...s, \r\n                    status: \"uploaded\" as ServiceStatus, \r\n                    uploadedFile: file.name,\r\n                    downloadUrl: downloadURL\r\n                } : s\r\n            );\r\n            \r\n            setServices(updated);\r\n            localStorage.setItem(\"smb_services_status\", JSON.stringify(updated));\r\n            setUploadModal(null);\r\n        } catch (error) {\r\n            console.error(\"Error uploading file:\", error);\r\n            alert(\"Failed to upload file. Please try again.\");\r\n        }\r\n    };\r\n\r\n    if (!purchase) {\r\n        return (\r\n            <div className=\"bg-gradient-to-r from-slate-900 to-indigo-900 rounded-3xl p-6 md:p-8 text-white shadow-xl relative overflow-hidden mb-8 group cursor-pointer\" onClick={() => onNavigate?.('A')}>\r\n                <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/4 blur-3xl group-hover:bg-white/10 transition-all duration-700\"></div>\r\n                <div className=\"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"w-16 h-16 bg-white/10 rounded-2xl flex items-center justify-center backdrop-blur-sm border border-white/10 shadow-lg group-hover:scale-110 transition-transform\">\r\n                            <span className=\"material-icons text-3xl text-indigo-300\">rocket_launch</span>\r\n                        </div>\r\n                        <div>\r\n                            <h2 className=\"text-xl font-black mb-1\">Start Your Business</h2>\r\n                            <p className=\"text-indigo-200 text-sm max-w-sm\">\r\n                                Incorporate your company, get GST, and protect your brand with our AI-powered legal stack.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                     <button className=\"px-6 py-3 bg-white text-indigo-900 rounded-xl font-bold text-sm shadow-lg hover:shadow-white/20 transition-all flex items-center gap-2 group-hover:gap-3\">\r\n                        Get Started <span className=\"material-icons text-sm\">arrow_forward</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"mb-8 animate-in fade-in slide-in-from-top-4 duration-700\">\r\n            <div className={`bg-gradient-to-r ${purchase.packageColor || 'from-indigo-600 to-purple-600'} rounded-t-3xl p-6 text-white relative overflow-hidden`}>\r\n                <div className=\"absolute top-0 right-0 opacity-10 transform translate-x-10 -translate-y-10\">\r\n                   <span className=\"material-icons text-[150px]\">rocket_launch</span>\r\n                </div>\r\n                \r\n                <div className=\"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                         <div className=\"w-14 h-14 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center text-3xl shadow-lg\">\r\n                            {purchase.packageEmoji}\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-[10px] font-black uppercase tracking-widest opacity-80 mb-1\">Active Plan</p>\r\n                            <h2 className=\"text-2xl font-black\">{purchase.packageName}</h2>\r\n                            <p className=\"text-sm opacity-90 flex items-center gap-2\">\r\n                                <span className=\"material-icons text-sm\">verified</span> Verified Purchase\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"bg-white/10 backdrop-blur-md rounded-xl p-3 border border-white/20 min-w-[200px]\">\r\n                        <p className=\"text-[10px] uppercase font-bold opacity-70 mb-1\">Total Progress</p>\r\n                        <div className=\"flex items-end justify-between mb-1\">\r\n                             <span className=\"text-2xl font-black\">{Math.round((services.filter(s=>s.status!=='pending').length / services.length) * 100)}%</span>\r\n                             <span className=\"text-xs font-medium opacity-80\">{services.filter(s=>s.status!=='pending').length}/{services.length} Completed</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-black/20 rounded-full h-1.5 overflow-hidden\">\r\n                             <div \r\n                                className=\"bg-white h-full rounded-full transition-all duration-1000\" \r\n                                style={{ width: `${(services.filter(s=>s.status!=='pending').length / services.length) * 100}%` }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white border border-slate-200 border-t-0 rounded-b-3xl p-6 shadow-sm\">\r\n                 <div className=\"flex items-center justify-between mb-4\">\r\n                    <h3 className=\"font-black text-slate-800 text-sm uppercase tracking-wide\">Included Services</h3>\r\n                    <span className=\"text-xs font-bold text-slate-400\">Status & Actions</span>\r\n                </div>\r\n                \r\n                <div className=\"space-y-3\">\r\n                    {services.map((service, idx) => (\r\n                        <div key={idx} className=\"flex flex-col sm:flex-row sm:items-center justify-between p-4 rounded-2xl border border-slate-100 hover:border-indigo-100 hover:shadow-md transition-all group bg-slate-50/50 gap-4 sm:gap-0\">\r\n                             <div className=\"flex items-center gap-3\">\r\n                                <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${service.status === 'completed' ? 'bg-green-100 text-green-600' : 'bg-slate-200 text-slate-500'}`}>\r\n                                    <span className=\"material-icons text-sm\">\r\n                                        {service.isAddon ? (service.addonEmoji || 'extension') : (service.status === 'completed' ? 'check' : 'business_center')}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"min-w-0\">\r\n                                    <h4 className=\"font-bold text-sm text-slate-800 truncate pr-2\">{service.name}</h4>\r\n                                    {service.isAddon && <span className=\"text-[9px] font-black uppercase tracking-wider text-indigo-500 bg-indigo-50 px-1.5 py-0.5 rounded-full\">Add-on</span>}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-3 self-end sm:self-auto\">\r\n                                <StatusBadge status={service.status} />\r\n                                {service.status === 'pending' && (\r\n                                    <button \r\n                                        onClick={() => setUploadModal(service.name)}\r\n                                        className=\"px-3 py-1.5 rounded-lg bg-indigo-600 text-white text-xs font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-500/20 active:scale-95\"\r\n                                    >\r\n                                        Upload\r\n                                    </button>\r\n                                )}\r\n                                {service.status === 'uploaded' && (\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        {service.downloadUrl && (\r\n                                            <a \r\n                                                href={service.downloadUrl} \r\n                                                target=\"_blank\" \r\n                                                rel=\"noopener noreferrer\" \r\n                                                className=\"text-xs font-extrabold text-indigo-600 hover:text-indigo-700 flex items-center gap-1 bg-indigo-50 px-2 py-1 rounded-lg transition-colors\"\r\n                                                title=\"View Document\"\r\n                                            >\r\n                                                <span className=\"material-icons text-sm\">visibility</span> View\r\n                                            </a>\r\n                                        )}\r\n                                        <span className=\"text-xs font-bold text-slate-400 flex items-center gap-1\">\r\n                                            <span className=\"material-icons text-sm\">check_circle</span> Done\r\n                                        </span>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {uploadModal && (\r\n                <UploadModal\r\n                    serviceName={uploadModal}\r\n                    onUpload={handleUpload}\r\n                    onClose={() => setUploadModal(null)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\IntegrationModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[212,215],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[212,215],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\n\r\ninterface IntegrationModalProps {\r\n    toolName: string; // If 'Custom', we allow user to input the name\r\n    onClose: () => void;\r\n    onSave: (data: any) => void;\r\n}\r\n\r\nexport default function IntegrationModal({ toolName: initialToolName, onClose, onSave }: IntegrationModalProps) {\r\n    const [toolName, setToolName] = useState(initialToolName === 'Custom App' ? '' : initialToolName);\r\n    const [apiKey, setApiKey] = useState('');\r\n    const [webhookUrl, setWebhookUrl] = useState('');\r\n    const [isTesting, setIsTesting] = useState(false);\r\n    const [testStatus, setTestStatus] = useState<'idle' | 'success' | 'failed'>('idle');\r\n\r\n    const isCustom = initialToolName === 'Custom App';\r\n\r\n    const handleTest = () => {\r\n        setIsTesting(true);\r\n        // Simulate Secure Proxy Test\r\n        // In real web app: await fetch('/api/integrations/test', { method: 'POST', body: JSON.stringify({ apiKey, url: webhookUrl }) })\r\n        setTimeout(() => {\r\n            setIsTesting(false);\r\n            setTestStatus('success');\r\n        }, 1500);\r\n    };\r\n\r\n    const handleSave = () => {\r\n        onSave({\r\n            name: toolName || initialToolName,\r\n            apiKey,\r\n            webhookUrl,\r\n            type: 'generic_proxy' // Flag for backend to treat this as a proxy integration\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in zoom-in-95\">\r\n                <div className=\"bg-slate-50 px-6 py-4 border-b border-slate-100 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center text-blue-600\">\r\n                            <span className=\"material-icons-outlined text-lg\">{isCustom ? 'add_link' : 'extension'}</span>\r\n                        </div>\r\n                        <h3 className=\"font-bold text-slate-800\">{isCustom ? 'Connect New App' : `Connect ${initialToolName}`}</h3>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-slate-400 hover:text-slate-600\">\r\n                        <span className=\"material-icons-outlined\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"p-6 space-y-4 max-h-[70vh] overflow-y-auto custom-scrollbar\">\r\n                    {/* Security & Privacy Banner */}\r\n                    <div className=\"bg-blue-50 p-3 rounded-lg border border-blue-100 flex gap-3\">\r\n                        <span className=\"material-icons-outlined text-blue-600 text-sm mt-0.5\">lock</span>\r\n                        <div className=\"text-xs text-blue-800\">\r\n                            <strong className=\"font-bold block mb-1\">End-to-End Encrypted & Private</strong>\r\n                            Your credentials are encrypted before storage. We use a secure proxy to communicate with third-party apps, so your API keys are never exposed to the client or public networks.\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Integration Guide Steps */}\r\n                    {isCustom && (\r\n                        <div className=\"bg-slate-50 rounded-xl p-4 border border-slate-100\">\r\n                            <h4 className=\"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3\">How to Integrate securely</h4>\r\n                            <div className=\"space-y-3 relative\">\r\n                                <div className=\"absolute left-2.5 top-2 bottom-2 w-0.5 bg-slate-200\"></div>\r\n                                {[\r\n                                    { title: 'Select Service', desc: 'Choose the external tool you want to connect.' },\r\n                                    { title: 'Generate API Key', desc: 'Go to the tool\\'s settings and generate a secure API Key/Token.' },\r\n                                    { title: 'Enter Credentials', desc: 'Paste the key below. It will be encrypted immediately.' },\r\n                                    { title: 'Verify Connection', desc: 'We will send a test packet to ensure the link is secure.' }\r\n                                ].map((step, i) => (\r\n                                    <div key={i} className=\"relative flex items-start gap-3 pl-1\">\r\n                                        <div className=\"w-5 h-5 rounded-full bg-white border-2 border-slate-300 flex items-center justify-center text-[10px] font-bold text-slate-500 relative z-10\">\r\n                                            {i + 1}\r\n                                        </div>\r\n                                        <div>\r\n                                            <h5 className=\"text-xs font-bold text-slate-800\">{step.title}</h5>\r\n                                            <p className=\"text-[10px] text-slate-500 leading-relaxed\">{step.desc}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {isCustom && (\r\n                        <div>\r\n                            <label className=\"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-1\">App / Tool Name</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={toolName}\r\n                                onChange={(e) => setToolName(e.target.value)}\r\n                                className=\"w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all font-bold\"\r\n                                placeholder=\"e.g. Slack, Trello, Zapier\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-1\">API Key / Secret Token</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={apiKey}\r\n                            onChange={(e) => setApiKey(e.target.value)}\r\n                            className=\"w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all font-mono\"\r\n                            placeholder=\"sk_live_...\"\r\n                        />\r\n                        <p className=\"text-[10px] text-slate-400 mt-1 flex items-center gap-1\">\r\n                            <span className=\"material-icons-outlined text-[10px]\">verified_user</span>\r\n                            This key will be encrypted and stored in our secure vault.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-1\">Webhook / API Endpoint</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={webhookUrl}\r\n                            onChange={(e) => setWebhookUrl(e.target.value)}\r\n                            className=\"w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all font-mono\"\r\n                            placeholder=\"https://api.example.com/v1/...\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Data Control Section */}\r\n                    <div className=\"border-t border-slate-100 pt-4\">\r\n                        <h4 className=\"text-xs font-bold text-slate-700 uppercase tracking-wider mb-2\">Data Control & Privacy</h4>\r\n                        <div className=\"flex items-start gap-2\">\r\n                            <input type=\"checkbox\" className=\"mt-0.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500\" defaultChecked />\r\n                            <p className=\"text-xs text-slate-600\">\r\n                                I authorize <strong>Secure Proxy</strong> to handle data traffic for this integration.\r\n                                <span className=\"block text-[10px] text-slate-400 mt-0.5\">You can revoke this access at any time from Settings. No data is stored permanently on our servers.</span>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {testStatus === 'success' && (\r\n                        <div className=\"bg-green-50 text-green-700 text-xs px-3 py-2 rounded-lg flex items-center gap-2\">\r\n                            <span className=\"material-icons-outlined text-sm\">check_circle</span>\r\n                            <span>Secure connection established via Proxy.</span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"bg-slate-50 px-6 py-4 border-t border-slate-100 flex justify-end gap-3\">\r\n                    <button onClick={onClose} className=\"px-4 py-2 text-slate-600 text-sm font-bold hover:bg-slate-200 rounded-lg transition-colors\">Cancel</button>\r\n                    <button\r\n                        onClick={handleTest}\r\n                        disabled={!apiKey || isTesting || (isCustom && !toolName)}\r\n                        className={`px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-bold rounded-lg hover:bg-indigo-100 transition-colors ${(!apiKey || isTesting) ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                    >\r\n                        {isTesting ? 'Verifying Encrypted Tunnel...' : 'Test Connection'}\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSave}\r\n                        disabled={testStatus !== 'success'}\r\n                        className=\"px-4 py-2 bg-slate-900 text-white text-sm font-bold rounded-lg hover:bg-slate-800 shadow-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        Save Secure Integration\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\LaunchPadAIOnboarding.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[218,221],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[218,221],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[984,987],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[984,987],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":236,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15597,15600],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15597,15600],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":422,"column":53,"nodeType":"JSXOpeningElement","endLine":422,"endColumn":192}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { BusinessData } from '@/types';\r\n\r\ninterface LaunchPadAIOnboardingProps {\r\n    businessData: Partial<BusinessData>;\r\n    onComplete: (data: any) => void;\r\n}\r\n\r\ntype UIPhase = 'POPUP1' | 'POPUP2' | 'QUIZ' | 'LOGIN' | 'BUILDING_ASSETS' | 'LOGO_SAMPLES' | 'LOGO_SELECTION' | 'WEBSITE_FLOW' | 'COMPLETED';\r\n\r\nexport default function LaunchPadAIOnboarding({ businessData, onComplete }: LaunchPadAIOnboardingProps) {\r\n    const [phase, setPhase] = useState<UIPhase>('POPUP1');\r\n    const [step, setStep] = useState(0);\r\n    const [formData, setFormData] = useState({\r\n        language: 'English',\r\n        businessName: businessData.name || '',\r\n        service: '',\r\n        industry: businessData.industry || '',\r\n        team: '',\r\n        stage: '',\r\n        launchTime: '',\r\n        products: [{ name: '', images: [] }],\r\n        description: '',\r\n        logoPreference: '',\r\n        selectedLogo: null as any,\r\n        email: '',\r\n        phone: ''\r\n    });\r\n\r\n    const languages = ['English', 'Hindi', 'Telugu', 'Tamil', 'Kannada', 'Marathi', 'Bengali', 'Gujarati'];\r\n    const industries = ['Technology', 'E-commerce', 'Healthcare', 'Education', 'Food & Beverage', 'Fashion', 'Real Estate', 'Finance', 'Services', 'Other'];\r\n    const teamSizes = ['Solo Founder', '2-5 Members', '5-10 Members', '10-20 Members', '20+ Members'];\r\n    const stages = ['Idea Stage', 'Development', 'MVP Ready', 'Pre-Launch', 'Already Launched'];\r\n    const launchTimes = ['Within a month', '1-3 Months', '3-6 Months', '6+ Months'];\r\n\r\n    // Quiz Steps\r\n    const quizSteps = [\r\n        { id: 'language', title: 'Select Your Language', type: 'select', options: languages },\r\n        {\r\n            id: 'basic', title: 'Business Details', type: 'multi-text', fields: [\r\n                { id: 'businessName', label: 'Business Name', placeholder: 'Enter your brand name' },\r\n                { id: 'service', label: 'Primary Service/Offering', placeholder: 'What do you do?' },\r\n                { id: 'industry', label: 'Industry', type: 'select', options: industries },\r\n            ]\r\n        },\r\n        {\r\n            id: 'details', title: 'Growth & Stage', type: 'multi-text', fields: [\r\n                { id: 'team', label: 'Team Size', type: 'select', options: teamSizes },\r\n                { id: 'stage', label: 'Business Stage', type: 'select', options: stages },\r\n                { id: 'launchTime', label: 'When do you plan to launch?', type: 'select', options: launchTimes },\r\n            ]\r\n        },\r\n        { id: 'products', title: 'Product Inventory', type: 'products' },\r\n        { id: 'description', title: 'Mission & Vision', type: 'textarea', placeholder: 'Explain your business mission, values, and what makes you unique...' },\r\n        {\r\n            id: 'contact', title: 'Claim Your Free Brand', type: 'multi-text', fields: [\r\n                { id: 'email', label: 'Email Address', placeholder: 'your@email.com' },\r\n                { id: 'phone', label: 'Phone Number', placeholder: '+91' },\r\n            ]\r\n        },\r\n    ];\r\n\r\n    const handleNextQuiz = () => {\r\n        if (step < quizSteps.length - 1) {\r\n            setStep(step + 1);\r\n        } else {\r\n            setPhase('LOGIN');\r\n        }\r\n    };\r\n\r\n    const handleBackQuiz = () => {\r\n        if (step > 0) setStep(step - 1);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (phase === 'BUILDING_ASSETS') {\r\n            const timer = setTimeout(() => {\r\n                setPhase('LOGO_SAMPLES');\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [phase]);\r\n\r\n    // Mock Logo Samples\r\n    const logoSamples = [\r\n        { id: 1, name: 'Minimalist', icon: 'auto_awesome_mosaic', preview: 'https://images.unsplash.com/photo-1626785774573-4b799315345d?w=200&h=200&fit=crop' },\r\n        { id: 2, name: 'Abstract Shapes', icon: 'category', preview: 'https://images.unsplash.com/photo-1614850523296-d8c1af93d400?w=200&h=200&fit=crop' },\r\n        { id: 3, name: 'Animated Style', icon: 'animation', preview: 'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=200&h=200&fit=crop' },\r\n        { id: 4, name: 'Typography Based', icon: 'title', preview: 'https://images.unsplash.com/photo-1561070791-2526d30994b5?w=200&h=200&fit=crop' },\r\n        { id: 5, name: 'Gradient Fusion', icon: 'gradient', preview: 'https://images.unsplash.com/photo-1557683316-973673baf926?w=200&h=200&fit=crop' },\r\n        { id: 6, name: 'Classic / Luxury', icon: 'diamond', preview: 'https://images.unsplash.com/photo-1523726491678-bf852e717f6a?w=200&h=200&fit=crop' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-sm animate-in fade-in duration-500\">\r\n            <div className=\"w-full max-w-xl animate-in zoom-in-95 slide-in-from-bottom-10 duration-700\">\r\n                {/* Phase 1: Popup 1 - High Energy Start */}\r\n                {phase === 'POPUP1' && (\r\n                    <div className=\"bg-white rounded-[3rem] p-12 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.2)] border border-slate-100 relative overflow-hidden text-left\">\r\n                        <div className=\"absolute top-0 right-0 w-64 h-64 bg-indigo-500/5 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/2\"></div>\r\n                        <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-purple-500/5 rounded-full blur-[60px] translate-y-1/2 -translate-x-1/2\"></div>\r\n\r\n                        <div className=\"relative z-10\">\r\n                            <div className=\"flex items-center gap-4 mb-8\">\r\n                                <div className=\"w-16 h-16 bg-slate-900 text-white rounded-3xl flex items-center justify-center shadow-2xl group-hover:rotate-12 transition-transform\">\r\n                                    <span className=\"material-symbols-outlined text-3xl font-black\">rocket_launch</span>\r\n                                </div>\r\n                                <div>\r\n                                    <h2 className=\"text-3xl font-black text-slate-900 tracking-tighter italic uppercase leading-none\">\r\n                                        Neural <span className=\"not-italic text-indigo-600\">Ignition</span>\r\n                                    </h2>\r\n                                    <p className=\"text-[9px] font-black text-slate-400 uppercase tracking-[0.3em] mt-2\">Scale or Fail? Choose Scale.</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-6 mb-10\">\r\n                                <h3 className=\"text-4xl font-black text-slate-900 tracking-tightest leading-[0.9]\">\r\n                                    BUILD YOUR BRAND <br />\r\n                                    <span className=\"text-indigo-600 italic\">FOR FREE.</span>\r\n                                </h3>\r\n                                <p className=\"text-slate-500 text-sm font-medium leading-relaxed max-w-sm\">\r\n                                    Why wait weeks? Our AI Engine generates your <span className=\"text-slate-900 font-black\">Logo, Website, and Brand Kits</span> in minutes. Fully automated. Zero friction.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => setPhase('POPUP2')}\r\n                                className=\"w-full py-5 bg-slate-900 text-white rounded-[1.5rem] font-black text-xs uppercase tracking-widest shadow-2xl shadow-slate-900/40 hover:bg-black hover:scale-[1.02] transition-all active:scale-95 flex items-center justify-center gap-3\"\r\n                            >\r\n                                Start Building Now\r\n                                <span className=\"material-symbols-outlined text-sm font-black\">arrow_forward</span>\r\n                            </button>\r\n\r\n                            <p className=\"text-center text-[8px] font-black text-slate-300 uppercase tracking-[0.2em] mt-6\">\r\n                                Powered by Arkle AI Factory • 256-bit Secure\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Phase 2: Popup 2 - Feature Spotlight */}\r\n                {phase === 'POPUP2' && (\r\n                    <div className=\"bg-white rounded-[3rem] p-10 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.2)] border border-slate-100 relative overflow-hidden text-left animate-in slide-in-from-right-8 duration-500\">\r\n                        <div className=\"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600\"></div>\r\n\r\n                        <div className=\"flex items-center justify-between mb-8\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center\">\r\n                                    <span className=\"material-symbols-outlined text-xl font-black\">auto_awesome</span>\r\n                                </div>\r\n                                <h2 className=\"text-xl font-black text-slate-900 uppercase tracking-tighter\">Factory Output</h2>\r\n                            </div>\r\n                            <span className=\"px-3 py-1 bg-slate-100 text-slate-400 rounded-lg text-[7px] font-black uppercase tracking-widest\">v2.4 Active</span>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-3 mb-10\">\r\n                            {[\r\n                                { label: 'Logo Design', icon: 'brush', active: true },\r\n                                { label: 'Web Architecture', icon: 'web', active: true },\r\n                                { label: 'Neural Copy', icon: 'edit_note', active: true },\r\n                                { label: 'Social Matrix', icon: 'share', active: true },\r\n                                { label: 'Brand Guidelines', icon: 'category', active: false },\r\n                                { label: 'E-Store Hub', icon: 'shopping_cart', active: false }\r\n                            ].map((f, i) => (\r\n                                <div key={i} className={`p-4 rounded-2xl border ${f.active ? 'bg-indigo-50/50 border-indigo-100 text-indigo-900' : 'bg-slate-50 border-slate-100 text-slate-400'} flex items-center gap-3 transition-all hover:scale-105`}>\r\n                                    <span className={`material-symbols-outlined text-sm ${f.active ? 'text-indigo-600' : 'text-slate-300'}`}>{f.icon}</span>\r\n                                    <span className=\"text-[8px] font-black uppercase tracking-widest\">{f.label}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={() => setPhase('QUIZ')}\r\n                            className=\"w-full py-5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-[1.5rem] font-black text-xs uppercase tracking-widest shadow-2xl shadow-indigo-600/30 hover:shadow-indigo-600/50 transition-all active:scale-95\"\r\n                        >\r\n                            Initialize Factory\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Phase 3: The Quiz - Interactive Onboarding */}\r\n                {phase === 'QUIZ' && (\r\n                    <div className=\"bg-white rounded-[2.5rem] shadow-[0_32px_64px_-16px_rgba(0,0,0,0.1)] overflow-hidden flex flex-col border border-slate-100 animate-in slide-in-from-right-8 duration-500 text-left\">\r\n                        <div className=\"bg-slate-50/50 backdrop-blur-md border-b border-slate-100 p-8\">\r\n                            <div className=\"flex items-center justify-between gap-4\">\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className=\"w-12 h-12 bg-slate-900 rounded-2xl flex items-center justify-center text-white shadow-xl rotate-3\">\r\n                                        <span className=\"material-symbols-outlined text-xl\">psychology</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <h3 className=\"text-[12px] font-black text-slate-900 uppercase tracking-[0.2em] leading-none mb-2\">Neural Input Phase</h3>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse\"></div>\r\n                                            <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">Question {step + 1} of {quizSteps.length}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex-1 max-w-[140px]\">\r\n                                    <div className=\"h-2 bg-slate-200 rounded-full overflow-hidden\">\r\n                                        <div className=\"h-full bg-slate-900 transition-all duration-700 ease-out\" style={{ width: `${((step + 1) / quizSteps.length) * 100}%` }}></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-10 max-h-[480px] overflow-y-auto custom-scroll space-y-8\">\r\n                            <div className=\"space-y-2\">\r\n                                <h2 className=\"text-3xl font-black text-slate-900 tracking-tight leading-tight\">{quizSteps[step].title}</h2>\r\n                                <p className=\"text-slate-400 text-xs font-medium uppercase tracking-widest\">Provide data for neural mapping</p>\r\n                            </div>\r\n\r\n                            {quizSteps[step].type === 'select' && (\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    {quizSteps[step].options?.map((opt) => (\r\n                                        <button\r\n                                            key={opt}\r\n                                            onClick={() => {\r\n                                                setFormData({ ...formData, [quizSteps[step].id]: opt });\r\n                                                handleNextQuiz();\r\n                                            }}\r\n                                            className={`p-6 rounded-2xl border-2 text-[10px] font-black transition-all text-left uppercase tracking-[0.2em] ${formData[quizSteps[step].id as keyof typeof formData] === opt\r\n                                                ? 'border-indigo-600 bg-indigo-50/50 text-indigo-700 shadow-lg scale-[1.02]'\r\n                                                : 'border-slate-50 hover:border-slate-200 text-slate-400 hover:bg-slate-50'\r\n                                                }`}\r\n                                        >\r\n                                            {opt}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n\r\n                            {quizSteps[step].type === 'multi-text' && (\r\n                                <div className=\"space-y-6\">\r\n                                    {quizSteps[step].fields?.map((field: any) => (\r\n                                        <div key={field.id} className=\"relative group\">\r\n                                            <label className=\"block text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-3 ml-2 group-focus-within:text-indigo-600 transition-colors\">{field.label}</label>\r\n                                            {field.type === 'select' ? (\r\n                                                <div className=\"relative\">\r\n                                                    <select\r\n                                                        value={formData[field.id as keyof typeof formData] as string}\r\n                                                        onChange={(e) => setFormData({ ...formData, [field.id]: e.target.value })}\r\n                                                        className=\"w-full p-5 rounded-2xl border-2 border-slate-50 focus:border-indigo-100 focus:bg-white outline-none font-black text-xs text-slate-900 bg-slate-50 transition-all appearance-none\"\r\n                                                    >\r\n                                                        <option value=\"\">Select Option...</option>\r\n                                                        {field.options.map((o: string) => <option key={o} value={o}>{o}</option>)}\r\n                                                    </select>\r\n                                                    <span className=\"material-symbols-outlined absolute right-5 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none\">expand_more</span>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={formData[field.id as keyof typeof formData] as string}\r\n                                                    onChange={(e) => setFormData({ ...formData, [field.id]: e.target.value })}\r\n                                                    placeholder={field.placeholder}\r\n                                                    className=\"w-full p-5 rounded-2xl border-2 border-slate-50 focus:border-indigo-100 focus:bg-white outline-none font-black text-xs text-slate-900 placeholder-slate-300 bg-slate-50 transition-all shadow-inner\"\r\n                                                />\r\n                                            )}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n\r\n                            {quizSteps[step].type === 'products' && (\r\n                                <div className=\"space-y-4\">\r\n                                    {formData.products.map((p, idx) => (\r\n                                        <div key={idx} className=\"bg-slate-50/50 p-6 rounded-2xl border-2 border-slate-100 group hover:border-indigo-100 transition-all\">\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={p.name}\r\n                                                onChange={(e) => {\r\n                                                    const newProds = [...formData.products];\r\n                                                    newProds[idx].name = e.target.value;\r\n                                                    setFormData({ ...formData, products: newProds });\r\n                                                }}\r\n                                                placeholder=\"Service Name (e.g. Design, Coaching)...\"\r\n                                                className=\"w-full bg-transparent border-b-2 border-slate-200 focus:border-indigo-600 outline-none font-black text-xs text-slate-900 py-2 transition-all\"\r\n                                            />\r\n                                        </div>\r\n                                    ))}\r\n                                    <button\r\n                                        onClick={() => setFormData({ ...formData, products: [...formData.products, { name: '', images: [] }] })}\r\n                                        className=\"w-full py-5 border-2 border-dashed border-slate-200 rounded-[1.5rem] text-slate-400 font-extrabold text-[10px] uppercase tracking-widest hover:border-indigo-200 hover:text-indigo-400 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2\"\r\n                                    >\r\n                                        <span className=\"material-symbols-outlined text-sm\">add</span>\r\n                                        Add Another Offering\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n\r\n                            {quizSteps[step].type === 'textarea' && (\r\n                                <div className=\"relative\">\r\n                                    <textarea\r\n                                        value={formData.description}\r\n                                        onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                                        placeholder={quizSteps[step].placeholder}\r\n                                        rows={6}\r\n                                        className=\"w-full p-8 rounded-[2rem] border-2 border-slate-50 focus:border-indigo-100 focus:bg-white outline-none font-bold text-xs text-slate-900 placeholder-slate-300 bg-slate-50 transition-all resize-none leading-relaxed shadow-inner\"\r\n                                    />\r\n                                    <div className=\"absolute bottom-6 right-8 text-[8px] font-black text-slate-300 uppercase tracking-widest\">Analyzing Sentiment...</div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"p-8 bg-slate-50/50 border-t border-slate-100 flex items-center justify-between shrink-0\">\r\n                            <button onClick={handleBackQuiz} disabled={step === 0} className=\"px-8 py-4 rounded-xl font-black text-slate-400 hover:text-slate-900 disabled:opacity-0 transition-all text-[10px] uppercase tracking-[0.2em] flex items-center gap-2\">\r\n                                <span className=\"material-symbols-outlined text-sm\">arrow_back</span>\r\n                                Back\r\n                            </button>\r\n                            <button onClick={handleNextQuiz} className=\"px-12 py-5 bg-slate-900 text-white rounded-[1.5rem] font-black text-[10px] uppercase tracking-[0.2em] shadow-2xl shadow-slate-900/30 hover:bg-black hover:scale-105 transition-all active:scale-95 flex items-center gap-3\">\r\n                                {step === quizSteps.length - 1 ? 'Start Engine' : 'Continue'}\r\n                                <span className=\"material-symbols-outlined text-xs font-black\">bolt</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Login / Profile Phase - Founder Identity */}\r\n                {phase === 'LOGIN' && (\r\n                    <div className=\"bg-white rounded-[3rem] p-12 shadow-[0_32px_64px_-16px_rgba(0,0,0,0.2)] border border-slate-100 animate-in zoom-in-95 duration-700 text-center relative overflow-hidden\">\r\n                        <div className=\"absolute top-0 right-0 w-64 h-64 bg-indigo-500/5 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/2\"></div>\r\n\r\n                        <div className=\"relative z-10\">\r\n                            <div className=\"w-20 h-20 bg-slate-900 text-white rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-2xl rotate-6 group-hover:rotate-0 transition-transform\">\r\n                                <span className=\"material-symbols-outlined text-4xl font-black\">fingerprint</span>\r\n                            </div>\r\n                            <h2 className=\"text-3xl font-black text-slate-900 leading-tight uppercase tracking-tighter italic\">Neural <span className=\"not-italic text-indigo-600\">ID</span></h2>\r\n                            <p className=\"text-slate-400 text-[10px] mt-4 font-black uppercase tracking-[0.3em]\">Map your profile to the ecosystem</p>\r\n\r\n                            <div className=\"mt-10 space-y-5 mb-12 text-left\">\r\n                                <div className=\"p-6 bg-slate-50/80 backdrop-blur-sm rounded-[1.5rem] border border-slate-100 flex items-center gap-5 transition-all hover:bg-white group\">\r\n                                    <div className=\"w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-lg border border-slate-50 group-hover:scale-110 transition-transform\">\r\n                                        <span className=\"material-symbols-outlined text-indigo-600 text-xl\">alternate_email</span>\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <p className=\"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1.5\">Registered Vector</p>\r\n                                        <p className=\"text-xs font-black text-slate-900\">{formData.email}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"grid grid-cols-2 gap-5\">\r\n                                    <input type=\"text\" placeholder=\"First Name\" className=\"w-full p-6 bg-slate-50 rounded-[1.5rem] border-2 border-transparent focus:border-indigo-100 focus:bg-white outline-none font-black text-xs text-slate-900 shadow-inner\" />\r\n                                    <input type=\"text\" placeholder=\"Last Name\" className=\"w-full p-6 bg-slate-50 rounded-[1.5rem] border-2 border-transparent focus:border-indigo-100 focus:bg-white outline-none font-black text-xs text-slate-900 shadow-inner\" />\r\n                                </div>\r\n                                <div className=\"relative\">\r\n                                    <input type=\"password\" placeholder=\"Secure Key\" className=\"w-full p-6 bg-slate-50 rounded-[1.5rem] border-2 border-transparent focus:border-indigo-100 focus:bg-white outline-none font-black text-xs text-slate-900 shadow-inner\" />\r\n                                    <span className=\"material-symbols-outlined absolute right-6 top-1/2 -translate-y-1/2 text-slate-300\">visibility_off</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => setPhase('BUILDING_ASSETS')}\r\n                                className=\"w-full py-6 bg-slate-900 text-white rounded-[1.5rem] font-black text-xs uppercase tracking-[0.2em] shadow-2xl shadow-slate-900/30 hover:bg-black hover:scale-[1.02] transition-all active:scale-95\"\r\n                            >\r\n                                Secure My Brand Identity\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Building Loader - Recursive Rendering */}\r\n                {phase === 'BUILDING_ASSETS' && (\r\n                    <div className=\"bg-slate-900 rounded-[3.5rem] p-16 text-center text-white shadow-2xl relative overflow-hidden\">\r\n                        <div className=\"absolute top-0 right-0 w-80 h-80 bg-indigo-500/10 rounded-full blur-[100px] animate-pulse\"></div>\r\n                        <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/10 rounded-full blur-[80px] animate-pulse delay-700\"></div>\r\n\r\n                        <div className=\"relative z-10\">\r\n                            <div className=\"w-24 h-24 border-[6px] border-white/5 border-t-indigo-500 rounded-full animate-spin mx-auto mb-10 shadow-[0_0_40px_rgba(79,70,229,0.4)]\"></div>\r\n                            <h2 className=\"text-4xl font-black mb-4 uppercase tracking-tighter italic\">Factory <span className=\"not-italic text-indigo-400\">Rendering...</span></h2>\r\n                            <p className=\"text-[11px] text-slate-400 font-bold tracking-[0.4em] uppercase mb-16 animate-pulse\">Synthesizing Digital Assets</p>\r\n\r\n                            <div className=\"space-y-6 max-w-xs mx-auto\">\r\n                                {[\r\n                                    { label: 'Neural Mesh', progress: '94%' },\r\n                                    { label: 'Pixel Buffer', progress: '72%' },\r\n                                    { label: 'Vector Logic', progress: '45%' }\r\n                                ].map((step, i) => (\r\n                                    <div key={i} className=\"space-y-2\">\r\n                                        <div className=\"flex justify-between text-[8px] font-black uppercase tracking-widest text-slate-500\">\r\n                                            <span>{step.label}</span>\r\n                                            <span className=\"text-indigo-400\">{step.progress}</span>\r\n                                        </div>\r\n                                        <div className=\"h-1 bg-white/5 rounded-full overflow-hidden\">\r\n                                            <div className=\"h-full bg-indigo-500/40 w-full animate-pulse\"></div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Selection Phases (Overlays) - Immersive Fullscreen Experience */}\r\n                {(phase === 'LOGO_SAMPLES' || phase === 'LOGO_SELECTION' || phase === 'WEBSITE_FLOW') && (\r\n                    <div className=\"fixed inset-0 z-[110] bg-slate-900/95 backdrop-blur-2xl flex items-center justify-center p-8 overflow-hidden animate-in fade-in duration-700\">\r\n                        {/* Phase Content ... */}\r\n                        {phase === 'LOGO_SAMPLES' && (\r\n                            <div className=\"bg-white rounded-[4rem] p-16 max-w-6xl w-full shadow-2xl animate-in zoom-in-95 duration-700 text-left relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 w-96 h-96 bg-indigo-50 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/2\"></div>\r\n\r\n                                <div className=\"relative z-10\">\r\n                                    <div className=\"flex items-center justify-between mb-16\">\r\n                                        <div>\r\n                                            <h2 className=\"text-5xl font-black text-slate-900 tracking-tightest uppercase italic\">Brand <span className=\"not-italic text-indigo-600\">DNA</span></h2>\r\n                                            <p className=\"text-slate-400 font-black uppercase tracking-[0.4em] text-[10px] mt-4 opacity-80\">Engine identified 6 strategic directions</p>\r\n                                        </div>\r\n                                        <div className=\"w-20 h-20 bg-slate-50 rounded-3xl flex items-center justify-center border border-slate-100 shadow-inner\">\r\n                                            <span className=\"material-symbols-outlined text-indigo-600 text-4xl font-black\">palette</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                                        {logoSamples.map((logo) => (\r\n                                            <button\r\n                                                key={logo.id}\r\n                                                onClick={() => {\r\n                                                    setFormData({ ...formData, logoPreference: logo.name });\r\n                                                    setPhase('LOGO_SELECTION');\r\n                                                }}\r\n                                                className=\"group relative bg-slate-50 aspect-[16/10] rounded-[3rem] border-2 border-transparent hover:border-indigo-600 transition-all overflow-hidden flex flex-col items-center justify-center p-10 shadow-sm hover:shadow-2xl\"\r\n                                            >\r\n                                                <div className=\"absolute inset-0 opacity-10 group-hover:opacity-40 transition-opacity grayscale group-hover:grayscale-0\">\r\n                                                    <img src={logo.preview} alt=\"\" className=\"w-full h-full object-cover scale-150 group-hover:scale-100 transition-transform duration-1000\" />\r\n                                                </div>\r\n                                                <span className=\"material-symbols-outlined text-5xl text-indigo-600 group-hover:scale-110 transition-transform mb-4 relative z-10 font-black\">{logo.icon}</span>\r\n                                                <span className=\"text-[12px] font-black text-slate-900 uppercase tracking-[0.3em] relative z-10\">{logo.name}</span>\r\n                                                <div className=\"absolute bottom-6 opacity-0 group-hover:opacity-100 transition-all transform translate-y-2 group-hover:translate-y-0\">\r\n                                                    <span className=\"px-5 py-2 bg-indigo-600 text-white rounded-full text-[8px] font-black uppercase tracking-widest shadow-xl\">Select Vision</span>\r\n                                                </div>\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {phase === 'LOGO_SELECTION' && (\r\n                            <div className=\"bg-white rounded-[4rem] p-16 max-w-[90vw] w-full shadow-2xl animate-in zoom-in-95 duration-700 flex flex-col max-h-[90vh] text-left relative overflow-hidden\">\r\n                                <div className=\"flex items-center justify-between mb-12 shrink-0 relative z-10\">\r\n                                    <div>\r\n                                        <h2 className=\"text-5xl font-black text-slate-900 tracking-tightest uppercase italic\">Neural <span className=\"not-italic text-indigo-600\">Prototypes</span></h2>\r\n                                        <p className=\"text-slate-400 font-black uppercase tracking-[0.4em] text-[10px] mt-4\">Recursive iterations for {formData.logoPreference}</p>\r\n                                    </div>\r\n                                    <button onClick={() => setPhase('LOGO_SAMPLES')} className=\"px-10 py-5 bg-slate-100 hover:bg-slate-200 rounded-[2rem] text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-3\">\r\n                                        <span className=\"material-symbols-outlined text-sm\">arrow_back</span>\r\n                                        Back to Concepts\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"flex-1 overflow-y-auto custom-scroll grid grid-cols-2 md:grid-cols-5 gap-10 p-4 relative z-10\">\r\n                                    {Array.from({ length: 10 }).map((_, i) => (\r\n                                        <div key={i} className=\"group relative bg-white aspect-square rounded-[3.5rem] border-2 border-slate-100 hover:border-indigo-600 shadow-sm hover:shadow-[0_24px_48px_-12px_rgba(79,70,229,0.3)] transition-all flex flex-col items-center justify-center p-14 cursor-pointer\" onClick={() => setPhase('WEBSITE_FLOW')}>\r\n                                            <div className=\"absolute inset-0 bg-gradient-to-br from-indigo-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\"></div>\r\n                                            <div className=\"w-24 h-24 rounded-full border-[6px] border-indigo-600 flex items-center justify-center text-5xl font-black text-indigo-600 group-hover:scale-110 transition-transform shadow-xl rotate-[15deg] group-hover:rotate-0\">\r\n                                                {formData.businessName.charAt(0)}\r\n                                            </div>\r\n                                            <div className=\"absolute inset-x-0 bottom-8 flex justify-center opacity-0 group-hover:opacity-100 transition-all translate-y-2 group-hover:translate-y-0\">\r\n                                                <span className=\"text-[9px] font-black text-white bg-slate-900 px-6 py-2.5 rounded-full uppercase tracking-widest shadow-2xl\">Initialize Unit</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {phase === 'WEBSITE_FLOW' && (\r\n                            <div className=\"bg-white rounded-[4rem] max-w-[95vw] w-full h-[90vh] shadow-2xl animate-in zoom-in-95 duration-700 overflow-hidden flex text-left border border-white/20\">\r\n                                <div className=\"w-96 bg-slate-900 flex flex-col p-12 text-white relative\">\r\n                                    <div className=\"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_0%_0%,rgba(79,70,229,0.1),transparent_50%)]\"></div>\r\n                                    <div className=\"relative z-10\">\r\n                                        <h3 className=\"text-3xl font-black mb-12 tracking-tightest uppercase italic\">The Layer <span className=\"not-italic text-indigo-400\">Builder</span></h3>\r\n                                        <div className=\"space-y-4 mb-12\">\r\n                                            {['Hero Matrix', 'Product Ecosystem', 'Founder Story', 'Neural Feedback', 'Signal Capture'].map(comp => (\r\n                                                <div key={comp} className=\"p-5 bg-white/5 rounded-2xl border border-white/10 text-[10px] font-black text-slate-300 flex items-center justify-between shadow-lg cursor-grab uppercase tracking-widest hover:bg-white/10 hover:border-white/20 transition-all group\">\r\n                                                    {comp}\r\n                                                    <span className=\"material-symbols-outlined text-[18px] opacity-30 group-hover:opacity-100 transition-opacity\">drag_indicator</span>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                        <div className=\"p-6 bg-indigo-600/10 rounded-3xl border border-indigo-500/20 mb-12\">\r\n                                            <p className=\"text-[9px] font-medium text-indigo-300 leading-relaxed uppercase tracking-wider\">\r\n                                                Live preview is rendered using Gemini 3.5. Any changes are reflected immediately across the neural stack.\r\n                                            </p>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => setPhase('COMPLETED')}\r\n                                            className=\"w-full py-6 bg-white text-slate-900 rounded-[2rem] font-black text-xs uppercase tracking-[0.2em] shadow-2xl hover:bg-indigo-50 hover:scale-[1.02] transition-all flex items-center justify-center gap-3\"\r\n                                        >\r\n                                            Transmit Store\r\n                                            <span className=\"material-symbols-outlined text-sm\">send</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex-1 bg-slate-50 p-16 overflow-y-auto custom-scroll relative\">\r\n                                    <div className=\"absolute top-10 left-1/2 -translate-x-1/2 px-6 py-2 bg-white rounded-full shadow-sm border border-slate-100 z-10 flex items-center gap-3\">\r\n                                        <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\r\n                                        <span className=\"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none\">Live Rendering Active</span>\r\n                                    </div>\r\n                                    <div className=\"bg-white w-full min-h-full rounded-[4rem] shadow-[0_64px_128px_-32px_rgba(0,0,0,0.1)] p-24 text-center border border-slate-200/50 relative overflow-hidden\">\r\n                                        <div className=\"absolute top-0 left-0 w-full h-[600px] bg-gradient-to-b from-indigo-50/30 to-transparent\"></div>\r\n                                        <nav className=\"flex justify-between items-center mb-32 text-[11px] font-black uppercase tracking-[0.3em] relative z-10\">\r\n                                            <span className=\"italic text-slate-900 border-b-4 border-indigo-600 pb-2\">{formData.businessName}</span>\r\n                                            <div className=\"space-x-12 text-slate-400\">\r\n                                                <span className=\"hover:text-indigo-600 cursor-pointer transition-colors\">Vision</span>\r\n                                                <span className=\"hover:text-indigo-600 cursor-pointer transition-colors\">Neural Kit</span>\r\n                                                <span className=\"hover:text-indigo-600 cursor-pointer transition-colors\">Connect</span>\r\n                                            </div>\r\n                                        </nav>\r\n                                        <div className=\"relative z-10\">\r\n                                            <h1 className=\"text-8xl font-black mb-12 tracking-tightest text-slate-900 leading-[0.85]\">\r\n                                                NEXT-GEN <br />\r\n                                                <span className=\"text-indigo-600 italic\">{formData.service}</span>\r\n                                            </h1>\r\n                                            <p className=\"text-slate-500 max-w-2xl mx-auto mb-20 text-lg font-medium leading-relaxed uppercase tracking-tight opacity-70\">\r\n                                                {formData.description || \"Synthesizing new paradigms for the modern entrepreneur.\"}\r\n                                            </p>\r\n                                            <div className=\"flex justify-center gap-8\">\r\n                                                <div className=\"px-12 py-5 bg-slate-900 text-white rounded-[1.5rem] text-[10px] font-black uppercase tracking-[0.3em] shadow-2xl hover:bg-black transition-all cursor-pointer\">Initialize Access</div>\r\n                                                <div className=\"px-12 py-5 bg-slate-100 text-slate-900 rounded-[1.5rem] text-[10px] font-black uppercase tracking-[0.3em] hover:bg-slate-200 transition-all cursor-pointer\">System View</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Phase 8: Completed - Final Transcendence */}\r\n                {phase === 'COMPLETED' && (\r\n                    <div className=\"bg-white rounded-[4rem] p-16 shadow-[0_32px_128px_-32px_rgba(79,70,229,0.3)] border border-slate-100 animate-in flip-in-y duration-1000 overflow-hidden text-center relative max-w-2xl mx-auto\">\r\n                        <div className=\"absolute top-0 right-0 w-64 h-64 bg-green-50 rounded-full -translate-y-32 translate-x-32 opacity-80 blur-[80px]\"></div>\r\n                        <div className=\"absolute bottom-0 left-0 w-64 h-64 bg-indigo-50 rounded-full translate-y-32 -translate-x-32 opacity-80 blur-[80px]\"></div>\r\n\r\n                        <div className=\"relative z-10\">\r\n                            <div className=\"w-24 h-24 bg-green-500 text-white rounded-[2.5rem] flex items-center justify-center mx-auto mb-10 shadow-2xl scale-110\">\r\n                                <span className=\"material-symbols-outlined text-5xl font-black animate-pulse\">check</span>\r\n                            </div>\r\n                            <h2 className=\"text-5xl font-black text-slate-900 leading-tight uppercase tracking-tightest italic mb-4\">Signal <span className=\"not-italic text-indigo-600\">Locked.</span></h2>\r\n                            <p className=\"text-slate-400 text-[11px] font-black uppercase tracking-[0.5em] mb-16\">Universal stack fully initialized</p>\r\n\r\n                            <div className=\"space-y-4 mb-20 text-left\">\r\n                                {[\r\n                                    { label: 'Neural Roadmap', status: 'SYNCHRONIZED', icon: 'auto_awesome' },\r\n                                    { label: 'Pixel Ecosystem', status: 'RENDERED', icon: 'brush' },\r\n                                    { label: 'Factory Core', status: 'OPERATIONAL', icon: 'settings_input_component' }\r\n                                ].map((item, i) => (\r\n                                    <div key={i} className=\"flex items-center justify-between p-6 bg-slate-50 rounded-[2rem] border border-slate-100 group hover:border-indigo-200 hover:bg-white transition-all shadow-sm hover:shadow-xl\">\r\n                                        <div className=\"flex items-center gap-5\">\r\n                                            <div className=\"w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-indigo-600 shadow-lg border border-slate-50 group-hover:rotate-6 transition-transform\">\r\n                                                <span className=\"material-symbols-outlined text-xl font-black\">{item.icon}</span>\r\n                                            </div>\r\n                                            <span className=\"text-[12px] font-black uppercase tracking-widest text-slate-900\">{item.label}</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <div className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></div>\r\n                                            <span className=\"text-[9px] font-black uppercase tracking-widest text-indigo-600\">{item.status}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={() => {\r\n                                    onComplete(formData);\r\n                                    window.location.reload();\r\n                                }}\r\n                                className=\"w-full py-6 bg-slate-900 text-white rounded-[2rem] font-black text-xs uppercase tracking-[0.3em] shadow-2xl hover:bg-black hover:scale-[1.02] transition-all flex items-center justify-center gap-4\"\r\n                            >\r\n                                TRANSMIT TO WORKSPACE\r\n                                <span className=\"material-symbols-outlined text-sm font-black\">login</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\QuickChatBot.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is defined but never used.","line":19,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is defined but never used.","line":19,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { BusinessData } from '@/types';\r\nimport { User } from 'firebase/auth';\r\n\r\ninterface Message {\r\n    id: string;\r\n    role: 'user' | 'assistant';\r\n    content: string;\r\n    type?: 'text' | 'action' | 'form';\r\n}\r\n\r\ninterface QuickChatBotProps {\r\n    user?: User | null;\r\n    data?: BusinessData;\r\n}\r\n\r\nconst QuickChatBot: React.FC<QuickChatBotProps> = ({ user, data }) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [messages, setMessages] = useState<Message[]>([\r\n        {\r\n            id: '1',\r\n            role: 'assistant',\r\n            content: `Hello! I'm your AI Co-Founder. I can help you build your entire brand identity and business assets in minutes. How would you like to start?`,\r\n            type: 'action'\r\n        }\r\n    ]);\r\n    const [input, setInput] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [activeFlow, setActiveFlow] = useState<string | null>(null);\r\n    const [flowStep, setFlowStep] = useState(0);\r\n\r\n    const chatEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    const scrollToBottom = () => {\r\n        chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isOpen) scrollToBottom();\r\n    }, [messages, isOpen]);\r\n\r\n    const BRAND_BUILD_QUESTIONS = [\r\n        \"Great! Let's build your brand. What's the name of your startup?\",\r\n        \"Beautiful name. What industry are you in?\",\r\n        \"Who is your target audience?\",\r\n        \"What's the main problem you are solving?\",\r\n        \"Perfect! I have enough to start generating your brand kit. Ready to see the results?\"\r\n    ];\r\n\r\n    const BUSINESS_INFO_QUESTIONS = [\r\n        \"Tell me about your business. What do you do?\",\r\n        \"How long have you been operating?\",\r\n        \"Do you have a website or social presence yet?\",\r\n        \"What are your biggest challenges right now?\"\r\n    ];\r\n\r\n    const handleQuickAction = (action: string) => {\r\n        const userMsg: Message = { id: Date.now().toString(), role: 'user', content: action };\r\n        setMessages(prev => [...prev, userMsg]);\r\n        setIsLoading(true);\r\n\r\n        setTimeout(() => {\r\n            if (action.includes('entire brand')) {\r\n                setActiveFlow('BRAND_BUILD');\r\n                setFlowStep(0);\r\n                setMessages(prev => [...prev, {\r\n                    id: (Date.now() + 1).toString(),\r\n                    role: 'assistant',\r\n                    content: BRAND_BUILD_QUESTIONS[0]\r\n                }]);\r\n            } else {\r\n                setActiveFlow('BUSINESS_INFO');\r\n                setFlowStep(0);\r\n                setMessages(prev => [...prev, {\r\n                    id: (Date.now() + 1).toString(),\r\n                    role: 'assistant',\r\n                    content: BUSINESS_INFO_QUESTIONS[0]\r\n                }]);\r\n            }\r\n            setIsLoading(false);\r\n        }, 800);\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (!input.trim() || isLoading) return;\r\n\r\n        const userMessage: Message = {\r\n            id: Date.now().toString(),\r\n            role: 'user',\r\n            content: input\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInput('');\r\n\r\n        if (activeFlow) {\r\n            setIsLoading(true);\r\n            setTimeout(() => {\r\n                const nextStep = flowStep + 1;\r\n                const questions = activeFlow === 'BRAND_BUILD' ? BRAND_BUILD_QUESTIONS : BUSINESS_INFO_QUESTIONS;\r\n\r\n                if (nextStep < questions.length) {\r\n                    setFlowStep(nextStep);\r\n                    setMessages(prev => [...prev, {\r\n                        id: (Date.now() + 1).toString(),\r\n                        role: 'assistant',\r\n                        content: questions[nextStep]\r\n                    }]);\r\n                } else {\r\n                    setMessages(prev => [...prev, {\r\n                        id: (Date.now() + 1).toString(),\r\n                        role: 'assistant',\r\n                        content: \"Excellent! I've captured everything. I'm now processing this for your dashboard. You'll see updates in the Launch Pad section shortly.\"\r\n                    }]);\r\n                    setActiveFlow(null);\r\n                }\r\n                setIsLoading(false);\r\n            }, 800);\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch('/api/ai-cofounder-claude', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    message: input,\r\n                    mode: 'quick',\r\n                    conversationHistory: messages.slice(-4)\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success) {\r\n                setMessages(prev => [...prev, {\r\n                    id: Date.now().toString(),\r\n                    role: 'assistant',\r\n                    content: data.response\r\n                }]);\r\n            }\r\n        } catch (error) {\r\n            console.error('Chat error:', error);\r\n            setMessages(prev => [...prev, {\r\n                id: Date.now().toString(),\r\n                role: 'assistant',\r\n                content: \"I'm having a bit of trouble connecting. But I'm still here to help with your brand!\"\r\n            }]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Floating Button */}\r\n            {!isOpen && (\r\n                <button\r\n                    onClick={() => setIsOpen(true)}\r\n                    className=\"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-[#4d47ff] via-[#4d47ff] to-[#9c42ff] text-white rounded-[1.5rem] shadow-2xl hover:shadow-indigo-500/50 hover:scale-110 transition-all duration-500 z-50 flex items-center justify-center group animate-bounce-slow border-2 border-white/20\"\r\n                >\r\n                    <span className=\"material-symbols-outlined text-3xl font-black\">bolt</span>\r\n                    <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-4 border-white animate-pulse\"></div>\r\n                </button>\r\n            )}\r\n\r\n            {/* Chat Window */}\r\n            {isOpen && (\r\n                <div className=\"fixed bottom-6 right-6 w-[400px] h-[600px] bg-white rounded-[2.5rem] shadow-[0_20px_60px_-15px_rgba(0,0,0,0.3)] flex flex-col z-50 animate-in slide-in-from-bottom-12 zoom-in-95 duration-500 border border-slate-100 overflow-hidden\">\r\n                    {/* Header */}\r\n                    <div className=\"bg-gradient-to-r from-[#4d47ff] to-[#9c42ff] text-white p-6 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"w-12 h-12 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center border border-white/20\">\r\n                                <span className=\"material-symbols-outlined text-2xl font-black\">psychology</span>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"font-black text-sm uppercase tracking-widest leading-none mb-1\">AI Co-Founder</div>\r\n                                <div className=\"flex items-center gap-1.5\">\r\n                                    <div className=\"w-1.5 h-1.5 rounded-full bg-green-400\"></div>\r\n                                    <span className=\"text-[10px] font-black opacity-80 uppercase tracking-widest\">Active Agent</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                                onClick={() => setIsOpen(false)}\r\n                                className=\"w-8 h-8 flex items-center justify-center hover:bg-white/20 rounded-xl transition-colors\"\r\n                            >\r\n                                <span className=\"material-symbols-outlined text-lg\">close</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Messages Area */}\r\n                    <div className=\"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50/50 custom-scroll\">\r\n                        {messages.map((msg, idx) => (\r\n                            <div key={msg.id} className={`flex flex-col ${msg.role === 'user' ? 'items-end' : 'items-start'} animate-in fade-in slide-in-from-bottom-2 duration-300`}>\r\n                                <div className={`flex gap-3 max-w-[85%] ${msg.role === 'user' ? 'flex-row-reverse' : ''}`}>\r\n                                    <div className={`w-8 h-8 rounded-xl flex items-center justify-center shrink-0 border mt-1 shadow-sm ${msg.role === 'assistant'\r\n                                            ? 'bg-indigo-600 text-white border-indigo-700'\r\n                                            : 'bg-white text-slate-700 border-slate-200'\r\n                                        }`}>\r\n                                        <span className=\"material-symbols-outlined text-sm font-black\">{msg.role === 'assistant' ? 'bolt' : 'person'}</span>\r\n                                    </div>\r\n                                    <div className={`rounded-2xl px-5 py-4 ${msg.role === 'user'\r\n                                            ? 'bg-slate-900 text-white shadow-xl shadow-slate-900/10'\r\n                                            : 'bg-white text-slate-800 border border-slate-100 shadow-sm'\r\n                                        }`}>\r\n                                        <p className=\"text-xs font-medium leading-relaxed whitespace-pre-wrap\">{msg.content}</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Quick Action Buttons after first Assistant message */}\r\n                                {msg.role === 'assistant' && msg.type === 'action' && idx === 0 && !activeFlow && (\r\n                                    <div className=\"flex flex-col gap-2 mt-4 ml-11\">\r\n                                        <button\r\n                                            onClick={() => handleQuickAction('Build your entire brand in minutes')}\r\n                                            className=\"px-6 py-3 bg-white border border-indigo-100 text-indigo-600 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-50 transition-all flex items-center gap-2 shadow-sm\"\r\n                                        >\r\n                                            <span className=\"material-symbols-outlined text-sm\">rocket_launch</span> Build your entire brand in minutes\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleQuickAction('Tell about your business')}\r\n                                            className=\"px-6 py-3 bg-white border border-slate-100 text-slate-600 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-50 transition-all flex items-center gap-2 shadow-sm\"\r\n                                        >\r\n                                            <span className=\"material-symbols-outlined text-sm\">business_center</span> Tell about your business\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n\r\n                        {isLoading && (\r\n                            <div className=\"flex justify-start\">\r\n                                <div className=\"bg-white rounded-2xl px-5 py-3 border border-slate-100 shadow-sm flex gap-1.5\">\r\n                                    <span className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.3s]\"></span>\r\n                                    <span className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.15s]\"></span>\r\n                                    <span className=\"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce\"></span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div ref={chatEndRef} />\r\n                    </div>\r\n\r\n                    {/* Premium Input Area */}\r\n                    <div className=\"p-6 bg-white border-t border-slate-50\">\r\n                        <div className=\"relative group\">\r\n                            <div className=\"absolute inset-x-0 -top-12 flex justify-center pointer-events-none\">\r\n                                <div className=\"bg-slate-900 text-white text-[9px] font-black uppercase tracking-widest px-4 py-2 rounded-full opacity-0 group-focus-within:opacity-100 transition-opacity flex items-center gap-2 shadow-xl\">\r\n                                    <span className=\"material-symbols-outlined text-[10px] text-indigo-400\">keyboard</span> Typing to AI Agent\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex items-end gap-3 bg-slate-50 rounded-[2rem] p-3 border-2 border-transparent focus-within:border-indigo-100 focus-within:bg-white transition-all shadow-inner focus-within:shadow-2xl focus-within:shadow-indigo-500/5\">\r\n                                <div className=\"flex flex-col gap-2 pb-1 pl-1\">\r\n                                    <button className=\"w-10 h-10 rounded-full hover:bg-white hover:shadow-md transition-all flex items-center justify-center text-slate-400 hover:text-indigo-600\">\r\n                                        <span className=\"material-symbols-outlined text-xl\">attach_file</span>\r\n                                    </button>\r\n                                    <button className=\"w-10 h-10 rounded-full hover:bg-white hover:shadow-md transition-all flex items-center justify-center text-slate-400 hover:text-indigo-600\">\r\n                                        <span className=\"material-symbols-outlined text-xl\">mic</span>\r\n                                    </button>\r\n                                </div>\r\n                                <textarea\r\n                                    value={input}\r\n                                    onChange={(e) => setInput(e.target.value)}\r\n                                    onKeyDown={(e) => {\r\n                                        if (e.key === 'Enter' && !e.shiftKey) {\r\n                                            e.preventDefault();\r\n                                            handleSubmit();\r\n                                        }\r\n                                    }}\r\n                                    placeholder=\"Ask your AI Co-founder...\"\r\n                                    className=\"flex-1 bg-transparent border-none outline-none text-xs font-bold text-slate-700 placeholder:text-slate-300 resize-none max-h-32 py-3\"\r\n                                    rows={1}\r\n                                    disabled={isLoading}\r\n                                />\r\n                                <button\r\n                                    onClick={handleSubmit}\r\n                                    disabled={!input.trim() || isLoading}\r\n                                    className={`w-12 h-12 rounded-2xl transition-all flex items-center justify-center shrink-0 ${!input.trim() || isLoading\r\n                                        ? 'bg-slate-200 text-slate-400'\r\n                                        : 'bg-indigo-600 text-white shadow-xl shadow-indigo-500/40 hover:scale-105 active:scale-95'\r\n                                        }`}\r\n                                >\r\n                                    <span className=\"material-symbols-outlined text-2xl font-black\">arrow_upward</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default QuickChatBot;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\SortableToolCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\Workspace.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AiCoFounderChat' is defined but never used.","line":11,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mobileLeftSidebarOpen' is assigned a value but never used.","line":40,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setMobileLeftSidebarOpen' is assigned a value but never used.","line":40,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showPopup' is assigned a value but never used.","line":42,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowPopup' is assigned a value but never used.","line":42,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":35},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\dashboard\\Workspace.tsx:58:9\n  56 |     useEffect(() => {\n  57 |         const hasProfile = localStorage.getItem('workspaceProfile');\n> 58 |         setIsNewUser(!hasProfile);\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  59 |     }, []);\n  60 |\n  61 |     // Show popup every 40 seconds for new users","line":58,"column":9,"nodeType":null,"endLine":58,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleOpenApp' is assigned a value but never used.","line":96,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9830,9833],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9830,9833],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":274,"column":45,"nodeType":"JSXOpeningElement","endLine":274,"endColumn":104},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":358,"column":41,"nodeType":"JSXOpeningElement","endLine":358,"endColumn":163},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":432,"column":37,"nodeType":"JSXOpeningElement","endLine":432,"endColumn":146},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":432,"column":37,"nodeType":"JSXOpeningElement","endLine":432,"endColumn":146}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"﻿\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { DndContext, closestCenter, KeyboardSensor, PointerSensor, useSensor, useSensors, DragEndEvent } from '@dnd-kit/core';\r\nimport { arrayMove, SortableContext, sortableKeyboardCoordinates, rectSortingStrategy } from '@dnd-kit/sortable';\r\nimport SortableToolCard from './SortableToolCard';\r\nimport ContextMenu from './ContextMenu';\r\nimport IntegrationModal from './IntegrationModal';\r\nimport GoogleIntegrationModal from './GoogleIntegrationModal';\r\nimport GoogleWorkspaceDashboard, { GoogleApp } from './GoogleWorkspaceDashboard';\r\nimport AiCoFounderChat from './AiCoFounderChat';\r\nimport AdvancedOnboarding from '../AdvancedOnboarding';\r\nimport CenterChat from '../ai-studio/CenterChat';\r\nimport IncorporationWidget from './IncorporationWidget';\r\n\r\ninterface WorkspaceProps {\r\n    onNavigate: (tab: 'A' | 'B' | 'LearnerStudio' | 'Workspace') => void;\r\n}\r\nconst colorVariants: Record<string, { bg: string, bg100: string, text: string, hoverBg: string, hoverText: string, border: string, from: string }> = {\r\n    blue: { bg: 'bg-blue-50', bg100: 'bg-blue-100', text: 'text-blue-600', hoverBg: 'group-hover:bg-blue-600', hoverText: 'group-hover:text-white', border: 'hover:border-blue-200', from: 'from-blue-50' },\r\n    indigo: { bg: 'bg-indigo-50', bg100: 'bg-indigo-100', text: 'text-indigo-600', hoverBg: 'group-hover:bg-indigo-600', hoverText: 'group-hover:text-white', border: 'hover:border-indigo-200', from: 'from-indigo-50' },\r\n    purple: { bg: 'bg-purple-50', bg100: 'bg-purple-100', text: 'text-purple-600', hoverBg: 'group-hover:bg-purple-600', hoverText: 'group-hover:text-white', border: 'hover:border-purple-200', from: 'from-purple-50' },\r\n    pink: { bg: 'bg-pink-50', bg100: 'bg-pink-100', text: 'text-pink-600', hoverBg: 'group-hover:bg-pink-600', hoverText: 'group-hover:text-white', border: 'hover:border-pink-200', from: 'from-pink-50' },\r\n    rose: { bg: 'bg-rose-50', bg100: 'bg-rose-100', text: 'text-rose-600', hoverBg: 'group-hover:bg-rose-600', hoverText: 'group-hover:text-white', border: 'hover:border-rose-200', from: 'from-rose-50' },\r\n    red: { bg: 'bg-red-50', bg100: 'bg-red-100', text: 'text-red-600', hoverBg: 'group-hover:bg-red-600', hoverText: 'group-hover:text-white', border: 'hover:border-red-200', from: 'from-red-50' },\r\n    orange: { bg: 'bg-orange-50', bg100: 'bg-orange-100', text: 'text-orange-600', hoverBg: 'group-hover:bg-orange-600', hoverText: 'group-hover:text-white', border: 'hover:border-orange-200', from: 'from-orange-50' },\r\n    emerald: { bg: 'bg-emerald-50', bg100: 'bg-emerald-100', text: 'text-emerald-600', hoverBg: 'group-hover:bg-emerald-600', hoverText: 'group-hover:text-white', border: 'hover:border-emerald-200', from: 'from-emerald-50' },\r\n    teal: { bg: 'bg-teal-50', bg100: 'bg-teal-100', text: 'text-teal-600', hoverBg: 'group-hover:bg-teal-600', hoverText: 'group-hover:text-white', border: 'hover:border-teal-200', from: 'from-teal-50' },\r\n    cyan: { bg: 'bg-cyan-50', bg100: 'bg-cyan-100', text: 'text-cyan-600', hoverBg: 'group-hover:bg-cyan-600', hoverText: 'group-hover:text-white', border: 'hover:border-cyan-200', from: 'from-cyan-50' },\r\n    green: { bg: 'bg-green-50', bg100: 'bg-green-100', text: 'text-green-600', hoverBg: 'group-hover:bg-green-600', hoverText: 'group-hover:text-white', border: 'hover:border-green-200', from: 'from-green-50' },\r\n    yellow: { bg: 'bg-yellow-50', bg100: 'bg-yellow-100', text: 'text-yellow-600', hoverBg: 'group-hover:bg-yellow-600', hoverText: 'group-hover:text-white', border: 'hover:border-yellow-200', from: 'from-yellow-50' },\r\n    violet: { bg: 'bg-violet-50', bg100: 'bg-violet-100', text: 'text-violet-600', hoverBg: 'group-hover:bg-violet-600', hoverText: 'group-hover:text-white', border: 'hover:border-violet-200', from: 'from-violet-50' },\r\n    fuchsia: { bg: 'bg-fuchsia-50', bg100: 'bg-fuchsia-100', text: 'text-fuchsia-600', hoverBg: 'group-hover:bg-fuchsia-600', hoverText: 'group-hover:text-white', border: 'hover:border-fuchsia-200', from: 'from-fuchsia-50' },\r\n    amber: { bg: 'bg-amber-50', bg100: 'bg-amber-100', text: 'text-amber-600', hoverBg: 'group-hover:bg-amber-600', hoverText: 'group-hover:text-white', border: 'hover:border-amber-200', from: 'from-amber-50' },\r\n};\r\n\r\nconst Workspace: React.FC<WorkspaceProps> = ({ onNavigate }) => {\r\n    const [leftSidebarOpen, setLeftSidebarOpen] = useState(true);\r\n    const [rightSidebarOpen, setRightSidebarOpen] = useState(true);\r\n    const [mobileLeftSidebarOpen, setMobileLeftSidebarOpen] = useState(false);\r\n    const [mobileAiAssistantsOpen, setMobileAiAssistantsOpen] = useState(false);\r\n    const [showPopup, setShowPopup] = useState(true);\r\n    const [integrationModalOpen, setIntegrationModalOpen] = useState(false);\r\n    const [selectedToolForIntegration, setSelectedToolForIntegration] = useState<string | null>(null);\r\n    const [googleModalOpen, setGoogleModalOpen] = useState(false);\r\n    const [isGoogleConnected, setIsGoogleConnected] = useState(false);\r\n    const [contextMenu, setContextMenu] = useState<{ x: number, y: number, label: string } | null>(null);\r\n    const [showGoogleDashboard, setShowGoogleDashboard] = useState(false);\r\n    const [embeddedApp, setEmbeddedApp] = useState<{ url: string; label: string } | null>(null);\r\n    const [showAppSelector, setShowAppSelector] = useState(false);\r\n    const [showAIWorkspaceSetup, setShowAIWorkspaceSetup] = useState(false);\r\n    const [isNewUser, setIsNewUser] = useState(false);\r\n    const [showNewUserPopup, setShowNewUserPopup] = useState(false);\r\n\r\n    // Check if user is new (no workspace profile)\r\n    useEffect(() => {\r\n        const hasProfile = localStorage.getItem('workspaceProfile');\r\n        setIsNewUser(!hasProfile);\r\n    }, []);\r\n\r\n    // Show popup every 40 seconds for new users\r\n    useEffect(() => {\r\n        if (!isNewUser) return;\r\n\r\n        const timer = setInterval(() => {\r\n            setShowNewUserPopup(true);\r\n        }, 40000); // 40 seconds\r\n\r\n        return () => clearInterval(timer);\r\n    }, [isNewUser]);\r\n\r\n    // Default pinned apps\r\n    const [pinnedApps, setPinnedApps] = useState<GoogleApp[]>([\r\n        { id: 'gmail', label: 'Gmail', icon: 'mail', color: 'red', url: 'https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1' }, // Compose view is cleaner for embed if poss\r\n        { id: 'calendar', label: 'Calendar', icon: 'calendar_today', color: 'blue', url: 'https://calendar.google.com/calendar/embed?src=en.indian%23holiday%40group.v.calendar.google.com&ctz=Asia%2FKolkata' }\r\n    ]);\r\n\r\n    const AVAILABLE_GOOGLE_APPS = [\r\n        { id: 'gmail', label: 'Gmail', icon: 'mail', color: 'red', url: 'https://mail.google.com/' },\r\n        { id: 'drive', label: 'Drive', icon: 'add_to_drive', color: 'green', url: 'https://drive.google.com/drive/' },\r\n        { id: 'calendar', label: 'Calendar', icon: 'calendar_today', color: 'blue', url: 'https://calendar.google.com/' },\r\n        { id: 'docs', label: 'Docs', icon: 'description', color: 'blue', url: 'https://docs.google.com/' },\r\n        { id: 'sheets', label: 'Sheets', icon: 'table_chart', color: 'green', url: 'https://docs.google.com/spreadsheets/' },\r\n        { id: 'slides', label: 'Slides', icon: 'slideshow', color: 'orange', url: 'https://docs.google.com/presentation/' },\r\n        { id: 'keep', label: 'Keep', icon: 'lightbulb', color: 'yellow', url: 'https://keep.google.com/' },\r\n        { id: 'meet', label: 'Meet', icon: 'videocam', color: 'purple', url: 'https://meet.google.com/' }\r\n    ];\r\n\r\n    const handlePinApp = (app: GoogleApp) => {\r\n        if (!pinnedApps.find(p => p.id === app.id)) {\r\n            setPinnedApps([...pinnedApps, app]);\r\n        }\r\n        setShowAppSelector(false);\r\n    };\r\n\r\n    const handleOpenApp = (app: GoogleApp) => {\r\n        // For actual embedding, we use the viewer overlay\r\n        // Note: Many Google Apps block standard iframes (X-Frame-Options). \r\n        // We will try to use specific embed URLs where possible, otherwise open New Window.\r\n\r\n        const isEmbeddable = app.id === 'calendar' || app.id === 'docs' || app.id === 'sheets' || app.id === 'slides';\r\n\r\n        if (isEmbeddable && app.url) {\r\n            setEmbeddedApp({ url: app.url, label: app.label });\r\n        } else if (app.url) {\r\n            window.open(app.url, '_blank');\r\n        }\r\n    };\r\n\r\n    const [tools, setTools] = useState([\r\n        { id: '1', label: 'Website', icon: 'language', color: 'blue' },\r\n        { id: '2', label: 'Store', icon: 'storefront', color: 'indigo' },\r\n        { id: '3', label: 'Orders', icon: 'receipt_long', color: 'emerald' },\r\n        { id: '4', label: 'Inventory', icon: 'inventory_2', color: 'teal' },\r\n        { id: '5', label: 'Payments', icon: 'payments', color: 'fuchsia' },\r\n        { id: '6', label: 'Suppliers', icon: 'local_shipping', color: 'cyan' },\r\n        { id: '7', label: 'Stock', icon: 'warehouse', color: 'rose' },\r\n        { id: '8', label: 'Analytics', icon: 'analytics', color: 'orange' },\r\n        { id: '9', label: 'Ads', icon: 'campaign', color: 'amber' },\r\n        { id: '10', label: 'Goals', icon: 'flag', color: 'red' },\r\n    ]);\r\n\r\n    const sensors = useSensors(\r\n        useSensor(PointerSensor),\r\n        useSensor(KeyboardSensor, {\r\n            coordinateGetter: sortableKeyboardCoordinates,\r\n        })\r\n    );\r\n\r\n    const handleDragEnd = (event: DragEndEvent) => {\r\n        const { active, over } = event;\r\n        if (active.id !== over?.id) {\r\n            setTools((items) => {\r\n                const oldIndex = items.findIndex((item) => item.id === active.id);\r\n                const newIndex = items.findIndex((item) => item.id === over?.id);\r\n                return arrayMove(items, oldIndex, newIndex);\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleIntegrationSave = (data: any) => {\r\n        console.log('Integration saved:', data);\r\n        setIntegrationModalOpen(false);\r\n        // Show success notification logic here\r\n    };\r\n\r\n    const handleContextMenu = (e: React.MouseEvent, label: string) => {\r\n        e.preventDefault();\r\n        setContextMenu({ x: e.clientX, y: e.clientY, label });\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"flex min-h-full w-full bg-slate-50/30 font-sans text-slate-900 transition-colors duration-200\">\r\n            {/* Google Workspace Dashboard Overlay */}\r\n            {showGoogleDashboard && (\r\n                <GoogleWorkspaceDashboard\r\n                    onBack={() => setShowGoogleDashboard(false)}\r\n                    onPinApp={handlePinApp}\r\n                />\r\n            )}\r\n\r\n\r\n\r\n\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"flex-1 flex flex-col h-full relative min-w-0\">\r\n                <div className=\"h-16 flex items-center justify-end px-4 lg:px-8 relative z-10 border-b border-slate-200/50 backdrop-blur-sm flex-shrink-0 bg-white/50\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                            onClick={() => setRightSidebarOpen(!rightSidebarOpen)}\r\n                            className=\"hidden lg:flex items-center gap-2 text-slate-600 hover:bg-slate-100 px-3 py-2 rounded-lg transition-colors font-medium text-sm\"\r\n                            title=\"Toggle AI Assistants\"\r\n                        >\r\n                            <span className=\"material-icons-outlined text-xl\">smart_toy</span>\r\n                            <span className=\"hidden xl:inline\">AI Tools</span>\r\n                            <span className=\"material-icons-outlined text-sm\">{rightSidebarOpen ? 'chevron_right' : 'chevron_left'}</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1 relative z-10 w-full\" id=\"main-scroll-container\">\r\n                    <div className=\"absolute top-0 left-0 w-full h-full bg-white z-0\"></div>\r\n\r\n                    {/* Content Section 1: AI Co-Founder (Top View) */}\r\n                    <div className=\"relative z-10 p-4 lg:p-8 flex flex-col items-center justify-start lg:justify-center min-w-0 transition-all duration-300\">\r\n                        {/* Incorporation Widget */}\r\n                        <div className=\"w-full max-w-6xl\">\r\n                            <IncorporationWidget onNavigate={onNavigate} />\r\n                        </div>\r\n\r\n                        {/* Oracle AI Studio Chat - Hero Section */}\r\n                        <div className=\"w-full h-[600px] bg-white rounded-2xl border border-slate-200 shadow-lg overflow-hidden\">\r\n                            <CenterChat\r\n                                chatId=\"workspace-main\"\r\n                                leftSidebarOpen={leftSidebarOpen}\r\n                                rightSidebarOpen={rightSidebarOpen}\r\n                                onToggleLeftSidebar={() => setLeftSidebarOpen(!leftSidebarOpen)}\r\n                                onToggleRightSidebar={() => setRightSidebarOpen(!rightSidebarOpen)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Interactive Operations Grid */}\r\n                    <section className=\"mb-12\">\r\n                        <div className=\"flex items-center justify-between mb-4 px-2\">\r\n                            <h2 className=\"text-sm font-bold text-slate-400 uppercase tracking-widest\">Operations</h2>\r\n                        </div>\r\n                        <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\r\n                            <SortableContext items={tools} strategy={rectSortingStrategy}>\r\n                                <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6 p-2\">\r\n                                    {tools.map((tool) => (\r\n                                        <SortableToolCard\r\n                                            key={tool.id}\r\n                                            id={tool.id}\r\n                                            label={tool.label}\r\n                                            icon={tool.icon}\r\n                                            color={tool.color}\r\n                                            onContextMenu={handleContextMenu}\r\n                                            onClick={() => console.log('Clicked', tool.label)}\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                            </SortableContext>\r\n                        </DndContext>\r\n                    </section>\r\n\r\n\r\n\r\n                    {/* Add Iterations Section */}\r\n                    <section className=\"mb-12\">\r\n                        <div className=\"flex items-center justify-between mb-4 px-2\">\r\n                            <h2 className=\"text-sm font-bold text-slate-900 font-serif\">Add Iterations</h2>\r\n                            <span className=\"material-icons-outlined text-blue-600 text-lg cursor-pointer\">arrow_forward</span>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-6 p-2\">\r\n                            {[\r\n                                { label: 'Website', icon: 'language', color: 'blue' },\r\n                                { label: 'Store', icon: 'storefront', color: 'indigo' },\r\n                                { label: 'Inventory', icon: 'inventory_2', color: 'emerald' },\r\n                                { label: 'Orders', icon: 'receipt_long', color: 'violet' },\r\n                                { label: 'Suppliers', icon: 'local_shipping', color: 'orange' },\r\n                                { label: 'Stock', icon: 'warehouse', color: 'teal' },\r\n                                { label: 'Purchase', icon: 'shopping_bag', color: 'rose' },\r\n                                { label: 'Workflow Builder', icon: 'account_tree', color: 'indigo', dashed: true }\r\n                            ].map((item, i) => (\r\n                                <div key={i} className={`p-6 rounded-2xl flex flex-col items-center justify-center gap-4 hover:shadow-md transition-all cursor-pointer group h-full ${item.dashed ? 'border-2 border-dashed border-indigo-200 bg-indigo-50/50 hover:border-indigo-400' : 'bg-white border border-slate-100 shadow-sm'}`}>\r\n                                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center transition-transform group-hover:scale-110 ${item.dashed ? 'bg-indigo-100 text-indigo-600' : `${colorVariants[item.color]?.bg || colorVariants.blue.bg} ${colorVariants[item.color]?.text || colorVariants.blue.text}`}`}>\r\n                                        <span className=\"material-icons text-xl\">{item.icon}</span>\r\n                                    </div>\r\n                                    <span className={`text-xs font-bold ${item.dashed ? 'text-indigo-600' : 'text-slate-700'}`}>{item.label}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n                    {/* Add Integrations Section */}\r\n                    <section className=\"mb-24\">\r\n                        <div className=\"flex items-center justify-between mb-4 px-2\">\r\n                            <h2 className=\"text-sm font-bold text-slate-900 font-serif\">Add Integrations</h2>\r\n                            <span className=\"material-icons-outlined text-blue-600 text-lg cursor-pointer\">arrow_forward</span>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 p-2\">\r\n                            {[\r\n                                { label: 'Bank Account', icon: 'account_balance', color: 'blue' },\r\n                                { label: 'Ecommerce', icon: 'shopping_bag', color: 'green' },\r\n                                { label: 'Shopify', icon: 'store', color: 'emerald', img: 'https://cdn.worldvectorlogo.com/logos/shopify.svg' }\r\n                            ].map((item, i) => (\r\n                                <div key={i} className=\"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex flex-col items-center justify-center gap-4 hover:shadow-md transition-all\">\r\n                                    <div className={`w-10 h-10 rounded-lg ${colorVariants[item.color]?.bg || colorVariants.blue.bg} flex items-center justify-center ${item.color === 'emerald' ? 'text-emerald-600' : `text-${item.color}-600`}`}>\r\n                                        {item.img ? (\r\n                                            <img src={item.img} className=\"w-6 h-6\" alt={item.label} />\r\n                                        ) : (\r\n                                            <span className=\"material-icons text-xl\">{item.icon}</span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"font-bold text-xs text-slate-700\">{item.label}</span>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setSelectedToolForIntegration(item.label);\r\n                                            setIntegrationModalOpen(true);\r\n                                        }}\r\n                                        className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest hover:text-blue-600\"\r\n                                    >\r\n                                        CONNECT\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </section>\r\n\r\n\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Sidebar - AI Assistant */}\r\n            <aside className={`fixed lg:sticky top-0 right-0 h-full border-l border-slate-200 z-50 transition-all duration-300 transform bg-white flex flex-col flex-shrink-0 ${rightSidebarOpen ? 'w-80 translate-x-0' : 'w-0 translate-x-full lg:translate-x-0 lg:w-0 overflow-hidden'} ${mobileAiAssistantsOpen ? 'translate-x-0' : 'translate-x-full lg:translate-x-0'}`}>\r\n                <div className=\"flex flex-col h-full bg-slate-50/50\">\r\n                    <div className=\"p-4 border-b border-slate-100 flex items-center justify-between bg-white flex-shrink-0\">\r\n                        <h2 className=\"font-bold text-slate-800 text-sm flex items-center gap-2\">\r\n                            <span className=\"material-icons-outlined text-blue-500\">smart_toy</span> AI Co-Founder\r\n                        </h2>\r\n                        <button onClick={() => setMobileAiAssistantsOpen(false)} className=\"lg:hidden text-slate-400\">\r\n                            <span className=\"material-icons\">close</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-6 scrollbar-hide\">\r\n                        {/* AI Tools List */}\r\n                        <div className=\"space-y-3\">\r\n                            <div className=\"px-1 py-2\">\r\n                                <h3 className=\"text-xs font-bold text-slate-900 uppercase tracking-widest mb-4\">AI Assistants & Tools</h3>\r\n                                <div className=\"space-y-3\">\r\n                                    {[\r\n                                        { label: 'AI Email Assistant', desc: 'Drafts, replies & management', icon: 'email', color: 'blue' },\r\n                                        { label: 'WhatsApp', desc: 'Business API Integration', icon: 'chat', color: 'green' },\r\n                                        { label: 'Social Media Management', desc: 'Schedule & analyze posts', icon: 'share', color: 'purple' },\r\n                                        { label: 'Generate SM Content', desc: 'AI-generated posts & visuals', icon: 'auto_awesome', color: 'pink' },\r\n                                        { label: 'Marketing Funnel', desc: 'Lead generation & nurturing', icon: 'filter_alt', color: 'orange' },\r\n                                        { label: 'Generate Quotation', desc: 'Instant price quotes', icon: 'request_quote', color: 'emerald' },\r\n                                        { label: 'Stock', desc: 'Inventory tracking', icon: 'inventory_2', color: 'cyan' },\r\n                                        { label: 'Tasks', desc: 'Team & project tasks', icon: 'task_alt', color: 'amber' }\r\n                                    ].map((tool, i) => (\r\n                                        <div key={i} className=\"bg-white p-3 rounded-xl border border-slate-100 hover:shadow-md cursor-pointer transition-all flex items-center gap-3 group\">\r\n                                            <div className={`w-10 h-10 rounded-lg ${colorVariants[tool.color]?.bg || colorVariants.blue.bg} flex items-center justify-center ${colorVariants[tool.color]?.text || colorVariants.blue.text} group-hover:scale-110 transition-transform`}>\r\n                                                <span className=\"material-icons-outlined\">{tool.icon}</span>\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <h4 className=\"font-bold text-xs text-slate-800 truncate\">{tool.label}</h4>\r\n                                                <p className=\"text-[10px] text-slate-500 truncate\">{tool.desc}</p>\r\n                                            </div>\r\n                                            <span className=\"material-icons-outlined text-slate-300 text-sm group-hover:text-blue-600\">chevron_right</span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Marketplace */}\r\n                        <div>\r\n                            <h2 className=\"font-bold text-slate-800 text-sm mb-4 font-serif\">Marketplace</h2>\r\n                            <div className=\"space-y-3\">\r\n                                <div\r\n                                    onClick={() => {\r\n                                        if (isGoogleConnected) {\r\n                                            setShowGoogleDashboard(true);\r\n                                        } else {\r\n                                            setGoogleModalOpen(true);\r\n                                        }\r\n                                    }}\r\n                                    className=\"flex items-center gap-3 p-3 bg-white border border-slate-100 rounded-xl hover:shadow-md cursor-pointer transition-all group\"\r\n                                >\r\n                                    <div className=\"w-10 h-10 rounded-lg bg-white border border-slate-100 flex items-center justify-center group-hover:border-red-100 transition-colors\">\r\n                                        <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" alt=\"Google\" className=\"w-5 h-5\" />\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <span className=\"text-xs font-bold text-slate-700 block group-hover:text-red-600 transition-colors\">Google Workspace</span>\r\n                                        <span className=\"text-[10px] text-slate-400\">Mail, Drive & Docs</span>\r\n                                    </div>\r\n                                    <span className=\"material-icons-outlined text-slate-300 text-sm group-hover:text-red-500\">chevron_right</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 p-3 bg-white border border-slate-100 rounded-xl hover:shadow-md cursor-pointer transition-all group\">\r\n                                    <div className=\"w-10 h-10 rounded-lg bg-yellow-50 flex items-center justify-center group-hover:scale-110 transition-transform\"><span className=\"material-icons text-yellow-600 text-lg\">store</span></div>\r\n                                    <span className=\"text-xs font-bold text-slate-700 group-hover:text-yellow-700 transition-colors\">Zoho Marketplace</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 p-3 bg-white border border-slate-100 rounded-xl hover:shadow-md cursor-pointer transition-all group\">\r\n                                    <div className=\"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center group-hover:scale-110 transition-transform\"><span className=\"material-icons text-blue-600 text-lg\">extension</span></div>\r\n                                    <span className=\"text-xs font-bold text-slate-700 group-hover:text-blue-700 transition-colors\">Explore Plugins</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div\r\n                            onClick={() => {\r\n                                setSelectedToolForIntegration('Custom App');\r\n                                setIntegrationModalOpen(true);\r\n                            }}\r\n                            className=\"flex items-center gap-3 p-4 bg-indigo-50 border border-indigo-100 rounded-xl hover:shadow-md cursor-pointer transition-all group\"\r\n                        >\r\n                            <span className=\"material-icons-outlined text-indigo-600 group-hover:scale-110 transition-transform\">add_link</span>\r\n                            <span className=\"text-xs font-bold text-indigo-700\">Connect App & Integrate</span>\r\n                        </div>\r\n                        <button className=\"w-full text-center text-xs text-blue-600 font-bold hover:underline\">Browse All Tools</button>\r\n                    </div>\r\n                </div>\r\n            </aside>\r\n\r\n\r\n            {/* Google Integration Modal */}\r\n            {googleModalOpen && (\r\n                <GoogleIntegrationModal\r\n                    onClose={() => setGoogleModalOpen(false)}\r\n                    onConnect={() => {\r\n                        setIsGoogleConnected(true);\r\n                        setGoogleModalOpen(false);\r\n                        setShowGoogleDashboard(true);\r\n                    }}\r\n                />\r\n            )}\r\n\r\n            {/* Context Menu */}\r\n            {contextMenu && (\r\n                <ContextMenu\r\n                    x={contextMenu.x}\r\n                    y={contextMenu.y}\r\n                    onClose={() => setContextMenu(null)}\r\n                    options={[\r\n                        {\r\n                            label: 'Connect Tool', icon: 'link', action: () => {\r\n                                setSelectedToolForIntegration(contextMenu.label);\r\n                                setIntegrationModalOpen(true);\r\n                            }\r\n                        },\r\n                        { label: 'Settings', icon: 'settings', action: () => console.log('Settings for', contextMenu.label) },\r\n                        { label: 'Remove', icon: 'delete', danger: true, action: () => console.log('Remove', contextMenu.label) },\r\n                    ]}\r\n                />\r\n            )}\r\n\r\n\r\n            {/* Embedded App Viewer Layer */}\r\n            {embeddedApp && (\r\n                <div className=\"fixed inset-0 z-[60] bg-black/50 backdrop-blur-sm flex items-center justify-center p-8\">\r\n                    <div className=\"bg-white w-full h-full max-w-6xl rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95\">\r\n                        <div className=\"bg-slate-50 p-4 border-b border-slate-200 flex items-center justify-between flex-shrink-0\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-8 h-8 rounded-lg bg-white border border-slate-200 flex items-center justify-center\">\r\n                                    <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" className=\"w-4 h-4\" />\r\n                                </div>\r\n                                <h3 className=\"font-bold text-slate-800\">{embeddedApp.label}</h3>\r\n                                <span className=\"px-2 py-0.5 bg-green-100 text-green-700 text-[10px] font-bold rounded-full uppercase tracking-wide\">Live</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <button onClick={() => window.open(embeddedApp.url, '_blank')} className=\"p-2 hover:bg-slate-200 rounded-lg text-slate-500\" title=\"Open in New Tab\">\r\n                                    <span className=\"material-icons text-lg\">open_in_new</span>\r\n                                </button>\r\n                                <button onClick={() => setEmbeddedApp(null)} className=\"p-2 hover:bg-slate-200 rounded-lg text-slate-500 hover:text-red-500 transition-colors\">\r\n                                    <span className=\"material-icons text-lg\">close</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex-1 bg-slate-100 relative\">\r\n                            <iframe\r\n                                src={embeddedApp.url}\r\n                                className=\"w-full h-full border-0\"\r\n                                title={embeddedApp.label}\r\n                                sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* App Selector Modal */}\r\n            {showAppSelector && (\r\n                <div className=\"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\r\n                    <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 animate-in zoom-in-95\">\r\n                        <div className=\"flex justify-between items-center mb-6\">\r\n                            <h2 className=\"text-xl font-bold text-slate-900\">Add Google Tool</h2>\r\n                            <button onClick={() => setShowAppSelector(false)} className=\"text-slate-400 hover:text-slate-600\"><span className=\"material-icons\">close</span></button>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                            {AVAILABLE_GOOGLE_APPS.map((app) => (\r\n                                <div\r\n                                    key={app.id}\r\n                                    onClick={() => handlePinApp(app)}\r\n                                    className=\"p-4 rounded-xl border border-slate-100 hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition-all group flex flex-col items-center gap-3\"\r\n                                >\r\n                                    <div className={`w-12 h-12 rounded-full bg-${app.color}-50 flex items-center justify-center group-hover:scale-110 transition-transform`}>\r\n                                        <span className={`material-icons text-${app.color}-600 text-2xl`}>{app.icon}</span>\r\n                                    </div>\r\n                                    <span className=\"font-bold text-slate-700 group-hover:text-blue-700\">{app.label}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Integration Modal */}\r\n            {integrationModalOpen && (\r\n                <IntegrationModal\r\n                    toolName={selectedToolForIntegration || ''}\r\n                    onClose={() => setIntegrationModalOpen(false)}\r\n                    onSave={handleIntegrationSave}\r\n                />\r\n            )}\r\n\r\n            {/* New User Popup (Every 40 seconds) */}\r\n            {showNewUserPopup && (\r\n                <div className=\"fixed inset-0 z-[90] bg-black/70 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in\">\r\n                    <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95\">\r\n                        <div className=\"bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-600 p-8 text-center relative\">\r\n                            <div className=\"absolute top-4 right-4\">\r\n                                <button\r\n                                    onClick={() => setShowNewUserPopup(false)}\r\n                                    className=\"text-white/80 hover:text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors\"\r\n                                >\r\n                                    <span className=\"material-icons text-xl\">close</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4 backdrop-blur-sm\">\r\n                                <span className=\"material-icons text-white text-4xl\">rocket_launch</span>\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-bold text-white mb-2\">Ready to Build?</h3>\r\n                            <p className=\"text-blue-100 text-sm\">Create your customised AI workspace in just 2 minutes!</p>\r\n                        </div>\r\n                        <div className=\"p-6 space-y-4\">\r\n                            <div className=\"space-y-3\">\r\n                                {[\r\n                                    { icon: 'auto_awesome', text: 'AI-powered tool recommendations', color: 'indigo' },\r\n                                    { icon: 'speed', text: 'Quick setup (8 simple questions)', color: 'purple' },\r\n                                    { icon: 'workspace_premium', text: 'Personalised workspace layout', color: 'blue' }\r\n                                ].map((item, i) => (\r\n                                    <div key={i} className=\"flex items-center gap-3\">\r\n                                        <div className={`w-8 h-8 rounded-lg bg-${item.color}-50 flex items-center justify-center flex-shrink-0`}>\r\n                                            <span className={`material-icons text-${item.color}-600 text-lg`}>{item.icon}</span>\r\n                                        </div>\r\n                                        <p className=\"text-slate-700 text-sm\">{item.text}</p>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"pt-2 space-y-2\">\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setShowNewUserPopup(false);\r\n                                        setShowAIWorkspaceSetup(true);\r\n                                    }}\r\n                                    className=\"w-full py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:-translate-y-0.5\"\r\n                                >\r\n                                    Build My Workspace Now\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setShowNewUserPopup(false)}\r\n                                    className=\"w-full py-2 text-slate-500 hover:text-slate-700 text-sm font-medium transition-colors\"\r\n                                >\r\n                                    Maybe later\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* AI Workspace Setup Modal */}\r\n            {showAIWorkspaceSetup && (\r\n                <div className=\"fixed inset-0 z-[80] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in\">\r\n                    <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden animate-in zoom-in-95\">\r\n                        <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 border-b border-blue-500 flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center\">\r\n                                    <span className=\"material-icons text-white text-xl\">rocket_launch</span>\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-bold text-white\">Build Your Customised AI Workspace</h3>\r\n                                    <p className=\"text-blue-100 text-sm\">Answer a few questions to get personalised tool recommendations</p>\r\n                                </div>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setShowAIWorkspaceSetup(false)}\r\n                                className=\"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-colors\"\r\n                            >\r\n                                <span className=\"material-icons text-2xl\">close</span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"overflow-y-auto max-h-[calc(90vh-100px)]\">\r\n                            <AdvancedOnboarding\r\n                                onComplete={(profile) => {\r\n                                    console.log('AI Workspace profile:', profile);\r\n                                    // Save the profile and mark user as no longer new\r\n                                    localStorage.setItem('workspaceProfile', JSON.stringify(profile));\r\n                                    setIsNewUser(false); // Stop showing popups\r\n                                    setShowAIWorkspaceSetup(false);\r\n                                    // Optionally show a success message or redirect\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Workspace;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\incorporation\\IncorporationDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'db' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'collection' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addDoc' is defined but never used.","line":6,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'serverTimestamp' is defined but never used.","line":6,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\n\r\n// ─── Types ────────────────────────────────────────────────────────────────────\r\ninterface PackageService {\r\n    name: string;\r\n    included: boolean;\r\n}\r\n\r\ninterface Addon {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    price: number;\r\n    emoji: string;\r\n    popular?: boolean;\r\n    serviceLink?: string; // editable by admin\r\n}\r\n\r\ninterface ServiceInfo {\r\n    what: string;\r\n    benefits: string[];\r\n    defaultLink: string;\r\n}\r\n\r\ninterface Package {\r\n    id: string;\r\n    name: string;\r\n    emoji: string;\r\n    tagline: string;\r\n    price: number;\r\n    originalPrice: number;\r\n    isVisible: boolean;\r\n    isPopular: boolean;\r\n    badge: string | null;\r\n    color: string;\r\n    gradient: string;\r\n    services: PackageService[];\r\n}\r\n\r\ninterface UserAnswers {\r\n    businessType?: string;\r\n    founderCount?: string;\r\n    revenue?: string;\r\n    funding?: string;\r\n    contact?: { phone: string; email: string };\r\n}\r\n\r\n// ─── Add-ons Catalog (per package) ───────────────────────────────────────────\r\nconst PACKAGE_ADDONS: Record<string, Addon[]> = {\r\n    proprietor: [\r\n        { id: \"tm\", name: \"Trademark Registration\", description: \"Protect your brand name & logo (1 class)\", price: 6999, emoji: \"™️\", popular: true },\r\n        { id: \"fssai\", name: \"FSSAI Basic License\", description: \"Mandatory for food businesses\", price: 2499, emoji: \"🍽️\" },\r\n        { id: \"iec\", name: \"IEC Code\", description: \"Import Export Code for trading businesses\", price: 1999, emoji: \"🌐\" },\r\n        { id: \"ca_support\", name: \"CA Support (6 months)\", description: \"Dedicated CA for ITR, GST returns\", price: 4999, emoji: \"👨‍💼\" },\r\n        { id: \"current_account\", name: \"Current Account Opening\", description: \"Assisted bank account setup\", price: 999, emoji: \"🏦\" },\r\n    ],\r\n    startup: [\r\n        { id: \"tm\", name: \"Trademark Registration\", description: \"Protect your brand name & logo (1 class)\", price: 6999, emoji: \"™️\", popular: true },\r\n        { id: \"extra_din\", name: \"Extra DIN + DSC\", description: \"For additional directors (per person)\", price: 1499, emoji: \"🪪\" },\r\n        { id: \"sha\", name: \"Shareholders Agreement (Custom)\", description: \"Lawyer-drafted custom SHA\", price: 4999, emoji: \"📄\" },\r\n        { id: \"pitch_deck\", name: \"Investor Pitch Deck\", description: \"Professional pitch deck template\", price: 2999, emoji: \"📊\", popular: true },\r\n        { id: \"fssai\", name: \"FSSAI License\", description: \"Mandatory for food businesses\", price: 2499, emoji: \"🍽️\" },\r\n        { id: \"iec\", name: \"IEC Code\", description: \"Import Export Code\", price: 1999, emoji: \"🌐\" },\r\n        { id: \"ca_annual\", name: \"CA Support (Annual)\", description: \"ITR, GST, MCA compliance\", price: 9999, emoji: \"👨‍💼\" },\r\n    ],\r\n    scaleup: [\r\n        { id: \"extra_tm\", name: \"Trademark (2nd Class)\", description: \"Protect in an additional class\", price: 5999, emoji: \"™️\" },\r\n        { id: \"extra_din\", name: \"Extra DIN + DSC\", description: \"For additional directors\", price: 1499, emoji: \"🪪\" },\r\n        { id: \"vat\", name: \"Professional Tax Registration\", description: \"State-level PT registration\", price: 1999, emoji: \"📋\" },\r\n        { id: \"esop\", name: \"ESOP Policy Drafting\", description: \"Employee stock option plan\", price: 7999, emoji: \"📈\", popular: true },\r\n        { id: \"roc\", name: \"ROC Annual Filing (Year 1)\", description: \"MCA annual return filing\", price: 4999, emoji: \"🗂️\" },\r\n        { id: \"fdi\", name: \"FDI Compliance Setup\", description: \"For foreign investment readiness\", price: 9999, emoji: \"🌍\" },\r\n        { id: \"virtual_office\", name: \"Virtual Office Address\", description: \"Premium business address (1 year)\", price: 3999, emoji: \"🏢\", popular: true },\r\n    ],\r\n};\r\n\r\n// ─── Service Info Catalog ─────────────────────────────────────────────────────\r\n// Each service id maps to: what it is, benefits, and a default page link\r\nconst SERVICE_INFO: Record<string, ServiceInfo> = {\r\n    tm: {\r\n        what: \"Trademark Registration protects your brand name, logo, and tagline legally under the Trade Marks Act, 1999.\",\r\n        benefits: [\r\n            \"Exclusive rights to use your brand name/logo in India\",\r\n            \"Legal protection against copycats & infringement\",\r\n            \"Builds brand trust and credibility with customers\",\r\n            \"Required for Amazon Brand Registry & export markets\",\r\n        ],\r\n        defaultLink: \"/services/trademark\",\r\n    },\r\n    extra_tm: {\r\n        what: \"Register your trademark in a second class to cover additional product/service categories.\",\r\n        benefits: [\r\n            \"Protects your brand across multiple business verticals\",\r\n            \"Prevents competitors from using your brand in related fields\",\r\n            \"Stronger legal standing in disputes\",\r\n        ],\r\n        defaultLink: \"/services/trademark\",\r\n    },\r\n    fssai: {\r\n        what: \"FSSAI License is mandatory for any business involved in food manufacturing, processing, packaging, or distribution.\",\r\n        benefits: [\r\n            \"Legally required to sell, manufacture, or distribute food\",\r\n            \"Builds consumer trust with the FSSAI logo\",\r\n            \"Avoid heavy penalties and business shutdown\",\r\n            \"Required for Swiggy, Zomato, and food export\",\r\n        ],\r\n        defaultLink: \"/services/fssai\",\r\n    },\r\n    iec: {\r\n        what: \"Import Export Code (IEC) is a 10-digit code issued by DGFT, mandatory for any business doing international trade.\",\r\n        benefits: [\r\n            \"Legally required to import or export goods/services\",\r\n            \"One-time registration, lifetime validity\",\r\n            \"Enables access to government export benefits & schemes\",\r\n            \"Required for foreign currency payments via banks\",\r\n        ],\r\n        defaultLink: \"/services/iec\",\r\n    },\r\n    ca_support: {\r\n        what: \"Dedicated CA support for 6 months covering ITR filing, GST returns, and basic compliance queries.\",\r\n        benefits: [\r\n            \"Monthly GST return filing (GSTR-1, GSTR-3B)\",\r\n            \"Annual Income Tax Return (ITR) filing\",\r\n            \"Compliance reminders so you never miss a deadline\",\r\n            \"Direct CA access via WhatsApp for quick queries\",\r\n        ],\r\n        defaultLink: \"/services/ca-support\",\r\n    },\r\n    ca_annual: {\r\n        what: \"Full-year dedicated CA support covering GST, ITR, MCA filings, and compliance for your company.\",\r\n        benefits: [\r\n            \"All GST returns + annual ITR filing covered\",\r\n            \"MCA annual return (AOC-4, MGT-7) filing\",\r\n            \"TDS filing and advance tax computation\",\r\n            \"Unlimited CA consultations for the year\",\r\n        ],\r\n        defaultLink: \"/services/ca-support\",\r\n    },\r\n    current_account: {\r\n        what: \"Assisted current account opening with our partner banks — zero paperwork hassle for you.\",\r\n        benefits: [\r\n            \"Dedicated relationship manager from the bank\",\r\n            \"Faster approval with our bank partnerships\",\r\n            \"Zero balance options available for startups\",\r\n            \"Required for business payments & GST compliance\",\r\n        ],\r\n        defaultLink: \"/services/banking\",\r\n    },\r\n    extra_din: {\r\n        what: \"Director Identification Number (DIN) + Digital Signature Certificate (DSC) for each additional director.\",\r\n        benefits: [\r\n            \"Mandatory for every director of a company\",\r\n            \"DSC required for MCA filings and e-signing\",\r\n            \"Quick processing — 1-2 business days\",\r\n            \"Lifetime validity for DIN\",\r\n        ],\r\n        defaultLink: \"/services/company-registration\",\r\n    },\r\n    sha: {\r\n        what: \"A custom Shareholders Agreement drafted by our legal team, defining rights, responsibilities, and exit clauses.\",\r\n        benefits: [\r\n            \"Protects founder rights and equity splits\",\r\n            \"Defines vesting schedules and lock-in periods\",\r\n            \"Covers dispute resolution and exit mechanisms\",\r\n            \"Essential for investor due diligence\",\r\n        ],\r\n        defaultLink: \"/services/legal\",\r\n    },\r\n    pitch_deck: {\r\n        what: \"A professionally designed investor pitch deck template tailored to your business model and sector.\",\r\n        benefits: [\r\n            \"Investor-ready structure (problem, solution, market, traction)\",\r\n            \"Designed by startup pitch experts\",\r\n            \"Editable PowerPoint + Google Slides format\",\r\n            \"Increases chances of securing funding\",\r\n        ],\r\n        defaultLink: \"/services/pitch-deck\",\r\n    },\r\n    vat: {\r\n        what: \"Professional Tax (PT) registration is a state-level tax mandatory for businesses with employees in most Indian states.\",\r\n        benefits: [\r\n            \"Legally required for businesses with salaried employees\",\r\n            \"Avoid penalties from state labour department\",\r\n            \"Simple one-time registration process\",\r\n            \"Covers all employees under one registration\",\r\n        ],\r\n        defaultLink: \"/services/compliance\",\r\n    },\r\n    esop: {\r\n        what: \"Employee Stock Option Plan (ESOP) policy drafted by our legal team to help you attract and retain top talent.\",\r\n        benefits: [\r\n            \"Attract senior talent without high cash salaries\",\r\n            \"Legally compliant ESOP pool structure\",\r\n            \"Vesting schedule and exercise price defined\",\r\n            \"Required by investors before Series A\",\r\n        ],\r\n        defaultLink: \"/services/legal\",\r\n    },\r\n    roc: {\r\n        what: \"ROC Annual Filing covers MCA annual returns (AOC-4 and MGT-7) for your company's first financial year.\",\r\n        benefits: [\r\n            \"Avoid ₹100/day penalty for late filing\",\r\n            \"Maintain active company status with MCA\",\r\n            \"Includes Director KYC (DIR-3 KYC)\",\r\n            \"Handled end-to-end by our CA team\",\r\n        ],\r\n        defaultLink: \"/services/compliance\",\r\n    },\r\n    fdi: {\r\n        what: \"FDI Compliance Setup prepares your company to receive foreign investment under FEMA and RBI guidelines.\",\r\n        benefits: [\r\n            \"FEMA-compliant share allotment structure\",\r\n            \"FC-GPR filing with RBI after investment\",\r\n            \"Valuation certificate from registered CA\",\r\n            \"Opens doors to global investors and VCs\",\r\n        ],\r\n        defaultLink: \"/services/compliance\",\r\n    },\r\n    virtual_office: {\r\n        what: \"A premium business address in a prime location for 1 year — use it for GST, MCA, and all official correspondence.\",\r\n        benefits: [\r\n            \"Prime city address without expensive office rent\",\r\n            \"Valid for GST registration and company incorporation\",\r\n            \"Mail handling and forwarding included\",\r\n            \"Professional image for clients and investors\",\r\n        ],\r\n        defaultLink: \"/services/virtual-office\",\r\n    },\r\n};\r\n\r\n// ─── Default Package Config (Admin Editable) ──────────────────────────────────\r\nconst DEFAULT_PACKAGES: Package[] = [\r\n    {\r\n        id: \"proprietor\",\r\n        name: \"Proprietor Pack\",\r\n        emoji: \"🏪\",\r\n        tagline: \"Solo founders & freelancers\",\r\n        price: 2999,\r\n        originalPrice: 4999,\r\n        isVisible: true,\r\n        isPopular: false,\r\n        badge: \"Best Value\",\r\n        color: \"from-amber-500 to-orange-500\",\r\n        gradient: \"from-amber-50 to-orange-50\",\r\n        services: [\r\n            { name: \"Sole Proprietorship Registration\", included: true },\r\n            { name: \"MSME / Udyam Registration\", included: true },\r\n            { name: \"GST Registration\", included: true },\r\n            { name: \"Bank Account Opening Support\", included: true },\r\n            { name: \"Digital Signature (DSC)\", included: true },\r\n            { name: \"30-day Email Support\", included: true },\r\n            { name: \"Shareholders Agreement\", included: false },\r\n            { name: \"Trademark Registration\", included: false },\r\n            { name: \"Dedicated CA Support\", included: false },\r\n        ],\r\n    },\r\n    {\r\n        id: \"startup\",\r\n        name: \"Startup Pack\",\r\n        emoji: \"🚀\",\r\n        tagline: \"2-5 founders, growth-ready\",\r\n        price: 7999,\r\n        originalPrice: 12999,\r\n        isVisible: true,\r\n        isPopular: true,\r\n        badge: \"Most Popular\",\r\n        color: \"from-indigo-500 to-purple-600\",\r\n        gradient: \"from-indigo-50 to-purple-50\",\r\n        services: [\r\n            { name: \"Private Limited Company Registration\", included: true },\r\n            { name: \"MOA + AOA Drafting\", included: true },\r\n            { name: \"2 DIN + 2 DSC\", included: true },\r\n            { name: \"PAN + TAN for Company\", included: true },\r\n            { name: \"GST Registration\", included: true },\r\n            { name: \"Startup India Recognition\", included: true },\r\n            { name: \"Shareholders Agreement Template\", included: true },\r\n            { name: \"90-day WhatsApp Support\", included: true },\r\n            { name: \"Trademark Registration\", included: false },\r\n        ],\r\n    },\r\n    {\r\n        id: \"scaleup\",\r\n        name: \"Scale-Up Pack\",\r\n        emoji: \"📈\",\r\n        tagline: \"Funding-ready, full compliance\",\r\n        price: 14999,\r\n        originalPrice: 22999,\r\n        isVisible: true,\r\n        isPopular: false,\r\n        badge: \"Premium\",\r\n        color: \"from-emerald-500 to-teal-600\",\r\n        gradient: \"from-emerald-50 to-teal-50\",\r\n        services: [\r\n            { name: \"Private Limited / LLP (Your Choice)\", included: true },\r\n            { name: \"MOA + AOA Drafting\", included: true },\r\n            { name: \"GST Registration\", included: true },\r\n            { name: \"Trademark Registration (1 Class)\", included: true },\r\n            { name: \"FSSAI / IEC / Sector License\", included: true },\r\n            { name: \"Investor-Ready Pitch Deck Template\", included: true },\r\n            { name: \"Compliance Calendar Setup\", included: true },\r\n            { name: \"Dedicated CA Support (1 Year)\", included: true },\r\n            { name: \"Priority WhatsApp + Call Support\", included: true },\r\n        ],\r\n    },\r\n];\r\n\r\n// ─── AI Pack Generator Logic ──────────────────────────────────────────────────\r\nfunction generateAIPack(answers: UserAnswers): {\r\n    recommendedId: string;\r\n    reason: string;\r\n    customServices: string[];\r\n    price: number;\r\n    confidence: number;\r\n} {\r\n    const { businessType, founderCount, revenue, funding } = answers;\r\n\r\n    let recommendedId = \"startup\";\r\n    let reason = \"\";\r\n    let customServices: string[] = [];\r\n    let price = 7999;\r\n    let confidence = 88;\r\n\r\n    // Logic tree\r\n    if (founderCount === \"1\") {\r\n        recommendedId = \"proprietor\";\r\n        price = 2999;\r\n        reason = \"Since you're a solo founder, Sole Proprietorship is the fastest and most cost-effective way to start legally.\";\r\n        customServices = [\"Sole Proprietorship Registration\", \"MSME Registration\", \"GST Registration\", \"Bank Account Support\"];\r\n        confidence = 94;\r\n    } else if (funding === \"Yes, within 1 year\" || founderCount === \"4+\") {\r\n        recommendedId = \"scaleup\";\r\n        price = 14999;\r\n        reason = \"With funding plans and multiple founders, Private Limited Company with full compliance setup is essential for investor confidence.\";\r\n        customServices = [\"Private Limited Company\", \"MOA + AOA\", \"GST Registration\", \"Trademark (1 Class)\", \"Compliance Calendar\", \"Dedicated CA Support\"];\r\n        confidence = 96;\r\n    } else if (revenue === \"> ₹1Cr\" || revenue === \"₹50L-1Cr\") {\r\n        recommendedId = \"scaleup\";\r\n        price = 12999;\r\n        reason = \"Your revenue target requires a robust legal structure with full compliance to avoid penalties and enable growth.\";\r\n        customServices = [\"Private Limited Company\", \"GST Registration\", \"Trademark Registration\", \"Compliance Calendar\", \"CA Support\"];\r\n        confidence = 91;\r\n    } else {\r\n        recommendedId = \"startup\";\r\n        price = 7999;\r\n        reason = \"Private Limited Company is perfect for your team size and growth plans — gives you credibility, limited liability, and funding readiness.\";\r\n        customServices = [\"Private Limited Company\", \"2 DIN + 2 DSC\", \"GST Registration\", \"Startup India Recognition\", \"Shareholders Agreement\"];\r\n        confidence = 89;\r\n    }\r\n\r\n    // Add sector-specific services\r\n    if (businessType === \"🍕 Food/F&B\") {\r\n        customServices.push(\"FSSAI License\");\r\n        price += 1500;\r\n    }\r\n    if (businessType === \"📦 E-commerce\") {\r\n        customServices.push(\"GST Registration\", \"IEC Code\");\r\n    }\r\n\r\n    return { recommendedId, reason, customServices, price, confidence };\r\n}\r\n\r\n// ─── Flow Questions ───────────────────────────────────────────────────────────\r\nconst FLOW_QUESTIONS = [\r\n    {\r\n        id: \"businessType\",\r\n        question: \"What kind of business are you starting?\",\r\n        emoji: \"🏢\",\r\n        options: [\"🛒 Retail/Trade\", \"💻 Tech/SaaS\", \"🍕 Food/F&B\", \"🏭 Manufacturing\", \"💼 Services\", \"📦 E-commerce\"],\r\n    },\r\n    {\r\n        id: \"founderCount\",\r\n        question: \"How many founders?\",\r\n        emoji: \"👥\",\r\n        options: [\"1\", \"2\", \"3\", \"4+\"],\r\n    },\r\n    {\r\n        id: \"revenue\",\r\n        question: \"Expected revenue in Year 1?\",\r\n        emoji: \"💰\",\r\n        options: [\"< ₹10L\", \"₹10-50L\", \"₹50L-1Cr\", \"> ₹1Cr\"],\r\n    },\r\n    {\r\n        id: \"funding\",\r\n        question: \"Planning to raise investment?\",\r\n        emoji: \"🎯\",\r\n        options: [\"Yes, within 1 year\", \"Maybe, in future\", \"No, bootstrapped\"],\r\n    },\r\n];\r\n\r\n// ─── Service Detail Popup ────────────────────────────────────────────────────\r\nfunction ServiceDetailPopup({\r\n    addon,\r\n    onClose,\r\n}: {\r\n    addon: Addon;\r\n    onClose: () => void;\r\n}) {\r\n    const info = SERVICE_INFO[addon.id];\r\n    const link = addon.serviceLink || info?.defaultLink || \"#\";\r\n\r\n    if (!info) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 z-[300] flex items-center justify-center p-4\"\r\n            onClick={onClose}\r\n        >\r\n            <div className=\"absolute inset-0 bg-black/40 backdrop-blur-sm\" />\r\n            <div\r\n                className=\"relative bg-white rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden\"\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-br from-indigo-600 to-purple-700 p-5 text-white\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                        <div>\r\n                            <div className=\"text-3xl mb-2\">{addon.emoji}</div>\r\n                            <h3 className=\"text-base font-black leading-tight\">{addon.name}</h3>\r\n                            <div className=\"mt-1.5 inline-flex items-center gap-1 bg-white/20 px-2.5 py-1 rounded-full\">\r\n                                <span className=\"text-xs font-black\">+₹{addon.price.toLocaleString()}</span>\r\n                            </div>\r\n                        </div>\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors flex-shrink-0\"\r\n                        >\r\n                            <span className=\"material-icons text-sm\">close</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                {/* Body */}\r\n                <div className=\"p-5\">\r\n                    <div className=\"mb-4\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1.5\">What is this?</p>\r\n                        <p className=\"text-sm text-slate-700 leading-relaxed\">{info.what}</p>\r\n                    </div>\r\n                    <div className=\"mb-5\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2\">Benefits</p>\r\n                        <ul className=\"space-y-2\">\r\n                            {info.benefits.map((b, i) => (\r\n                                <li key={i} className=\"flex items-start gap-2.5 text-sm text-slate-700\">\r\n                                    <span className=\"material-icons text-green-500 text-base flex-shrink-0 mt-0.5\">check_circle</span>\r\n                                    {b}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                    <a\r\n                        href={link}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"flex items-center justify-center gap-2 w-full py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl font-black text-sm shadow-lg hover:shadow-indigo-500/30 hover:scale-[1.02] transition-all\"\r\n                    >\r\n                        <span className=\"material-icons text-sm\">open_in_new</span>\r\n                        Get More Details\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Admin Package Editor Modal ──────────────────────────────────────────────\r\nfunction AdminPackageEditor({\r\n    packages,\r\n    onSave,\r\n    onClose,\r\n}: {\r\n    packages: Package[];\r\n    onSave: (pkgs: Package[]) => void;\r\n    onClose: () => void;\r\n}) {\r\n    const [editPkgs, setEditPkgs] = useState<Package[]>(packages.map(p => ({ ...p })));\r\n    const [activeIdx, setActiveIdx] = useState(0);\r\n    const [activeAdminTab, setActiveAdminTab] = useState<'packages' | 'links'>('packages');\r\n    const [addonLinks, setAddonLinks] = useState<Record<string, string>>(() => {\r\n        const init: Record<string, string> = {};\r\n        Object.values(PACKAGE_ADDONS).flat().forEach(a => {\r\n            if (a.serviceLink) init[a.id] = a.serviceLink;\r\n        });\r\n        return init;\r\n    });\r\n\r\n    const pkg = editPkgs[activeIdx];\r\n    const update = <K extends keyof Package>(key: K, val: Package[K]) => {\r\n        setEditPkgs(prev => prev.map((p, i) => i === activeIdx ? { ...p, [key]: val } : p));\r\n    };\r\n    const toggleService = (sIdx: number) => {\r\n        update(\"services\", pkg.services.map((s, i) => i === sIdx ? { ...s, included: !s.included } : s));\r\n    };\r\n    const addService = () => {\r\n        update(\"services\", [...pkg.services, { name: \"New Service\", included: true }]);\r\n    };\r\n    const removeService = (sIdx: number) => {\r\n        update(\"services\", pkg.services.filter((_, i) => i !== sIdx));\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[200] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4\">\r\n            <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-slate-900 to-slate-800 p-5 text-white flex items-center justify-between flex-shrink-0\">\r\n                    <div>\r\n                        <h2 className=\"text-lg font-black\">&#9881;&#65039; Admin Package Editor</h2>\r\n                        <p className=\"text-xs text-slate-400 mt-0.5\">Edit prices, services, visibility &amp; service links</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"w-9 h-9 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-colors\">\r\n                        <span className=\"material-icons text-sm\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Top-level tabs */}\r\n                <div className=\"flex border-b border-slate-200 bg-slate-50 flex-shrink-0\">\r\n                    <button\r\n                        onClick={() => setActiveAdminTab('packages')}\r\n                        className={`flex-1 py-3 text-xs font-black uppercase tracking-wider transition-all flex items-center justify-center gap-1.5 ${activeAdminTab === 'packages' ? 'bg-white text-indigo-600 border-b-2 border-indigo-600' : 'text-slate-400 hover:text-slate-700'}`}\r\n                    >\r\n                        <span className=\"material-icons text-sm\">inventory_2</span>\r\n                        Packages\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveAdminTab('links')}\r\n                        className={`flex-1 py-3 text-xs font-black uppercase tracking-wider transition-all flex items-center justify-center gap-1.5 ${activeAdminTab === 'links' ? 'bg-white text-indigo-600 border-b-2 border-indigo-600' : 'text-slate-400 hover:text-slate-700'}`}\r\n                    >\r\n                        <span className=\"material-icons text-sm\">link</span>\r\n                        Service Links\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n\r\n                    {/* PACKAGES TAB */}\r\n                    {activeAdminTab === 'packages' && (\r\n                        <div className=\"p-6 space-y-5\">\r\n                            {/* Package sub-tabs */}\r\n                            <div className=\"flex gap-2 flex-wrap\">\r\n                                {editPkgs.map((p, i) => (\r\n                                    <button\r\n                                        key={p.id}\r\n                                        onClick={() => setActiveIdx(i)}\r\n                                        className={`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-wider transition-all border-2 ${activeIdx === i ? 'border-indigo-500 bg-indigo-50 text-indigo-700' : 'border-slate-200 text-slate-400 hover:border-indigo-300'}`}\r\n                                    >\r\n                                        {p.emoji} {p.name.split(' ')[0]}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Toggles */}\r\n                            <div className=\"flex gap-4\">\r\n                                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                                    <div onClick={() => update(\"isVisible\", !pkg.isVisible)} className={`w-11 h-6 rounded-full transition-colors relative ${pkg.isVisible ? \"bg-green-500\" : \"bg-slate-300\"}`}>\r\n                                        <div className={`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-all ${pkg.isVisible ? \"left-5\" : \"left-0.5\"}`} />\r\n                                    </div>\r\n                                    <span className=\"text-sm font-bold text-slate-700\">Visible</span>\r\n                                </label>\r\n                                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                                    <div onClick={() => update(\"isPopular\", !pkg.isPopular)} className={`w-11 h-6 rounded-full transition-colors relative ${pkg.isPopular ? \"bg-indigo-500\" : \"bg-slate-300\"}`}>\r\n                                        <div className={`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-all ${pkg.isPopular ? \"left-5\" : \"left-0.5\"}`} />\r\n                                    </div>\r\n                                    <span className=\"text-sm font-bold text-slate-700\">Popular Badge</span>\r\n                                </label>\r\n                            </div>\r\n\r\n                            {/* Prices */}\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">Price (&#8377;)</label>\r\n                                    <input type=\"number\" value={pkg.price} onChange={(e) => update(\"price\", Number(e.target.value))} className=\"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 focus:border-indigo-500 focus:outline-none\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">Original Price (&#8377;)</label>\r\n                                    <input type=\"number\" value={pkg.originalPrice} onChange={(e) => update(\"originalPrice\", Number(e.target.value))} className=\"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 focus:border-indigo-500 focus:outline-none\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Badge */}\r\n                            <div>\r\n                                <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">Badge Text</label>\r\n                                <input type=\"text\" value={pkg.badge || \"\"} onChange={(e) => update(\"badge\", e.target.value || null)} placeholder=\"e.g. Most Popular, Limited Offer\" className=\"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm text-slate-900 focus:border-indigo-500 focus:outline-none\" />\r\n                            </div>\r\n\r\n                            {/* Services */}\r\n                            <div>\r\n                                <div className=\"flex items-center justify-between mb-3\">\r\n                                    <label className=\"text-xs font-black text-slate-600 uppercase tracking-wider\">Services Included</label>\r\n                                    <button onClick={addService} className=\"text-xs font-bold text-indigo-600 hover:text-indigo-800 flex items-center gap-1\">\r\n                                        <span className=\"material-icons text-sm\">add_circle</span> Add Service\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    {pkg.services.map((svc, sIdx) => (\r\n                                        <div key={sIdx} className=\"flex items-center gap-3 p-2.5 bg-slate-50 rounded-xl\">\r\n                                            <button onClick={() => toggleService(sIdx)} className={`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors ${svc.included ? \"bg-green-500 border-green-500\" : \"border-slate-300\"}`}>\r\n                                                {svc.included && <span className=\"material-icons text-white text-[10px]\">check</span>}\r\n                                            </button>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={svc.name}\r\n                                                onChange={(e) => {\r\n                                                    const updated = [...pkg.services];\r\n                                                    updated[sIdx] = { ...updated[sIdx], name: e.target.value };\r\n                                                    update(\"services\", updated);\r\n                                                }}\r\n                                                className=\"flex-1 bg-transparent text-sm text-slate-700 font-medium focus:outline-none\"\r\n                                            />\r\n                                            <button onClick={() => removeService(sIdx)} className=\"text-slate-300 hover:text-red-500 transition-colors\">\r\n                                                <span className=\"material-icons text-sm\">delete</span>\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* SERVICE LINKS TAB */}\r\n                    {activeAdminTab === 'links' && (\r\n                        <div className=\"p-6 space-y-4\">\r\n                            <div className=\"bg-indigo-50 border border-indigo-100 rounded-2xl p-4\">\r\n                                <p className=\"text-xs font-black text-indigo-700 mb-1\">How to use</p>\r\n                                <p className=\"text-xs text-indigo-600 leading-relaxed\">\r\n                                    Paste your website URL for each add-on. When users click the info button on an add-on, a popup shows with a &quot;Get More Details&quot; button linking to this URL.\r\n                                </p>\r\n                            </div>\r\n                            {Array.from(new Map(\r\n                                Object.values(PACKAGE_ADDONS).flat().map((a) => [a.id, a])\r\n                            ).values()).map((addon) => {\r\n                                const info = SERVICE_INFO[addon.id];\r\n                                return (\r\n                                    <div key={addon.id} className=\"bg-slate-50 rounded-2xl p-4 border border-slate-100\">\r\n                                        <div className=\"flex items-center gap-2 mb-2.5\">\r\n                                            <span className=\"text-xl\">{addon.emoji}</span>\r\n                                            <div>\r\n                                                <p className=\"text-sm font-black text-slate-800\">{addon.name}</p>\r\n                                                <p className=\"text-[10px] text-slate-400 font-mono\">{info?.defaultLink || '#'} (default)</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <input\r\n                                                type=\"url\"\r\n                                                value={addonLinks[addon.id] || ''}\r\n                                                onChange={(e) => setAddonLinks(prev => ({ ...prev, [addon.id]: e.target.value }))}\r\n                                                placeholder=\"Paste your service page URL here...\"\r\n                                                className=\"flex-1 px-3 py-2 border border-slate-200 rounded-xl text-xs font-medium text-slate-900 focus:border-indigo-500 focus:outline-none bg-white\"\r\n                                            />\r\n                                            {addonLinks[addon.id] && (\r\n                                                <a href={addonLinks[addon.id]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center hover:bg-indigo-200 transition-colors flex-shrink-0\">\r\n                                                    <span className=\"material-icons text-sm\">open_in_new</span>\r\n                                                </a>\r\n                                            )}\r\n                                            {addonLinks[addon.id] && (\r\n                                                <button onClick={() => setAddonLinks(prev => { const n = { ...prev }; delete n[addon.id]; return n; })} className=\"w-8 h-8 bg-red-50 text-red-400 rounded-xl flex items-center justify-center hover:bg-red-100 transition-colors flex-shrink-0\">\r\n                                                    <span className=\"material-icons text-sm\">clear</span>\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-5 border-t border-slate-100 flex gap-3 flex-shrink-0\">\r\n                    <button onClick={onClose} className=\"flex-1 py-3 rounded-xl border border-slate-200 text-sm font-bold text-slate-600 hover:bg-slate-50 transition-colors\">\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        onClick={() => {\r\n                            Object.entries(addonLinks).forEach(([id, url]) => {\r\n                                Object.values(PACKAGE_ADDONS).flat().forEach((a) => {\r\n                                    if (a.id === id) a.serviceLink = url || undefined;\r\n                                });\r\n                            });\r\n                            onSave(editPkgs);\r\n                            onClose();\r\n                        }}\r\n                        className=\"flex-1 py-3 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-bold shadow-lg hover:shadow-indigo-500/30 transition-all\"\r\n                    >\r\n                        Save Changes\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n// ─── Quick Flow Popup ─────────────────────────────────────────────────────────\r\nfunction QuickFlowPopup({\r\n    onComplete,\r\n    onClose,\r\n    existingAnswers,\r\n}: {\r\n    onComplete: (answers: UserAnswers) => void;\r\n    onClose: () => void;\r\n    existingAnswers: UserAnswers;\r\n}) {\r\n    const [step, setStep] = useState(0);\r\n    const [answers, setAnswers] = useState<UserAnswers>(existingAnswers);\r\n    const [phone, setPhone] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n\r\n    const missingQuestions = FLOW_QUESTIONS.filter(\r\n        (q) => !existingAnswers[q.id as keyof UserAnswers]\r\n    );\r\n    const questions = missingQuestions.length > 0 ? missingQuestions : FLOW_QUESTIONS;\r\n    const isContactStep = step === questions.length;\r\n    const totalSteps = questions.length + 1; // +1 for contact\r\n    const progress = ((step + 1) / totalSteps) * 100;\r\n\r\n    const currentQ = questions[step];\r\n\r\n    const handleSelect = (value: string) => {\r\n        if (!currentQ) return;\r\n        const updated = { ...answers, [currentQ.id]: value };\r\n        setAnswers(updated);\r\n        setTimeout(() => setStep((s) => s + 1), 300);\r\n    };\r\n\r\n    const handleComplete = async () => {\r\n        if (!phone || !email) return;\r\n\r\n        // Auto-capture lead\r\n        try {\r\n            await fetch('/api/leads', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    name: \"AI Pack User\", \r\n                    email, \r\n                    phone, \r\n                    businessName: \"Pre-Incorporation Inquiry\",\r\n                    nature: `AI Pack Answers: ${JSON.stringify(answers)}`,\r\n                    source: \"ai_pack_flow\",\r\n                    metadata: { answers }\r\n                })\r\n            });\r\n        } catch (e) {\r\n            console.error(\"Error capturing lead:\", e);\r\n        }\r\n        \r\n        onComplete({ ...answers, contact: { phone, email } });\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[150] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300\">\r\n            <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-400\">\r\n                {/* Header */}\r\n                <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 p-5 text-white\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-8 h-8 bg-white/20 rounded-xl flex items-center justify-center text-lg\">🤖</div>\r\n                            <div>\r\n                                <h3 className=\"text-sm font-black\">AI Pack Generator</h3>\r\n                                <p className=\"text-[10px] text-indigo-200\">Customizing your perfect package</p>\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={onClose} className=\"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors\">\r\n                            <span className=\"material-icons text-sm\">close</span>\r\n                        </button>\r\n                    </div>\r\n                    {/* Progress */}\r\n                    <div className=\"flex justify-between text-[10px] mb-1.5 font-bold\">\r\n                        <span>Step {Math.min(step + 1, totalSteps)} of {totalSteps}</span>\r\n                        <span>{Math.round(progress)}%</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-white/20 rounded-full h-1.5\">\r\n                        <div\r\n                            className=\"bg-white h-1.5 rounded-full transition-all duration-500\"\r\n                            style={{ width: `${progress}%` }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"p-6\">\r\n                    {!isContactStep && currentQ ? (\r\n                        <>\r\n                            <div className=\"text-3xl mb-3\">{currentQ.emoji}</div>\r\n                            <h3 className=\"text-lg font-black text-slate-900 mb-5\">{currentQ.question}</h3>\r\n                            <div className=\"grid grid-cols-2 gap-2.5\">\r\n                                {currentQ.options.map((opt) => (\r\n                                    <button\r\n                                        key={opt}\r\n                                        onClick={() => handleSelect(opt)}\r\n                                        className={`p-3.5 rounded-2xl border-2 text-left text-sm font-bold transition-all hover:scale-[1.02] ${answers[currentQ.id as keyof UserAnswers] === opt\r\n                                            ? \"border-indigo-600 bg-indigo-50 text-indigo-900\"\r\n                                            : \"border-slate-100 hover:border-indigo-300 text-slate-700 bg-slate-50 hover:bg-white\"\r\n                                            }`}\r\n                                    >\r\n                                        {opt}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"text-3xl mb-3\">📬</div>\r\n                            <h3 className=\"text-lg font-black text-slate-900 mb-2\">Almost done!</h3>\r\n                            <p className=\"text-sm text-slate-500 mb-5\">Where should we send your custom AI pack?</p>\r\n                            <div className=\"space-y-3\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">📱 WhatsApp Number</label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        value={phone}\r\n                                        onChange={(e) => setPhone(e.target.value)}\r\n                                        placeholder=\"10-digit mobile number\"\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 focus:border-indigo-500 focus:outline-none transition-colors\"\r\n                                        autoFocus\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">📧 Email Address</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                        placeholder=\"your@email.com\"\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 focus:border-indigo-500 focus:outline-none transition-colors\"\r\n                                    />\r\n                                </div>\r\n                                <button\r\n                                    onClick={handleComplete}\r\n                                    disabled={!phone || !email}\r\n                                    className=\"w-full py-3.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-black text-sm shadow-lg hover:shadow-indigo-500/30 transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <span className=\"material-icons text-sm\">auto_awesome</span>\r\n                                    Generate My AI Pack!\r\n                                </button>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Back button */}\r\n                {step > 0 && !isContactStep && (\r\n                    <div className=\"px-6 pb-5\">\r\n                        <button onClick={() => setStep((s) => s - 1)} className=\"text-xs font-bold text-slate-400 hover:text-slate-700 flex items-center gap-1 transition-colors\">\r\n                            <span className=\"material-icons text-sm\">arrow_back</span> Back\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── AI Pack Result Card ──────────────────────────────────────────────────────\r\nfunction AIPackResult({\r\n    answers,\r\n    packages,\r\n    onGetStarted,\r\n}: {\r\n    answers: UserAnswers;\r\n    packages: Package[];\r\n    onGetStarted: (pkg: Package & { selectedAddons: Addon[] }) => void;\r\n}) {\r\n    const result = generateAIPack(answers);\r\n    const basePkg = packages.find((p) => p.id === result.recommendedId) || packages[1];\r\n\r\n    return (\r\n        <div className=\"animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n            <div className=\"relative bg-gradient-to-br from-slate-900 via-indigo-950 to-purple-950 rounded-3xl p-6 text-white overflow-hidden shadow-2xl\">\r\n                {/* Glow */}\r\n                <div className=\"absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl -translate-y-32 translate-x-32\" />\r\n                <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-purple-500/20 rounded-full blur-3xl translate-y-24 -translate-x-24\" />\r\n\r\n                <div className=\"relative z-10\">\r\n                    {/* Header */}\r\n                    <div className=\"flex items-start justify-between mb-4\">\r\n                        <div>\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                <span className=\"text-2xl\">🤖</span>\r\n                                <span className=\"text-xs font-black uppercase tracking-widest text-indigo-300\">AI Recommended</span>\r\n                                <span className=\"bg-green-500 text-white text-[9px] font-black px-2 py-0.5 rounded-full\">{result.confidence}% Match</span>\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black\">{basePkg.emoji} {basePkg.name}</h3>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                            <div className=\"text-3xl font-black\">₹{result.price.toLocaleString()}</div>\r\n                            <div className=\"text-xs text-slate-400 line-through\">₹{basePkg.originalPrice.toLocaleString()}</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Reason */}\r\n                    <div className=\"bg-white/10 rounded-2xl p-4 mb-4 border border-white/10\">\r\n                        <p className=\"text-sm text-slate-200 leading-relaxed\">\r\n                            <span className=\"font-black text-white\">Why this pack? </span>\r\n                            {result.reason}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Custom Services */}\r\n                    <div className=\"mb-5\">\r\n                        <p className=\"text-xs font-black uppercase tracking-widest text-indigo-300 mb-2\">What&apos;s included for you:</p>\r\n                        <div className=\"grid grid-cols-2 gap-1.5\">\r\n                            {result.customServices.map((svc, i) => (\r\n                                <div key={i} className=\"flex items-center gap-2 text-xs text-slate-300\">\r\n                                    <span className=\"material-icons text-green-400 text-sm\">check_circle</span>\r\n                                    {svc}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* CTA */}\r\n                    <button\r\n                        onClick={() => onGetStarted({ ...basePkg, price: result.price, selectedAddons: [] })}\r\n                        className=\"w-full py-4 bg-white text-indigo-900 rounded-2xl font-black text-sm shadow-2xl hover:shadow-white/20 transition-all hover:scale-[1.02] flex items-center justify-center gap-2\"\r\n                    >\r\n                        <span className=\"material-icons\">rocket_launch</span>\r\n                        Get Started with This Pack\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Package Card ─────────────────────────────────────────────────────────────\r\nfunction PackageCard({\r\n    pkg,\r\n    onSelect,\r\n}: {\r\n    pkg: Package;\r\n    onSelect: (pkg: Package & { selectedAddons: Addon[] }) => void;\r\n}) {\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [addonsOpen, setAddonsOpen] = useState(false);\r\n    const [selectedAddons, setSelectedAddons] = useState<string[]>([]);\r\n    const [infoAddon, setInfoAddon] = useState<Addon | null>(null);\r\n\r\n    const addons = PACKAGE_ADDONS[pkg.id] || [];\r\n    const selectedAddonObjects = addons.filter((a) => selectedAddons.includes(a.id));\r\n    const addonsTotal = selectedAddonObjects.reduce((sum, a) => sum + a.price, 0);\r\n    const grandTotal = pkg.price + addonsTotal;\r\n\r\n    const toggleAddon = (id: string) => {\r\n        setSelectedAddons((prev) =>\r\n            prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]\r\n        );\r\n    };\r\n\r\n    const handleGetStarted = () => {\r\n        onSelect({ ...pkg, price: grandTotal, selectedAddons: selectedAddonObjects });\r\n    };\r\n\r\n    return (\r\n        <div className={`relative bg-white rounded-3xl border-2 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 overflow-visible ${pkg.isPopular ? \"border-indigo-500 shadow-xl shadow-indigo-100\" : \"border-slate-100 shadow-md\"\r\n            }`}>\r\n            {/* Popular Badge */}\r\n            {pkg.isPopular && (\r\n                <div className=\"absolute top-0 left-0 right-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-center text-[10px] font-black py-1.5 uppercase tracking-widest rounded-t-3xl\">\r\n                    ⭐ {pkg.badge || \"Most Popular\"}\r\n                </div>\r\n            )}\r\n\r\n            <div className={`p-6 ${pkg.isPopular ? \"pt-10\" : \"\"}`}>\r\n                {/* Header */}\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                    <div>\r\n                        {!pkg.isPopular && pkg.badge && (\r\n                            <span className={`text-[9px] font-black uppercase tracking-widest px-2 py-1 rounded-full bg-gradient-to-r ${pkg.color} text-white mb-2 inline-block`}>\r\n                                {pkg.badge}\r\n                            </span>\r\n                        )}\r\n                        <div className=\"text-3xl mb-1\">{pkg.emoji}</div>\r\n                        <h3 className=\"text-lg font-black text-slate-900\">{pkg.name}</h3>\r\n                        <p className=\"text-xs text-slate-500 font-medium\">{pkg.tagline}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <div className=\"text-2xl font-black text-slate-900\">₹{pkg.price.toLocaleString()}</div>\r\n                        <div className=\"text-xs text-slate-400 line-through\">₹{pkg.originalPrice.toLocaleString()}</div>\r\n                        <div className=\"text-[10px] font-black text-green-600\">\r\n                            Save ₹{(pkg.originalPrice - pkg.price).toLocaleString()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Services Preview */}\r\n                <div className=\"space-y-1.5 mb-4\">\r\n                    {pkg.services.slice(0, expanded ? pkg.services.length : 4).map((svc, i) => (\r\n                        <div key={i} className={`flex items-center gap-2 text-xs ${svc.included ? \"text-slate-700\" : \"text-slate-300\"}`}>\r\n                            <span className={`material-icons text-sm ${svc.included ? \"text-green-500\" : \"text-slate-200\"}`}>\r\n                                {svc.included ? \"check_circle\" : \"cancel\"}\r\n                            </span>\r\n                            {svc.name}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                {pkg.services.length > 4 && (\r\n                    <button\r\n                        onClick={() => setExpanded(!expanded)}\r\n                        className=\"text-xs font-bold text-indigo-600 hover:text-indigo-800 mb-4 flex items-center gap-1 transition-colors\"\r\n                    >\r\n                        <span className=\"material-icons text-sm\">{expanded ? \"expand_less\" : \"expand_more\"}</span>\r\n                        {expanded ? \"Show less\" : `+${pkg.services.length - 4} more services`}\r\n                    </button>\r\n                )}\r\n\r\n                {/* CTA */}\r\n                <button\r\n                    onClick={handleGetStarted}\r\n                    className={`w-full py-3.5 rounded-2xl font-black text-sm transition-all hover:scale-[1.02] shadow-lg mb-3 ${pkg.isPopular\r\n                        ? \"bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:shadow-indigo-500/30\"\r\n                        : \"bg-slate-900 text-white hover:bg-slate-800 hover:shadow-slate-900/20\"\r\n                        }`}\r\n                >\r\n                    {addonsTotal > 0\r\n                        ? `Get Started · ₹${grandTotal.toLocaleString()} →`\r\n                        : \"Get Started →\"}\r\n                </button>\r\n\r\n                {/* ── Add-ons Toggle Button ── */}\r\n                <button\r\n                    onClick={() => setAddonsOpen((o) => !o)}\r\n                    className={`w-full flex items-center justify-between px-4 py-2.5 rounded-2xl border-2 text-xs font-black transition-all ${addonsOpen\r\n                        ? \"border-indigo-400 bg-indigo-50 text-indigo-700\"\r\n                        : \"border-slate-200 bg-slate-50 text-slate-600 hover:border-indigo-300 hover:bg-indigo-50/50\"\r\n                        }`}\r\n                >\r\n                    <span className=\"flex items-center gap-2\">\r\n                        <span className=\"material-icons text-sm\">add_shopping_cart</span>\r\n                        Add-ons\r\n                        {selectedAddons.length > 0 && (\r\n                            <span className=\"bg-indigo-600 text-white text-[9px] font-black px-1.5 py-0.5 rounded-full\">\r\n                                {selectedAddons.length}\r\n                            </span>\r\n                        )}\r\n                    </span>\r\n                    <span className=\"flex items-center gap-1 text-slate-400\">\r\n                        {addonsTotal > 0 && (\r\n                            <span className=\"text-indigo-600 font-black\">+₹{addonsTotal.toLocaleString()}</span>\r\n                        )}\r\n                        <span className=\"material-icons text-sm transition-transform duration-300\" style={{ transform: addonsOpen ? 'rotate(180deg)' : 'rotate(0deg)' }}>\r\n                            expand_more\r\n                        </span>\r\n                    </span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* ── Add-ons Dropdown Panel ── */}\r\n            <div\r\n                className={`overflow-hidden transition-all duration-400 ease-in-out ${addonsOpen ? \"max-h-[600px] opacity-100\" : \"max-h-0 opacity-0\"\r\n                    }`}\r\n                style={{ transitionProperty: 'max-height, opacity' }}\r\n            >\r\n                <div className=\"px-6 pb-5 border-t border-slate-100\">\r\n                    <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 py-3\">\r\n                        ✨ Enhance Your Package\r\n                    </p>\r\n                    <div className=\"space-y-2\">\r\n                        {addons.map((addon) => {\r\n                            const isSelected = selectedAddons.includes(addon.id);\r\n                            return (\r\n                                <button\r\n                                    key={addon.id}\r\n                                    onClick={() => toggleAddon(addon.id)}\r\n                                    className={`w-full flex items-center gap-3 p-3 rounded-2xl border-2 text-left transition-all hover:scale-[1.01] ${isSelected\r\n                                        ? \"border-indigo-500 bg-indigo-50\"\r\n                                        : \"border-slate-100 bg-white hover:border-indigo-200 hover:bg-slate-50\"\r\n                                        }`}\r\n                                >\r\n                                    {/* Checkbox */}\r\n                                    <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-all ${isSelected ? \"bg-indigo-600 border-indigo-600\" : \"border-slate-300\"\r\n                                        }`}>\r\n                                        {isSelected && <span className=\"material-icons text-white text-[10px]\">check</span>}\r\n                                    </div>\r\n\r\n                                    {/* Emoji */}\r\n                                    <span className=\"text-lg flex-shrink-0\">{addon.emoji}</span>\r\n\r\n                                    {/* Info */}\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <div className=\"flex items-center gap-1.5\">\r\n                                            <span className={`text-xs font-black ${isSelected ? \"text-indigo-900\" : \"text-slate-800\"\r\n                                                }`}>{addon.name}</span>\r\n                                            {addon.popular && (\r\n                                                <span className=\"text-[8px] font-black bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded-full uppercase\">Popular</span>\r\n                                            )}\r\n                                        </div>\r\n                                        <p className=\"text-[10px] text-slate-400 truncate\">{addon.description}</p>\r\n                                    </div>\r\n\r\n                                    {/* Price */}\r\n                                    <div className=\"text-right flex-shrink-0\">\r\n                                        <div className={`text-xs font-black ${isSelected ? \"text-indigo-600\" : \"text-slate-700\"\r\n                                            }`}>+₹{addon.price.toLocaleString()}</div>\r\n                                    </div>\r\n\r\n                                    {/* Info button */}\r\n                                    {SERVICE_INFO[addon.id] && (\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); setInfoAddon(addon); }}\r\n                                            className=\"w-6 h-6 rounded-full bg-slate-100 hover:bg-indigo-100 text-slate-400 hover:text-indigo-600 flex items-center justify-center flex-shrink-0 transition-colors\"\r\n                                            title=\"Learn more\"\r\n                                        >\r\n                                            <span className=\"material-icons text-[13px]\">info</span>\r\n                                        </button>\r\n                                    )}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    {/* Add-ons Summary */}\r\n                    {selectedAddons.length > 0 && (\r\n                        <div className=\"mt-3 p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100\">\r\n                            <div className=\"flex items-center justify-between text-xs\">\r\n                                <span className=\"text-slate-600 font-bold\">Base Pack</span>\r\n                                <span className=\"font-black text-slate-800\">₹{pkg.price.toLocaleString()}</span>\r\n                            </div>\r\n                            {selectedAddonObjects.map((a) => (\r\n                                <div key={a.id} className=\"flex items-center justify-between text-xs mt-1\">\r\n                                    <span className=\"text-slate-500\">{a.emoji} {a.name}</span>\r\n                                    <span className=\"font-bold text-indigo-600\">+₹{a.price.toLocaleString()}</span>\r\n                                </div>\r\n                            ))}\r\n                            <div className=\"border-t border-indigo-200 mt-2 pt-2 flex items-center justify-between\">\r\n                                <span className=\"text-xs font-black text-slate-800\">Total</span>\r\n                                <span className=\"text-sm font-black text-indigo-700\">₹{grandTotal.toLocaleString()}</span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Service Detail Popup */}\r\n            {infoAddon && (\r\n                <ServiceDetailPopup addon={infoAddon} onClose={() => setInfoAddon(null)} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Get Started Modal ─────────────────────────────────────────────────────────────\r\nfunction GetStartedModal({\r\n    pkg,\r\n    selectedAddons,\r\n    onClose,\r\n}: {\r\n    pkg: Package;\r\n    selectedAddons: Addon[];\r\n    onClose: () => void;\r\n}) {\r\n    const [name, setName] = useState(\"\");\r\n    const [phone, setPhone] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [submitted, setSubmitted] = useState(false);\r\n\r\n    // Use Auth Context to get Guest ID\r\n    const { guestId, user } = useAuth();\r\n\r\n    const addonsTotal = selectedAddons.reduce((s, a) => s + a.price, 0);\r\n    const basePrice = pkg.price - addonsTotal; // base price without addons\r\n\r\n    const handleSubmit = async () => {\r\n        if (!name || !phone || !email) return;\r\n\r\n        const purchaseData = {\r\n            packageId: pkg.id,\r\n            packageName: pkg.name,\r\n            packageEmoji: pkg.emoji,\r\n            packageColor: pkg.color,\r\n            services: pkg.services,\r\n            addons: selectedAddons,\r\n            totalPrice: pkg.price,\r\n            purchasedAt: new Date().toISOString(),\r\n            userName: name,\r\n            userPhone: phone,\r\n            userEmail: email,\r\n            guestId: guestId,\r\n            userId: user?.uid || null\r\n        };\r\n\r\n        // 1. Save to LocalStorage for immediate UI feedback (Workspace Dashboard)\r\n        localStorage.setItem('smb_purchased_package', JSON.stringify(purchaseData));\r\n\r\n        // 2. Save Key to Firestore to prevent Data Loss (Real Lead Capture)\r\n        // 2. Save Key to Firestore to prevent Data Loss (Real Lead Capture)\r\n        try {\r\n            await fetch('/api/leads', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    name,\r\n                    email,\r\n                    phone, \r\n                    businessName: pkg.name,\r\n                    nature: `Purchase: ${pkg.name}. Total: ${pkg.price}`,\r\n                    source: 'incorporation_checkout',\r\n                    metadata: purchaseData\r\n                })\r\n            });\r\n            console.log(\"Lead secured in cloud database.\");\r\n        } catch (err) {\r\n            console.error(\"Error saving lead to cloud:\", err);\r\n            // We continue anyway since we have localStorage backup\r\n        }\r\n\r\n        setSubmitted(true);\r\n        // Redirect to workspace after 2 seconds\r\n        setTimeout(() => {\r\n            window.location.href = '/workspace';\r\n        }, 2000);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[200] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4\">\r\n            <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-400 max-h-[95vh] flex flex-col\">\r\n                <div className={`bg-gradient-to-r ${pkg.color} p-5 text-white flex-shrink-0`}>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <div className=\"text-2xl mb-1\">{pkg.emoji}</div>\r\n                            <h3 className=\"text-lg font-black\">{pkg.name}</h3>\r\n                            <p className=\"text-sm opacity-80\">₹{pkg.price.toLocaleString()} — Let&apos;s get started!</p>\r\n                        </div>\r\n                        <button onClick={onClose} className=\"w-9 h-9 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors\">\r\n                            <span className=\"material-icons text-sm\">close</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"p-6 overflow-y-auto flex-1\">\r\n                    {!submitted ? (\r\n                        <>\r\n                            {/* Order Summary */}\r\n                            {selectedAddons.length > 0 && (\r\n                                <div className=\"mb-5 bg-slate-50 rounded-2xl p-4 border border-slate-100\">\r\n                                    <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2\">Order Summary</p>\r\n                                    <div className=\"space-y-1.5\">\r\n                                        <div className=\"flex justify-between text-xs\">\r\n                                            <span className=\"text-slate-600 font-bold\">{pkg.emoji} {pkg.name} (Base)</span>\r\n                                            <span className=\"font-black text-slate-800\">₹{basePrice.toLocaleString()}</span>\r\n                                        </div>\r\n                                        {selectedAddons.map((a) => (\r\n                                            <div key={a.id} className=\"flex justify-between text-xs\">\r\n                                                <span className=\"text-slate-500\">{a.emoji} {a.name}</span>\r\n                                                <span className=\"font-bold text-indigo-600\">+₹{a.price.toLocaleString()}</span>\r\n                                            </div>\r\n                                        ))}\r\n                                        <div className=\"border-t border-slate-200 pt-2 mt-1 flex justify-between\">\r\n                                            <span className=\"text-xs font-black text-slate-900\">Total</span>\r\n                                            <span className=\"text-sm font-black text-indigo-700\">₹{pkg.price.toLocaleString()}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <h4 className=\"text-base font-black text-slate-900 mb-1\">Your Details</h4>\r\n                            <p className=\"text-xs text-slate-500 mb-5\">Our expert will contact you within 2 hours</p>\r\n                            <div className=\"space-y-3\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">Full Name</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={name}\r\n                                        onChange={(e) => setName(e.target.value)}\r\n                                        placeholder=\"Your name\"\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 focus:border-indigo-500 focus:outline-none transition-colors\"\r\n                                        autoFocus\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">📱 WhatsApp Number</label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        value={phone}\r\n                                        onChange={(e) => setPhone(e.target.value)}\r\n                                        placeholder=\"10-digit mobile number\"\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 focus:border-indigo-500 focus:outline-none transition-colors\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-black text-slate-600 mb-1.5 uppercase tracking-wider\">📧 Email Address</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                        placeholder=\"your@email.com\"\r\n                                        className=\"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 focus:border-indigo-500 focus:outline-none transition-colors\"\r\n                                    />\r\n                                </div>\r\n                                <button\r\n                                    onClick={handleSubmit}\r\n                                    disabled={!name || !phone || !email}\r\n                                    className={`w-full py-4 rounded-2xl font-black text-sm shadow-lg transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed text-white bg-gradient-to-r ${pkg.color}`}\r\n                                >\r\n                                    🚀 Confirm & Get Expert Call\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"mt-4 flex items-center justify-center gap-4 text-xs text-slate-400\">\r\n                                <a href={`https://wa.me/91XXXXXXXXXX?text=Hi! I'm interested in ${pkg.name} (₹${pkg.price})`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-1 hover:text-green-600 transition-colors font-bold\">\r\n                                    <span className=\"material-icons text-sm\">chat</span> WhatsApp Us\r\n                                </a>\r\n                                <span>•</span>\r\n                                <a href={`mailto:hello@setmybizz.in?subject=Inquiry: ${pkg.name}`} className=\"flex items-center gap-1 hover:text-indigo-600 transition-colors font-bold\">\r\n                                    <span className=\"material-icons text-sm\">mail</span> Email Us\r\n                                </a>\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"text-center py-6\">\r\n                            <div className=\"text-6xl mb-4\">🎉</div>\r\n                            <h4 className=\"text-xl font-black text-slate-900 mb-2\">You&apos;re all set!</h4>\r\n                            <p className=\"text-sm text-slate-500 mb-4\">Our expert will call you on <strong>{phone}</strong> within 2 hours.</p>\r\n                            <div className=\"bg-green-50 border border-green-200 rounded-2xl p-4 text-sm text-green-800 font-medium\">\r\n                                ✅ Lead captured successfully. Check your WhatsApp for confirmation.\r\n                            </div>\r\n                            <button onClick={onClose} className=\"mt-5 w-full py-3 rounded-2xl bg-slate-900 text-white font-black text-sm\">\r\n                                Close\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Inline AI Chat Assistant ─────────────────────────────────────────────────\r\nfunction InlineAIChat() {\r\n    const [open, setOpen] = useState(false);\r\n    const [messages, setMessages] = useState([\r\n        { role: \"ai\", text: \"👋 Hi! I'm your Incorporation AI. Ask me anything about company registration, packages, or compliance in India!\" },\r\n    ]);\r\n    const [input, setInput] = useState(\"\");\r\n    const bottomRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (open) bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [messages, open]);\r\n\r\n    const respond = (q: string) => {\r\n        const ql = q.toLowerCase();\r\n        if (ql.includes(\"pvt\") || ql.includes(\"private limited\")) return \"Private Limited Company is best for startups with 2+ founders. Benefits: limited liability, easy funding, separate legal entity. Timeline: 10-15 days. Our Startup Pack covers this at ₹7,999.\";\r\n        if (ql.includes(\"llp\")) return \"LLP (Limited Liability Partnership) is great for professional services firms. Lower compliance than Pvt Ltd. Best for CA firms, law firms, consultancies. Covered in our Scale-Up Pack.\";\r\n        if (ql.includes(\"proprietor\") || ql.includes(\"sole\")) return \"Sole Proprietorship is the simplest structure — no separate legal entity, but easiest to start. Best for solo founders with < ₹40L turnover. Our Proprietor Pack at ₹2,999 covers this.\";\r\n        if (ql.includes(\"gst\")) return \"GST registration is mandatory if turnover > ₹40L (goods) or ₹20L (services). Timeline: 3-7 days. All our packages include GST registration.\";\r\n        if (ql.includes(\"trademark\") || ql.includes(\"tm\")) return \"Trademark protects your brand name & logo. Timeline: 12-18 months for full registration. Included in our Scale-Up Pack (₹14,999). We handle the filing and follow-up.\";\r\n        if (ql.includes(\"time\") || ql.includes(\"how long\")) return \"Timelines: Pvt Ltd: 10-15 days | Proprietorship: 3-5 days | GST: 3-7 days | Trademark: 12-18 months. We handle everything — you just provide documents!\";\r\n        if (ql.includes(\"document\")) return \"For Pvt Ltd, you need: PAN + Aadhaar of all directors, passport photos, address proof, rent agreement (if rented office). We guide you through every document step-by-step.\";\r\n        if (ql.includes(\"price\") || ql.includes(\"cost\") || ql.includes(\"package\")) return \"Our packages: 🏪 Proprietor Pack: ₹2,999 | 🚀 Startup Pack: ₹7,999 (Most Popular) | 📈 Scale-Up Pack: ₹14,999. Click 'Get AI Pack' for a personalized recommendation!\";\r\n        if (ql.includes(\"din\") || ql.includes(\"dsc\")) return \"DIN (Director Identification Number) and DSC (Digital Signature Certificate) are mandatory for company directors. Both are included in our Startup and Scale-Up packs.\";\r\n        return \"Great question! I can help with: company registration, GST, trademark, compliance, documents, and package selection. What would you like to know more about?\";\r\n    };\r\n\r\n    const send = () => {\r\n        if (!input.trim()) return;\r\n        const userMsg = input;\r\n        setMessages((m) => [...m, { role: \"user\", text: userMsg }]);\r\n        setInput(\"\");\r\n        setTimeout(() => {\r\n            setMessages((m) => [...m, { role: \"ai\", text: respond(userMsg) }]);\r\n        }, 700);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed bottom-6 right-6 z-[100]\">\r\n            {open && (\r\n                <div className=\"mb-4 w-80 bg-white rounded-3xl shadow-2xl border border-slate-100 overflow-hidden animate-in slide-in-from-bottom-4 duration-300\">\r\n                    <div className=\"bg-gradient-to-r from-blue-600 to-indigo-600 p-4 text-white flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-8 h-8 bg-white/20 rounded-xl flex items-center justify-center text-sm\">🤖</div>\r\n                            <div>\r\n                                <p className=\"text-xs font-black\">Incorporation AI</p>\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse\" />\r\n                                    <span className=\"text-[9px] text-blue-200\">Online</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <button onClick={() => setOpen(false)} className=\"w-7 h-7 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors\">\r\n                            <span className=\"material-icons text-sm\">close</span>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"h-64 overflow-y-auto p-4 space-y-3 bg-slate-50\">\r\n                        {messages.map((m, i) => (\r\n                            <div key={i} className={`flex ${m.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}>\r\n                                <div className={`max-w-[85%] rounded-2xl px-3.5 py-2.5 text-xs leading-relaxed ${m.role === \"user\" ? \"bg-indigo-600 text-white\" : \"bg-white border border-slate-200 text-slate-800\"}`}>\r\n                                    {m.text}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                        <div ref={bottomRef} />\r\n                    </div>\r\n                    <div className=\"p-3 bg-white border-t border-slate-100 flex gap-2\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={input}\r\n                            onChange={(e) => setInput(e.target.value)}\r\n                            onKeyDown={(e) => e.key === \"Enter\" && send()}\r\n                            placeholder=\"Ask anything...\"\r\n                            className=\"flex-1 px-3 py-2 text-xs border border-slate-200 rounded-xl focus:border-indigo-500 focus:outline-none text-slate-900\"\r\n                        />\r\n                        <button onClick={send} className=\"w-9 h-9 bg-indigo-600 text-white rounded-xl flex items-center justify-center hover:bg-indigo-700 transition-colors\">\r\n                            <span className=\"material-icons text-sm\">send</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <button\r\n                onClick={() => setOpen(!open)}\r\n                className=\"w-14 h-14 bg-gradient-to-br from-blue-600 to-indigo-600 text-white rounded-2xl shadow-2xl shadow-indigo-500/30 flex items-center justify-center hover:scale-110 transition-transform\"\r\n            >\r\n                <span className=\"material-icons text-2xl\">{open ? \"close\" : \"smart_toy\"}</span>\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ─── Main Incorporation Dashboard ─────────────────────────────────────────────\r\nexport default function IncorporationDashboard() {\r\n    const [packages, setPackages] = useState<Package[]>(DEFAULT_PACKAGES);\r\n    const [showAdminEditor, setShowAdminEditor] = useState(false);\r\n    const [showFlowPopup, setShowFlowPopup] = useState(false);\r\n    const [userAnswers, setUserAnswers] = useState<UserAnswers>({});\r\n    const [aiPackGenerated, setAiPackGenerated] = useState(false);\r\n    const [selectedPkg, setSelectedPkg] = useState<(Package & { selectedAddons: Addon[] }) | null>(null);\r\n    const [isAdmin] = useState(true); // TODO: wire to real auth role\r\n\r\n    const visiblePackages = packages.filter((p) => p.isVisible);\r\n\r\n    const handleAIPackClick = () => {\r\n        // If user has no answers yet, show flow popup\r\n        const hasAnswers = Object.keys(userAnswers).length >= 3;\r\n        if (!hasAnswers) {\r\n            setShowFlowPopup(true);\r\n        } else {\r\n            setAiPackGenerated(true);\r\n        }\r\n    };\r\n\r\n    const handleFlowComplete = (answers: UserAnswers) => {\r\n        setUserAnswers(answers);\r\n        setShowFlowPopup(false);\r\n        setAiPackGenerated(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50/30\">\r\n            {/* Inline AI Chat */}\r\n            <InlineAIChat />\r\n\r\n            {/* Flow Popup */}\r\n            {showFlowPopup && (\r\n                <QuickFlowPopup\r\n                    onComplete={handleFlowComplete}\r\n                    onClose={() => setShowFlowPopup(false)}\r\n                    existingAnswers={userAnswers}\r\n                />\r\n            )}\r\n\r\n            {/* Admin Editor */}\r\n            {showAdminEditor && (\r\n                <AdminPackageEditor\r\n                    packages={packages}\r\n                    onSave={setPackages}\r\n                    onClose={() => setShowAdminEditor(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Get Started Modal */}\r\n            {selectedPkg && (\r\n                <GetStartedModal\r\n                    pkg={selectedPkg}\r\n                    selectedAddons={selectedPkg.selectedAddons}\r\n                    onClose={() => setSelectedPkg(null)}\r\n                />\r\n            )}\r\n\r\n            <div className=\"max-w-6xl mx-auto px-4 py-10\">\r\n                {/* ── Page Header ── */}\r\n                <div className=\"text-center mb-12\">\r\n                    <div className=\"inline-flex items-center gap-2 bg-indigo-50 border border-indigo-200 text-indigo-700 px-4 py-2 rounded-full text-xs font-black uppercase tracking-widest mb-5\">\r\n                        <span className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\" />\r\n                        India&apos;s #1 AI Business Setup Platform\r\n                    </div>\r\n                    <h1 className=\"text-4xl md:text-5xl font-black text-slate-900 mb-4 leading-tight\">\r\n                        Start Your Business{\" \"}\r\n                        <span className=\"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent\">\r\n                            The Right Way\r\n                        </span>\r\n                    </h1>\r\n                    <p className=\"text-slate-500 text-lg max-w-2xl mx-auto\">\r\n                        AI-powered incorporation packages tailored to your business. Expert CA support, 100% online, guaranteed compliance.\r\n                    </p>\r\n\r\n                    {/* Stats */}\r\n                    <div className=\"flex items-center justify-center gap-8 mt-6\">\r\n                        {[\r\n                            { value: \"5,000+\", label: \"Businesses Registered\" },\r\n                            { value: \"10-15\", label: \"Days to Incorporate\" },\r\n                            { value: \"100%\", label: \"Online Process\" },\r\n                        ].map((stat, i) => (\r\n                            <div key={i} className=\"text-center\">\r\n                                <div className=\"text-2xl font-black text-indigo-600\">{stat.value}</div>\r\n                                <div className=\"text-xs text-slate-400 font-medium\">{stat.label}</div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* ── Admin Controls ── */}\r\n                {isAdmin && (\r\n                    <div className=\"flex justify-end mb-6\">\r\n                        <button\r\n                            onClick={() => setShowAdminEditor(true)}\r\n                            className=\"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl text-xs font-black hover:bg-slate-700 transition-colors shadow-lg\"\r\n                        >\r\n                            <span className=\"material-icons text-sm\">settings</span>\r\n                            Admin: Edit Packages\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* ── Package Cards ── */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                    {visiblePackages.map((pkg) => (\r\n                        <PackageCard key={pkg.id} pkg={pkg} onSelect={(p) => setSelectedPkg(p)} />\r\n                    ))}\r\n                </div>\r\n\r\n                {/* ── AI Pack CTA ── */}\r\n                {!aiPackGenerated ? (\r\n                    <div\r\n                        onClick={handleAIPackClick}\r\n                        className=\"cursor-pointer group relative bg-gradient-to-r from-slate-900 via-indigo-950 to-purple-950 rounded-3xl p-8 text-white overflow-hidden shadow-2xl hover:shadow-indigo-900/40 transition-all hover:-translate-y-1\"\r\n                    >\r\n                        <div className=\"absolute top-0 right-0 w-72 h-72 bg-indigo-500/10 rounded-full blur-3xl -translate-y-36 translate-x-36 group-hover:bg-indigo-500/20 transition-all duration-1000\" />\r\n                        <div className=\"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6\">\r\n                            <div>\r\n                                <div className=\"flex items-center gap-3 mb-3\">\r\n                                    <span className=\"text-3xl\">🤖</span>\r\n                                    <div>\r\n                                        <h3 className=\"text-xl font-black\">Not sure which pack?</h3>\r\n                                        <p className=\"text-indigo-300 text-sm\">Let AI analyze your business and build a custom package</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-4 text-xs text-slate-400\">\r\n                                    <span className=\"flex items-center gap-1\"><span className=\"material-icons text-sm text-green-400\">check</span> 5 quick questions</span>\r\n                                    <span className=\"flex items-center gap-1\"><span className=\"material-icons text-sm text-green-400\">check</span> Instant recommendation</span>\r\n                                    <span className=\"flex items-center gap-1\"><span className=\"material-icons text-sm text-green-400\">check</span> Custom pricing</span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex-shrink-0\">\r\n                                <div className=\"flex items-center gap-3 px-8 py-4 bg-white text-indigo-900 rounded-2xl font-black text-sm shadow-2xl group-hover:shadow-white/20 transition-all group-hover:scale-105\">\r\n                                    <span className=\"material-icons\">auto_awesome</span>\r\n                                    Get My AI Pack\r\n                                    <span className=\"material-icons\">arrow_forward</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <AIPackResult\r\n                        answers={userAnswers}\r\n                        packages={packages}\r\n                        onGetStarted={(p) => setSelectedPkg(p)}\r\n                    />\r\n                )}\r\n\r\n                {/* ── How It Works ── */}\r\n                <div className=\"mt-16\">\r\n                    <h2 className=\"text-2xl font-black text-slate-900 text-center mb-8\">How It Works</h2>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n                        {[\r\n                            { step: \"01\", icon: \"assignment\", title: \"Choose Package\", desc: \"Select from our 3 packs or let AI recommend the best one for you\", color: \"text-indigo-600 bg-indigo-50\" },\r\n                            { step: \"02\", icon: \"upload_file\", title: \"Upload Documents\", desc: \"PAN, Aadhaar, address proof — we guide you through every step\", color: \"text-purple-600 bg-purple-50\" },\r\n                            { step: \"03\", icon: \"gavel\", title: \"Expert Processing\", desc: \"Our CA experts file everything with MCA, GST, and other departments\", color: \"text-emerald-600 bg-emerald-50\" },\r\n                            { step: \"04\", icon: \"verified\", title: \"Get Certificate\", desc: \"Receive your Certificate of Incorporation and all documents digitally\", color: \"text-amber-600 bg-amber-50\" },\r\n                        ].map((item, i) => (\r\n                            <div key={i} className=\"text-center group\">\r\n                                <div className={`w-16 h-16 ${item.color} rounded-3xl flex items-center justify-center mx-auto mb-4 shadow-sm group-hover:scale-110 transition-transform`}>\r\n                                    <span className=\"material-icons text-2xl\">{item.icon}</span>\r\n                                </div>\r\n                                <div className=\"text-xs font-black text-slate-300 uppercase tracking-widest mb-1\">Step {item.step}</div>\r\n                                <h4 className=\"font-black text-slate-900 mb-2\">{item.title}</h4>\r\n                                <p className=\"text-xs text-slate-500 leading-relaxed\">{item.desc}</p>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* ── Trust Badges ── */}\r\n                <div className=\"mt-12 bg-white rounded-3xl border border-slate-100 shadow-sm p-6\">\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                        {[\r\n                            { icon: \"verified_user\", label: \"MCA Registered\", sub: \"Official filing partner\" },\r\n                            { icon: \"lock\", label: \"100% Secure\", sub: \"Bank-grade encryption\" },\r\n                            { icon: \"support_agent\", label: \"Expert CA Support\", sub: \"Dedicated professionals\" },\r\n                            { icon: \"payments\", label: \"No Hidden Costs\", sub: \"All-inclusive pricing\" },\r\n                        ].map((badge, i) => (\r\n                            <div key={i} className=\"flex items-center gap-3\">\r\n                                <div className=\"w-10 h-10 bg-green-50 rounded-xl flex items-center justify-center flex-shrink-0\">\r\n                                    <span className=\"material-icons text-green-600 text-xl\">{badge.icon}</span>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs font-black text-slate-900\">{badge.label}</p>\r\n                                    <p className=\"text-[10px] text-slate-400\">{badge.sub}</p>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\ExistingAssetsStep.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uiStep' is defined but never used.","line":12,"column":100,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":106},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":44,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2465,2589],"text":"\r\n                    This will help us tailor your personal plan and skip steps you&apos;ve already completed.\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2465,2589],"text":"\r\n                    This will help us tailor your personal plan and skip steps you&lsquo;ve already completed.\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2465,2589],"text":"\r\n                    This will help us tailor your personal plan and skip steps you&#39;ve already completed.\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2465,2589],"text":"\r\n                    This will help us tailor your personal plan and skip steps you&rsquo;ve already completed.\r\n                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { BusinessData, ExistingAsset } from '../../types'; // Modified to import ExistingAsset type which might be missing in types/index.ts. I will add it.\r\n\r\ninterface ExistingAssetsStepProps {\r\n    data: BusinessData;\r\n    updateData: (newData: Partial<BusinessData>) => void;\r\n    onNext: () => void;\r\n    onBack: () => void;\r\n    uiStep: number;\r\n}\r\n\r\nconst ExistingAssetsStep: React.FC<ExistingAssetsStepProps> = ({ data, updateData, onNext, onBack, uiStep }) => {\r\n    const options: { id: ExistingAsset; label: string; icon: string; color: string }[] = [\r\n        { id: 'business_cards', label: 'Business cards', icon: 'badge', color: 'blue' },\r\n        { id: 'domain', label: 'Domain name', icon: 'language', color: 'purple' },\r\n        { id: 'mailbox', label: 'Business mailbox', icon: 'mail', color: 'red' },\r\n        { id: 'logo', label: 'Logo design', icon: 'brush', color: 'orange' },\r\n        { id: 'trademark', label: 'Trademark (TM)', icon: 'verified', color: 'indigo' },\r\n        { id: 'gst', label: 'GST / EIN Number', icon: 'receipt_long', color: 'teal' },\r\n        { id: 'llc', label: 'LLC / Private Ltd', icon: 'gavel', color: 'slate' },\r\n        { id: 'name', label: 'Business Name', icon: 'storefront', color: 'pink' },\r\n        { id: 'website', label: 'Website', icon: 'web', color: 'cyan' },\r\n        { id: 'ecommerce', label: 'E-commerce Store', icon: 'shopping_cart', color: 'emerald' },\r\n        { id: 'startup_india', label: 'Startup India Reg.', icon: 'rocket_launch', color: 'yellow' },\r\n        { id: 'udyam', label: 'Udyam Registration', icon: 'factory', color: 'rose' },\r\n    ];\r\n\r\n    const toggleAsset = (id: ExistingAsset) => {\r\n        // Ensure existingAssets is initialized\r\n        const currentAssets = data.existingAssets || [];\r\n        const next = currentAssets.includes(id)\r\n            ? currentAssets.filter(x => x !== id)\r\n            : [...currentAssets, id];\r\n        updateData({ existingAssets: next });\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-5xl mx-auto px-4 animate-in fade-in slide-in-from-right-4 duration-500\">\r\n            <div className=\"text-center mb-10 max-w-2xl mx-auto\">\r\n                <h1 className=\"text-3xl font-bold text-slate-900 dark:text-white mb-3 leading-tight\">\r\n                    Does your business already have any of the following?\r\n                </h1>\r\n                <p className=\"text-slate-500 dark:text-slate-400 text-lg\">\r\n                    This will help us tailor your personal plan and skip steps you've already completed.\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-4xl mx-auto\">\r\n                {options.map(opt => (\r\n                    <label\r\n                        key={opt.id}\r\n                        className={`group relative flex items-center p-4 cursor-pointer bg-card-light dark:bg-card-dark border rounded-xl shadow-sm transition-all duration-200 ${data.existingAssets?.includes(opt.id) ? 'border-primary ring-1 ring-primary/20 bg-blue-50/20' : 'border-slate-200 dark:border-slate-800 hover:border-primary'}`}\r\n                    >\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            className=\"sr-only\"\r\n                            checked={data.existingAssets?.includes(opt.id) || false}\r\n                            onChange={() => toggleAsset(opt.id)}\r\n                        />\r\n                        <div className={`p-3 rounded-lg text-white bg-slate-100 dark:bg-slate-800 transition-colors ${data.existingAssets?.includes(opt.id) ? 'bg-primary' : 'group-hover:bg-slate-200'}`}>\r\n                            <span className={`material-icons-outlined text-2xl transition-colors ${data.existingAssets?.includes(opt.id) ? 'text-white' : 'text-slate-400'}`}>\r\n                                {opt.icon}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"ml-4 flex-grow\">\r\n                            <span className={`font-medium transition-colors ${data.existingAssets?.includes(opt.id) ? 'text-primary' : 'text-slate-700 dark:text-slate-200'}`}>\r\n                                {opt.label}\r\n                            </span>\r\n                        </div>\r\n                        <div className={`w-5 h-5 rounded border-2 flex items-center justify-center transition-all ${data.existingAssets?.includes(opt.id) ? 'bg-primary border-primary scale-110' : 'border-slate-300 dark:border-slate-600'}`}>\r\n                            {data.existingAssets?.includes(opt.id) && <span className=\"material-icons-round text-white text-[10px]\">check</span>}\r\n                        </div>\r\n                    </label>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"mt-8 text-center\">\r\n                <button\r\n                    onClick={() => updateData({ existingAssets: [] })}\r\n                    className=\"text-sm text-slate-500 hover:text-primary underline\"\r\n                >\r\n                    None of the above\r\n                </button>\r\n            </div>\r\n\r\n            <footer className=\"w-full mt-12 py-8 px-4 border-t border-slate-200 dark:border-slate-800 flex flex-col sm:flex-row justify-between items-center gap-6\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"text-slate-500 hover:text-slate-800 font-medium flex items-center gap-1\"\r\n                >\r\n                    <span className=\"material-icons-outlined\">chevron_left</span> Back\r\n                </button>\r\n                <div className=\"flex flex-col items-center\">\r\n                    <span className=\"material-icons-round text-secondary text-4xl mb-1\">verified_user</span>\r\n                    <span className=\"text-xs font-bold text-slate-800 dark:text-white uppercase tracking-widest\">SetMyBizz.in</span>\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                    <button\r\n                        onClick={onNext}\r\n                        className=\"px-6 py-2 rounded-full border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-100 font-medium transition-colors\"\r\n                    >\r\n                        Skip\r\n                    </button>\r\n                    <button\r\n                        onClick={onNext}\r\n                        className=\"px-8 py-2.5 rounded-full bg-primary text-white font-medium shadow-lg hover:bg-blue-700 transition-all\"\r\n                    >\r\n                        Continue\r\n                    </button>\r\n                </div>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ExistingAssetsStep;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\FocusStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\IndustryDetailStep.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":21,"column":21,"nodeType":"JSXOpeningElement","endLine":25,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { BusinessData } from '../../types';\r\n\r\ninterface IndustryDetailStepProps {\r\n    data: BusinessData;\r\n    updateData: (newData: Partial<BusinessData>) => void;\r\n    onNext: () => void;\r\n    onBack: () => void;\r\n    uiStep: number;\r\n    totalSteps: number;\r\n}\r\n\r\nconst IndustryDetailStep: React.FC<IndustryDetailStepProps> = ({ data, updateData, onNext, onBack, uiStep, totalSteps }) => {\r\n    return (\r\n        <div className=\"w-full max-w-2xl mx-auto px-4 animate-in fade-in slide-in-from-right-4 duration-500 flex flex-col items-center\">\r\n            <div className=\"text-center mb-10\">\r\n                <span className=\"text-[10px] font-black text-slate-500 bg-white px-4 py-2 rounded-full mb-4 inline-block uppercase tracking-widest shadow-sm border border-slate-100\">\r\n                    Step {uiStep} of {totalSteps}\r\n                </span>\r\n                <div className=\"w-48 h-48 relative mb-6 mx-auto\">\r\n                    <img\r\n                        alt=\"Industry Illustration\"\r\n                        className=\"w-full h-full object-contain drop-shadow-sm\"\r\n                        src=\"https://lh3.googleusercontent.com/aida-public/AB6AXuDQRM4to2ItLArHK7AWVUxBzIdHY8UVMYNkcgX_WO9n8JJlbNSu8OI7aRivNeRheU8dvDWUfGkFWKs4kupGpntM0HgmAF5iqNSDh-HUqqW2h6KMQK1keg_3QwSubVldp7dj-UmbPpcxBiFS7S4wpzsjl5pP37I3P61DQYxm4mKG-VowypLVmG4AVVJWtmTmRD_ZGhAsggImGK2ZD9X66x5LmFlBgLWReyoetL5XloyQz0C1G9qgpdfNkBDFZB1s341KfvIef52usNYi\"\r\n                    />\r\n                </div>\r\n                <h1 className=\"text-3xl md:text-4xl font-serif font-bold text-slate-900\">\r\n                    Enter your industry\r\n                </h1>\r\n                <p className=\"text-slate-500 text-lg mt-3 max-w-lg mx-auto leading-relaxed font-sans font-medium\">\r\n                    By telling us more about what you do, we can create a better plan for you\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"w-full space-y-4 max-w-md\">\r\n                <div className=\"relative\">\r\n                    <input\r\n                        className=\"w-full p-3 rounded-lg border border-slate-200 shadow-sm bg-white text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-blue-600 focus:border-blue-600 focus:outline-none transition-all font-medium text-sm\"\r\n                        placeholder=\"e.g Coffee shop\"\r\n                        value={data.industry}\r\n                        onChange={(e) => updateData({ industry: e.target.value })}\r\n                    />\r\n                </div>\r\n                <div className=\"relative\">\r\n                    <textarea\r\n                        className=\"w-full p-3 rounded-lg border border-slate-200 shadow-sm bg-white text-slate-900 placeholder-slate-400 focus:ring-2 focus:ring-blue-600 focus:border-blue-600 focus:outline-none resize-none transition-all font-medium text-sm\"\r\n                        placeholder=\"e.g We are a small organic grocery shop located in Williamsburg, focused on a young, hipster audience\"\r\n                        rows={3}\r\n                        value={data.description}\r\n                        onChange={(e) => updateData({ description: e.target.value })}\r\n                    ></textarea>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"w-full max-w-2xl flex justify-between items-center mt-12 pt-8 border-t border-slate-200\">\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"text-slate-500 hover:text-slate-700 font-bold text-xs uppercase tracking-widest px-4 py-2 flex items-center gap-2 transition-colors\"\r\n                >\r\n                    <span className=\"material-icons-round text-base\">arrow_back</span> Back\r\n                </button>\r\n                <button\r\n                    onClick={onNext}\r\n                    className=\"bg-[#2563EB] hover:bg-blue-700 text-white font-bold text-xs uppercase tracking-[0.2em] px-8 py-3.5 rounded-xl shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2 transform active:scale-95\"\r\n                >\r\n                    Continue <span className=\"material-icons-round text-lg\">arrow_forward</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default IndustryDetailStep;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\IndustryOfferStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\LoginStep.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'businessName' is defined but never used.","line":10,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":69},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1183,1186],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1183,1186],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1809,1812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1809,1812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":175,"column":29,"nodeType":"JSXOpeningElement","endLine":175,"endColumn":148}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { GoogleAuthProvider, signInWithPopup, signInWithEmailAndPassword, createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth } from '@/lib/firebase';\r\n\r\ninterface LoginStepProps {\r\n    onLogin: (skipAuth?: boolean) => void;\r\n    businessName: string;\r\n}\r\n\r\nconst LoginStep: React.FC<LoginStepProps> = ({ onLogin, businessName }) => {\r\n    const [loginMethod, setLoginMethod] = useState<'email' | 'phone'>('email');\r\n    const [isLogin, setIsLogin] = useState(true);\r\n    \r\n    // Email State\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    \r\n    // Phone State\r\n    const [phone, setPhone] = useState('');\r\n    const [otp, setOtp] = useState('');\r\n    const [otpSent, setOtpSent] = useState(false);\r\n    \r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleGoogleLogin = async () => {\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            const provider = new GoogleAuthProvider();\r\n            await signInWithPopup(auth, provider);\r\n            onLogin();\r\n        } catch (err: any) {\r\n            console.error(\"Google Login Error:\", err);\r\n            setError(err.message || 'Failed to login with Google.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleEmailAuth = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            if (isLogin) {\r\n                await signInWithEmailAndPassword(auth, email, password);\r\n            } else {\r\n                await createUserWithEmailAndPassword(auth, email, password);\r\n            }\r\n            onLogin();\r\n        } catch (err: any) {\r\n            console.error(\"Email Auth Error:\", err);\r\n            setError(err.message || 'Authentication failed.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSendOtp = () => {\r\n        if (phone.length < 10) {\r\n            setError(\"Please enter a valid mobile number\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setTimeout(() => {\r\n            setLoading(false);\r\n            setOtpSent(true);\r\n            setError('');\r\n            // Simulate OTP sent\r\n        }, 1500);\r\n    };\r\n\r\n    const handleVerifyOtp = () => {\r\n        if (otp.length !== 4 && otp.length !== 6) {\r\n            setError(\"Invalid OTP\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setTimeout(() => {\r\n            setLoading(false);\r\n            onLogin(); // Success\r\n        }, 1500);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-50 z-[100] flex flex-col items-center justify-center p-6 font-sans overflow-y-auto\">\r\n            <div className=\"max-w-md w-full bg-white p-8 rounded-[2rem] shadow-2xl border border-white/50 animate-in fade-in zoom-in-95 duration-500\">\r\n\r\n                {/* Branding */}\r\n                <div className=\"text-center mb-8\">\r\n                    <div className=\"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-lg mx-auto mb-4 transform hover:scale-105 transition-transform duration-500\">\r\n                        <span className=\"material-symbols-outlined text-3xl\">rocket_launch</span>\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-black text-slate-900 tracking-tight\">Welcome to SetMyBizz</h1>\r\n                    <p className=\"text-slate-500 text-sm mt-2 font-medium\">\r\n                        {loginMethod === 'phone' \r\n                            ? (otpSent ? 'Enter code sent to your mobile' : 'Enter your mobile number to continue')\r\n                            : (isLogin ? 'Login to access your dashboard' : 'Create an account to get started')}\r\n                    </p>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"mb-6 p-4 bg-red-50 text-red-600 text-sm font-medium rounded-xl flex items-center gap-3 border border-red-100\">\r\n                        <span className=\"material-symbols-outlined text-xl\">error</span>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Method Switcher */}\r\n                <div className=\"flex p-1 bg-slate-100 rounded-xl mb-6\">\r\n                    <button\r\n                        onClick={() => { setLoginMethod('email'); setOtpSent(false); setError(''); }}\r\n                        className={`flex-1 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${loginMethod === 'email' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}\r\n                    >\r\n                        Email\r\n                    </button>\r\n                    <button\r\n                        onClick={() => { setLoginMethod('phone'); setError(''); }}\r\n                        className={`flex-1 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${loginMethod === 'phone' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}\r\n                    >\r\n                        Phone (OTP)\r\n                    </button>\r\n                </div>\r\n\r\n                {loginMethod === 'email' ? (\r\n                    <>\r\n                        <form onSubmit={handleEmailAuth} className=\"space-y-4\">\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-1.5 ml-1\">Email Address</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    required\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium\"\r\n                                    placeholder=\"name@company.com\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-1.5 ml-1\">Password</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    required\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium\"\r\n                                    placeholder=\"••••••••\"\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-2\"\r\n                            >\r\n                                {loading && <span className=\"material-symbols-outlined animate-spin text-lg\">sync</span>}\r\n                                {isLogin ? 'Sign In' : 'Create Account'}\r\n                            </button>\r\n                        </form>\r\n\r\n                        <div className=\"relative my-8\">\r\n                            <div className=\"absolute inset-0 flex items-center\">\r\n                                <div className=\"w-full border-t border-slate-200\"></div>\r\n                            </div>\r\n                            <div className=\"relative flex justify-center text-xs font-bold uppercase tracking-widest text-slate-400 bg-white px-2\">\r\n                                Or continue with\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={handleGoogleLogin}\r\n                            disabled={loading}\r\n                            className=\"w-full py-3.5 bg-white border border-slate-200 text-slate-700 font-bold rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all flex items-center justify-center gap-3 relative overflow-hidden group\"\r\n                        >\r\n                            <img src=\"https://www.google.com/favicon.ico\" alt=\"G\" className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\r\n                            {loading ? 'Connecting...' : 'Google Workspace'}\r\n                        </button>\r\n\r\n                        <div className=\"mt-6 text-center\">\r\n                            <p className=\"text-sm text-slate-500 font-medium\">\r\n                                {isLogin ? \"Don't have an account? \" : \"Already have an account? \"}\r\n                                <button\r\n                                    onClick={() => setIsLogin(!isLogin)}\r\n                                    className=\"text-blue-600 font-bold hover:underline\"\r\n                                    type=\"button\"\r\n                                >\r\n                                    {isLogin ? 'Sign up' : 'Log in'}\r\n                                </button>\r\n                            </p>\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    <div className=\"space-y-5\">\r\n                        {!otpSent ? (\r\n                            <>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-1.5 ml-1\">Mobile Number</label>\r\n                                    <div className=\"flex gap-3\">\r\n                                        <div className=\"px-4 py-3.5 bg-slate-100 border border-slate-200 rounded-xl text-slate-500 font-bold text-sm flex items-center pointer-events-none select-none\">\r\n                                            🇮🇳 +91\r\n                                        </div>\r\n                                        <input\r\n                                            type=\"tel\"\r\n                                            value={phone}\r\n                                            onChange={(e) => {\r\n                                                const val = e.target.value.replace(/\\D/g, '');\r\n                                                if (val.length <= 10) setPhone(val);\r\n                                            }}\r\n                                            className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-medium tracking-widest text-lg\"\r\n                                            placeholder=\"98765 43210\"\r\n                                            autoFocus\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={handleSendOtp}\r\n                                    disabled={loading || phone.length < 10}\r\n                                    className=\"w-full py-4 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 transition-all transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                                >\r\n                                    {loading ? <span className=\"material-symbols-outlined animate-spin\">sync</span> : <span className=\"material-symbols-outlined\">sms</span>}\r\n                                    Get OTP\r\n                                </button>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-slate-700 uppercase tracking-wider mb-1.5 ml-1\">Enter Verification Code</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={otp}\r\n                                        onChange={(e) => {\r\n                                            const val = e.target.value.replace(/\\D/g, '');\r\n                                            if (val.length <= 6) setOtp(val);\r\n                                        }}\r\n                                        className=\"w-full px-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-900 font-black tracking-[0.5em] text-center text-xl\"\r\n                                        placeholder=\"••••\"\r\n                                        autoFocus\r\n                                    />\r\n                                    <div className=\"flex justify-between items-center mt-2 px-1\">\r\n                                        <p className=\"text-xs text-slate-400\">Sent to +91 {phone}</p>\r\n                                        <button onClick={() => setOtpSent(false)} className=\"text-xs font-bold text-blue-600 hover:text-blue-700\">Change Number</button>\r\n                                    </div>\r\n                                </div>\r\n                                <button\r\n                                    onClick={handleVerifyOtp}\r\n                                    disabled={loading || otp.length < 4}\r\n                                    className=\"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                                >\r\n                                    {loading ? <span className=\"material-symbols-outlined animate-spin\">sync</span> : <span className=\"material-symbols-outlined\">check_circle</span>}\r\n                                    Verify & Login\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Dev Skip (Keep for testing) */}\r\n                {process.env.NODE_ENV === 'development' && (\r\n                    <div className=\"mt-8 text-center border-t border-dashed border-slate-200 pt-4\">\r\n                        <button\r\n                            onClick={() => onLogin(true)}\r\n                            className=\"text-[10px] text-slate-400 hover:text-slate-600 font-mono uppercase tracking-widest hover:underline\"\r\n                        >\r\n                            [DEV] Skip Login (Testing Only)\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            \r\n            <div className=\"mt-8 flex items-center gap-2 text-slate-400 opacity-60\">\r\n                <span className=\"material-symbols-outlined text-sm\">lock</span>\r\n                <span className=\"text-[10px] font-bold uppercase tracking-widest\">256-bit Secure Enterprise Login</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginStep;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\MotivationStep.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":48,"column":29,"nodeType":"JSXOpeningElement","endLine":52,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { BusinessData } from '../../types';\r\n\r\ninterface MotivationStepProps {\r\n    data: BusinessData;\r\n    updateData: (newData: Partial<BusinessData>) => void;\r\n    onNext: () => void;\r\n    onBack: () => void;\r\n    uiStep: number;\r\n    totalSteps: number;\r\n}\r\n\r\nconst MotivationStep: React.FC<MotivationStepProps> = ({ data, updateData, onNext, onBack, uiStep, totalSteps }) => {\r\n    const options = [\r\n        {\r\n            id: 'Being my own boss',\r\n            img: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAW7EBHR7LcB_69qvHxAbll7AzGwS7oUUCU1xrD9jlcicZJCvaDeBjblgVLKWON9Ejney8U3kl_i9XdPLjWTwmbDzADUPOcznMhey0vJ9M4xb2WlMij0v4H9bVJ1XYgI9pKPN3HkWVhh3-h5B5_whR3FjNamoHo72ToTOdlv8XYuOalwmczPqliiAw8FuDm71KhSHphjIzfkIMRe1qO_H0mHUGZricx4PbqSAZEst7xQo5MFePEHm70JT2-ZFfsdG8IDQ2PP1eJ26nj'\r\n        },\r\n        {\r\n            id: 'Making extra money',\r\n            img: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAokMfG10MPDEtDr1YPKqKLakw11LiAlpZoABmdopyBprdLkBbd_EA6xyooYgTSU7JcOf5mY3-dyMkhyxhB6Ic5ho5ZMgx-FjNQ5Aa1HgBJ5JFWNIcmr-al-9su8xKq6Ed9TeBX_hUKGOdD7brKjeKm8O75MWCisSw8IVb_xJU41j0xRryGGSWdswf4A17hKhDTAV2Z4q-1urg13FuBTIIjQer8YtNV1qe4MIssJTAP0CJBQXgYcWzV-Sps-7q-nK_OB0zbhcC43bn6'\r\n        },\r\n        {\r\n            id: 'Doing what I love',\r\n            img: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAIr2Sh1BTjsXXexATmyctJJyp0qNE2OuYxi-WLPRl6HYd63yL9tBBI_-96bJ6L5-DOzZrDW-Nq76svL_m-2AkNvqNKK3JIPaJexO_kt9qn9mVD98wPSzP0pKvKU7-V9M6E8pBcoHA-HhjAl_6kdCk2ElLcoQSGm9imG8sC2bmQwUMBSxsC1TtdztSrUQEROpErNzIB4faMja3Z-ij4WQf6ag6wQrnOXwZ_V2i-w8kwXk6uihl2_8-uL-fKfWUbk4O4irhjgzn8wFPG'\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-full max-w-5xl mx-auto px-4 animate-in fade-in slide-in-from-right-4 duration-500\">\r\n            <div className=\"text-center mb-8 space-y-3\">\r\n                <span className=\"text-[10px] font-black text-slate-500 bg-white px-5 py-2 rounded-full shadow-sm inline-block uppercase tracking-widest border border-slate-100\">\r\n                    Step {uiStep} of {totalSteps}\r\n                </span>\r\n                <h1 className=\"text-3xl md:text-4xl font-serif font-bold text-slate-900 leading-tight tracking-tight\">\r\n                    What was your biggest motivation?\r\n                </h1>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 pt-2 max-w-4xl mx-auto\">\r\n                {options.map(opt => (\r\n                    <div\r\n                        key={opt.id}\r\n                        onClick={() => updateData({ motivation: opt.id })}\r\n                        className={`group relative cursor-pointer bg-white rounded-[2rem] p-6 border-2 transition-all duration-300 transform hover:-translate-y-1 flex flex-col items-center gap-4 ${data.motivation === opt.id ? 'border-blue-600 shadow-xl shadow-blue-500/20 ring-4 ring-blue-50' : 'border-slate-100 shadow-sm hover:border-blue-200'}`}\r\n                    >\r\n                        <div className=\"h-32 w-full flex items-center justify-center p-4\">\r\n                            <img\r\n                                alt={opt.id}\r\n                                className={`transition-all object-contain h-full drop-shadow-sm ${data.motivation === opt.id ? 'opacity-100 scale-110' : 'opacity-80 grayscale group-hover:grayscale-0 group-hover:scale-105'}`}\r\n                                src={opt.img}\r\n                            />\r\n                        </div>\r\n                        <span className={`text-xs font-bold uppercase tracking-widest text-center ${data.motivation === opt.id ? 'text-blue-700' : 'text-slate-500 group-hover:text-slate-800'}`}>\r\n                            {opt.id}\r\n                        </span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"flex justify-between items-center mt-10 pt-6 border-t border-slate-200 max-w-4xl mx-auto\">\r\n                <button onClick={onBack} className=\"text-slate-500 hover:text-slate-700 font-bold text-xs uppercase tracking-widest px-4 py-2 flex items-center gap-2 transition-colors\">\r\n                    <span className=\"material-icons-round text-base\">arrow_back</span> Back\r\n                </button>\r\n                <button onClick={onNext} className=\"bg-[#2563EB] hover:bg-blue-700 text-white font-bold text-xs uppercase tracking-[0.2em] px-8 py-3.5 rounded-xl shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2 transform active:scale-95\">\r\n                    Next <span className=\"material-icons-round text-base\">arrow_forward</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MotivationStep;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\NameStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\Placeholder.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":3,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[62,65],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[62,65],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nconst StepPlaceholder: React.FC<any> = (props) => {\r\n    return (\r\n        <div className=\"p-8 text-center\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Step Placeholder</h2>\r\n            <p className=\"mb-4\">This step content needs to be provided.</p>\r\n            <div className=\"flex gap-4 justify-center\">\r\n                {props.onBack && <button onClick={props.onBack} className=\"px-4 py-2 border rounded\">Back</button>}\r\n                {props.onNext && <button onClick={props.onNext} className=\"px-4 py-2 bg-primary text-white rounded\">Next</button>}\r\n                {props.onLogin && <button onClick={props.onLogin} className=\"px-4 py-2 bg-primary text-white rounded\">Login</button>}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default StepPlaceholder;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\SizeStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\StageStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\SummaryStep.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addOns' is assigned a value but never used.","line":54,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'progressPercent' is assigned a value but never used.","line":61,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":26},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":70,"column":90,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2913,3044],"text":"\r\n                    Here is your personalized business blueprint based on your inputs. We&apos;ve outlined the essential steps to get "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2913,3044],"text":"\r\n                    Here is your personalized business blueprint based on your inputs. We&lsquo;ve outlined the essential steps to get "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2913,3044],"text":"\r\n                    Here is your personalized business blueprint based on your inputs. We&#39;ve outlined the essential steps to get "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2913,3044],"text":"\r\n                    Here is your personalized business blueprint based on your inputs. We&rsquo;ve outlined the essential steps to get "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { BusinessData } from '../../types';\r\n\r\ninterface SummaryStepProps {\r\n    data: BusinessData;\r\n    onBack: () => void;\r\n    onDashboard: () => void;\r\n}\r\n\r\nconst SummaryStep: React.FC<SummaryStepProps> = ({ data, onBack, onDashboard }) => {\r\n    const steps = [\r\n        {\r\n            category: 'Set up your brand',\r\n            title: 'Create a logo',\r\n            desc: 'Design a professional logo to represent your identity.',\r\n            action: 'Create',\r\n            icon: 'palette',\r\n            completed: false\r\n        },\r\n        {\r\n            category: 'Establish your brand',\r\n            title: 'Secure your domain name',\r\n            desc: 'Claim your digital address before someone else does.',\r\n            action: 'Search Domain',\r\n            icon: 'language',\r\n            completed: false\r\n        },\r\n        {\r\n            category: 'Establish your brand',\r\n            title: 'Set up your business email',\r\n            desc: 'Look professional with an email matching your domain.',\r\n            action: 'Get Email',\r\n            icon: 'mail',\r\n            completed: false\r\n        },\r\n        {\r\n            category: 'Legality',\r\n            title: 'Register your business with an LLC',\r\n            desc: 'Protect your personal assets and gain credibility.',\r\n            action: 'Start Registration',\r\n            icon: 'gavel',\r\n            completed: false\r\n        },\r\n        {\r\n            category: 'Establish your brand',\r\n            title: 'Build your own branded website',\r\n            desc: 'Create a stunning online presence to showcase your work.',\r\n            action: 'Start Building',\r\n            icon: 'web',\r\n            completed: false\r\n        },\r\n    ];\r\n\r\n    const addOns = [\r\n        { id: 'ecommerce', title: 'E-commerce Store', desc: 'Sell products online efficiently.', icon: 'shopping_cart', color: 'orange' },\r\n        { id: 'trademark', title: 'Trademark (TM)', desc: 'Secure your brand identity legally.', icon: 'verified', color: 'purple' },\r\n        { id: 'udyam', title: 'Udyam Registration', desc: 'MSME benefits & subsidies.', icon: 'assignment_turned_in', color: 'green' },\r\n        { id: 'startup_india', title: 'Startup India', desc: 'Govt recognition & tax benefits.', icon: 'rocket_launch', color: 'rose' },\r\n    ];\r\n\r\n    const progressPercent = 15;\r\n\r\n    return (\r\n        <div className=\"w-full max-w-5xl mx-auto px-4 py-8 animate-in fade-in zoom-in-95 duration-700\">\r\n            <div className=\"text-center mb-16\">\r\n                <h1 className=\"font-playfair text-3xl md:text-5xl font-bold text-slate-900 dark:text-white mb-6 leading-tight\">\r\n                    Take your first step towards your dream business<br className=\"hidden md:block\" /> to unlock the rest of your journey\r\n                </h1>\r\n                <p className=\"text-slate-500 dark:text-slate-400 text-xl max-w-3xl mx-auto\">\r\n                    Here is your personalized business blueprint based on your inputs. We've outlined the essential steps to get <span className=\"font-bold text-primary\">{data.name}</span> up and running.\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"relative space-y-6\">\r\n                {steps.map((step, idx) => (\r\n                    <div key={idx} className=\"relative flex gap-6 group\">\r\n                        <div className=\"relative z-10 flex-shrink-0 flex flex-col items-center\">\r\n                            <div className=\"w-10 h-10 rounded-full border-4 border-white dark:border-background-dark flex items-center justify-center shadow-lg bg-primary text-white\">\r\n                                <span className=\"material-icons-outlined text-base\">{step.icon}</span>\r\n                            </div>\r\n                            {idx !== steps.length - 1 && (\r\n                                <div className=\"w-1 h-full bg-slate-200 dark:bg-slate-800 absolute top-10\"></div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className={`flex-grow bg-card-light dark:bg-card-dark rounded-xl p-4 md:p-5 shadow-sm border border-slate-100 dark:border-slate-800 hover:shadow-md transition-all`}>\r\n                            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                                <div className=\"flex items-start gap-4\">\r\n                                    <div className=\"w-12 h-12 md:w-14 md:h-14 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center flex-shrink-0 border border-slate-100 dark:border-slate-700\">\r\n                                        <span className=\"material-icons-outlined text-slate-300 text-2xl\">{step.icon}</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <span className=\"text-[10px] font-bold uppercase tracking-widest mb-0.5 block text-primary\">{step.category}</span>\r\n                                        <h3 className=\"text-lg md:text-xl font-bold text-slate-900 dark:text-white leading-tight\">{step.title}</h3>\r\n                                        <p className=\"text-slate-500 dark:text-slate-400 mt-1 text-xs md:text-sm leading-relaxed\">{step.desc}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex-shrink-0\">\r\n                                    <button className=\"w-full md:w-auto px-5 py-2 rounded-full text-xs font-bold transition-all flex items-center justify-center gap-2 bg-primary hover:bg-blue-700 text-white shadow-md\">\r\n                                        {step.action}\r\n                                        <span className=\"material-icons-outlined text-xs\">arrow_forward</span>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"mt-16 flex flex-col items-center gap-6\">\r\n                <button\r\n                    onClick={onDashboard}\r\n                    className=\"w-full md:w-auto px-16 py-5 bg-primary hover:bg-blue-700 text-white text-xl font-bold rounded-full shadow-xl hover:shadow-blue-500/40 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-3\"\r\n                >\r\n                    Go to Dashboard\r\n                    <span className=\"material-icons-outlined\">dashboard</span>\r\n                </button>\r\n\r\n                <button\r\n                    onClick={onBack}\r\n                    className=\"text-slate-500 hover:text-slate-800 font-medium flex items-center gap-1\"\r\n                >\r\n                    <span className=\"material-icons-outlined\">chevron_left</span> Back to edit details\r\n                </button>\r\n            </div>\r\n\r\n            <footer className=\"mt-24 pt-12 border-t border-slate-200 dark:border-slate-800 flex flex-col items-center gap-6 text-center\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <span className=\"material-icons-outlined text-secondary text-4xl\">verified_user</span>\r\n                    <div className=\"flex flex-col text-left\">\r\n                        <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em]\">Powered by</span>\r\n                        <span className=\"font-bold text-2xl text-slate-900 dark:text-white tracking-tight\">SETMYBIZZ<span className=\"text-sm font-normal text-slate-400\">.IN</span></span>\r\n                    </div>\r\n                </div>\r\n                <p className=\"text-xs text-slate-400 dark:text-slate-600 mb-8\">© 2024 SetMyBizz.in. All rights reserved.</p>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SummaryStep;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\components\\steps\\WelcomeStep.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":32,"column":24,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2643,2724],"text":"\r\n                    Let&apos;s reach your business goals together!\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2643,2724],"text":"\r\n                    Let&lsquo;s reach your business goals together!\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2643,2724],"text":"\r\n                    Let&#39;s reach your business goals together!\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2643,2724],"text":"\r\n                    Let&rsquo;s reach your business goals together!\r\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":35,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2832,2948],"text":"\r\n                    Tell us a bit about your business, and we&apos;ll tailor the perfect plan for you\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2832,2948],"text":"\r\n                    Tell us a bit about your business, and we&lsquo;ll tailor the perfect plan for you\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2832,2948],"text":"\r\n                    Tell us a bit about your business, and we&#39;ll tailor the perfect plan for you\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2832,2948],"text":"\r\n                    Tell us a bit about your business, and we&rsquo;ll tailor the perfect plan for you\r\n                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface WelcomeStepProps {\r\n    onNext: () => void;\r\n}\r\n\r\nconst WelcomeStep: React.FC<WelcomeStepProps> = ({ onNext }) => {\r\n    return (\r\n        <div className=\"w-full flex flex-col items-center justify-center animate-in fade-in slide-in-from-bottom-4 duration-700\">\r\n            <div className=\"mb-8 relative w-48 h-48 md:w-64 md:h-64 flex items-center justify-center\">\r\n                <svg className=\"w-full h-full\" fill=\"none\" viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path className=\"dark:fill-blue-900/30\" d=\"M165.5 108.5C175.5 130 160 160 135 170C110 180 90 175 70 165C50 155 30 140 35 115C40 90 65 80 85 70C105 60 155.5 87 165.5 108.5Z\" fill=\"#DBEAFE\"></path>\r\n                    <circle className=\"dark:fill-gray-300\" cx=\"100\" cy=\"90\" fill=\"#1E293B\" r=\"25\"></circle>\r\n                    <path className=\"dark:stroke-gray-300\" d=\"M75 90C75 75 85 65 100 65C115 65 125 75 125 90\" stroke=\"#1E293B\" strokeLinecap=\"round\" strokeWidth=\"4\"></path>\r\n                    <path className=\"dark:fill-rose-500\" d=\"M60 120H140V150C140 161 131 170 120 170H80C69 170 60 161 60 150V120Z\" fill=\"#F43F5E\"></path>\r\n                    <rect className=\"dark:fill-gray-200\" fill=\"white\" height=\"40\" rx=\"2\" width=\"30\" x=\"85\" y=\"115\"></rect>\r\n                    <path d=\"M85 115H115\" stroke=\"#CBD5E1\" strokeWidth=\"2\"></path>\r\n                    <path d=\"M90 125H110\" stroke=\"#CBD5E1\" strokeWidth=\"2\"></path>\r\n                    <path d=\"M90 135H110\" stroke=\"#CBD5E1\" strokeWidth=\"2\"></path>\r\n                    <path d=\"M90 145H105\" stroke=\"#CBD5E1\" strokeWidth=\"2\"></path>\r\n                    <path className=\"dark:stroke-rose-500\" d=\"M60 130C50 130 40 110 50 100L60 90\" stroke=\"#F43F5E\" strokeLinecap=\"round\" strokeWidth=\"8\"></path>\r\n                    <path d=\"M50 80C50 75 55 70 60 70C65 70 70 75 70 80\" fill=\"none\" stroke=\"#F59E0B\" strokeLinecap=\"round\" strokeWidth=\"2\"></path>\r\n                    <circle cx=\"60\" cy=\"75\" fill=\"#F59E0B\" r=\"3\"></circle>\r\n                    <circle className=\"dark:fill-slate-500\" cx=\"150\" cy=\"80\" fill=\"#64748B\" r=\"4\"></circle>\r\n                    <circle className=\"dark:fill-slate-500\" cx=\"40\" cy=\"140\" fill=\"#64748B\" r=\"3\"></circle>\r\n                    <path className=\"dark:stroke-slate-500\" d=\"M140 100L150 90M155 110L165 105\" stroke=\"#64748B\" strokeLinecap=\"round\" strokeWidth=\"2\"></path>\r\n                </svg>\r\n            </div>\r\n\r\n            <div className=\"text-center max-w-lg mx-auto space-y-4 px-4\">\r\n                <h1 className=\"text-3xl md:text-4xl font-serif font-bold text-slate-900 dark:text-white leading-tight\">\r\n                    Let's reach your business goals together!\r\n                </h1>\r\n                <p className=\"text-slate-500 dark:text-slate-400 text-lg md:text-xl leading-relaxed\">\r\n                    Tell us a bit about your business, and we'll tailor the perfect plan for you\r\n                </p>\r\n\r\n                <button\r\n                    onClick={onNext}\r\n                    className=\"mt-8 bg-primary hover:bg-blue-700 text-white font-semibold px-10 py-4 rounded-full shadow-lg hover:shadow-blue-500/30 transition-all flex items-center gap-2 mx-auto\"\r\n                >\r\n                    Get Started\r\n                    <span className=\"material-icons-round\">arrow_forward</span>\r\n                </button>\r\n\r\n                <div className=\"flex justify-center gap-2 pt-8\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-rose-400 animate-bounce\"></div>\r\n                    <div className=\"w-2 h-2 rounded-full bg-rose-400 animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\r\n                    <div className=\"w-2 h-2 rounded-full bg-rose-400 animate-bounce\" style={{ animationDelay: '0.4s' }}></div>\r\n                </div>\r\n            </div>\r\n\r\n            <footer className=\"mt-20 flex flex-col items-center gap-1 opacity-90\">\r\n                <span className=\"material-icons-round text-secondary dark:text-teal-400 text-5xl\">verified_user</span>\r\n                <span className=\"text-xs font-bold tracking-widest text-slate-800 dark:text-slate-200 uppercase\">\r\n                    SetMyBizz.in\r\n                </span>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WelcomeStep;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\context\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[322,325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[322,325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[822,825],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[822,825],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'user?.uid'. Either include it or remove the dependency array.","line":83,"column":8,"nodeType":"ArrayExpression","endLine":83,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [user?.uid]","fix":{"range":[3215,3217],"text":"[user?.uid]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { User, onAuthStateChanged } from 'firebase/auth';\r\nimport { doc, onSnapshot } from 'firebase/firestore';\r\nimport { auth, db } from '@/lib/firebase';\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    dbUser: any | null;\r\n    guestId: string | null;\r\n    leadId: string | null;\r\n    loading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n    user: null,\r\n    dbUser: null,\r\n    guestId: null,\r\n    leadId: null,\r\n    loading: true,\r\n});\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [dbUser, setDbUser] = useState<any | null>(null);\r\n    const [guestId, setGuestId] = useState<string | null>(null);\r\n    const [leadId, setLeadId] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // Initialize Guest ID\r\n        let storedGuestId = localStorage.getItem('setmybizz_guest_id');\r\n        if (!storedGuestId) {\r\n            // Generate valid random 4 digit number\r\n            const randomNum = Math.floor(1000 + Math.random() * 9000);\r\n            storedGuestId = `Guest-${randomNum}`;\r\n            localStorage.setItem('setmybizz_guest_id', storedGuestId);\r\n        }\r\n        setGuestId(storedGuestId);\r\n\r\n        // Identify Lead (Async)\r\n        // We import dynamically to avoid circular dependencies if any, or just direct import\r\n        import('../lib/leadSystem').then(({ identifyLead }) => {\r\n            if (storedGuestId) {\r\n                 identifyLead(storedGuestId, user?.uid).then(id => {\r\n                     setLeadId(id);\r\n                     console.log(\"Lead Identified:\", id);\r\n                 });\r\n            }\r\n        });\r\n\r\n        // Listen for auth changes\r\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n            setUser(currentUser);\r\n\r\n            // Re-identify lead on login to link UID\r\n            if (currentUser && storedGuestId) {\r\n                import('../lib/leadSystem').then(({ identifyLead }) => {\r\n                    identifyLead(storedGuestId, currentUser.uid).then(id => setLeadId(id));\r\n                });\r\n            }\r\n\r\n            if (currentUser) {\r\n                // Fetch extra user details from Firestore\r\n                const unsubDb = onSnapshot(doc(db, \"users\", currentUser.uid), (doc) => {\r\n                    setDbUser(doc.data());\r\n                    setLoading(false);\r\n                });\r\n                return () => unsubDb(); // This clean up might be tricky inside onAuthStateChanged, but acceptable for this structure if handled carefully\r\n                // Actually, logic is cleaner if we separate effects, but here we nest for simplicity.\r\n                // However, the inner return is ignored by the outer unsubscribe.\r\n                // Better approach:\r\n            } else {\r\n                setDbUser(null);\r\n                setLoading(false);\r\n            }\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    // Separate effect for Firestore sync would be cleaner but requires careful dependency management.\r\n    // Given the constraints, let's keep it simple. But to fix the cleanup:\r\n    useEffect(() => {\r\n        if (user) {\r\n            const unsub = onSnapshot(doc(db, \"users\", user.uid), (doc) => {\r\n                setDbUser(doc.data());\r\n            });\r\n            return () => unsub();\r\n        }\r\n    }, [user]);\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, dbUser, guestId, leadId, loading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\aiService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":4,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[178,181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[178,181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[463,466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[463,466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AIRoadmap, AISocialPost } from '../types/ai';\r\nimport { generateRoadmap, generateSocialPost } from './gemini';\r\n\r\nexport const getBusinessRoadmap = async (businessData: any): Promise<AIRoadmap | null> => {\r\n    try {\r\n        const result = await generateRoadmap(businessData);\r\n        return result;\r\n    } catch (e) {\r\n        console.error(\"AI Service Error\", e);\r\n        return null;\r\n    }\r\n};\r\n\r\nexport const getSocialPost = async (businessData: any, customPrompt?: string): Promise<AISocialPost | null> => {\r\n    try {\r\n        const result = await generateSocialPost(businessData, customPrompt);\r\n        return result;\r\n    } catch (e) {\r\n        console.error(\"AI Service Error\", e);\r\n        return null;\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\db.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\dpr-engine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ProjectScheme' is defined but never used.","line":1,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1458,1461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1458,1461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'growthFactor' is assigned a value but never used.","line":75,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ProjectReport, ProjectScheme } from '../types/dpr';\r\n\r\n/**\r\n * PMEGP Subsidy Calculation Logic\r\n * @param category Promoter category\r\n * @param areaType Rural or Urban\r\n * @returns Subsidy percentage and own contribution percentage\r\n */\r\nexport const calculatePMEGPSubsidy = (\r\n    category: string,\r\n    areaType: 'RURAL' | 'URBAN'\r\n) => {\r\n    const isSpecial = ['SC', 'ST', 'OBC', 'MINORITY', 'EX_SERVICEMAN'].includes(category);\r\n    \r\n    if (areaType === 'RURAL') {\r\n        return {\r\n            subsidy: isSpecial ? 35 : 25,\r\n            contribution: isSpecial ? 5 : 10\r\n        };\r\n    } else {\r\n        return {\r\n            subsidy: isSpecial ? 25 : 15,\r\n            contribution: isSpecial ? 5 : 10\r\n        };\r\n    }\r\n};\r\n\r\n/**\r\n * MUDRA Loan Configuration\r\n * MUDRA (Micro Units Development & Refinance Agency Ltd.) doesn't have a direct capital subsidy \r\n * like PMEGP, but offers interest subvention for Shishu loans (2% for prompt repayment).\r\n */\r\nexport const getMUDRAConfig = (type: 'SHISHU' | 'KISHORE' | 'TARUN') => {\r\n    switch(type) {\r\n        case 'SHISHU': return { maxLimit: 50000, collateral: 'No', processingFee: 'Nil' };\r\n        case 'KISHORE': return { maxLimit: 500000, collateral: 'No', processingFee: 'Nil' };\r\n        case 'TARUN': return { maxLimit: 1000000, collateral: 'No', processingFee: '0.5%' };\r\n    }\r\n};\r\n\r\n/**\r\n * Calculate Key Banking Ratios\r\n */\r\nexport const calculateBankingRatios = (financials: any) => {\r\n    const totalProjectCost = \r\n        financials.fixedAssets.landAndBuilding + \r\n        financials.fixedAssets.machinery + \r\n        financials.fixedAssets.furniture + \r\n        financials.fixedAssets.otherAssets + \r\n        (financials.workingCapital.rawMaterial * 3); // 3 months working capital cycle\r\n\r\n    const annualRevenue = financials.revenue.monthlyTarget * 12;\r\n    const estimatedProfitMargin = 0.20; // 20% default margin for projection\r\n    const annualNetProfit = annualRevenue * estimatedProfitMargin;\r\n    \r\n    const dscr = annualNetProfit / (financials.funding.loanRequired / 5); // 5 year repayment assumption\r\n    const bep = (financials.workingCapital.salaries * 12) / (financials.revenue.unitPrice - (financials.revenue.unitPrice * 0.40));\r\n\r\n    return {\r\n        totalProjectCost,\r\n        dscr: Number(dscr.toFixed(2)),\r\n        bep: Number(bep.toFixed(2)),\r\n        roi: Number(((annualNetProfit / totalProjectCost) * 100).toFixed(2))\r\n    };\r\n};\r\n\r\n/**\r\n * Generate Multi-Year CMA Data Projections\r\n * Premium tier allows up to 10 years. Default is 3-5 years.\r\n */\r\nexport const generateCMAData = (report: ProjectReport, yearsCount: number = 3) => {\r\n    const years = Array.from({ length: yearsCount }, (_, i) => i + 1);\r\n    const results = years.map(year => {\r\n        // Industry-specific growth curves\r\n        const growthFactor = year === 1 ? 1 : (1 + (Math.random() * 0.1 + 0.1)); // 10-20% growth\r\n        const sales = (report.financials.revenue.monthlyTarget * 12) * Math.pow(1.15, year - 1);\r\n        \r\n        // P&L Components\r\n        const rawMaterials = sales * 0.45; // 45% of sales\r\n        const salaries = report.financials.workingCapital.salaries * 12 * Math.pow(1.08, year - 1); // 8% increment\r\n        const interest = (report.financials.funding.loanRequired * 0.095) * (1 - (year - 1) * 0.1); // Reducing principal\r\n        \r\n        const ebita = sales - rawMaterials - salaries - (report.financials.workingCapital.utilities * 12);\r\n        const pbt = ebita - interest - (report.financials.fixedAssets.machinery * 0.1);\r\n        const tax = pbt > 0 ? pbt * 0.25 : 0;\r\n        \r\n        return {\r\n            year,\r\n            sales: Math.round(sales),\r\n            ebita: Math.round(ebita),\r\n            pbt: Math.round(pbt),\r\n            pat: Math.round(pbt - tax),\r\n            currentRatio: 1.33 + (year * 0.05), // Improving liquidity\r\n            dscr: 1.5 + (year * 0.2) // Improving debt coverage\r\n        };\r\n    });\r\n    return results;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\firebase.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2469,2472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2469,2472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2871,2874],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2871,2874],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3454,3457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3454,3457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics, isSupported } from \"firebase/analytics\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getAuth } from \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDxA7-JQPGRNyLRBIEHQm2bArjNCF0E0zE\",\r\n  authDomain: \"setmybizz-platform.firebaseapp.com\",\r\n  projectId: \"setmybizz-platform\",\r\n  storageBucket: \"setmybizz-platform.firebasestorage.app\",\r\n  messagingSenderId: \"670603258670\",\r\n  appId: \"1:670603258670:web:253f3feb228577ecb368bf\",\r\n  measurementId: \"G-3WZNQ6GQH9\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize Analytics conditionally (only in browser)\r\nlet analytics;\r\nif (typeof window !== \"undefined\") {\r\n  isSupported().then((supported) => {\r\n    if (supported) {\r\n      analytics = getAnalytics(app);\r\n    }\r\n  });\r\n}\r\n\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\n// Initialize Firestore\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\nconst storage = getStorage(app);\r\n\r\nimport { GoogleAuthProvider, signInWithPopup, signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\r\n\r\nexport const signInWithGoogleWorkspace = async () => {\r\n  const provider = new GoogleAuthProvider();\r\n  // Add scopes for full workspace integration\r\n  provider.addScope('https://www.googleapis.com/auth/gmail.readonly');\r\n  provider.addScope('https://www.googleapis.com/auth/calendar.events.readonly');\r\n  provider.addScope('https://www.googleapis.com/auth/drive.readonly');\r\n  // For user info\r\n  provider.addScope('https://www.googleapis.com/auth/userinfo.profile');\r\n  provider.addScope('https://www.googleapis.com/auth/userinfo.email');\r\n\r\n  try {\r\n    const result = await signInWithPopup(auth, provider);\r\n    // This gives you a Google Access Token. You can use it to access the Google API.\r\n    const credential = GoogleAuthProvider.credentialFromResult(result);\r\n    const token = credential?.accessToken;\r\n    const user = result.user;\r\n\r\n    return { user, token };\r\n  } catch (error) {\r\n    console.error(\"Error signing in with Google Workspace:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Basic Google Sign In (without workspace scopes)\r\nexport const signInWithGoogle = async () => {\r\n  const provider = new GoogleAuthProvider();\r\n\r\n  try {\r\n    const result = await signInWithPopup(auth, provider);\r\n    const user = result.user;\r\n    return { user };\r\n  } catch (error: any) {\r\n    console.error(\"Error signing in with Google:\", error);\r\n    throw new Error(error.message || \"Failed to sign in with Google\");\r\n  }\r\n};\r\n\r\n// Email/Password Sign In\r\nexport const signInWithEmailPassword = async (email: string, password: string) => {\r\n  try {\r\n    const result = await signInWithEmailAndPassword(auth, email, password);\r\n    return { user: result.user };\r\n  } catch (error: any) {\r\n    console.error(\"Error signing in with email:\", error);\r\n    throw new Error(error.message || \"Failed to sign in\");\r\n  }\r\n};\r\n\r\n// Create Account with Email/Password\r\nexport const createUserAccount = async (email: string, password: string, displayName: string) => {\r\n  try {\r\n    const result = await createUserWithEmailAndPassword(auth, email, password);\r\n\r\n    // Update profile with display name\r\n    if (result.user) {\r\n      await updateProfile(result.user, {\r\n        displayName: displayName\r\n      });\r\n    }\r\n\r\n    return { user: result.user };\r\n  } catch (error: any) {\r\n    console.error(\"Error creating account:\", error);\r\n    let message = \"Failed to create account\";\r\n\r\n    if (error.code === 'auth/email-already-in-use') {\r\n      message = \"This email is already registered. Please sign in instead.\";\r\n    } else if (error.code === 'auth/weak-password') {\r\n      message = \"Password is too weak. Please use a stronger password.\";\r\n    } else if (error.code === 'auth/invalid-email') {\r\n      message = \"Invalid email address.\";\r\n    }\r\n\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\nexport { app, analytics, db, auth, storage };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\gemini.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1557,1560],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1557,1560],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2239,2242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2239,2242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3853,3856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3853,3856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'styleGuide' is assigned a value but never used.","line":91,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5700,5703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5700,5703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { AIRoadmap, AISocialPost } from \"../types/ai\";\r\n\r\nconst apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY || process.env.GEMINI_API_KEY;\r\nconst genAI = apiKey ? new GoogleGenerativeAI(apiKey) : null;\r\n\r\nconst model = genAI ? genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" }) : null;\r\n\r\n// Mock Data for Demo Backup\r\nconst MOCK_ROADMAP: AIRoadmap = {\r\n    overview: \"This is a generated strategic roadmap to launch your business successfully in 30 days (Demo Backup).\",\r\n    weeks: [\r\n        { week: 1, title: \"Legal & Foundation\", tasks: [\"Register business name\", \"Obtain necessary licenses\", \"Open bank account\"] },\r\n        { week: 2, title: \"Branding & Identity\", tasks: [\"Design logo\", \"Setup social media profiles\", \"Create brand guidelines\"] },\r\n        { week: 3, title: \"Operations Setup\", tasks: [\"Setup accounting software\", \"Find vendors/partners\", \"Setup workspace\"] },\r\n        { week: 4, title: \"Launch & Marketing\", tasks: [\"Soft launch to friends\", \"Run initial ads\", \"Official opening day\"] }\r\n    ]\r\n};\r\n\r\nconst MOCK_SOCIAL_POST: AISocialPost = {\r\n    headline: \"🚀 Launch Your Dream Business Today!\",\r\n    caption: \"Don't wait for the perfect moment. Take the first step towards your entrepreneurial journey with SetMyBizz. We make incorporation easy and fast.\\n\\nStart your story now! ✨\",\r\n    hashtags: [\"#Entrepreneur\", \"#StartupLife\", \"#BusinessLaunch\", \"#SetMyBizz\", \"#NewBeginnings\"]\r\n};\r\n\r\n// Shared System Prompt Generator\r\nconst getSystemPrompt = (data: any) => {\r\n    return `You are the dedicated AI Co-founder for \"${data.name}\". \r\n    \r\n    CRITICAL CONTEXT:\r\n    - Business Name: \"${data.name}\"\r\n    - Industry: \"${data.industry}\"\r\n    - Offerings: \"${data.offeringType}\"\r\n    - Focus Areas: \"${data.focusAreas?.join(', ') || 'General Growth'}\"\r\n    \r\n    YOUR ROLE:\r\n    - Do NOT talk about \"Setmybizz\" or general incorporation unless asked.\r\n    - You MUST tailor every response specifically to \"${data.name}\" and its products/services.\r\n    - Act as a partner who has been with the business since day one.\r\n    \r\n    Always be professional, encouraging, and entrepreneurial.`;\r\n};\r\n\r\nexport const generateRoadmap = async (data: any): Promise<AIRoadmap> => {\r\n    console.log(\"Generating Roadmap for:\", data.name);\r\n    try {\r\n        if (!model) throw new Error(\"Gemini API Key not configured\");\r\n\r\n        const systemPrompt = getSystemPrompt(data);\r\n        const prompt = `\r\n        ${systemPrompt}\r\n\r\n        Task: Create a 30-day step-by-step roadmap for this business.\r\n        \r\n        Output STRICT JSON format with this structure:\r\n        {\r\n            \"overview\": \"2 sentence strategic summary\",\r\n            \"weeks\": [\r\n                { \"week\": 1, \"title\": \"Foundation\", \"tasks\": [\"task 1\", \"task 2\"] },\r\n                { \"week\": 2, \"title\": \"Development\", \"tasks\": [\"task 1\", \"task 2\"] },\r\n                { \"week\": 3, \"title\": \"Launch Preparation\", \"tasks\": [\"task 1\", \"task 2\"] },\r\n                { \"week\": 4, \"title\": \"Go-Live & Initial Growth\", \"tasks\": [\"task 1\", \"task 2\"] }\r\n            ]\r\n        }\r\n        Minimize formatted text, give raw JSON.\r\n        `;\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const response = await result.response;\r\n        const text = response.text();\r\n        console.log(\"Gemini Response (Roadmap):\", text);\r\n\r\n        const cleanText = text.replace(/```json/g, '').replace(/```/g, '').trim();\r\n        return JSON.parse(cleanText);\r\n    } catch (error) {\r\n        console.error(\"Gemini API Error (Roadmap):\", error);\r\n        console.warn(\"Using Mock Roadmap for Demo\");\r\n        return MOCK_ROADMAP;\r\n    }\r\n};\r\n\r\n// Helper to enhance image prompts for Professional/Luxury results\r\nexport const enhanceImagePrompt = async (originalPrompt: string, data: any): Promise<string> => {\r\n    console.log(\"Enhancing Image Prompt:\", originalPrompt);\r\n    try {\r\n        if (!model) return originalPrompt;\r\n\r\n        // Detect Intent\r\n        const isLogo = originalPrompt.toLowerCase().includes('logo') || originalPrompt.toLowerCase().includes('icon') || originalPrompt.toLowerCase().includes('identity');\r\n\r\n        const styleGuide = isLogo\r\n            ? \"Style: High-End Luxury Brand Logo, Minimalist Vector, Gold/Black or Corporate Blue, White Background, Award-Winning Graphic Design.\"\r\n            : \"Style: Cinematic 4K Photography, Architectural Digest Style, Professional Lighting, Highly Detailed, Realistic.\";\r\n\r\n        const prompt = `\r\n        Role: World-Class Art Director.\r\n        Task: Rewrite user request: \"${originalPrompt}\" into a professional image generation prompt.\r\n        \r\n        Business Context:\r\n        - Name: \"${data.name}\"\r\n        - Industry: \"${data.industry}\"\r\n        - Offering: \"${data.offeringType}\"\r\n        \r\n        Rules:\r\n        1. Ignore \"Setmybizz\". Use \"${data.name}\" branding.\r\n        2. Force HIGH QUALITY terms: (4k, photorealistic, trending on artstation).\r\n        3. If Logo: Focus on symbols related to ${data.industry} (e.g., if Construction -> Building silhouette).\r\n        4. If Post: Focus on emotions, people, or high-end product shots.\r\n        5. Output ONLY the refined prompt text.\r\n        `;\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const response = await result.response;\r\n        const text = response.text().trim();\r\n        console.log(\"Enhanced Prompt:\", text);\r\n        return text;\r\n    } catch (error) {\r\n        console.error(\"Prompt Enhancement Failed:\", error);\r\n        return `${originalPrompt}, high quality, professional, 4k`;\r\n    }\r\n};\r\n\r\nexport const generateSocialPost = async (data: any, customPrompt?: string): Promise<AISocialPost> => {\r\n    console.log(\"Generating Content for:\", data.name, \"Custom Prompt:\", customPrompt);\r\n    try {\r\n        if (!model) throw new Error(\"Gemini API Key not configured\");\r\n\r\n        const systemPrompt = getSystemPrompt(data);\r\n        const specificInstruction = customPrompt && customPrompt.trim() !== \"\"\r\n            ? `User Request: \"${customPrompt}\"`\r\n            : `User Request: Create a comprehensive \"Grand Launch\" post announcing the official opening of \"${data.name}\".`;\r\n\r\n        const prompt = `\r\n        ${systemPrompt}\r\n        ${specificInstruction}\r\n        \r\n        IMPORTANT: Naturally mention the business name \"${data.name}\" in the proper context (headline or caption) to make it feel personalized.\r\n        \r\n        Output STRICT JSON format:\r\n        {\r\n            \"headline\": \"Catchy Headline or Ad Hook\",\r\n            \"caption\": \"Compelling caption or body text (3-4 lines)\",\r\n            \"hashtags\": [\"#tag1\", \"#tag2\", \"#tag3\", \"#tag4\", \"#tag5\"]\r\n        }\r\n        Minimize formatted text, give raw JSON.\r\n        `;\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const response = await result.response;\r\n        const text = response.text();\r\n        console.log(\"Gemini Response (Content):\", text);\r\n\r\n        const cleanText = text.replace(/```json/g, '').replace(/```/g, '').trim();\r\n        return JSON.parse(cleanText);\r\n    } catch (error) {\r\n        console.error(\"Gemini API Error (Content):\", error);\r\n        console.warn(\"Using Mock Social Post for Demo\");\r\n        return MOCK_SOCIAL_POST;\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\globalIncorporationData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\google-api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1892,1895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1892,1895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2256,2259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2256,2259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2365,2368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2365,2368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":112,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3640,3643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3640,3643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4776,4779],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4776,4779],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// src/lib/google-api.ts\r\n// This file will handle all real communications with Google APIs\r\n// once we have the Client ID and Secret from Google Cloud Console.\r\n\r\nexport interface GoogleEmail {\r\n    id: string;\r\n    from: string;\r\n    subject: string;\r\n    snippet: string;\r\n    date: string;\r\n    isUnread: boolean;\r\n}\r\n\r\nexport interface GoogleCalendarEvent {\r\n    id: string;\r\n    title: string;\r\n    startTime: string; // ISO string\r\n    endTime: string;\r\n    meetLink?: string;\r\n    colorId?: string;\r\n}\r\n\r\nexport interface GoogleDriveFile {\r\n    id: string;\r\n    name: string;\r\n    mimeType: string;\r\n    thumbnailLink?: string;\r\n}\r\n\r\n// Google API Client for SetMyBizz\r\n\r\n// Types\r\nexport interface GoogleEmail {\r\n    id: string;\r\n    from: string;\r\n    subject: string;\r\n    snippet: string;\r\n    date: string;\r\n    isUnread: boolean;\r\n}\r\n\r\nexport interface GoogleCalendarEvent {\r\n    id: string;\r\n    title: string;\r\n    startTime: string;\r\n    endTime: string;\r\n    meetLink?: string;\r\n    colorId?: string;\r\n}\r\n\r\nexport interface GoogleDriveFile {\r\n    id: string;\r\n    name: string;\r\n    mimeType: string;\r\n    thumbnailLink?: string;\r\n    webViewLink?: string;\r\n    iconLink?: string;\r\n}\r\n\r\n// REAL API CALLS\r\n// Note: These require a valid Google Access Token with appropriate scopes\r\n\r\nexport const fetchUserEmails = async (accessToken: string): Promise<GoogleEmail[]> => {\r\n    try {\r\n        // 1. List messages\r\n        const listResponse = await fetch('https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=5&q=in:inbox', {\r\n            headers: { Authorization: `Bearer ${accessToken}` }\r\n        });\r\n        const listData = await listResponse.json();\r\n        if (!listData.messages) return [];\r\n\r\n        // 2. Fetch details for each message (Promise.all for parallel fetching)\r\n        const emails = await Promise.all(listData.messages.map(async (msg: any) => {\r\n            const detailResponse = await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${msg.id}`, {\r\n                headers: { Authorization: `Bearer ${accessToken}` }\r\n            });\r\n            const detail = await detailResponse.json();\r\n\r\n            // Extract headers\r\n            const from = detail.payload.headers.find((h: any) => h.name === 'From')?.value || 'Unknown';\r\n            const subject = detail.payload.headers.find((h: any) => h.name === 'Subject')?.value || '(No Subject)';\r\n\r\n            return {\r\n                id: detail.id,\r\n                from: from.replace(/<.*>/, '').trim(), // Clean up \"Name <email>\" format\r\n                subject: subject,\r\n                snippet: detail.snippet,\r\n                date: new Date(parseInt(detail.internalDate)).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\r\n                isUnread: detail.labelIds?.includes('UNREAD')\r\n            };\r\n        }));\r\n\r\n        return emails;\r\n    } catch (error) {\r\n        console.error(\"Gmail API Error:\", error);\r\n        return [];\r\n    }\r\n};\r\n\r\nexport const fetchUserEvents = async (accessToken: string): Promise<GoogleCalendarEvent[]> => {\r\n    try {\r\n        const timeMin = new Date().toISOString();\r\n        const timeMax = new Date(new Date().setHours(23, 59, 59)).toISOString(); // End of today\r\n\r\n        const response = await fetch(`https://www.googleapis.com/calendar/v3/calendars/primary/events?timeMin=${timeMin}&timeMax=${timeMax}&singleEvents=true&orderBy=startTime`, {\r\n            headers: { Authorization: `Bearer ${accessToken}` }\r\n        });\r\n        const data = await response.json();\r\n\r\n        if (!data.items) return [];\r\n\r\n        return data.items.map((event: any) => ({\r\n            id: event.id,\r\n            title: event.summary || 'Untitled Event',\r\n            startTime: event.start.dateTime ? new Date(event.start.dateTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : 'All Day',\r\n            endTime: event.end.dateTime ? new Date(event.end.dateTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) : '',\r\n            meetLink: event.hangoutLink,\r\n            colorId: event.colorId // Google colors are numeric IDs, mapped in UI later\r\n        }));\r\n    } catch (error) {\r\n        console.error(\"Calendar API Error:\", error);\r\n        return [];\r\n    }\r\n};\r\n\r\nexport const fetchUserFiles = async (accessToken: string): Promise<GoogleDriveFile[]> => {\r\n    try {\r\n        const response = await fetch('https://www.googleapis.com/drive/v3/files?pageSize=5&fields=files(id,name,mimeType,thumbnailLink,webViewLink,iconLink)&orderBy=modifiedTime desc', {\r\n            headers: { Authorization: `Bearer ${accessToken}` }\r\n        });\r\n        const data = await response.json();\r\n\r\n        if (!data.files) return [];\r\n\r\n        return data.files.map((file: any) => ({\r\n            id: file.id,\r\n            name: file.name,\r\n            mimeType: file.mimeType,\r\n            thumbnailLink: file.thumbnailLink,\r\n            webViewLink: file.webViewLink,\r\n            iconLink: file.iconLink\r\n        }));\r\n    } catch (error) {\r\n        console.error(\"Drive API Error:\", error);\r\n        return [];\r\n    }\r\n};\r\n\r\n// --- KEEPING MOCKS FOR FALLBACK/DEMO ---\r\nexport const getMockEmails = (): GoogleEmail[] => [\r\n    { id: '1', from: 'Google Cloud', subject: 'Your monthly invoice is available', snippet: 'Your invoice for January 2026 is ready...', date: '10:30 AM', isUnread: false },\r\n    { id: '2', from: 'Client: TechCorp', subject: 'Re: Project Proposal for Q1', snippet: 'Looks good! Can we schedule a call?', date: '9:15 AM', isUnread: true },\r\n    { id: '3', from: 'Product Team', subject: 'Daily Standup - Join Link', snippet: 'Here is the link for today\\'s standup...', date: '8:55 AM', isUnread: false },\r\n];\r\n\r\nexport const getMockEvents = (): GoogleCalendarEvent[] => [\r\n    { id: 'e1', title: 'Product Review', startTime: '11:00 AM', endTime: '12:00 PM', meetLink: 'https://meet.google.com/abc-defg-hij', colorId: '1' },\r\n    { id: 'e2', title: 'Client Meeting', startTime: '2:00 PM', endTime: '3:00 PM', meetLink: 'https://meet.google.com/xyz-uvw-typ', colorId: '2' },\r\n];\r\n\r\nexport const getMockFiles = (): GoogleDriveFile[] => [\r\n    { id: 'f1', name: 'Financial Plan Q1.xlsx', mimeType: 'application/vnd.google-apps.spreadsheet' },\r\n    { id: 'f2', name: 'Marketing Strategy.docx', mimeType: 'application/vnd.google-apps.document' },\r\n];\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\googleSheets.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[455,458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[455,458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1550,1553],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1550,1553],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { google } from 'googleapis';\r\n\r\n// Environment variables should be used for these\r\nconst SHEET_ID = process.env.GOOGLE_SHEET_ID || '1_vzF_T_uExFxamiW9OCGTAMxIEzbdwJyBaKJ1VIwDCE';\r\nconst SCOPES = ['https://www.googleapis.com/auth/spreadsheets'];\r\n\r\n/**\r\n * Appends a row of data to the Google Sheet.\r\n * @param data Array of strings/numbers to append as a row\r\n * @returns boolean indicating success\r\n */\r\nexport const appendToSheet = async (data: any[]) => {\r\n    try {\r\n        const client_email = process.env.GOOGLE_CLIENT_EMAIL;\r\n        // Handle private key newlines for Vercel/various env handlers\r\n        const private_key = process.env.GOOGLE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n');\r\n\r\n        if (!client_email || !private_key) {\r\n            console.warn('[Google Sheets] Missing GOOGLE_CLIENT_EMAIL or GOOGLE_PRIVATE_KEY. Skipping sync.');\r\n            return false;\r\n        }\r\n\r\n        const auth = new google.auth.JWT({\r\n            email: client_email,\r\n            key: private_key,\r\n            scopes: SCOPES\r\n        });\r\n\r\n        const sheets = google.sheets({ version: 'v4', auth });\r\n        \r\n        await sheets.spreadsheets.values.append({\r\n            spreadsheetId: SHEET_ID,\r\n            range: 'Leads!A:H', // Assumes a 'Leads' tab exists. Make sure to create it.\r\n            valueInputOption: 'USER_ENTERED',\r\n            requestBody: {\r\n                values: [data]\r\n            }\r\n        });\r\n\r\n        console.log('[Google Sheets] Successfully appended row.');\r\n        return true;\r\n    } catch (error: any) {\r\n        console.error('[Google Sheets] Error appending row:', error?.message || error);\r\n        return false;\r\n    }\r\n};\r\n\r\n/**\r\n * Reads leads from the Google Sheet (Admin use only)\r\n */\r\nexport const fetchSheetLeads = async () => {\r\n    try {\r\n        const client_email = process.env.GOOGLE_CLIENT_EMAIL;\r\n        const private_key = process.env.GOOGLE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n');\r\n\r\n        if (!client_email || !private_key) return [];\r\n\r\n        const auth = new google.auth.JWT({\r\n            email: client_email,\r\n            key: private_key,\r\n            scopes: SCOPES\r\n        });\r\n        const sheets = google.sheets({ version: 'v4', auth });\r\n\r\n        const response = await sheets.spreadsheets.values.get({\r\n            spreadsheetId: SHEET_ID,\r\n            range: 'Leads!A2:H', // Skip header\r\n        });\r\n\r\n        return response.data.values || [];\r\n    } catch (error) {\r\n        console.error('[Google Sheets] Error fetching leads:', error);\r\n        return [];\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\imageService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'NEXT_PUBLIC_IMAGE_API_KEY' is assigned a value but never used.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[419,422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[419,422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { enhanceImagePrompt } from './gemini';\r\n\r\nexport interface AIImageResponse {\r\n    success: boolean;\r\n    imageUrl?: string;\r\n    error?: string;\r\n}\r\n\r\nconst NEXT_PUBLIC_IMAGE_API_KEY = process.env.NEXT_PUBLIC_IMAGE_API_KEY; // Google Imagen / Vertex Key placeholder\r\nconst NEXT_PUBLIC_OPENAI_API_KEY = process.env.NEXT_PUBLIC_OPENAI_API_KEY;\r\n\r\nexport const generateImage = async (prompt: string, businessData: any): Promise<AIImageResponse> => {\r\n    console.log(\"Generating Image for:\", businessData.name, \"Industry:\", businessData.industry);\r\n\r\n    // 1. Refine the prompt using Gemini (The \"Brain\")\r\n    // This turns \"logo\" into \"minimalist vector...\" and \"post\" into \"cinematic 4k...\"\r\n    const enhancedPrompt = await enhanceImagePrompt(prompt, businessData);\r\n\r\n    // Simulate real AI processing time (if prompt expansion was fast)\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n    // 2. Try Professional API (DALL-E 3) if Key Exists\r\n    if (NEXT_PUBLIC_OPENAI_API_KEY) {\r\n        try {\r\n            console.log(\"Using DALL-E 3...\");\r\n            const response = await fetch(\"https://api.openai.com/v1/images/generations\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${NEXT_PUBLIC_OPENAI_API_KEY}`\r\n                },\r\n                body: JSON.stringify({\r\n                    model: \"dall-e-3\",\r\n                    prompt: enhancedPrompt,\r\n                    n: 1,\r\n                    size: \"1024x1024\",\r\n                    quality: \"hd\",\r\n                    style: \"natural\"\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (data.data && data.data[0]?.url) {\r\n                return { success: true, imageUrl: data.data[0].url };\r\n            }\r\n        } catch (error) {\r\n            console.error(\"OpenAI API Failed:\", error);\r\n        }\r\n    }\r\n\r\n    // 3. FLUX Realism Engine (Pollinations.ai)\r\n    // The user wants \"Real AI Generation\". Pollinations with 'model=flux' provides \r\n    // State-of-the-art open source generation (Flux) which is highly photorealistic.\r\n    // It is FREE, fast, and replaces the broken Unsplash link.\r\n\r\n    try {\r\n        console.log(\"Using Flux Realism Engine...\");\r\n        const encodedPrompt = encodeURIComponent(enhancedPrompt.substring(0, 800));\r\n        const randomSeed = Math.floor(Math.random() * 1000000); // Ensure unique result each time\r\n\r\n        // Flux model + No Logo + Enhanced Prompt = High Quality Realism\r\n        const imageUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=1024&height=1024&model=flux&seed=${randomSeed}&nologo=true&enhance=false`;\r\n\r\n        return {\r\n            success: true,\r\n            imageUrl: imageUrl\r\n        };\r\n    } catch (e) {\r\n        console.error(\"Image Gen Error:\", e);\r\n        return { success: false, error: \"Generation failed\" };\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\industry-templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\leadSystem.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDoc' is defined but never used.","line":2,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1970,1973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1970,1973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2813,2816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2813,2816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":89,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3159,3162],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3159,3162],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from './firebase';\r\nimport { doc, getDoc, setDoc, updateDoc, collection, addDoc, serverTimestamp, query, where, getDocs, orderBy, limit } from 'firebase/firestore';\r\nimport { Lead } from '../types';\r\n\r\n/**\r\n * Lead Engine: Handles lead capture, unique ID generation, and syncing.\r\n */\r\n\r\n// 1. Generate Unique Lead ID (SMB-YYYY-XXXX)\r\nexport const generateLeadId = async (): Promise<string> => {\r\n    const year = new Date().getFullYear();\r\n    const prefix = `SMB-${year}`;\r\n    \r\n    // We ideally should use a transaction or counter, but for simplicity:\r\n    // Generate a secure random number plus part of timestamp\r\n    const randomSuffix = Math.floor(1000 + Math.random() * 9000); // 4 digit\r\n    const timestampPart = Date.now().toString().slice(-4);\r\n    \r\n    return `${prefix}-${timestampPart}-${randomSuffix}`;\r\n};\r\n\r\n// 2. Identify or Create Lead from Guest Session\r\nexport const identifyLead = async (guestId: string, userId?: string): Promise<string> => {\r\n    // Check if lead exists for this guestId\r\n    const leadsRef = collection(db, 'leads');\r\n    const q = query(leadsRef, where('guestId', '==', guestId), orderBy('createdAt', 'desc'), limit(1));\r\n    const snapshot = await getDocs(q);\r\n\r\n    if (!snapshot.empty) {\r\n        // Return existing lead ID\r\n        const lead = snapshot.docs[0].data() as Lead;\r\n        // If user just logged in, link the lead\r\n        if (userId && !lead.uid) {\r\n            await updateDoc(doc(db, 'leads', lead.leadId), { uid: userId });\r\n        }\r\n        return lead.leadId;\r\n    }\r\n\r\n    // Create New Lead\r\n    const newLeadId = await generateLeadId();\r\n    const newLead: Partial<Lead> = {\r\n        leadId: newLeadId,\r\n        guestId,\r\n        uid: userId || undefined,\r\n        status: 'new',\r\n        interestScore: 10, // Initial score for visit\r\n        createdAt: serverTimestamp(),\r\n        lastActiveAt: serverTimestamp(),\r\n        source: 'direct_website',\r\n        businessData: {} as any // Empty initially\r\n    };\r\n\r\n    await setDoc(doc(db, 'leads', newLeadId), newLead);\r\n    return newLeadId;\r\n};\r\n\r\n// 3. Sync Lead Data (Debounced or Event-based)\r\nexport const syncLeadData = async (leadId: string, data: Partial<Lead['businessData']>) => {\r\n    if (!leadId) return;\r\n    \r\n    try {\r\n        const leadRef = doc(db, 'leads', leadId);\r\n        await updateDoc(leadRef, {\r\n            businessData: data, \r\n            lastActiveAt: serverTimestamp()\r\n        });\r\n        \r\n        // Also update interest score based on data completeness\r\n        const score = calculateInterestScore(data);\r\n        if (score > 0) {\r\n             await updateDoc(leadRef, { interestScore: score });\r\n        }\r\n\r\n    } catch (e) {\r\n        console.error(\"Error syncing lead data\", e);\r\n    }\r\n};\r\n\r\nconst calculateInterestScore = (data: any): number => {\r\n    let score = 10;\r\n    if (data.name) score += 10;\r\n    if (data.industry) score += 10;\r\n    if (data.stage) score += 10;\r\n    if (data.contact?.phone) score += 50; // High value\r\n    return score;\r\n};\r\n\r\n// 4. Capture User Action (Click, Hover)\r\nexport const logUserAction = async (leadId: string, action: string, details?: any) => {\r\n    if (!leadId) return;\r\n    const logsRef = collection(db, 'leads', leadId, 'activity_logs');\r\n    await addDoc(logsRef, {\r\n        action,\r\n        details,\r\n        timestamp: serverTimestamp()\r\n    });\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\marketplace-apps.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\prompts\\bizzy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\recommendation-engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\schemes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\security-guard.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'tokensUsed' is defined but never used.","line":304,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":304,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Security Guard - Multi-layer protection system\r\n// Prevents prompt injection, data leaks, and unauthorized access\r\n\r\ninterface SecurityCheckResult {\r\n    allowed: boolean;\r\n    reason?: string;\r\n    sanitizedInput?: string;\r\n    riskLevel: 'low' | 'medium' | 'high' | 'critical';\r\n}\r\n\r\ninterface AuditLog {\r\n    timestamp: Date;\r\n    userId: string;\r\n    input: string;\r\n    output?: string;\r\n    blocked: boolean;\r\n    reason?: string;\r\n    riskLevel: string;\r\n}\r\n\r\nexport class SecurityGuard {\r\n    // Attack pattern detection\r\n    private static readonly PROMPT_INJECTION_PATTERNS = [\r\n        // Direct instruction override\r\n        /ignore\\s+(all\\s+)?(previous|above|prior)\\s+(instructions?|commands?|rules?)/i,\r\n        /forget\\s+(everything|all|what|previous)/i,\r\n        /disregard\\s+(all\\s+)?(previous|above|prior)/i,\r\n        /new\\s+(instructions?|commands?|rules?)[:]/i,\r\n\r\n        // Role manipulation\r\n        /(you\\s+are|you're)\\s+now\\s+/i,\r\n        /act\\s+as\\s+(if|a|an)\\s+/i,\r\n        /pretend\\s+(you\\s+are|to\\s+be)/i,\r\n        /behave\\s+like/i,\r\n\r\n        // System prompt extraction\r\n        /what\\s+(is|are)\\s+(your|the)\\s+(instructions?|rules?|prompt)/i,\r\n        /show\\s+(me\\s+)?(your|the)\\s+(system|original)\\s+prompt/i,\r\n        /repeat\\s+(your|the)\\s+(instructions?|prompt)/i,\r\n        /system\\s+prompt[:]/i,\r\n\r\n        // Secret/sensitive data extraction\r\n        /reveal\\s+(your|the|all)\\s+(secret|password|key|token)/i,\r\n        /show\\s+(me\\s+)?(all\\s+)?(api|secret|private)\\s+key/i,\r\n        /what\\s+(is|are)\\s+(your|the)\\s+(api|secret)\\s+key/i,\r\n        /dump\\s+(database|data|table)/i,\r\n\r\n        // Code injection\r\n        /<script[^>]*>/i,\r\n        /javascript:/i,\r\n        /onerror\\s*=/i,\r\n        /eval\\s*\\(/i,\r\n        /\\.execute\\(/i,\r\n\r\n        // SQL injection\r\n        /'\\s*(OR|AND)\\s*'?1'?\\s*=\\s*'?1/i,\r\n        /UNION\\s+SELECT/i,\r\n        /DROP\\s+TABLE/i,\r\n        /DELETE\\s+FROM/i,\r\n        /--\\s*$/i,\r\n    ];\r\n\r\n    // Sensitive output patterns to redact\r\n    private static readonly SENSITIVE_OUTPUT_PATTERNS = [\r\n        // API Keys\r\n        { pattern: /AIza[0-9A-Za-z_-]{35}/g, replacement: '[API_KEY_REDACTED]' },\r\n        { pattern: /sk-[a-zA-Z0-9]{48}/g, replacement: '[API_KEY_REDACTED]' },\r\n        { pattern: /[a-f0-9]{32}/g, replacement: '[TOKEN_REDACTED]' },\r\n\r\n        // Credentials\r\n        { pattern: /password\\s*[:=]\\s*[\"']?[^\"'\\s]+[\"']?/gi, replacement: 'password: [REDACTED]' },\r\n        { pattern: /token\\s*[:=]\\s*[\"']?[^\"'\\s]+[\"']?/gi, replacement: 'token: [REDACTED]' },\r\n        { pattern: /secret\\s*[:=]\\s*[\"']?[^\"'\\s]+[\"']?/gi, replacement: 'secret: [REDACTED]' },\r\n\r\n        // Indian IDs\r\n        { pattern: /\\b\\d{12}\\b/g, replacement: '[AADHAAR_REDACTED]' },\r\n        { pattern: /\\b[A-Z]{5}\\d{4}[A-Z]\\b/g, replacement: '[PAN_REDACTED]' },\r\n        { pattern: /\\b\\d{2}[A-Z]{5}\\d{4}[A-Z]{1}[A-Z\\d]{1}[Z]{1}[A-Z\\d]{1}\\b/g, replacement: '[GSTIN_REDACTED]' },\r\n\r\n        // Financial data (for non-owners)\r\n        { pattern: /cost\\s+price\\s*[:=]?\\s*₹?[\\d,]+/gi, replacement: 'cost price: [REDACTED]' },\r\n        { pattern: /margin\\s*[:=]?\\s*[\\d.]+%/gi, replacement: 'margin: [REDACTED]%' },\r\n        { pattern: /wholesale\\s+price\\s*[:=]?\\s*₹?[\\d,]+/gi, replacement: 'wholesale price: [REDACTED]' },\r\n        { pattern: /supplier\\s+cost\\s*[:=]?\\s*₹?[\\d,]+/gi, replacement: 'supplier cost: [REDACTED]' },\r\n\r\n        // Email addresses\r\n        { pattern: /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g, replacement: '[EMAIL_REDACTED]' },\r\n\r\n        // Phone numbers\r\n        { pattern: /(\\+91|0)?[6-9]\\d{9}/g, replacement: '[PHONE_REDACTED]' },\r\n\r\n        // System prompts (if leaked)\r\n        { pattern: /You are (an|a) AI (assistant|co-founder).{0,500}instructions?:/gi, replacement: '' },\r\n    ];\r\n\r\n    // Rate limiting storage (in-memory, use Redis in production)\r\n    private static rateLimitMap = new Map<string, { count: number; resetAt: number }>();\r\n\r\n    // Audit log storage\r\n    private static auditLogs: AuditLog[] = [];\r\n\r\n    /**\r\n     * Primary input validation - checks for malicious content\r\n     */\r\n    static validateInput(input: string, userId: string, userRole: string = 'user'): SecurityCheckResult {\r\n        // 1. Check rate limiting\r\n        if (!this.checkRateLimit(userId, this.getRateLimit(userRole))) {\r\n            return {\r\n                allowed: false,\r\n                reason: 'Rate limit exceeded. Please wait a moment.',\r\n                riskLevel: 'medium'\r\n            };\r\n        }\r\n\r\n        // 2. Basic validation\r\n        if (!input || input.trim().length === 0) {\r\n            return {\r\n                allowed: false,\r\n                reason: 'Empty input',\r\n                riskLevel: 'low'\r\n            };\r\n        }\r\n\r\n        if (input.length > 2000) {\r\n            return {\r\n                allowed: false,\r\n                reason: 'Input too long (max 2000 characters)',\r\n                riskLevel: 'medium'\r\n            };\r\n        }\r\n\r\n        // 3. Detect prompt injection\r\n        const injectionDetected = this.detectPromptInjection(input);\r\n        if (injectionDetected) {\r\n            this.logSecurityIncident(userId, input, 'prompt_injection', 'high');\r\n            return {\r\n                allowed: false,\r\n                reason: 'Invalid request. Please ask a specific business question.',\r\n                riskLevel: 'high'\r\n            };\r\n        }\r\n\r\n        // 4. Detect code injection\r\n        if (this.detectCodeInjection(input)) {\r\n            this.logSecurityIncident(userId, input, 'code_injection', 'critical');\r\n            return {\r\n                allowed: false,\r\n                reason: 'Invalid characters detected.',\r\n                riskLevel: 'critical'\r\n            };\r\n        }\r\n\r\n        // 5. Sanitize input\r\n        const sanitized = this.sanitizeInput(input);\r\n\r\n        return {\r\n            allowed: true,\r\n            sanitizedInput: sanitized,\r\n            riskLevel: 'low'\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Output filtering - removes sensitive data before showing to user\r\n     */\r\n    static filterOutput(output: string, userRole: string = 'user'): string {\r\n        let filtered = output;\r\n\r\n        // Apply all redaction patterns\r\n        for (const { pattern, replacement } of this.SENSITIVE_OUTPUT_PATTERNS) {\r\n            filtered = filtered.replace(pattern, replacement);\r\n        }\r\n\r\n        // Role-based filtering\r\n        if (userRole !== 'owner') {\r\n            // Additional filtering for non-owners\r\n            // Remove any pricing strategy discussion\r\n            filtered = filtered.replace(/pricing\\s+strategy.{0,200}/gi, '[PRICING_STRATEGY_REDACTED]');\r\n            filtered = filtered.replace(/competitive\\s+advantage.{0,200}/gi, '[COMPETITIVE_INFO_REDACTED]');\r\n        }\r\n\r\n        return filtered;\r\n    }\r\n\r\n    /**\r\n     * Detect prompt injection attempts\r\n     */\r\n    private static detectPromptInjection(input: string): boolean {\r\n        return this.PROMPT_INJECTION_PATTERNS.some(pattern => pattern.test(input));\r\n    }\r\n\r\n    /**\r\n     * Detect code injection attempts\r\n     */\r\n    private static detectCodeInjection(input: string): boolean {\r\n        const codePatterns = [\r\n            /<script[^>]*>/i,\r\n            /javascript:/i,\r\n            /onerror\\s*=/i,\r\n            /onclick\\s*=/i,\r\n            /eval\\s*\\(/i,\r\n        ];\r\n\r\n        return codePatterns.some(pattern => pattern.test(input));\r\n    }\r\n\r\n    /**\r\n     * Sanitize input by removing potentially harmful content\r\n     */\r\n    private static sanitizeInput(input: string): string {\r\n        let sanitized = input;\r\n\r\n        // Remove HTML tags\r\n        sanitized = sanitized.replace(/<[^>]*>/g, '');\r\n\r\n        // Remove SQL comment markers\r\n        sanitized = sanitized.replace(/--/g, '');\r\n\r\n        // Trim and normalize whitespace\r\n        sanitized = sanitized.trim().replace(/\\s+/g, ' ');\r\n\r\n        return sanitized;\r\n    }\r\n\r\n    /**\r\n     * Rate limiting check\r\n     */\r\n    private static checkRateLimit(userId: string, limit: number): boolean {\r\n        const now = Date.now();\r\n        const userLimit = this.rateLimitMap.get(userId);\r\n\r\n        if (!userLimit || now > userLimit.resetAt) {\r\n            // Reset counter every minute\r\n            this.rateLimitMap.set(userId, {\r\n                count: 1,\r\n                resetAt: now + 60000\r\n            });\r\n            return true;\r\n        }\r\n\r\n        if (userLimit.count >= limit) {\r\n            return false; // Rate limit exceeded\r\n        }\r\n\r\n        userLimit.count++;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Get rate limit based on user role\r\n     */\r\n    private static getRateLimit(role: string): number {\r\n        const limits: Record<string, number> = {\r\n            owner: 60,\r\n            manager: 30,\r\n            employee: 20,\r\n            user: 10\r\n        };\r\n\r\n        return limits[role] || 10;\r\n    }\r\n\r\n    /**\r\n     * Log security incidents for monitoring\r\n     */\r\n    private static logSecurityIncident(\r\n        userId: string,\r\n        input: string,\r\n        reason: string,\r\n        riskLevel: string\r\n    ): void {\r\n        const log: AuditLog = {\r\n            timestamp: new Date(),\r\n            userId,\r\n            input: this.hashSensitiveData(input),\r\n            blocked: true,\r\n            reason,\r\n            riskLevel\r\n        };\r\n\r\n        this.auditLogs.push(log);\r\n\r\n        // In production, send to monitoring service\r\n        console.warn('Security incident detected:', {\r\n            userId,\r\n            reason,\r\n            riskLevel,\r\n            timestamp: log.timestamp\r\n        });\r\n\r\n        // Alert admin if critical\r\n        if (riskLevel === 'critical') {\r\n            this.alertAdmin(log);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Log successful interaction\r\n     */\r\n    static logInteraction(\r\n        userId: string,\r\n        input: string,\r\n        output: string,\r\n        tokensUsed: number\r\n    ): void {\r\n        const log: AuditLog = {\r\n            timestamp: new Date(),\r\n            userId,\r\n            input: this.hashSensitiveData(input),\r\n            output: this.hashSensitiveData(output),\r\n            blocked: false,\r\n            riskLevel: 'low'\r\n        };\r\n\r\n        this.auditLogs.push(log);\r\n\r\n        // Keep only last 1000 logs in memory\r\n        if (this.auditLogs.length > 1000) {\r\n            this.auditLogs = this.auditLogs.slice(-1000);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Hash sensitive data for logging\r\n     */\r\n    private static hashSensitiveData(data: string): string {\r\n        // In production, use proper hashing\r\n        // For now, truncate and mask\r\n        if (data.length > 100) {\r\n            return data.substring(0, 50) + '...[TRUNCATED]...' + data.substring(data.length - 20);\r\n        }\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * Alert admin about critical security incident\r\n     */\r\n    private static alertAdmin(log: AuditLog): void {\r\n        // In production, send email/SMS/Slack notification\r\n        console.error('🚨 CRITICAL SECURITY ALERT:', {\r\n            userId: log.userId,\r\n            reason: log.reason,\r\n            timestamp: log.timestamp\r\n        });\r\n\r\n        // TODO: Implement actual alerting (email, Slack, etc.)\r\n    }\r\n\r\n    /**\r\n     * Get audit logs for monitoring\r\n     */\r\n    static getAuditLogs(limit: number = 100): AuditLog[] {\r\n        return this.auditLogs.slice(-limit);\r\n    }\r\n\r\n    /**\r\n     * Get security statistics\r\n     */\r\n    static getSecurityStats(): {\r\n        totalRequests: number;\r\n        blockedRequests: number;\r\n        criticalIncidents: number;\r\n        blockRate: number;\r\n    } {\r\n        const total = this.auditLogs.length;\r\n        const blocked = this.auditLogs.filter(log => log.blocked).length;\r\n        const critical = this.auditLogs.filter(log => log.riskLevel === 'critical').length;\r\n\r\n        return {\r\n            totalRequests: total,\r\n            blockedRequests: blocked,\r\n            criticalIncidents: critical,\r\n            blockRate: total > 0 ? (blocked / total) * 100 : 0\r\n        };\r\n    }\r\n}\r\n\r\n// Export types\r\nexport type { SecurityCheckResult, AuditLog };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\whatsapp.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PROVIDER' is assigned a value but never used.","line":15,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * WhatsApp Integration Layer\r\n * Designed to be provider-agnostic.\r\n * Currently supports Interakt structure (placeholder).\r\n */\r\n\r\nexport interface WhatsAppMessage {\r\n    to: string;\r\n    type: 'template' | 'text';\r\n    templateName?: string;\r\n    templateParams?: string[];\r\n    text?: string;\r\n}\r\n\r\nconst PROVIDER = 'INTERAKT'; // or 'WATI', 'TWILIO'\r\nconst API_KEY = process.env.WHATSAPP_API_KEY || ''; \r\nconst BASE_URL = 'https://api.interakt.ai/v1/public/message/'; // Example\r\n\r\nexport const sendWhatsApp = async (payload: WhatsAppMessage) => {\r\n    if (!API_KEY) {\r\n        console.log('[WhatsApp Mock]', payload);\r\n        return { success: true, mock: true };\r\n    }\r\n\r\n    try {\r\n        const response = await fetch(BASE_URL, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': `Basic ${API_KEY}`,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                countryCode: payload.to.slice(0, 2) || '+91', // simplistic check\r\n                phoneNumber: payload.to.slice(2),\r\n                type: payload.type === 'template' ? 'Template' : 'Text',\r\n                template: {\r\n                    name: payload.templateName,\r\n                    languageCode: 'en',\r\n                    bodyValues: payload.templateParams\r\n                }\r\n            })\r\n        });\r\n        \r\n        const data = await response.json();\r\n        return { success: response.ok, data };\r\n\r\n    } catch (error) {\r\n        console.error('WhatsApp Error:', error);\r\n        return { success: false, error };\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\lib\\whatsappTool.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\types\\ai.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[128,131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[128,131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type AIFeatureType = 'roadmap' | 'social_post';\r\n\r\nexport interface PromptPayload {\r\n    type: AIFeatureType;\r\n    data: any;\r\n}\r\n\r\nexport interface AIRoadmap {\r\n    overview: string;\r\n    weeks: {\r\n        week: number;\r\n        title: string;\r\n        tasks: string[];\r\n    }[];\r\n}\r\n\r\nexport interface AISocialPost {\r\n    headline: string;\r\n    caption: string;\r\n    hashtags: string[];\r\n}\r\n\r\nexport interface AIResponse {\r\n    success: boolean;\r\n    data?: AIRoadmap | AISocialPost | string;\r\n    error?: string;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\types\\dpr.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1900,1903],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1900,1903],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1921,1924],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1921,1924],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type ProjectScheme = 'PMEGP' | 'MUDRA' | 'STARTUP_INDIA' | 'GENERAL_BANK_LOAN' | 'MSME_LOAN';\r\n\r\nexport interface DPRFinancials {\r\n    fixedAssets: {\r\n        landAndBuilding: number;\r\n        machinery: number;\r\n        furniture: number;\r\n        otherAssets: number;\r\n    };\r\n    workingCapital: {\r\n        rawMaterial: number;\r\n        salaries: number;\r\n        utilities: number;\r\n        marketing: number;\r\n        contingency: number;\r\n    };\r\n    revenue: {\r\n        monthlyTarget: number;\r\n        unitPrice: number;\r\n        unitsPerMonth: number;\r\n    };\r\n    funding: {\r\n        ownContribution: number;\r\n        loanRequired: number;\r\n        subsidyEligible: number;\r\n    };\r\n    parameters?: {\r\n        workingDays: number;\r\n        shifts: number;\r\n        capacityUtil: number;\r\n        interestRate: number;\r\n    };\r\n}\r\n\r\nexport interface DPRContent {\r\n    executiveSummary: string;\r\n    businessConcept: string;\r\n    marketAnalysis: string;\r\n    swotAnalysis: {\r\n        strengths: string[];\r\n        weaknesses: string[];\r\n        opportunities: string[];\r\n        threats: string[];\r\n    };\r\n    implementationSchedule: string[];\r\n    manpowerRequirement: {\r\n        role: string;\r\n        count: number;\r\n        salary: number;\r\n    }[];\r\n}\r\n\r\nexport interface ProjectReport {\r\n    id: string;\r\n    userId: string;\r\n    scheme: ProjectScheme;\r\n    businessName: string;\r\n    industry: string;\r\n    location: {\r\n        city: string;\r\n        state: string;\r\n        areaType: 'RURAL' | 'URBAN';\r\n    };\r\n    promoter: {\r\n        name: string;\r\n        qualification: string;\r\n        experience: string;\r\n        category: 'GENERAL' | 'SC' | 'ST' | 'OBC' | 'MINORITY' | 'EX_SERVICEMAN';\r\n        gender: 'MALE' | 'FEMALE' | 'OTHER';\r\n    };\r\n    content: DPRContent;\r\n    financials: DPRFinancials;\r\n    status: 'DRAFT' | 'COMPLETED' | 'SIGNED_BY_CA';\r\n    createdAt: any;\r\n    updatedAt: any;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\types\\globalIncorporation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\types\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1549,1552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1549,1552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1583,1586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1583,1586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type OfferingType = 'physical_goods' | 'services' | 'hospitality' | 'content' | 'tech' | 'other';\r\n\r\nexport type BusinessStage = 'idea' | 'launch' | 'operating';\r\n\r\nexport type FocusArea = 'online_presence' | 'formation' | 'branding' | 'growth';\r\n\r\nexport type BusinessSize = 'solo' | 'small_team' | 'scaling' | 'enterprise';\r\n\r\nexport type ExistingAsset =\r\n    | 'business_cards'\r\n    | 'domain'\r\n    | 'mailbox'\r\n    | 'logo'\r\n    | 'trademark'\r\n    | 'gst'\r\n    | 'llc'\r\n    | 'name'\r\n    | 'website'\r\n    | 'ecommerce'\r\n    | 'startup_india'\r\n    | 'udyam';\r\n\r\nexport interface BusinessData {\r\n    name: string;\r\n    businessName?: string; // Unified with name\r\n    offeringType: OfferingType;\r\n    offeringOther: string;\r\n    industry: string;\r\n    sector: string;\r\n    size: BusinessSize;\r\n    businessModel: string;\r\n    description: string;\r\n    motivation: string;\r\n    stage: BusinessStage | string;\r\n    existingAssets: ExistingAsset[];\r\n    focusAreas: FocusArea[];\r\n    // Additional fields from AI Incorporation Assistant\r\n    focus?: string;\r\n    teamSize?: string;\r\n    funding?: string;\r\n    location?: string;\r\n    goal?: string;\r\n}\r\n\r\nexport type LeadStatus = 'new' | 'viewed' | 'engaged' | 'warm' | 'hot' | 'ordered' | 'fulfilled' | 'lost';\r\n\r\nexport interface Lead {\r\n    leadId: string; // SMB-2024-XXXX\r\n    uid?: string; // Firebase Auth ID (if logged in)\r\n    guestId: string; // Session ID for non-logged users\r\n    businessData: BusinessData;\r\n    status: LeadStatus;\r\n    interestScore: number;\r\n    lastActiveAt: any; // Timestamp\r\n    createdAt: any; // Timestamp\r\n    source: string; // 'direct', 'google', 'referral'\r\n    contact?: {\r\n        email?: string;\r\n        phone?: string;\r\n        whatsapp?: string;\r\n    };\r\n    adminNotes?: string[];\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\types\\lead.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[164,167],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[164,167],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface Lead {\r\n    id: string;\r\n    name: string;\r\n    email: string;\r\n    phone: string;\r\n    businessName: string;\r\n    nature: string;\r\n    createdAt: any; // Firestore Timestamp\r\n    aiSummary?: string; // The AI recommendation\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\types\\react-draggable.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[472,475],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[472,475],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[483,486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[483,486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[527,530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[527,530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[538,541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[538,541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[582,585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[582,585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[593,596],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[593,596],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"declare module 'react-draggable' {\r\n    import * as React from 'react';\r\n\r\n    export interface DraggableProps {\r\n        axis?: 'both' | 'x' | 'y' | 'none';\r\n        handle?: string;\r\n        defaultPosition?: { x: number; y: number };\r\n        position?: { x: number; y: number };\r\n        bounds?: string | { left?: number; top?: number; right?: number; bottom?: number } | HTMLElement;\r\n        grid?: [number, number];\r\n        scale?: number;\r\n        onStart?: (e: any, data: any) => void | false;\r\n        onDrag?: (e: any, data: any) => void | false;\r\n        onStop?: (e: any, data: any) => void | false;\r\n        disabled?: boolean;\r\n        cancel?: string;\r\n        onMouseDown?: (e: MouseEvent) => void;\r\n        children?: React.ReactNode;\r\n    }\r\n\r\n    export default class Draggable extends React.Component<DraggableProps> { }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\mahen\\OneDrive\\Desktop\\setmybizz-project\\types\\workspace.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2292,2295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2292,2295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2311,2314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2311,2314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2914,2917],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2914,2917],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3434,3437],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3434,3437],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":182,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4664,4667],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4664,4667],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":204,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5146,5149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5146,5149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Workspace Types - Industry-specific AI Workspace System\r\n\r\nexport type IndustryType =\r\n    | 'ecommerce'\r\n    | 'pharma'\r\n    | 'saas'\r\n    | 'manufacturing'\r\n    | 'retail'\r\n    | 'services'\r\n    | 'food'\r\n    | 'education'\r\n    | 'healthcare'\r\n    | 'finance'\r\n    | 'real-estate'\r\n    | 'other';\r\n\r\nexport type BusinessSize =\r\n    | 'solo' // 1 person\r\n    | 'micro' // 2-5\r\n    | 'small' // 6-20\r\n    | 'medium' // 21-50\r\n    | 'large'; // 50+\r\n\r\nexport type TeamSize = {\r\n    total: number;\r\n    sales?: number;\r\n    marketing?: number;\r\n    operations?: number;\r\n    finance?: number;\r\n    hr?: number;\r\n};\r\n\r\nexport interface BusinessProfile {\r\n    // Basic Info\r\n    businessName: string;\r\n    industry: IndustryType;\r\n    size: BusinessSize;\r\n    teamSize: TeamSize;\r\n\r\n    // Products/Services\r\n    productService: string;\r\n    productCategories?: string[];\r\n\r\n    // Current State\r\n    monthlyRevenue?: string;\r\n    salesChannels: string[]; // online, offline, both\r\n    currentTools: string[];\r\n\r\n    // Challenges & Gaps\r\n    challenges: string[];\r\n    gaps: string[];\r\n    goals: string[];\r\n\r\n    // Sales & Marketing\r\n    leadSources: string[];\r\n    averageLeads?: number;\r\n    conversionRate?: number;\r\n\r\n    // Timeline\r\n    businessAge?: string; // startup, 1-2 years, 3-5 years, 5+ years\r\n    growthStage?: 'ideation' | 'launch' | 'growth' | 'scale' | 'mature';\r\n}\r\n\r\nexport interface ToolRecommendation {\r\n    id: string;\r\n    name: string;\r\n    category: string;\r\n    description: string;\r\n    icon: string;\r\n    pricing: {\r\n        free: boolean;\r\n        freeTier?: string;\r\n        paidTier?: string;\r\n        price?: number;\r\n    };\r\n    features: string[];\r\n    matchScore: number; // 0-100\r\n    reason: string; // Why recommended\r\n    priority: 'essential' | 'recommended' | 'optional';\r\n    installStatus: 'not-installed' | 'installing' | 'installed';\r\n    setupComplexity: 'easy' | 'medium' | 'advanced';\r\n}\r\n\r\nexport interface IntegrationConfig {\r\n    id: string;\r\n    name: string;\r\n    type: 'crm' | 'erp' | 'email' | 'payment' | 'marketing' | 'analytics' | 'communication' | 'storage' | 'automation' | 'custom';\r\n    provider: string; // zoho, odoo, google, whatsapp, etc\r\n    status: 'connected' | 'disconnected' | 'error' | 'pending';\r\n    credentials?: any;\r\n    config?: any;\r\n    lastSync?: Date;\r\n    features: string[];\r\n}\r\n\r\nexport interface WorkspaceTheme {\r\n    industry: IndustryType;\r\n    primaryColor: string;\r\n    secondaryColor: string;\r\n    accentColor: string;\r\n    icons: {\r\n        [key: string]: string; // icon name: icon path or emoji\r\n    };\r\n    widgets: string[]; // which widgets to show\r\n    layout: 'default' | 'ecommerce' | 'pharma' | 'saas';\r\n}\r\n\r\nexport interface DashboardWidget {\r\n    id: string;\r\n    type: string;\r\n    title: string;\r\n    icon: string;\r\n    position: { x: number; y: number };\r\n    size: { w: number; h: number };\r\n    data?: any;\r\n    refreshInterval?: number;\r\n    permissions?: string[];\r\n}\r\n\r\nexport interface AICofounderInsight {\r\n    id: string;\r\n    type: 'tip' | 'alert' | 'suggestion' | 'opportunity' | 'warning';\r\n    title: string;\r\n    message: string;\r\n    priority: 'low' | 'medium' | 'high' | 'critical';\r\n    category: 'sales' | 'marketing' | 'finance' | 'operations' | 'hr' | 'compliance';\r\n    actionable: boolean;\r\n    action?: {\r\n        label: string;\r\n        type: 'link' | 'modal' | 'tool' | 'integration';\r\n        data: any;\r\n    };\r\n    timestamp: Date;\r\n    read: boolean;\r\n}\r\n\r\nexport interface WorkspaceState {\r\n    profile: BusinessProfile;\r\n    theme: WorkspaceTheme;\r\n    recommendations: ToolRecommendation[];\r\n    integrations: IntegrationConfig[];\r\n    widgets: DashboardWidget[];\r\n    insights: AICofounderInsight[];\r\n    setupComplete: boolean;\r\n    onboardingStep: number;\r\n}\r\n\r\n// Industry Templates\r\nexport interface IndustryTemplate {\r\n    industry: IndustryType;\r\n    name: string;\r\n    description: string;\r\n    defaultTools: string[];\r\n    defaultWidgets: string[];\r\n    theme: Partial<WorkspaceTheme>;\r\n    workflows: string[];\r\n}\r\n\r\n// App Marketplace\r\nexport interface MarketplaceApp {\r\n    id: string;\r\n    name: string;\r\n    slug: string;\r\n    category: string;\r\n    subcategory?: string;\r\n    description: string;\r\n    longDescription: string;\r\n    icon: string;\r\n    screenshots: string[];\r\n    developer: {\r\n        name: string;\r\n        website?: string;\r\n        support?: string;\r\n    };\r\n    pricing: {\r\n        model: 'free' | 'freemium' | 'paid' | 'subscription';\r\n        free: boolean;\r\n        tiers: {\r\n            name: string;\r\n            price: number;\r\n            features: string[];\r\n            limits?: any;\r\n        }[];\r\n    };\r\n    features: string[];\r\n    integrations: string[];\r\n    ratings: {\r\n        average: number;\r\n        count: number;\r\n    };\r\n    installCount: number;\r\n    permissions: string[];\r\n    compatibility: {\r\n        industries: IndustryType[];\r\n        businessSizes: BusinessSize[];\r\n    };\r\n    tags: string[];\r\n    lastUpdated: Date;\r\n    version: string;\r\n}\r\n\r\nexport interface InstalledApp extends MarketplaceApp {\r\n    installedAt: Date;\r\n    config: any;\r\n    enabled: boolean;\r\n    tier: string;\r\n}\r\n","usedDeprecatedRules":[]}]